*------------------------------------------------------------*
User:                sakerb01
Date:                November 04, 2015
Time:                07:40:48
Site:                70080760
Platform:            X64_7PRO
Maintenance Release: 9.04.01M1P120413
EM Version:          13.1
* 
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "November 04,
2015" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "07:40:34" );
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Training Log";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
*------------------------------------------------------------*
* Training Log
Date:                November 04, 2015
Time:                07:40:34
*------------------------------------------------------------*
MPRINT(EM_DIAGRAM):    filename O242WFXK "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
Projects\Project_3\Workspaces\EMWS1\BINNING\EMTRAIN.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   proc printto print=O242WFXK new;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _LOG "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
Projects\Project_3\Workspaces\EMWS1\BINNING\EMLOG.log" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "November 04,
2015" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "07:40:34" );
MPRINT(EM_DIAGRAM):   file _LOG;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "User:                sakerb01";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "Site:                70080760";
MPRINT(EM_DIAGRAM):   put "Platform:            X64_7PRO";
MPRINT(EM_DIAGRAM):   put "Maintenance Release: 9.04.01M1P120413";
MPRINT(EM_DIAGRAM):   put "EM Version:          13.1";
MPRINT(EM_DIAGRAM):   put "* ";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _LOGIN "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
Projects\Project_3\Workspaces\EMWS1\BINNING\EMTRAIN.log" encoding="UTF-8" NOBOM;
MPRINT(EM_COPYFILE):   data _null_;
MPRINT(EM_COPYFILE):   length line $20000;
MPRINT(EM_COPYFILE):   file _LOG MOD lrecl=20000;
MPRINT(EM_COPYFILE):   fid=fopen("_LOGIN",'i',20000,'v');
MPRINT(EM_COPYFILE):   if fid > 0 then do;
MPRINT(EM_COPYFILE):   do while(^fread(fid));
MPRINT(EM_COPYFILE):   rlen = frlen(fid);
MPRINT(EM_COPYFILE):   rc= fget(fid,line,20000);
MPRINT(EM_COPYFILE):   start = length(line)-length(left(line))+1;
MPRINT(EM_COPYFILE):   line=strip(line);
MPRINT(EM_COPYFILE):   put @start line;
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   if fid > 0 then rc=fclose(fid);
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   run;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _LOGIN;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   file _LOG mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   filename _LOGIN "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
Projects\Project_3\Workspaces\EMWS1\BINNING\EMSCORE.log" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   file _LOG mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _LOGIN "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
Projects\Project_3\Workspaces\EMWS1\BINNING\EMREPORT.log" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _LOGIN;
MPRINT(EM_DIAGRAM):    filename _LOG;
MPRINT(EM_DIAGRAM):    filename _OUT "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
Projects\Project_3\Workspaces\EMWS1\BINNING\EMOUTPUT.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "November 04,
2015" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "07:40:34" );
MPRINT(EM_DIAGRAM):   file _OUT;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "User:                sakerb01";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Training Output";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _OUTIN "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
Projects\Project_3\Workspaces\EMWS1\BINNING\EMTRAIN.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   ;
MPRINT(EM_COPYFILE):   data _null_;
MPRINT(EM_COPYFILE):   length line $20000;
MPRINT(EM_COPYFILE):   file _OUT MOD lrecl=20000;
MPRINT(EM_COPYFILE):   fid=fopen("_OUTIN",'i',20000,'v');
MPRINT(EM_COPYFILE):   if fid > 0 then do;
MPRINT(EM_COPYFILE):   do while(^fread(fid));
MPRINT(EM_COPYFILE):   rlen = frlen(fid);
MPRINT(EM_COPYFILE):   rc= fget(fid,line,20000);
MPRINT(EM_COPYFILE):   start = length(line)-length(left(line))+1;
MPRINT(EM_COPYFILE):   line=strip(line);
MPRINT(EM_COPYFILE):   put @start line;
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   if fid > 0 then rc=fclose(fid);
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   run;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _OUTIN;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   file _OUT mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   put // "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Score Output";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _OUTIN "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
Projects\Project_3\Workspaces\EMWS1\BINNING\EMSCORE.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _OUTIN;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   file _OUT mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   put // "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Report Output";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _OUTIN "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
Projects\Project_3\Workspaces\EMWS1\BINNING\EMREPORT.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _OUTIN;
MPRINT(EM_DIAGRAM):    filename _OUT;
MPRINT(EM_DIAGRAM):    filename _emtool_ 'C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
Projects\Project_3\Workspaces\EMWS1\BINNING\EMRUNSTATUS.xml' encoding="UTF-8" NOBOM;
88164      proc freq data=EMWS1.BINNING_VariableSet noprint;
MPRINT(EM_DIAGRAM):    proc freq data=EMWS1.BINNING_VariableSet noprint;
88165      table ROLE*LEVEL/out=WORK.BINNINGMETA;
MPRINT(EM_DIAGRAM):   table ROLE*LEVEL/out=WORK.BINNINGMETA;
88166      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 14 observations read from the data set EMWS1.BINNING_VARIABLESET.
NOTE: The data set WORK.BINNINGMETA has 4 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
88167      proc print data=WORK.BINNINGMETA label noobs;
MPRINT(EM_DIAGRAM):   proc print data=WORK.BINNINGMETA label noobs;
88168      var ROLE LEVEL COUNT;
MPRINT(EM_DIAGRAM):   var ROLE LEVEL COUNT;
88169      label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL =
88169    ! "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT =
88169    ! "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label ROLE = "Role" LEVEL = "Measurement Level" COUNT = "Frequency
Count";
88170      title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
88171      title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Variable Summary";
MPRINT(EM_DIAGRAM):   run;
88172      run;
 
NOTE: There were 4 observations read from the data set WORK.BINNINGMETA.
NOTE: The PROCEDURE PRINT printed page 49.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
88173      title10;
MPRINT(EM_DIAGRAM):   title10;
88174      %let EMEXCEPTIONSTRING=;
MPRINT(EM_DIAGRAM):     *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * BINNING: Generation of macros and macro variables;
MPRINT(EM_DIAGRAM):   * To see the code generated, set the EM_DEBUG macro variable to SOURCE
or _ALL_;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * BINNING: EM Macro Variables and Macros;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * System Macro Variables;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   length string $2000;
MPRINT(EM_DIAGRAM):   string = 'Project_3';
MPRINT(EM_DIAGRAM):   call symput('EM_PROJECTNAME', trim(string));
MPRINT(EM_DIAGRAM):   string = 'Diagram_3';
MPRINT(EM_DIAGRAM):   call symput('EM_WSNAME', trim(string));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * Properties Macro Variables ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Files Macro Variables;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Import Macro Variables;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Export Macro Variables;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Decision Macro Variables;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Statement Macro Variables;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   set EMWS1.Ids_EMINFO;
MPRINT(EM_DIAGRAM):   where key in('HPDMSAMPLE', 'IDSTABLE');
MPRINT(EM_DIAGRAM):   if key = 'HPDMSAMPLE' then call symput('_ForceGrid', '1');
MPRINT(EM_DIAGRAM):   else call symput('_IDS_TABLE', DATA);
MPRINT(EM_DIAGRAM):   run;
MPRINT(HPDM_PERFORMANCE):  ;
PERFORMANCE  DETAILS
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Variable Macros;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * General Variable Macros;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Target Variable Macros;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Input Variable Macros;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Rejected Variable Macros;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Misc Variable Macros;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * End Create EM Macro Variables and Macros;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
88531      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
88532      * BINNING: Generation of macros and macro variables;
MPRINT(EM_DIAGRAM):   * BINNING: Generation of macros and macro variables;
88533      * To see the code generated, set the EM_DEBUG macro variable to SOURCE or _ALL_;
MPRINT(EM_DIAGRAM):   * To see the code generated, set the EM_DEBUG macro variable to SOURCE
or _ALL_;
88534      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
 
88535      %let EMEXCEPTIONSTRING=;
88536      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
88537      * TRAIN: BINNING;
MPRINT(EM_DIAGRAM):   * TRAIN: BINNING;
88538      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
88539      %let EM_ACTION = TRAIN;
88540      %let syscc = 0;
88541      %macro main;
88542
88543        filename temp catalog 'sashelp.emmdfy.binning_macros.source';
88544        %include temp;
88545        filename temp;
88546
88547        %setProperties;
88548
88549        %if %upcase(&EM_ACTION) = CREATE %then %do;
88550          filename temp catalog 'sashelp.emmdfy.binning_create.source';
88551          %include temp;
88552          filename temp;
88553
88554          %create;
88555        %end;
88556
88557         %else
88558         %if %upcase(&EM_ACTION) = TRAIN %then %do;
88559
88560             filename temp catalog 'sashelp.emmdfy.binning_train.source';
88561             %include temp;
88562             filename temp;
88563             %train;
88564         %end;
88565
88566        %else
88567        %if %upcase(&EM_ACTION) = SCORE %then %do;
88568          filename temp catalog 'sashelp.emmdfy.binning_score.source';
88569          %include temp;
88570          filename temp;
88571
88572          %score;
88573
88574        %end;
88575
88576        %else
88577        %if %upcase(&EM_ACTION) = REPORT %then %do;
88578
88579             filename temp catalog 'sashelp.emmdfy.binning_report.source';
88580             %include temp;
88581             filename temp;
88582
88583             %report;
88584         %end;
88585
88586         %doendm:
88587      %mend main;
88588
88589      %main;
MPRINT(EM_DIAGRAM):
MPRINT(MAIN):   filename temp catalog 'sashelp.emmdfy.binning_macros.source';
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMMDFY.BINNING_MACROS.SOURCE.
88590     +
88591     +%macro SetProperties;
88592     +
88593     +     /* IGN options */
88594     +     %em_checkmacro(name=EM_PROPERTY_APPLYLEVELRULE, value=N, global=Y);
88595     +     %em_checkmacro(name=EM_PROPERTY_BINMETHOD,  value=QUANTILE, global=Y);
88596     +     %em_checkmacro(name=EM_PROPERTY_NUMBINS,    value=4, global=Y);
88597     +
88598     +     %em_checkmacro(name=EM_PROPERTY_MISSINGASLEVEL, value=Y, global=Y);
88599     +     %em_checkmacro(name=EM_PROPERTY_PRECISION,    value=2, global=Y);
88600     +     %em_checkmacro(name=EM_PROPERTY_CREATEGROUPING, value=N, global=Y);
88601     +     %em_checkmacro(name=EM_PROPERTY_CREATEMETHOD, value=OVERWRITE, global=Y);
88602     +     %em_checkmacro(name=EM_PROPERTY_IMPORTGROUPING, value=N, global=Y);
88603     +     %em_checkmacro(name=EM_PROPERTY_IMPORTDATA, value=, global=Y);
88604     +     %em_checkmacro(name=EM_PROPERTY_FREEZE, value=N, global=Y);
88605     +     %em_checkmacro(name=EM_PROPERTY_VARSELMETHOD, value=GINI, global=Y);
88606     +     %em_checkmacro(name=EM_PROPERTY_GINICUTOFF,   value=20.0, global=Y);
88607     +     %em_checkmacro(name=EM_PROPERTY_GRPMSMNT,     value=ORDINAL, global=Y);
88608     +     %em_checkmacro(name=EM_PROPERTY_MAXVAR,       value=10, global=Y);
88609     +     %em_checkmacro(name=EM_PROPERTY_CLASSGROUPRARE, value=Y, global=Y);
88610     +     %em_checkmacro(name=EM_PROPERTY_GROUPCUTOFF,    value=0.5, global=Y);
88611     +     %em_checkmacro(name=EM_PROPERTY_GROUPMISSING,   value=N, global=Y);
88612     +
88613     +     %em_checkmacro(name=EM_PROPERTY_INTTARGETMETHOD, value=CUTMEAN, global=Y);
88614     +     %em_checkmacro(name=EM_PROPERTY_USERCUTVALUE, value=0.2, global=Y);
88615     +     %em_checkmacro(name=EM_PROPERTY_RejectIntTarget, value=N, global=Y);
88616     +
88617     +
88618     +%mend SetProperties;
88619     +%macro appendfiles(fileref1, fileref2);
88620     +     data _null_;
88621     +       length c $256;
88622     +       fid1=fopen("&fileref1",'A');
88623     +       fid2=fopen("&fileref2",'I');
88624     +       cval = finfo(fid2,'lrecl');
88625     +       put cval= fid1= fid2=;
88626     +       if (fid2 > 0) then
88627     +         do while(fread(fid2)=0);
88628     +           rc = fget(fid2,c,256);
88629     +           _msg_=sysmsg();
88630     +           /* put rc= c= _msg_=; */
88631     +           rc = fput(fid1,strip(c));
88632     +           rc = fwrite(fid1);
88633     +         end;
88634     +         _msg_=sysmsg();
88635     +         put _msg_=;
88636     +       rc = fclose(fid1);
88637     +       rc = fclose(fid2);
88638     +     run;
88639     +%mend appendfiles;
88640     +
88641     +%macro buildOptScoreCode;
88642     +
88643     +    %em_register(key=BINCODE, type=FOLDER);
88644     +
88645     +    filename x catalog 'sashelp.emutil.em_deldir.source';
88646     +    %inc x;
88647     +    filename x;
88648     +    %delDir(folder=%nrbquote(&em_user_bincode));
88649     +
88650     +    data _null_; length rc $200;
88651     +       rc = dcreate('BINCODE', "&EM_NODEDIR");
88652     +    run;
88653     +
88654     +    %if ^%sysfunc(exist(class_nosv)) %then %goto doendu;
88655     +
88656     +    %let dsid = %sysfunc(open(class_nosv));
88657     +    %let nameNum    = %sysfunc(varnum(&dsid, DISPLAY_VAR));
88658     +    %let grpnameNum = %sysfunc(varnum(&dsid, _grp_variable_));
88659     +
88660     +    %let oldname=;
88661     +    %do %while(^%sysfunc(fetch(&dsid)));
88662     +        %let name    = %sysfunc(getvarc(&dsid, &nameNum));
88663     +        %let grpname = %sysfunc(getvarc(&dsid, &grpnameNum));
88664     +
88665     +        %if &name ne &oldname %then %do;
88666     +             filename _F1 "&em_user_bincode&em_dsep.&grpname..sas" MOD;
88667     +             data _null_;
88668     +                length string $200 flag endflag 8;
88669     +                retain string flag endflag;
88670     +                set class_nosv end=eof;
88671     +                where DISPLAY_VAR ="&name";
88672     +                by _variable_ _group_;
88673     +                file _F1;
88674     +                index = kindex(_variable_, "BIN_");
88675     +                if index gt 0 then do;
88676     +                   if first._variable_ then do;
88677     +                      put ' ';
88678     +                      put "&EM_CODEBAR;";
88679     +                      string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
88680     +                      put string;
88681     +                      put "&EM_CODEBAR;";
88682     +
88683     +                      if origLabel ne "" then do;
88684     +                            string = 'LABEL '!!strip(_grp_variable_)!!' = ';
88685     +                            put string;
88686     +                            string = tranwrd(origLabel,"'","''");
88687     +                            string = "'Grouped: "!!%nrbquote(strip(substr(string,
88687    !+1,188)))!!"';";
88688     +                            put string;
88689     +                      end;
88690     +                      else do;
88691     +                             string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped:
88691    !+ '!!%nrbquote(strip(DISPLAY_VAR))!!'";';
88692     +                             put string;
88693     +                      end;
88694     +
88695     +                      put ' ';
88696     +
88697     +                      string =  "if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
88698     +                      put string;
88699     +                      string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
88700     +                      put string;
88701     +                      put "end;";
88702     +                      string = "else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then
88702    !+do;";
88703     +                      put string;
88704     +                   end;
88705     +                   if first._group_ then do;
88706     +                      flag = 0;
88707     +                      endflag = 1;
88708     +                      if ^first._variable_ then do;
88709     +                         put "else";
88710     +                      end;
88711     +                      if LB ne . then do;
88712     +                         string = "if "!!strip(LB)!!" <= "!!strip(DISPLAY_VAR);
88713     +                      end;
88714     +                      else do;
88715     +                         flag = 1;
88716     +                         string = "if";
88717     +                      end;
88718     +                   end;
88719     +                   if last._Group_ then do;
88720     +                      if UB ne . then do;
88721     +                        if flag ne 1 then do;
88722     +                          string = strip(string)!!" AND "!!strip(DISPLAY_VAR)!!" <
88722    !+"!!strip(UB)!!" then do;";
88723     +                        end;
88724     +                        else do;
88725     +                          string = "if "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!"
88725    !+then do;";
88726     +                        end;
88727     +                      end;
88728     +                      else do;
88729     +                         if flag=1 then do;
88730     +                            string = strip(DISPLAY_VAR) ;
88731     +                            string = strip(string)!!'='!!strip(_split_Value_)!!"
88731    !+then do;";
88732     +                            endflag=0;
88733     +                            string="";
88734     +                         end;
88735     +                         else do;
88736     +                            string = strip(string)!!" then do;";
88737     +                         end;
88738     +                      end;
88739     +                      put string;
88740     +                      string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
88741     +                      put string;
88742     +                      if endflag eq 1 then do;
88743     +                        put "end;";
88744     +                      end;
88745     +                   end;
88746     +                   if last._variable_ then do;
88747     +                     string = "end;";
88748     +                     put string;
88749     +                   end;
88750     +
88751     +                end;
88752     +                else do;
88753     +                   _split_value_ = tranwrd(_split_value_,"'","''");
88754     +                   if first._group_ then do;
88755     +                      flag=0;
88756     +                      if ^first._variable_ then
88757     +                         put 'else';
88758     +                      else do;
88759     +                         put ' ';
88760     +                         put "&EM_CODEBAR;";
88761     +                         string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
88762     +                         put string;
88763     +                         put "&EM_CODEBAR;";
88764     +
88765     +                         if origLabel ne "" then do;
88766     +                               string = 'LABEL '!!strip(_grp_variable_)!!' = ';
88767     +                               put string;
88768     +                               string = tranwrd(origLabel,"'","''");
88769     +                               string = "'Grouped: "!!%nrbquote(strip(substr(string,
88769    !+ 1,188)))!!"';";
88770     +                               put string;
88771     +                         end;
88772     +                         else do;
88773     +                               string = 'LABEL '!!strip(_grp_variable_)!!' =
88773    !+"Grouped: '!!%nrbquote(strip(DISPLAY_VAR))!!'";';
88774     +                               put string;
88775     +                         end;
88776     +
88777     +                         put ' ';
88778     +
88779     +                         if format ne '' then do;
88780     +                            if first._variable_ then do;
88781     +                               string = "_UFormat =
88781    !+put("!!strip(DISPLAY_VAR)!!","!!strip(format)!!");";
88782     +                               put string;
88783     +                               string = '%dmnormip(_UFormat);';
88784     +                               put string;
88785     +
88786     +                               string ="if MISSING(_UFORMAT) then do;";
88787     +                               put string;
88788     +                               string = strip(_grp_variable_)!!" =
88788    !+"!!strip(MISSGRP)!!";";
88789     +                               put string;
88790     +                               put "end;";
88791     +
88792     +                               string="else if NOT MISSING(_UFORMAT) then do;";
88793     +                               put string;
88794     +
88795     +                            end;
88796     +                         end;
88797     +                         else do;
88798     +                            if type = 'N' then do;
88799     +                              string ="if MISSING("!!strip(DISPLAY_VAR)!!") then do;
88799    !+";
88800     +                              put string;
88801     +                              string = strip(_grp_variable_)!!" =
88801    !+"!!strip(MISSGRP)!!";";
88802     +                              put string;
88803     +                              put "end;";
88804     +
88805     +                              string="else if NOT MISSING("!!strip(DISPLAY_VAR)!!")
88805    !+then do;";
88806     +                              put string;
88807     +                            end;
88808     +                            else if type='C' then do;
88809     +                              string = "_UFormat = "||strip(DISPLAY_VAR)||";";
88810     +                              put string;
88811     +                              string = '%dmnormip(_UFormat);';
88812     +                              put string;
88813     +
88814     +                              string ="if MISSING(_UFORMAT) then do;";
88815     +                              put string;
88816     +                              string = strip(_grp_variable_)!!" =
88816    !+"!!strip(MISSGRP)!!";";
88817     +                              put string;
88818     +                              put "end;";
88819     +
88820     +                              string="else if NOT MISSING(_UFORMAT) then do;";
88821     +                              put string;
88822     +                              string = '%dmnormip(_UFormat);';
88823     +                              put string;
88824     +                           end;
88825     +                         end;
88826     +                      end;
88827     +                      if format ne '' OR type='C' then do;
88828     +                        string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
88829     +                      end;
88830     +                      else do;
88831     +                        string = "if ("!!strip(DISPLAY_VAR)!!" eq
88831    !+"!!strip(_split_value_);
88832     +                      end;
88833     +                   end;
88834     +                   else do;
88835     +                      if flag ne 1 then do;
88836     +                       if format ne '' OR type='C' then do;
88837     +                         tempstring = strip(string)!!" OR _UFORMAT eq
88837    !+'"!!strip(_split_value_)!!"'";
88838     +                       end;
88839     +                       else do;
88840     +                         tempstring = strip(string)!!" OR "!!strip(DISPLAY_VAR)!!"
88840    !+eq "!!strip(_split_value_);
88841     +                       end;
88842     +                         length = length(tempstring);
88843     +
88844     +                         if length < 195 then do;
88845     +                            string = tempstring;
88846     +                         end;
88847     +                         else do;
88848     +
88849     +                            string = strip(string);
88850     +                            put string;
88851     +                            string = ") then do;";
88852     +                            put string;
88853     +
88854     +                            string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!"
88854    !+;";
88855     +                            put string;
88856     +                            put "end;";
88857     +
88858     +                            put 'else';
88859     +                            if format ne '' OR type='C' then do;
88860     +                              string = "if (_UFORMAT eq
88860    !+'"!!strip(_split_value_)!!"'";
88861     +                            end;
88862     +                            else do;
88863     +                              string = "if "!!strip(DISPLAY_VAR)!!" eq
88863    !+("!!strip(_split_value_);
88864     +                            end;
88865     +                         end;
88866     +                      end;
88867     +                   end;
88868     +
88869     +                   if last._group_ then do;
88870     +                      string = strip(string);
88871     +                      put string;
88872     +
88873     +                      string = ") then do;";
88874     +                      put string;
88875     +
88876     +                      string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
88877     +                      put string;
88878     +                      put "end;";
88879     +                   end;
88880     +
88881     +                   if last._variable_ then do;
88882     +                     put "else do;";
88883     +
88884     +                     string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
88885     +                     put string;
88886     +
88887     +                     put "end;";
88888     +                     put "end;";
88889     +                   end;
88890     +                end;
88891     +             run;
88892     +
88893     +             %let oldname = &name;
88894     +        %end;
88895     +    %end;
88896     +    %let dsid = %sysfunc(close(&dsid));
88897     +
88898     +    filename _F1 "&em_user_bincode&em_dsep._ALL_.sas";
88899     +    data _null_;
88900     +       file _F1;
88901     +       put "length _UFormat $200;";
88902     +       put "drop _UFormat;";
88903     +       put "_UFormat='';";
88904     +    run;
88905     +    filename _F1;
88906     +
88907     +   %em_register(key=EMSCOREVAR, type=DATA);
88908     +   %let scorevarDs = %scan(&em_user_emscorevar, 2, .);
88909     +   proc datasets lib=&em_lib nolist;
88910     +      delete &scorevarDs;
88911     +   run;
88912     +   quit;
88913     +
88914     +   %let filrf=mydir;
88915     +   %let rc=%sysfunc(filename(filrf,&em_user_bincode));
88916     +   %let did=%sysfunc(dopen(&filrf));
88917     +
88918     +   %if &did %then %do;  %PUT  did= &did;
88919     +       %let memcount=%sysfunc(dnum(&did));
88920     +       %if &memcount > 0 %then %do;
88921     +           data &em_user_emscorevar;
88922     +              length Name $32 formula $70 file $200;
88923     +              keep NAME Formula file;
88924     +              formula  = '';
88925     +           %if %sysfunc(fileexist(&em_user_bincode&em_dsep._ALL_.sas)) %then %do;
88926     +               name=''; file="BINCODE&em_dsep._ALL_.sas";
88927     +               output;
88928     +           %end;
88929     +           %do i=1 %to &memcount;
88930     +               %let name =%nrbquote(%sysfunc(dread(&did,&i)));
88931     +               %let newvar = %scan(&name, 1, .);
88932     +               %if "&newvar" ne "_ALL_" %then %do;
88933     +                   name = "&newvar"; file="BINCODE&em_dsep&name";
88934     +                   output;
88935     +               %end;
88936     +           %end;
88937     +
88938     +           run;
88939     +       %end;
88940     +       %let did = %sysfunc(dclose(&did));
88941     +  %end;
88942     +
88943     +   %doendu:
88944     +%mend buildOptScoreCode;
88945     +
88946     +
88947     +%macro buildScoreCode(flowCode, publishCode);
88948     +
88949     +
88950     +  filename x "&flowCode";
88951     +
88952     +  proc sort data=&EM_USER_SPLITVALS; by display_var _split_Value_; run;
88953     +  proc sort data=&EM_USER_BINMAPPINGS; by display_var bin; run;
88954     +  proc sort data=&EM_USER_coarse out=tempcoarse; by display_var _group_; run;
88955     +
88956     +  data temp;
88957     +    merge &EM_USER_SPLITVALS &EM_USER_BINMAPPINGS(rename=(BIN=_SPLIT_VALUE_
88957    !+BIN_NAME=_VARIABLE_));
88958     +    by display_var _Split_value_;
88959     +     if upcase(_Split_value_) ne 'MISSING';
88960     +   run;
88961     +
88962     +   data temp_missing;
88963     +     merge &EM_USER_SPLITVALS(rename=(_GROUP_=MISSGRP))
88963    !+&EM_USER_BINMAPPINGS(rename=(
88964     +          BIN=_SPLIT_VALUE_ BIN_NAME=_VARIABLE_));
88965     +     by display_var _Split_value_;
88966     +     if upcase(_Split_value_) eq 'MISSING';
88967     +     keep _variable_ display_var missgrp;
88968     +   run;
88969     +
88970     +   proc sort data=temp_missing; by display_var missgrp; run;
88971     +
88972     +   data temp_missing;
88973     +     merge temp_missing(in=_a) tempcoarse(rename=(_GROUP_=MISSGRP));
88974     +     by display_var missgrp;
88975     +     if ^_a then delete;
88976     +     keep _variable_ display_var missgrp ;
88977     +   run;
88978     +
88979     +   data temp;
88980     +     merge temp temp_missing;
88981     +     by display_var;
88982     +     if display_Var eq '' then delete;
88983     +    run;
88984     +
88985     +    /* pull in wtev values */
88986     +    proc sort data=&EM_USER_varmappings out=tempmappings; by _variable_; run;
88987     +    proc sort data=&EM_IMPORT_DATA_CMETA out=tempcmeta; by NAME; run;
88988     +    proc sort data=temp;  by display_var _group_; run;
88989     +
88990     +   data temp;
88991     +      merge temp tempcoarse(keep=display_var _group_  role) ;
88992     +      by display_var _group_;
88993     +    run;
88994     +
88995     +    data temp;
88996     +      merge temp tempmappings(rename=(_variable_ = display_var)) tempcmeta(keep=NAME
88996    !+ FORMAT TYPE LABEL rename=(NAME=display_var LABEL=origLabel));
88997     +      by display_var;
88998     +
88999     +      if _group_ = . then delete;
89000     +      if _variable_ = '' then delete;
89001     +    run;
89002     +
89003     +    proc sort data=temp out=class;
89004     +       by _variable_ _group_ LB;
89005     +    run;
89006     +
89007     +    data _null_;
89008     +      file X;
89009     +
89010     +      put "length _UFormat $200;";
89011     +      put "drop _UFormat;";
89012     +      put "_UFormat='';";
89013     +    run;
89014     +
89015     +    data class_nosv;
89016     +      set class;
89017     +      if upcase(role)="INPUT";
89018     +    run;
89019     +
89020     +    data _null_;
89021     +       file X MOD;
89022     +       length string $200 flag endflag 8;
89023     +       retain string flag endflag;
89024     +       set class_nosv end=eof;
89025     +       by _variable_ _group_;
89026     +
89027     +       index = kindex(_variable_, "BIN_");
89028     +       if index gt 0 then do;
89029     +
89030     +         if first._variable_ then do;
89031     +            put ' ';
89032     +            put "&EM_CODEBAR;";
89033     +            string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
89034     +            put string;
89035     +            put "&EM_CODEBAR;";
89036     +
89037     +
89038     +            if origLabel ne "" then do;
89039     +              string = 'LABEL '!!strip(_grp_variable_)!!' = ';
89040     +              put string;
89041     +              string = tranwrd(origLabel,"'","''");
89042     +              string = "'Grouped: "!!%nrbquote(strip(substr(string, 1,188)))!!"';";
89043     +              put string;
89044     +            end;
89045     +            else do;
89046     +             string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped:
89046    !+'!!%nrbquote(strip(DISPLAY_VAR))!!'";';
89047     +             put string;
89048     +            end;
89049     +
89050     +            put ' ';
89051     +
89052     +            string =  "if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
89053     +            put string;
89054     +            string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
89055     +            put string;
89056     +            put "end;";
89057     +            string = "else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
89058     +            put string;
89059     +          end;
89060     +           if first._group_ then do;
89061     +              flag = 0;
89062     +              endflag = 1;
89063     +              if ^first._variable_ then do;
89064     +                put "else";
89065     +              end;
89066     +              if LB ne . then do;
89067     +                 string = "if "!!strip(LB)!!" <= "!!strip(DISPLAY_VAR);
89068     +              end;
89069     +              else do;
89070     +                 flag = 1;
89071     +                 string = "if";
89072     +              end;
89073     +
89074     +           end;
89075     +           if last._Group_ then do;
89076     +              if UB ne . then do;
89077     +                if flag ne 1 then do;
89078     +                  string = strip(string)!!" AND "!!strip(DISPLAY_VAR)!!" <
89078    !+"!!strip(UB)!!" then do;";
89079     +                end;
89080     +                else do;
89081     +                  string = "if "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
89082     +                end;
89083     +              end;
89084     +              else do;
89085     +                 if flag=1 then do;
89086     +                   string = strip(DISPLAY_VAR) ;
89087     +                   string = strip(string)!!'='!!strip(_split_Value_)!!" then do;";
89088     +                   endflag = 0;
89089     +                   string="";
89090     +                 end;
89091     +                 else do;
89092     +                   string = strip(string)!!" then do;";
89093     +                 end;
89094     +              end;
89095     +              put string;
89096     +
89097     +              string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
89098     +              put string;
89099     +              if endflag eq 1 then do;
89100     +                put "end;";
89101     +              end;
89102     +           end;
89103     +           if last._variable_ then do;
89104     +             string = "end;";
89105     +             put string;
89106     +           end;
89107     +       end;
89108     +       else do;
89109     +           _split_value_ = tranwrd(_split_value_,"'","''");
89110     +           if first._group_ then do;
89111     +              flag=0;
89112     +              if ^first._variable_ then
89113     +                 put 'else';
89114     +              else do;
89115     +                 put ' ';
89116     +                 put "&EM_CODEBAR;";
89117     +                 string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
89118     +                 put string;
89119     +                 put "&EM_CODEBAR;";
89120     +
89121     +                 if origLabel ne "" then do;
89122     +                   string = 'LABEL '!!strip(_grp_variable_)!!' = ';
89123     +                   put string;
89124     +                   string = tranwrd(origLabel,"'","''");
89125     +                   string = "'Grouped: "!!%nrbquote(strip(substr(string,
89125    !+1,188)))!!"';";
89126     +                   put string;
89127     +                 end;
89128     +                 else do;
89129     +                   string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped:
89129    !+'!!%nrbquote(strip(DISPLAY_VAR))!!'";';
89130     +                   put string;
89131     +                 end;
89132     +
89133     +                 put ' ';
89134     +
89135     +                if format ne '' then do;
89136     +                  if first._variable_ then do;
89137     +                    string = "_UFormat =
89137    !+put("!!strip(DISPLAY_VAR)!!","!!strip(format)!!");";
89138     +                    put string;
89139     +                    string = '%dmnormip(_UFormat);';
89140     +                    put string;
89141     +
89142     +                     string ="if MISSING(_UFORMAT) then do;";
89143     +                     put string;
89144     +                     string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
89145     +                     put string;
89146     +                     put "end;";
89147     +
89148     +                     string="else if NOT MISSING(_UFORMAT) then do;";
89149     +                     put string;
89150     +
89151     +                  end;
89152     +                end;
89153     +                else do;
89154     +                     if type = 'N' then do;
89155     +                       string ="if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
89156     +                       put string;
89157     +                       string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
89158     +                       put string;
89159     +                       put "end;";
89160     +
89161     +                       string="else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do
89161    !+;";
89162     +                       put string;
89163     +
89164     +                     end;
89165     +                     else if type='C' then do;
89166     +                        string = "_UFormat = "||strip(DISPLAY_VAR)||";";
89167     +                        put string;
89168     +                        string = '%dmnormip(_UFormat);';
89169     +                        put string;
89170     +
89171     +                        string ="if MISSING(_UFORMAT) then do;";
89172     +                        put string;
89173     +                        string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
89174     +                        put string;
89175     +                        put "end;";
89176     +
89177     +                        string="else if NOT MISSING(_UFORMAT) then do;";
89178     +                        put string;
89179     +                        string = '%dmnormip(_UFormat);';
89180     +                        put string;
89181     +                    end;
89182     +                end;
89183     +              end;
89184     +              if format ne '' OR type='C' then do;
89185     +                string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
89186     +              end;
89187     +              else do;
89188     +                string = "if ("!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
89189     +              end;
89190     +           end;
89191     +           else do;
89192     +              if flag ne 1 then do;
89193     +                if format ne '' OR type='C' then do;
89194     +                  tempstring = strip(string)!!" OR _UFORMAT eq
89194    !+'"!!strip(_split_value_)!!"'";
89195     +                end;
89196     +                else do;
89197     +                  tempstring = strip(string)!!" OR "!!strip(DISPLAY_VAR)!!" eq
89197    !+"!!strip(_split_value_);
89198     +                end;
89199     +                length = klength(tempstring);
89200     +
89201     +                if length < 195 then do;
89202     +                   string = tempstring;
89203     +                end;
89204     +                else do;
89205     +
89206     +                   string = strip(string);
89207     +                   put string;
89208     +                   string = ") then do;";
89209     +                   put string;
89210     +
89211     +                   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
89212     +                   put string;
89213     +                   put "end;";
89214     +
89215     +                 /*  string = strip(string)||",'...';"; */
89216     +
89217     +                   put 'else';
89218     +                   if format ne '' OR type='C' then do;
89219     +                     string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
89220     +                   end;
89221     +                   else do;
89222     +                     string = "if ("!!strip(DISPLAY_VAR)!!" eq
89222    !+"!!strip(_split_value_);
89223     +                   end;
89224     +
89225     +
89226     +                end;
89227     +              end;
89228     +           end;
89229     +
89230     +           if last._group_ then do;
89231     +              string = strip(string);
89232     +              put string;
89233     +              string = ") then do;";
89234     +              put string;
89235     +
89236     +              string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
89237     +              put string;
89238     +              put "end;";
89239     +           end;
89240     +
89241     +           if last._variable_ then do;
89242     +             put "else do;";
89243     +
89244     +             string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
89245     +             put string;
89246     +
89247     +             put "end;";
89248     +             put "end;";
89249     +           end;
89250     +         *end;
89251     +       end;
89252     +    run;
89253     +
89254     +    /* generate PublishCode the same as flowscorecode */
89255     +    filename Y "&publishCode";
89256     +
89257     +    /* if publishCode already exists, wipe it out first */
89258     +    %if %sysfunc(fexist(Y)) eq 1 %then %do;
89259     +      %let rc = %sysfunc(fdelete(Y));
89260     +    %end;
89261     +
89262     +    %appendfiles(Y, X);
89263     +
89264     +    %if %EM_BINARY_TARGET= %then %do;
89265     +      %if %symexist(EM_NUM_INTERVAL_TARGET)=0 %then %do;
89266     +         %em_varMacro(name=EM_INTERVAL_TARGET, metadata=&EM_DATA_variableSet,
89266    !+where=%nrbquote(ROLE="TARGET" and LEVEL="INTERVAL" and (USE="Y" or USE="D")),
89266    !+nummacro=em_num_interval_Target);
89267     +      %end;
89268     +      %let ibn_inttarget=%EM_INTERVAL_TARGET;
89269     +      %let ibn_inttarget_orig = &ibn_inttarget;
89270     +
89271     +      %if %symexist(IGNBinTarget)=0 %then %do;
89272     +         %global ignbintarget ignfreqvar;
89273     +         filename temp catalog 'sashelp.emutil.em_getvarname.source';
89274     +         %include temp;
89275     +         filename temp;
89276     +         %getVarName(&EM_IMPORT_DATA,
89276    !+BIN_%substr(&ibn_inttarget,1,%sysfunc(min(%length(&ibn_inttarget),28))),
89276    !+IGNBinTarget);
89277     +
89278     +         %if &EM_PROPERTY_INTTARGETMETHOD = DUPFREQ %then %do;
89279     +            %getVarName(&EM_IMPORT_DATA, _FREQ_, ignfreqvar);
89280     +         %end;
89281     +      %end;
89282     +      %if &EM_PROPERTY_INTTARGETMETHOD = CUTMEAN %then %do;
89283     +         proc sql noprint;
89284     +            %if %EM_FREQ ne %then %do;
89285     +               select sum(&ibn_inttarget * %EM_FREQ) / sum(%EM_FREQ)
89286     +            %end;
89287     +            %else %do;
89288     +               select mean(&ibn_inttarget)
89289     +            %end;
89290     +            into :ignbincut trimmed from &EM_IMPORT_DATA;
89291     +         quit;
89292     +      %end;
89293     +
89294     +      %let dsid=%sysfunc(open(&EM_IMPORT_DATA,i));
89295     +      %if &dsid %then %do;
89296     +         %let
89296    !+tarlabel=%trim(%sysfunc(varlabel(&dsid,%sysfunc(varnum(&dsid,&ibn_inttarget)))));
89297     +         %let rc=%sysfunc(close(&dsid));
89298     +      %end;
89299     +      %if %length(&tarlabel)=0 %then %let tarlabel = &ibn_inttarget;
89300     +
89301     +      data _null_;
89302     +         file x mod;
89303     +         put ' ';
89304     +
89305     +         %if &EM_PROPERTY_INTTARGETMETHOD = CUTMEAN %then %do;
89306     +             put "&EM_CODEBAR;";
89307     +             %let note = Mean Cutoff Binary Transformation for Target;
89308     +             put "* &note;";
89309     +             put "&EM_CODEBAR;";
89310     +         %end;
89311     +         %else %if &EM_PROPERTY_INTTARGETMETHOD = CUTUSER %then %do;
89312     +             put "&EM_CODEBAR;";
89313     +             %let note = User-Specified Cutoff Binary Transformation for Target;
89314     +             put "* &note;";
89315     +             put "&EM_CODEBAR;";
89316     +             %let ignbincut = &EM_PROPERTY_USERCUTVALUE;
89317     +         %end;
89318     +         put "if &ibn_inttarget = . then &IGNBinTarget = .;";
89319     +         put "else do;";
89320     +         put "   if &ibn_inttarget > &ignbincut then &IGNBinTarget=1;";
89321     +         put "   else &IGNBinTarget=0;";
89322     +         put "end;";
89323     +
89324     +         put "label &IGNBinTarget = 'Binary: %nrbquote(%substr(&tarlabel,1,192))';";
89325     +      run;
89326     +
89327     +      filename deltaref "&EM_FILE_CDELTA_TRAIN";
89328     +
89329     +      %if &EM_PROPERTY_RejectIntTarget = Y %then %do;
89330     +
89331     +         data _null_;
89332     +            file deltaref;
89333     +            put "if name='&ibn_inttarget_orig' then role='REJECTED';";
89334     +            put "if name='&IGNBinTarget' then do;";
89335     +            put "   role='TARGET';";
89336     +            put "   level='BINARY';";
89337     +            put "end;";
89338     +         run;
89339     +
89340     +      %end;
89341     +      %else %do;
89342     +
89343     +         data _null_;
89344     +            file deltaref;
89345     +            put "if name='&ibn_inttarget_orig' then role='TARGET';";
89346     +            put "if name='&IGNBinTarget' then do;";
89347     +            put "   role='REJECTED';";
89348     +            put "   level='BINARY';";
89349     +            put "end;";
89350     +         run;
89351     +      %end;
89352     +
89353     +      filename deltaref;
89354     +
89355     +   %end;
89356     +
89357     +    filename X;
89358     +    filename Y;
89359     +
89360     +    %buildOptScoreCode;
89361     +
89362     +    proc datasets library=work nolist;
89363     +      delete class class_nosv temp temp_missing tempmappings tempcmeta;
89364     +    run;
89365     +    quit;
89366     +
89367     +%mend buildScoreCode;
89368     +
89369     +%macro buildMetaCode(DeltaCodeFile=);
89370     +
89371     +   /* set variable roles based on New Role column in the Results table */
89372     +   data _null_;
89373     +      file &DeltaCodeFile %if %length(%EM_BINARY_TARGET)=0 %then mod;;
89374     +      %let dsid = %sysfunc(open(&EM_USER_RESULTSTABLE));
89375     +      %if &dsid %then %do;
89376     +        %let obs = %sysfunc(fetch(&dsid));
89377     +        %let vnum = %sysfunc(VARNUM(&dsid, DISPLAY_VAR));
89378     +        %let rnum = %sysfunc(VARNUM(&dsid, _new_role_));
89379     +        %let ornum = %sysfunc(VARNUM(&dsid, _role_));
89380     +
89381     +        %do %while(&obs=0);
89382     +          %let inputname = %sysfunc(getvarc(&dsid, &vnum));
89383     +          %let role      = %upcase(%sysfunc(getvarc(&dsid, &rnum)));
89384     +          %let oldrole   = %upcase(%sysfunc(getvarc(&dsid, &ornum)));
89385     +
89386     +          /* retrieve grp and woe names from varmappings dataset */
89387     +          %let choice = _VARIABLE_ = "&inputname";
89388     +          %let cdsid = %sysfunc(open(&EM_USER_VARMAPPINGS(where=(&choice))));
89389     +          %let cobs = %sysfunc(fetchobs(&cdsid, 1));
89390     +          %let grpnum = %sysfunc(VARNUM(&cdsid, _GRP_VARIABLE_));
89391     +          %let grpname = %sysfunc(getvarc(&cdsid, &grpnum));
89392     +          %if &cdsid %then %let cdsid = %sysfunc(close(&cdsid));
89393     +
89394     +          put "if name = '&inputname' then role='REJECTED';";
89395     +          %if "&role" ne "DEFAULT" %then %do;
89396     +            put "if name = '&grpname' then role='&role';";
89397     +          %end;
89398     +          %else %do;
89399     +            put "if name = '&grpname' then role='&oldrole';";
89400     +          %end;
89401     +          put "if name = '&grpname' then level='&EM_PROPERTY_GRPMSMNT';";
89402     +
89403     +          %let obs = %sysfunc(fetch(&dsid));
89404     +        %end;
89405     +      %end;
89406     +      %if &dsid %then %let dsid = %sysfunc(close(&dsid));
89407     +   run;
89408     +
89409     +   /* drop all vars in the splitvals dataset that aren't present in the varmappings
89409    !+dataset */
89410     +   data _null_;
89411     +      file &DeltaCodeFile MOD;
89412     +
89413     +      %let sdsid = %sysfunc(open(&EM_USER_SPLITVALS));
89414     +      %if &sdsid %then %do;
89415     +        %let sobs = %sysfunc(fetch(&sdsid));
89416     +        %do %while(&sobs=0);
89417     +          %let varnum = %sysfunc(VARNUM(&sdsid, _VARIABLE_));
89418     +          %let checkname = %sysfunc(getvarc(&sdsid, &varnum));
89419     +          %let dispvarnum = %sysfunc(VARNUM(&sdsid, DISPLAY_VAR));
89420     +          %let displayvar = %sysfunc(getvarc(&sdsid, &dispvarnum));
89421     +
89422     +          %let checkgrp = GRP_&checkname;
89423     +          %let lenname = %length(&checkgrp);
89424     +          %if %eval(&lenname-32) > 0 %then %do;
89425     +            %let checkgrp = %substr(&checkgrp, 1, 32);
89426     +          %end;
89427     +
89428     +          %let choice = _VARIABLE_ ="&checkname";
89429     +          %let vdsid = %sysfunc(open(&EM_USER_VARMAPPINGS(where=(&choice))));
89430     +
89431     +          /* if var not found in varmappings, delete variables; */
89432     +          /* this could happen when freeze=Y and vars in the frozen dataset aren't
89432    !+in the incoming training data */
89433     +          %if &vdsid eq 0 %then %do;
89434     +            put 'if name="&displayvar" then delete;';
89435     +            %let dispgrp = GRP_&displayvar;
89436     +            put 'if name="&dispgrp" then delete;';
89437     +          %end;
89438     +
89439     +          %if &vdsid > 0 %then %let vdsid = %sysfunc(close(&vdsid));
89440     +          %let sobs = %sysfunc(fetch(&sdsid));
89441     +        %end;
89442     +      %end;
89443     +      %if &sdsid > 0 %then %let sdsid= %sysfunc(close(&sdsid));
89444     +   run;
89445     +
89446     +%mend buildMetaCode;
89447     +
89448     +%macro EM_GENERATE_RESULTSTABLE(coarse, resultstable, varmappings);
89449     +
89450     +   proc sort data=&coarse out=sortedcoarse nodupkey;
89451     +     by display_var;
89452     +   run;
89453     +   proc sort data=&varmappings nodupkey;
89454     +     by _variable_;
89455     +   run;
89456     +   %if %sysfunc(exist(&resultstable, data)) %then %do;
89457     +     proc sort data=&resultstable; by display_var; run;
89458     +   %end;
89459     +
89460     +   data &resultstable (Keep = display_var _gini_  _role_ _new_role_ procLevel);
89461     +     merge sortedcoarse(in=_a) &varmappings(rename=(_Variable_ = DISPLAY_VAR))
89462     +     %if %sysfunc(exist(&resultstable, data)) %then %do;
89463     +        &resultstable (keep = display_var _new_role_ )
89464     +     %end;
89465     +     ;
89466     +     by display_var;
89467     +     length _role_ _new_role_ $10;
89468     +     label display_var = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel ,
89468    !+NOQUOTE))"
89469     +           _gini_     = "%sysfunc(sasmsg(sashelp.dmine, rpt_ginistatistic_vlabel ,
89469    !+NOQUOTE))"
89470     +           _role_     = "%sysfunc(sasmsg(sashelp.dmine, rpt_calcrole_vlabel,
89470    !+NOQUOTE))"
89471     +           _new_role_ = "%sysfunc(sasmsg(sashelp.dmine, meta_NEWROLE_vlabel,
89471    !+NOQUOTE))"
89472     +           LEVEL      = "%sysfunc(sasmsg(sashelp.dmine, rpt_level_vlabel ,
89472    !+NOQUOTE))"
89473     +           ;
89474     +
89475     +           %if &EM_PROPERTY_VARSELMETHOD eq GINI %then %do;
89476     +             if _gini_ < &EM_PROPERTY_GINICUTOFF then
89477     +                _role_ = "Rejected";
89478     +             else _role_ = "Input";
89479     +           %end;
89480     +           %else %do;
89481     +             _role_ = "Input";
89482     +           %end;
89483     +           if _new_role_ eq "" then _new_role_="Default";
89484     +      if ^_a then do;
89485     +        _gini_ = 0;
89486     +        _role_ = 'Rejected';
89487     +        if _new_role_ eq "" then _new_role_="Default";
89488     +      end;
89489     +   run;
89490     +   proc sort data=&EM_DATA_VARIABLESET out=outlabel(keep=NAME LABEL LEVEL
89490    !+rename=(NAME=display_var LABEL=_label_));
89491     +     by NAME;
89492     +   run;
89493     +   data outlabel;
89494     +     set outlabel;
89495     +     if _label_ = '' then _label_ = _variable_;
89496     +   run;
89497     +   data &resultstable;
89498     +     merge &resultstable(in=_a_) outlabel;
89499     +     by display_Var;
89500     +     if _a_ then output;
89501     +   run;
89502     +   proc datasets library=work nolist;
89503     +     delete sortedcoarse outlabel;
89504     +   run;
89505     +   quit;
89506     +   proc sort data=&resultstable nodupkey;
89507     +      by DESCENDING
89508     +        _gini_ display_Var;
89509     +   run;
89510     +   data &resultstable;
89511     +     set &resultstable;
89512     +
89513     +     label giniOrder = "%sysfunc(sasmsg(sashelp.dmine, rpt_giniorder_vlabel ,
89513    !+NOQUOTE))"
89514     +           LEVEL      = "%sysfunc(sasmsg(sashelp.dmine, rpt_level_vlabel ,
89514    !+NOQUOTE))";
89515     +     giniOrder = _N_;
89516     +     _gini_ = round(_GINI_, .001);
89517     +     drop _variable_;
89518     +   run;
89519     +
89520     +   proc print data=&resultstable label;
89521     +   run;
89522     +
89523     +   /* merge role, infovalOrder or giniOrder back into Coarse table as well */
89524     +   data &coarse;
89525     +     set &coarse;
89526     +     length role $10;
89527     +     %let dsid = %sysfunc(open(&resultstable));
89528     +     %if &dsid %then %do;
89529     +       %let disnum = %sysfunc(VARNUM(&dsid, DISPLAY_VAR));
89530     +       %let rolenum = %sysfunc(VARNUM(&dsid, _ROLE_));
89531     +       %let orderNum = %sysfunc(VARNUM(&dsid, giniOrder));
89532     +
89533     +       %let obs = %sysfunc(fetch(&dsid));
89534     +       %do %while(&obs=0);
89535     +          %let displayvar = %sysfunc(getvarc(&dsid, &disnum));
89536     +          %let role       = %sysfunc(getvarc(&dsid, &rolenum));
89537     +          %let order = %sysfunc(getvarn(&dsid, &ordernum));
89538     +
89539     +           if DISPLAY_VAR = "&displayVar" then do;
89540     +            label giniOrder = "%sysfunc(sasmsg(sashelp.dmine, rpt_giniorder_vlabel ,
89540    !+ NOQUOTE))";
89541     +            giniOrder = &order;
89542     +            role = "&role";
89543     +          end;
89544     +
89545     +          %let obs = %sysfunc(fetch(&dsid));
89546     +       %end;
89547     +     %end;
89548     +     %if &dsid %then %let dsid = %sysfunc(close(&dsid));
89549     +   run;
89550     +
89551     +
89552     +%mend EM_GENERATE_RESULTSTABLE;
89553     +
89554     +%macro EM_GENERATE_EXPORTGROUP(exportGrouping, createMethod);
89555     +
89556     +    /* instantiate the zchar macro to be used in adding bin definition */
89557     +    filename _temp catalog 'sashelp.emmacs.zchar.source';
89558     +    %inc _temp;
89559     +    filename _temp;
89560     +
89561     +    proc sort data=&EM_USER_FINEDETAILDATA out=sortedfine;
89562     +      by _variable_ binFlag _group_ LB;
89563     +    run;
89564     +
89565     +    data tempExport;
89566     +      set sortedFine;
89567     +      by _variable_ binFlag _group_;
89568     +      length _split_value_ $200;
89569     +
89570     +      /* for all binned variables, need to modify the split value to original cutoff
89570    !+ as well as change level to interval */
89571     +      if binFlag = 0 then do;
89572     +        index = kindex(_variable_, "BIN_");
89573     +        if index gt 0 then do;
89574     +          _LEVEL_ = "INTERVAL";
89575     +        end;
89576     +        _Split_value_ = _split_value_;
89577     +        output;
89578     +      end;
89579     +      else do;
89580     +         * if last._group_ then do;
89581     +          index = kindex(_variable_, "BIN_");
89582     +          if index gt 0 then do;
89583     +            _LEVEL_ = "INTERVAL";
89584     +          end;
89585     +          _Split_value_ = %zchar(UB);
89586     +          output;
89587     +         * end;
89588     +      end;
89589     +
89590     +      rename display_Var = _variable_;
89591     +      keep display_var _level_ _group_ _split_value_ binFlag;
89592     +    run;
89593     +
89594     +    %if &CREATEMETHOD eq OVERWRITE %then %do;
89595     +       data &EXPORTGROUPING;
89596     +         set tempexport;
89597     +       run;
89598     +    %end;
89599     +    %else %do;
89600     +       /* determine if EXPORTGROUPING already exists */
89601     +       %if %sysfunc(exist(&EXPORTGROUPING, DATA)) %then %do;
89602     +         data &EXPORTGROUPING;
89603     +            set &EXPORTGROUPING tempexport;
89604     +         run;
89605     +       %end;
89606     +       %else %do;
89607     +         data &EXPORTGROUPING;
89608     +            set tempexport;
89609     +         run;
89610     +       %end;
89611     +    %end;
89612     +
89613     +    proc datasets lib=work nolist;
89614     +      delete sortedFine tempexport;
89615     +    run;
89616     +    quit;
89617     +
89618     +%mend EM_GENERATE_EXPORTGROUP;
89619     +
89620     +
89621     +
NOTE: %INCLUDE (level 1) ending.
MPRINT(MAIN):   filename temp;
NOTE: Fileref TEMP has been deassigned.
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(MAIN):  ;
MPRINT(MAIN):   filename temp catalog 'sashelp.emmdfy.binning_train.source';
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMMDFY.BINNING_TRAIN.SOURCE.
89624     +%macro train;
89626     +   /* include training macros */
89627     +   filename trtemp catalog 'sashelp.emmdfy.binning_trainmacros.source';
89628     +   %include trtemp;
89629     +   filename trtemp;
89631     +   /* trick IGN into thinking it is a model node to build decmeta; further down, set
89631    !+ %EM_MODEL ASSESS=N
89632     +   %let EM_TOOLTYPE = MODEL; */
89634     +   %if &EM_IMPORT_DATA eq %then %do;
89635     +       %let  EMEXCEPTIONSTRING = exception.server.IMPORT.NOTRAIN, 1;
89636     +       %let  errmsg = %sysfunc(sasmsg(sashelp.dmine, error_nodeTrainRawData_note ,
89636    !+NOQUOTE));
89637     +       %put &em_codebar;
89638     +       %put &errmsg;
89639     +       %put &em_codebar;
89640     +       %goto doendm;
89641     +   %end;
89643     +   %if  &EM_NUM_TARGET ne 1 %then %do;
89644     +        %let EMEXCEPTIONSTRING = exception.server.METADATA.USE1BINORINTTARGET;
89645     +        %let  errmsg = %sysfunc(sasmsg(sashelp.dmine,
89645    !+METADATA.USE1BINORINTTARGET_ERR  , NOQUOTE));
89646     +        %put &em_codebar;
89647     +        %put &errmsg;
89648     +        %put &em_codebar;
89649     +        %goto doendm;
89650     +   %end;
89652     +  %if  &EM_NUM_BINARY_TARGET ne 1 and &EM_NUM_INTERVAL_TARGET ne 1 %then %do;
89653     +        %let EMEXCEPTIONSTRING = exception.server.METADATA.USE1BINORINTTARGET;
89654     +        %put &em_codebar;
89655     +        %let errormsg = %sysfunc(sasmsg(sashelp.dmine,
89655    !+METADATA.USE1BINORINTTARGET_ERR, NOQUOTE));
89656     +        %put &errormsg;
89657     +        %put &em_codebar;
89658     +        %goto doendm;
89659     +   %end;
89661     +   /* Initialize property macro variables */
89662     +   %SetProperties;
89663     +   %EM_GETNAME(key=NEWTRAIN, type=DATA);
89665     +   /* check actual num of target levels */
89666     +   %let target_level = %EM_TARGET_LEVEL;
89667     +   %let target_var = %EM_TARGET;
89668     +   %if (&target_Level eq BINARY) %then %do;
89669     +      /* retrieve target information */
89670     +      /* does decmeta exist?  If not, retrieve target information elsewhere */
89671     +      %global target_event;
89672     +      %let target_event=;
89673     +      %if "&EM_DEC_DECMETA" eq "" %then %do;
89674     +        /* retrieve type and format from variableset */
89675     +        %let eventorder = DESC;
89676     +        data temp;
89677     +          set &EM_DATA_VARIABLESET;
89678     +          where NAME ="%EM_BINARY_TARGET";
89679     +        run;
89680     +        %let dsid = %sysfunc(open(work.temp));
89681     +        %if &dsid %then %do;
89682     +          %let typenum = %sysfunc(VARNUM(&dsid, TYPE));
89683     +          %let formatnum = %sysfunc(VARNUM(&dsid, FORMAT));
89684     +          %let ordernum  = %sysfunc(VARNUM(&dsid, ORDER));
89685     +          %let obs = %sysfunc(fetchobs(&dsid, 1));
89686     +          %let Target_type = %sysfunc(getvarc(&dsid, &typenum));
89687     +          %let Target_Format = %sysfunc(getvarc(&dsid, &formatnum));
89688     +          %let Target_Order  = %sysfunc(getvarc(&dsid, &ordernum));
89689     +          %if &TARGET_ORDER  = ASC %then %let eventorder = ASC;
89690     +             %else
89691     +          %if &TARGET_ORDER  = DESC %then %let eventorder = DESC;
89692     +             %else
89693     +          %if &TARGET_ORDER  = FMTASC %then %let eventorder = ASCFMT;
89694     +             %else
89695     +          %if &TARGET_ORDER  = FMTDESC %then %let eventorder = DESFMT;
89696     +        %end;
89697     +        %if &dsid %then %let dsid = %sysfunc(close(&dsid));
89699     +        /* retrieve target_event and Target_nonEvent values */
89700     +        proc dmdb data=&EM_IMPORT_DATA(where=(^missing(%EM_BINARY_TARGET)))
89700    !+classout=EVENTOUT;
89701     +          target %EM_BINARY_TARGET;
89702     +          class  %EM_BINARY_TARGET(&eventorder);
89703     +        run;
89705     +        data _null_;
89706     +          dsid = open("EVENTOUT");
89707     +          if dsid>0 then do;
89708     +          levelnum = VARNUM(dsid, "LEVEL");
89709     +          if levelnum then do;
89710     +            if ^fetch(dsid) then
89711     +              call symput('TARGET_EVENT',   strip(getvarc(dsid, levelnum)));
89713     +            if ^fetch(dsid) then
89714     +              call symput('TARGET_NONEVENT',strip(getvarc(dsid, levelnum)));
89715     +          end;
89716     +          dsid=close(dsid);
89717     +          end;
89718     +        run;
89719     +        proc datasets library=work nolist;
89720     +           delete eventout;
89721     +        run;
89722     +        quit;
89723     +      %end;
89724     +      %else %do;
89725     +         %let dsid=%sysfunc(open(&EM_DEC_DECMETA(where=(_TYPE_='TARGET'))));
89727     +         %let vn_event =%sysfunc(varnum(&dsid, EVENT));
89728     +         %let vn_target_type = %sysfunc(varnum(&dsid, TYPE));
89729     +         %let vn_target_format = %sysfunc(varnum(&dsid, FORMAT));
89731     +         %do %while(^ %sysfunc(fetch(&dsid)));
89732     +            %let Target_Event = %sysfunc(getvarc(&dsid, &vn_event));
89733     +            %let Target_Type =  %sysfunc(getvarc(&dsid, &vn_target_type));
89734     +            %let Target_Format = %sysfunc(getvarc(&dsid, &vn_target_format));
89735     +         %end;
89736     +         %let dsid = %sysfunc(close(&dsid));
89738     +         %let dsid=%sysfunc(open(&EM_DEC_DECDATA));
89739     +           %let obs = %sysfunc(fetchobs(&dsid, 2));
89740     +           %let vn_nonevent = %sysfunc(varnum(&dsid, %EM_BINARY_TARGET));
89741     +           %let Target_NonEvent= %sysfunc(getvarc(&dsid, &vn_nonevent));
89742     +         %let dsid = %sysfunc(close(&dsid));
89743     +      %end;
89745     +      %global ignbintarget;
89746     +      %let ignbintarget = %EM_BINARY_TARGET;
89748     +      data &EM_USER_NEWTRAIN;
89749     +        set &EM_IMPORT_DATA;
89750     +      run;
89751     +   %end;
89752     +   %else %do; /* preprocessing for interval target */
89753     +      %if &EM_PROPERTY_INTTARGETMETHOD=CUTUSER %then %do;
89754     +         proc dmdb data=&EM_IMPORT_DATA varout=minmax;
89755     +            var &target_var;
89756     +         run;
89758     +         data _null_;
89759     +            set minmax;
89760     +            call symput('tarmax',strip(max));
89761     +            call symput('tarmin',strip(min));
89762     +         run;
89764     +         /* cutoff can equal tarmin but not tarmax */
89765     +         %if %sysevalf(&EM_PROPERTY_USERCUTVALUE >= &tarmax) or
89765    !+%sysevalf(&EM_PROPERTY_USERCUTVALUE < &tarmin) %then %do;
89766     +            %let EMEXCEPTIONSTRING =
89766    !+exception.server.IGN.CUTOFFOUTOFRANGE,&tarmin,&tarmax;
89767     +            %put &em_codebar;
89768     +            %let errormsg = %sysfunc(sasmsg(sashelp.dmine, cutoffoutofrange_error,
89768    !+NOQUOTE, &tarmin, &tarmax));
89769     +            %put &errormsg;
89770     +            %put &em_codebar;
89771     +            %goto doendm;
89772     +         %end;
89773     +      %end;
89775     +      %global ignbintarget;
89776     +      %getVarName(&EM_IMPORT_DATA,
89776    !+BIN_%substr(%EM_INTERVAL_TARGET,1,%sysfunc(min(%length(%EM_INTERVAL_TARGET),28))),
89776    !+IGNBinTarget);
89778     +      %EM_IBN_IntTargetTrans(%EM_INTERVAL_TARGET,&EM_PROPERTY_INTTARGETMETHOD,newLev
89778    !+els=igntbinlevs);
89779     +      %if &igntbinlevs ne 2 %then %do;
89780     +         %let EMEXCEPTIONSTRING = exception.server.IGN.NONBINTARGETTRANS;
89781     +         %put &em_codebar;
89782     +         %let errormsg = %sysfunc(sasmsg(sashelp.dmine, nonbintargettrans_error,
89782    !+NOQUOTE));
89783     +         %put &errormsg;
89784     +         %put &em_codebar;
89785     +         %goto doendm;
89786     +      %end;
89788     +      %let Target_Event = 1;
89789     +      %let Target_NonEvent = 0;
89790     +      %let Target_Type = BINARY;
89791     +      %let Target_Format = ;
89793     +   %end;
89795     +   /* data sets */
89796     +   %EM_GETNAME(key=BINDATA,        type=DATA);
89797     +   %EM_GETNAME(key=SPLITVALS,      type=DATA);
89798     +   %EM_GETNAME(key=VARMAPPINGS,    type=DATA);
89799     +   %EM_GETNAME(key=BINMAPPINGS,    type=DATA);
89800     +   %EM_GETNAME(key=COARSE,          type=DATA);
89801     +   %EM_GETNAME(key=FINEDETAILDATA, type=DATA);
89802     +   %EM_GETNAME(key=RESULTSTABLE,   type=DATA);
89804     +   /* files */
89805     +   %EM_GETNAME(key=BINNINGCODE, type=FILE, extension=sas);
89806     +   %EM_GETNAME(key=GROUPMAPPINGSCORECODE, type=FILE, extension=sas);
89808     +   /* if freeze eq Y and no finedetaildata exists, throw an exception */
89809     +   %if &EM_PROPERTY_FREEZE eq Y %then %do;
89810     +     %if %sysfunc(exist(&EM_USER_FINEDETAILDATA, DATA)) ne 1 %then %do;
89811     +        %let EMEXCEPTIONSTRING = exception.server.EMTOOL.NOFINEDETAIL;
89812     +        %let  errmsg = %sysfunc(sasmsg(sashelp.dmine, nofinedetail_error , NOQUOTE))
89812    !+;
89814     +        %put &em_codebar;
89815     +        %put &errmsg;
89816     +        %put &em_codebar;
89817     +        %goto doendm;
89818     +     %end;
89819     +   %end;
89821     +   %global useImport;
89822     +   %let useImport = 0;
89824     +   %EM_GETNAME(key=IMPORTSUBSET, type=DATA);
89826     +   %if %sysfunc(exist(&EM_USER_IMPORTSUBSET, DATA)) %then %do;
89827     +     proc datasets library=&EM_LIB nolist;
89828     +       delete &EM_NODEID._IMPORTSUBSET;
89829     +     run;
89830     +     quit;
89831     +   %end;
89833     +   /* if importGrouping=Y, verify that data and all vars exist and are of the
89833    !+correct type */
89834     +   %if &EM_PROPERTY_IMPORTGROUPING eq Y %then %do;
89836     +     /* if import eq Y and no importtable exists, throw an exception */
89837     +     %if %sysfunc(exist(&EM_PROPERTY_IMPORTDATA, DATA)) ne 1 %then %do;
89838     +        %let EMEXCEPTIONSTRING = exception.server.EMTOOL.NOIMPORT;
89839     +        %let  errmsg = %sysfunc(sasmsg(sashelp.dmine, noimport_error , NOQUOTE));
89841     +        %put &em_codebar;
89842     +        %put &errmsg;
89843     +        %put &em_codebar;
89844     +        %goto doendm;
89845     +     %end;
89847     +      %let dsid = %sysfunc(open(&EM_PROPERTY_IMPORTDATA));
89848     +      %if &dsid %then %do;
89849     +         %let varnum = %sysfunc(VARNUM(&dsid, _VARIABLE_));
89850     +         %let splitnum = %sysfunc(VARNUM(&dsid, _SPLIT_VALUE_));
89851     +         %let grpnum = %sysfunc(VARNUM(&dsid, _GROUP_));
89852     +         %let lvlnum = %sysfunc(VARNUM(&dsid, _LEVEL_));
89854     +         %if (&varnum AND &splitnum AND &grpnum AND &lvlnum) %then %do;
89855     +           %let vtype = %sysfunc(VARTYPE(&dsid, &varnuM));
89856     +           %let stype = %sysfunc(VARTYPE(&dsid, &splitnum));
89857     +           %let gtype = %sysfunc(VARTYPE(&dsid, &grpnum));
89858     +           %let ltype = %sysfunc(VARTYPE(&dsid, &lvlnum));
89859     +         %end;
89860     +      %end;
89861     +      %if &dsid %then %let dsid = %sysfunc(close(&dsid));
89863     +      %if (&varnum AND &splitnum AND &grpnum AND &lvlnum) %then %do;
89864     +        %if ((&vtype eq C) AND (&stype eq C) AND (&gtype eq N) AND (&ltype eq C))
89864    !+%then %do;
89866     +        /* generate subset of data that contains those vars also found in training
89866    !+data and add display_var information */
89867     +        proc sort data=&EM_PROPERTY_IMPORTDATA out=tempimport;
89868     +           by _VARIABLE_ ;
89869     +        run;
89871     +        proc sort data=&EM_DATA_VARIABLESET out=tempvarset(keep=NAME
89871    !+rename=(NAME=_VARIABLE_));
89872     +          by NAME;
89873     +          where ((ROLE='INPUT' and USE in('Y', 'D')) or ROLE='REJECTED' and USE='Y')
89873    !+;
89874     +        run;
89876     +        data &EM_USER_IMPORTSUBSET;
89877     +          merge tempimport(in=_a) tempvarset(in=_b);
89878     +          length display_Var $32;
89879     +          by _VARIABLE_;
89880     +          display_var = _Variable_;
89881     +          if _a and _b then output;
89882     +        run;
89884     +        proc datasets library=work nolist;
89885     +          delete tempimport tempvarset;
89886     +        run;
89887     +        quit;
89889     +        %end;
89890     +      %end;
89891     +   %end;
89893     +   /* set useImport flag if there are obs in the importSubset dataset */
89894     +   %let dsid = %sysfunc(open(&EM_USER_IMPORTSUBSET));
89895     +   %if &dsid %then %do;
89896     +     %let nobs = %sysfunc(ATTRN(&dsid, NOBS));
89897     +     %if &nobs gt 0 %then %let useimport = 1;
89898     +   %end;
89899     +   %if &dsid %then %let dsid = %sysfunc(close(&dsid));
89901     +   %global useFreeze;
89902     +   %let useFreeze = 0;
89904     +   /* if Freeze=Y, verify that data and all vars exist and are of the correct type
89904    !+*/
89905     +   %EM_GETNAME(key=FREEZESUBSET, type=DATA);
89907     +   %if %sysfunc(exist(&EM_USER_FREEZESUBSET, DATA)) %then %do;
89908     +     proc datasets library=&EM_LIB nolist;
89909     +       delete &EM_NODEID._FREEZESUBSET;
89910     +     run;
89911     +     quit;
89912     +   %end;
89914     +   %if &EM_PROPERTY_FREEZE eq Y %then %do;
89916     +      /* create freezesubset data to contain information on pre-binned data and raw
89916    !+values */
89917     +      %EM_GENERATE_EXPORTGROUP(&EM_USER_FREEZESUBSET, OVERWRITE);
89919     +      %let dsid = %sysfunc(open(&EM_USER_FREEZESUBSET));
89920     +      %if &dsid %then %do;
89921     +         %let varnum = %sysfunc(VARNUM(&dsid, _VARIABLE_));
89922     +         %let splitnum = %sysfunc(VARNUM(&dsid, _SPLIT_VALUE_));
89923     +         %let grpnum = %sysfunc(VARNUM(&dsid, _GROUP_));
89924     +         %let lvlnum = %sysfunc(VARNUM(&dsid, _LEVEL_));
89926     +         %if (&varnum AND &splitnum AND &grpnum AND &lvlnum) %then %do;
89927     +           %let vtype = %sysfunc(VARTYPE(&dsid, &varnuM));
89928     +           %let stype = %sysfunc(VARTYPE(&dsid, &splitnum));
89929     +           %let gtype = %sysfunc(VARTYPE(&dsid, &grpnum));
89930     +           %let ltype = %sysfunc(VARTYPE(&dsid, &lvlnum));
89931     +         %end;
89932     +      %end;
89933     +      %if &dsid %then %let dsid = %sysfunc(close(&dsid));
89935     +      %if (&varnum AND &splitnum AND &grpnum AND &lvlnum) %then %do;
89936     +        %if ((&vtype eq C) AND (&stype eq C) AND (&gtype eq N) AND (&ltype eq C))
89936    !+%then %do;
89938     +        /* generate subset of data that contains those vars also found in training
89938    !+data */
89939     +        proc sort data=&EM_USER_FREEZESUBSET out=tempfreeze;
89940     +           by _VARIABLE_ ;
89941     +        run;
89943     +        proc sort data=&EM_DATA_VARIABLESET out=tempvarset(keep=NAME
89943    !+rename=(NAME=_VARIABLE_));
89944     +          by NAME;
89945     +          where ((ROLE='INPUT' and USE in('Y', 'D')) or ROLE='REJECTED' and USE='Y')
89945    !+;
89946     +        run;
89948     +        data &EM_USER_FREEZESUBSET;
89949     +          merge tempfreeze(in=_a) tempvarset(in=_b);
89950     +          length display_Var $32;
89951     +          by _VARIABLE_;
89952     +          display_var = _Variable_;
89953     +          if _a and _b then output;
89954     +        run;
89956     +        proc datasets library=work nolist;
89957     +          delete tempfreeze tempvarset;
89958     +        run;
89959     +        quit;
89960     +        %end;
89961     +      %end;
89962     +   %end;
89964     +   /* set useFreeze flag if there are obs in the freezeSubset dataset */
89965     +   %let dsid = %sysfunc(open(&EM_USER_FREEZESUBSET));
89966     +   %if &dsid %then %do;
89967     +     %let nobs = %sysfunc(ATTRN(&dsid, NOBS));
89968     +     %if &nobs gt 0 %then %let useFreeze = 1;
89969     +   %end;
89970     +   %if &dsid %then %let dsid = %sysfunc(close(&dsid));
89972     +   /* if finedetail already exists, delete prior to re-run */
89973     +   %if %sysfunc(exist(&EM_USER_FINEDETAILDATA, DATA)) %then %do;
89974     +     proc datasets library=&EM_LIB nolist;
89975     +       delete &EM_NODEID._FINEDETAILDATA;
89976     +     run;
89977     +     quit;
89978     +   %end;
89980     +   data tempvarnames;
89981     +     set &EM_DATA_VARIABLESET;
89982     +     where ((ROLE='INPUT' and USE in('Y', 'D')) or (ROLE='REJECTED' and USE='Y'))
89982    !+and level ne 'UNARY';
89983     +     keep NAME LEVEL LABEL;
89984     +   run;
89986     +   proc dmdb data=tempvarnames outtable=tempmapping nameserver;
89987     +     names NAME;
89988     +     prefix WOE_ GRP_ ;
89989     +   run;
89991     +   proc sort data=tempmapping; by name; run;
89992     +   proc sort data=tempvarnames; by name; run;
89993     +   data tempmapping;
89994     +     merge tempmapping tempvarnames;
89995     +     by NAME;
89996     +     rename LEVEL=procLevel;
89997     +   run;
89999     +   /* generate initial columns of mapping table by setting grpflag=0 */
90000     +   %EM_GENERATE_MAPPING_TABLE;
90002     +   proc datasets library=work nolist;
90003     +     delete tempImport tempScore;
90004     +   run;
90005     +   quit;
90007     +   /* delete splitvals dataset if this existed prior to run */
90008     +   %let nvars=0;
90009     +   %let sdsid = %sysfunc(open(&EM_USER_SPLITVALS));
90010     +   %if &sdsid > 0 %then %do;
90011     +      %let nvars = %sysfunc(ATTRN(&sdsid, NVARS));
90012     +   %end;
90013     +   %if &sdsid > 0 %then  %let sdsid=%sysfunc(close(&sdsid));
90015     +   %if &nvars > 0 %then %do;
90016     +      proc datasets library=&EM_LIB nolist;
90017     +        delete &EM_NODEID._SPLITVALS;
90018     +      run;
90019     +      quit;
90020     +   %end;
90022     +   %global classvars qclassvars;
90023     +   %let classvars=;
90024     +   %let qclassvars=;
90026     +   /* generate the intervalvars and classvars macros */
90027     +   %EM_PRE_BINNING(&EM_USER_NEWTRAIN);
90029     +   /* update varmappings with any changes to procLevel based on discretemid */
90030     +   data &EM_USER_VARMAPPINGS;
90031     +     set &EM_USER_VARMAPPINGS;
90032     +     /* procLevel column to indicate the level used by proc; this handles*/
90033     +     /* cases in which var is marked INTERVAL in metadat but treated as  */
90034     +     /* ordinal in prebinning because of # unique levels                 */
90035     +     %let dsid = %sysfunc(open(work._discretemid));
90036     +     %if &dsid %then %do;
90037     +       %let varnum = %sysfunc(VARNUM(&dsid, VARIABLE));
90038     +       %let obs = %sysfunc(fetch(&dsid));
90039     +       %do %while(&obs=0);
90040     +          %let varname = %sysfunc(getvarc(&dsid, &varnum));
90041     +          if _variable_ = "&varname" then procLevel = "ORDINAL";
90042     +          %let obs = %sysfunc(fetch(&dsid));
90043     +       %end;
90044     +     %end;
90045     +     %if &dsid %then %let dsid = %sysfunc(close(&dsid));
90046     +     label procLevel =  "%sysfunc(sasmsg(sashelp.dmine, rpt_proclevel_vlabel ,
90046    !+NOQUOTE))";
90047     +   run;
90049     +   /* generate Grp_xxx variables for interval inputs */
90050     +   %if &EM_PROPERTY_BINMETHOD eq QUANTILE %then %do;
90051     +     %EM_QUANTILE_BINNING(&EM_USER_NEWTRAIN, WORK.PCTILE, &EM_USER_BINDATA,
90051    !+&EM_USER_BINNINGCODE);
90053     +   %end;
90054     +   %else %do;
90055     +     %EM_EQUAL_SPACED_BINNING(&EM_USER_NEWTRAIN, &EM_USER_BINDATA,
90055    !+&EM_USER_BINNINGCODE);
90056     +   %end;
90058     +   /* generate GRP_XXX variables for nominal inputs */
90059     +   %EM_CLASSVARS_GROUP(&EM_PROPERTY_CLASSGROUPRARE);
90061     +   /* generate GRP_XXX variables for ordinal inputs */
90062     +   %EM_ORDVARS_GROUP;
90064     +   proc print data=&EM_USER_VARMAPPINGS label;
90065     +     var _VARIABLE_ _GRP_VARIABLE_ ;
90066     +   run;
90068     +   /* add _proc_var_ to varmappings data to know names of processed variables; could
90068    !+ be original input, could be bin_xxx */
90069     +   proc sort data=&EM_USER_SPLITVALS out=tempsplitvals nodupkey;
90070     +     by _VARIABLE_;
90071     +   run;
90073     +   data &EM_USER_VARMAPPINGS;
90074     +     set &EM_USER_VARMAPPINGS;
90075     +     length _proc_var_ $32;
90076     +     %let dsid = %sysfunc(open(work.tempsplitvals));
90077     +     %if &dsid %then %do;
90078     +        %let obs = %sysfunc(fetch(&dsid));
90079     +        %do %while(&obs=0);
90080     +          %let dispnum = %sysfunc(VARNUM(&dsid, DISPLAY_VAR));
90081     +          %let dispvar = %sysfunc(getvarc(&dsid, &dispnum));
90082     +          %let varnum = %sysfunc(VARNUM(&dsid, _VARIABLE_));
90083     +          %let var = %sysfunc(getvarc(&dsid, &varnum));
90085     +          if upcase(_VARIABLE_) = %upcase("&dispvar") then _proc_var_ = "&var";
90086     +          %let obs = %sysfunc(fetch(&dsid));
90087     +        %end;
90088     +     %end;
90089     +     if missing(_proc_var_) then _proc_var_=_variable_;
90090     +     %if &dsid %then %let dsid = %sysfunc(close(&dsid));
90091     +   run;
90093     +   proc datasets library=work nolist;
90094     +     delete sortedbin tempsplitvals;
90095     +   run;
90096     +   quit;
90098     +   /* calculate Fine Detail statistics for each input */
90099     +   %EM_FINE_DETAIL(&EM_USER_BINDATA, &EM_USER_VARMAPPINGS, &EM_USER_FINEDETAILDATA,
90099    !+&EM_USER_SPLITVALS, &EM_USER_BINMAPPINGS);
90101     +   /* apply grouping and create grouped dataset */
90102     +   %EM_CREATE_GROUPING(&EM_USER_BINDATA, &EM_USER_FINEDETAILDATA, &EM_USER_COARSE);
90104     +   /* generate _label_ values in the COARSE dataset from the Scored data */
90105     +   filename Y "&EM_USER_GROUPMAPPINGSCORECODE";
90106     +   %EM_GENERATE_LABELVALUES(Y, &EM_USER_SPLITVALS, &EM_USER_BINMAPPINGS,
90106    !+&EM_USER_COARSE);
90107     +   filename Y;
90109     +   /* set EM_MODEL ASSESS=N to prevent assessment reports from being generated */
90110     +   %EM_MODEL(Target= &ignbintarget, ASSESS=N);
90112     +   /* generate reports */
90113     +   %EM_REPORT(key=COARSE, viewtype=DATA, block=MODEL, description=EVENTRATESTAT,
90113    !+autodisplay=N, spk=N);
90116     +   %doendm:
90117     +%mend train;
NOTE: %INCLUDE (level 1) ending.
MPRINT(MAIN):   filename temp;
NOTE: Fileref TEMP has been deassigned.
MPRINT(TRAIN):   filename trtemp catalog 'sashelp.emmdfy.binning_trainmacros.source';
NOTE: %INCLUDE (level 1) file TRTEMP is file SASHELP.EMMDFY.BINNING_TRAINMACROS.SOURCE.
90119     +%macro EM_GENERATE_MAPPING_TABLE;
90121     +  %EM_GETNAME(key=VARMAPPINGS, type=DATA);
90122     +  data &EM_USER_VARMAPPINGS(keep=_variable_  _grp_variable_ procLevel label);
90123     +   length _variable_  _grp_variable_  $32 procLevel $8;
90124     +   set tempmapping;
90125     +   label _variable_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_inputvar_vlabel ,
90125    !+NOQUOTE))"
90126     +         _grp_variable_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_grpvar_vlabel ,
90126    !+NOQUOTE))";
90128     +         _variable_ = NAME;
90129     +         _grp_variable_ = GRP;
90130     + run;
90132     +%mend EM_GENERATE_MAPPING_TABLE;
90134     +%macro EM_PRE_BINNING(input);
90135     +    /* Determine which of our variables are interval  */
90137     +    data tempvariableset;
90138     +      set &EM_DATA_VARIABLESET;
90139     +      where LEVEL = 'INTERVAL' and ((ROLE='INPUT' and USE in ('Y', 'D')) OR
90139    !+(ROLE='REJECTED' and USE='Y'));
90140     +    run;
90142     +    /* add all interval vars to the intervalvar macro
90143     +    %let dsid = %sysfunc(open(work.tempvariableset));
90144     +    %if &dsid %then %do;
90145     +       %let varnum = %sysfunc(VARNUM(&dsid, NAME));
90146     +       %let obs = %sysfunc(fetch(&dsid));
90147     +       %do %while(&obs=0);
90148     +          %let varname = %sysfunc(getvarc(&dsid, &varnum));
90149     +          %let intervalvars = &intervalvars &varname;
90150     +          %let obs = %sysfunc(fetch(&dsid));
90151     +       %end;
90152     +    %end;
90153     +    %if &dsid %then %let dsid = %sysfunc(close(&dsid));
90154     + */
90156     +   %em_varmacro(name=intervalvars, metadata=tempvariableset, key=NAME,
90156    !+nummacro=num_intvars);
90158     +    /* Determine which variables marked as interval are true interval distributions;
90158    !+ */
90159     +    /* intmid contains variables that are actually interval and should be binned; */
90160     +    /* discretemid contains variables that are actually discrete and should NOT be
90160    !+binned */
90161     +    %if %intervalvars ne %then %do;
90162     +      %let _maxlevel = %eval(&EM_PROPERTY_NUMBINS + 1);
90163     +      proc dmdb data=&input classout=_CLASSOUT maxlevel=&_maxlevel;
90164     +        class %intervalvars;
90165     +      run;
90166     +      proc freq data=_CLASSOUT order=DATA noprint;
90167     +         table NAME / OUT= _COUNT(where=(COUNT<&_maxlevel));
90168     +      run;
90170     +      %let _INTBINS=;
90171     +      data _null_;
90172     +        set _COUNT;
90173     +        call symput('_INTBINS',symget('_INTBINS') !! ' ' !! ktrim(kleft(NAME)));
90174     +      run;
90176     +      proc sort data=_CLASSOUT;
90177     +        by NAME;
90178     +      run;
90179     +      proc transpose data=_CLASSOUT out=_OUT(DROP=_NAME_ RENAME=(NAME=VARIABLE))
90179    !+prefix=_MIDPOINT;
90180     +        var NRAW;
90181     +        by NAME;
90182     +      run;
90184     +      data _null_;
90185     +        dsid = open('_OUT');
90186     +        if dsid then do;
90187     +           call symput('NUMCLASSBARS', kleft(ktrim(put(attrn(dsid, 'NVARS')-1,
90187    !+best12.))));
90188     +           csid = close(dsid);
90189     +        end;
90190     +      run;
90191     +      data _INTMID;
90192     +        set _OUT;
90193     +        keep VARIABLE _MIDPOINT1--_MIDPOINT&numclassbars;
90194     +        %if "&EM_PROPERTY_APPLYLEVELRULE" ne "N" %then %do;
90195     +          if ^indexw("&_INTBINS", VARIABLE) then output;
90196     +        %end;
90197     +      run;
90199     +      %if "&EM_PROPERTY_APPLYLEVELRULE" ne "N" %then %do;
90200     +        data _DISCRETEMID;
90201     +          set _OUT;
90202     +          keep VARIABLE _MIDPOINT1--_MIDPOINT&numclassbars;
90203     +          if indexw("&_INTBINS", VARIABLE) then output;
90204     +        run;
90205     +      %end;
90206     +      %else %do;
90207     +         %if %sysfunc(exist(_discretemid)) %then %do;
90208     +            proc delete data=_discretemid;
90209     +            run;
90210     +         %end;
90211     +      %end;
90213     +      /* add vars from the _DISCRETEMID dataset to the classvars macro
90214     +      %let dsid = %sysfunc(open(WORK._DISCRETEMID));
90215     +      %if &dsid %then %do;
90216     +        %let varnum = %sysfunc(VARNUM(&dsid, VARIABLE));
90217     +        %let obs = %sysfunc(fetch(&dsid));
90219     +        %do %while(&obs=0);
90220     +          %let var = %sysfunc(getvarc(&dsid, &varnum));
90221     +          %let classvars = &classvars &var;
90222     +          %let qclassvars = &qclassvars "&var";
90223     +          %let obs = %sysfunc(fetch(&dsid));
90224     +        %end;
90225     +      %end;
90226     +      %if &dsid  %then %let dsid = %sysfunc(close(&dsid));
90227     +*/
90228     +    %end;
90229     +    %else %do;
90230     +      %if %sysfunc(exist(_intmid)) %then %do;
90231     +         proc delete data=_intmid;
90232     +         run;
90233     +      %end;
90235     +      %if %sysfunc(exist(_discretemid)) %then %do;
90236     +         proc delete data=_discretemid;
90237     +         run;
90238     +      %end;
90239     +    %end;
90241     +    /* if import grouping then remove interval vars in import data from _INTMID */
90242     +    %if &useImport eq 1 %then %do;
90244     +      proc sort data=&EM_USER_IMPORTSUBSET out=tempsubset nodupkey;
90245     +        by _VARIABLE_;
90246     +      run;
90248     +      data &EM_USER_IMPORTSUBSET;
90249     +        length CODEVAR $32;
90250     +        set &EM_USER_IMPORTSUBSET;
90251     +        if CODEVAR eq '' then CODEVAR=_VARIABLE_;
90252     +      run;
90254     +      proc sort data=&EM_USER_IMPORTSUBSET out=tempsubset nodupkey;
90255     +        by _VARIABLE_;
90256     +      run;
90258     +      %let dsid = %sysfunc(open(work.tempsubset));
90259     +      %let nobs = 0;
90260     +      %if &dsid %then %do;
90261     +        %let nobs = %sysfunc(ATTRN(&dsid, NOBS));
90262     +      %end;
90263     +      %if &dsid %then %let dsid=%sysfunc(close(&dsid));
90265     +      data tempsubset;
90266     +        set tempsubset;
90267     +        length  binVar suffix $32;
90268     +        array binnames{&nobs} $32 _temporary_;
90269     +        retain binVar binnames;
90270     +        by _VARIABLE_;
90272     +        binVar = 'BIN_'!!strip(CODEVAR);
90273     +        binVar = ksubstr(binVar, 1, 32);
90274     +        count = 1;
90276     +        do i=1 to _N_;
90277     +           do while(binvar eq binnames(i));
90278     +              suffix = strip(put(count,best.));
90279     +              binvar = ksubstr(binvar, 1, 32-klength(suffix))!!suffix;
90280     +              count + 1;
90281     +           end;
90282     +        end;
90283     +        binnames(_N_)= binvar;
90284     +        output;
90285     +        drop suffix count i;
90286     +     run;
90288     +     data &EM_USER_IMPORTSUBSET;
90289     +       set &EM_USER_IMPORTSUBSET;
90290     +       length binVar $32;
90292     +        %let dsid = %sysfunc(open(work.tempsubset));
90293     +        %if &dsid %then %do;
90294     +          %let varnum = %sysfunc(VARNUM(&dsid, _VARIABLE_));
90295     +          %let binnum = %sysfunc(VARNUM(&dsid, binVar));
90296     +          %let obs = %sysfunc(fetch(&dsid));
90298     +          %do %while(&obs=0);
90299     +            %let var = %sysfunc(getvarc(&dsid, &varnuM));
90300     +            %let binvar = %sysfunc(getvarc(&dsid, &binnum));
90302     +            if _variable_ = "&var" and _level_="INTERVAL" then binVar="&binvar";
90303     +            %let obs = %sysfunc(fetch(&dsid));
90304     +          %end;
90305     +        %end;
90306     +        %if &dsid %then %let dsid = %sysfunc(close(&dsid));
90307     +        /* replace _LEVEL_ to ORDINAL for all binned interval vars; */
90308     +        if binVar ne "" then do;
90309     +          _LEVEL_ = "ORDINAL";
90310     +        end;
90312     +      run;
90314     +      %let idsidexists=0;
90315     +      %let idsid = %sysfunc(open(work._intmid));
90316     +      %if &idsid %then %do;
90317     +        %let idsidexists=1;
90318     +        %let idsid = %sysfunc(close(&idsid));
90319     +      %end;
90321     +      %if &idsidexists = 1 %then %do;
90322     +      data _INTMID;
90323     +        set _INTMID;
90325     +        %let dsid = %sysfunc(open(work.tempsubset));
90326     +        %if &dsid %then %do;
90327     +          %let varnum = %sysfunc(VARNUM(&dsid, CODEVAR));
90328     +          %let obs = %sysfunc(fetch(&dsid));
90330     +          %do %while(&obs=0);
90331     +            %let codevar = %sysfunc(getvarc(&dsid, &varnuM));
90332     +            if variable = "&codevar" then delete;
90333     +            %let obs = %sysfunc(fetch(&dsid));
90334     +          %end;
90335     +        %end;
90336     +        %if &dsid %then %let dsid = %sysfunc(close(&dsid));
90337     +      run;
90338     +      %end;
90340     +      proc datasets library=work nolist;
90341     +        delete tempsubset;
90342     +      run;
90343     +      quit;
90344     +    %end;
90346     +    /* if freeze then remove interval vars in import data from _INTMID */
90347     +    %if &useFreeze eq 1 %then %do;
90349     +      data &EM_USER_FREEZESUBSET;
90350     +        length CODEVAR $32;
90351     +        set &EM_USER_FREEZESUBSET;
90352     +        if CODEVAR eq '' then CODEVAR=_VARIABLE_;
90353     +      run;
90355     +      proc sort data=&EM_USER_FREEZESUBSET out=tempsubset nodupkey;
90356     +        by _VARIABLE_;
90357     +      run;
90359     +      %let dsid = %sysfunc(open(work.tempsubset));
90360     +      %let nobs = 0;
90361     +      %if &dsid %then %do;
90362     +        %let nobs = %sysfunc(ATTRN(&dsid, NOBS));
90363     +      %end;
90364     +      %if &dsid %then %let dsid=%sysfunc(close(&dsid));
90366     +      data tempsubset;
90367     +        set tempsubset;
90368     +        length  binVar suffix $32;
90369     +        array binnames{&nobs} $32 _temporary_;
90370     +        retain binVar binnames;
90371     +        by _VARIABLE_;
90373     +        binVar = 'BIN_'!!strip(CODEVAR);
90374     +        binVar = ksubstr(binVar, 1, 32);
90375     +        count = 1;
90377     +        do i=1 to _N_;
90378     +           do while(binvar eq binnames(i));
90379     +              suffix = strip(put(count,best.));
90380     +              binvar = ksubstr(binvar, 1, 32-klength(suffix))!!suffix;
90381     +              count + 1;
90382     +           end;
90383     +        end;
90384     +        binnames(_N_)= binvar;
90385     +        output;
90386     +        drop suffix count i;
90387     +     run;
90389     +     data &EM_USER_FREEZESUBSET;
90390     +       set &EM_USER_FREEZESUBSET;
90391     +       length binVar $32;
90393     +        %let dsid = %sysfunc(open(work.tempsubset));
90394     +        %if &dsid %then %do;
90395     +          %let varnum = %sysfunc(VARNUM(&dsid, _VARIABLE_));
90396     +          %let binnum = %sysfunc(VARNUM(&dsid, binVar));
90397     +          %let obs = %sysfunc(fetch(&dsid));
90399     +          %do %while(&obs=0);
90400     +            %let var = %sysfunc(getvarc(&dsid, &varnuM));
90401     +            %let binvar = %sysfunc(getvarc(&dsid, &binnum));
90403     +            if _variable_ = "&var" and _level_="INTERVAL" then binVar="&binvar";
90404     +            %let obs = %sysfunc(fetch(&dsid));
90405     +          %end;
90406     +        %end;
90407     +        %if &dsid %then %let dsid = %sysfunc(close(&dsid));
90409     +        /* replace _LEVEL_ to ORDINAL for all binned interval vars; */
90410     +        if binVar ne "" then do;
90411     +          _LEVEL_ = "ORDINAL";
90412     +        end;
90414     +      run;
90416     +      %let idsidexists= 0;
90417     +      %let idsid = %sysfunc(open(work._intmid));
90418     +      %if &idsid %then %do;
90419     +        %let idsidexists=1;
90420     +        %let idsid = %sysfunc(close(&idsid));
90421     +      %end;
90422     +      %if &idsidexists eq 1 %then %do;
90423     +      data _INTMID;
90424     +        set _INTMID;
90426     +        %let dsid = %sysfunc(open(work.tempsubset));
90427     +        %if &dsid %then %do;
90428     +          %let varnum = %sysfunc(VARNUM(&dsid, CODEVAR));
90429     +          %let obs = %sysfunc(fetch(&dsid));
90431     +          %do %while(&obs=0);
90432     +            %let codevar = %sysfunc(getvarc(&dsid, &varnuM));
90433     +            if variable = "&codevar" then delete;
90434     +            %let obs = %sysfunc(fetch(&dsid));
90435     +          %end;
90436     +        %end;
90437     +        %if &dsid %then %let dsid = %sysfunc(close(&dsid));
90438     +      run;
90439     +      %end;
90441     +      proc datasets library=work nolist;
90442     +        delete tempsubset;
90443     +      run;
90444     +      quit;
90446     +    %end;
90448     +%mend EM_PRE_BINNING;
90450     +%macro EM_IMPORT_BINNING(binningCode);
90453     +   data tempintimport;
90454     +     set &EM_USER_IMPORTSUBSET;
90455     +     if binflag = 1;
90456     +   run;
90458     +   %let idsid = %sysfunc(open(work.tempintimport));
90459     +   %if &idsid %then %do;
90460     +     %let nvars = %sysfunc(ATTRN(&idsid, NVARS));
90461     +     %let nobs = %sysfunc(ATTRN(&idsid, NOBS));
90462     +   %end;
90463     +   %else %do;
90464     +     %let nvars = 0;
90465     +     %let nobs = 0;
90466     +   %end;
90467     +   %if &idsid %then %let idsid=%sysfunc(close(&idsid));
90469     +   proc datasets library=work nolist;
90470     +     delete tempintimport;
90471     +   run;
90472     +   quit;
90474     +   %if ((&nobs gt 0) and (&nvars gt 0))%then %do;
90476     +      filename X "&binningCode";
90477     +      data _null_;
90478     +        FILE X MOD;
90479     +        %let bin_variables=;
90480     +        %let quote_bin_variables = ;
90481     +        %let choice = binflag = 1;
90482     +        %let dsid = %sysfunc(open(&EM_USER_IMPORTSUBSET(where=(&choice))));
90483     +        %if &dsid %then %do;
90484     +           %let namenum = %sysfunc(VARNUM(&dsid, CODEVAR));
90485     +           %let binnum  = %sysfunc(VARNUM(&dsid, binVar));
90486     +           %let valnum  = %sysfunc(VARNUM(&dsid, _SPLIT_VALUE_));
90487     +           %let note = %sysfunc(sasmsg(sashelp.dmine, generatingbins_note ,
90487    !+NOQUOTE));
90489     +           put "&EM_CODEBAR;";
90490     +           put " &note; ";
90491     +           put "&EM_CODEBAR;";
90493     +           /* retrieve value for first obs */
90494     +           %let obs = %sysfunc(fetchobs(&dsid, 1));
90495     +           %let oldname = %sysfunc(getvarc(&dsid, &namenum));
90496     +           %let value   = %sysfunc(getvarc(&dsid,  &valnum));
90498     +           %let binvalue = %sysfunc(getvarc(&dsid, &binnum));
90499     +           %let i = 1;
90500     +           %if %sysfunc(index(%upcase(&BIN_VARIABLES) , %upcase(&binvalue))) eq 0
90500    !+%then %do;
90501     +             %let BIN_VARIABLES=&BIN_VARIABLES &binvalue;
90502     +           %end;
90503     +           %let QUOTE_BIN_VARIABLES=&QUOTE_BIN_VARIABLES "&namevalue";
90504     +           put " ";
90505     +           put "if &oldname eq . then &binvalue = .;";
90507     +           /* cycle through special codes if they exist */
90508     +           %let index2 = %index(&oldname, SV_);
90509     +           %if &index2 gt 0 %then %do;
90510     +             %let choice = CODEVAR ="&oldname";
90511     +             %let cdsid = %sysfunc(open(&EM_USER_CODEMAPPINGS(where=(&choice))));
90512     +             %if &cdsid %then %do;
90513     +                %let codenum = %sysfunc(VARNUM(&cdsid, CODE));
90514     +                %let cobs = %sysfunc(fetch(&cdsid));
90515     +                %do %while(&cobs=0);
90516     +                   %let code = %sysfunc(getvarc(&cdsid, &codenum));
90517     +                    put "else if &oldname eq &code then &binvalue = &code;";
90518     +                   %let cobs = %sysfunc(fetch(&cdsid));
90519     +                %end;
90520     +             %end;
90521     +             %if &cdsid %then %let cdsid = %sysfunc(close(&cdsid));
90522     +           %end;
90523     +           put "else ";
90524     +           %if "&value" eq "." %then %do;
90525     +             put " &binvalue=&i;";
90526     +           %end;
90527     +           %else %do;
90528     +             put "  if &oldname < &value then &binvalue=&i;";
90529     +           %end;
90531     +           %let i= %eval(&i+1);
90533     +           %let obs = %sysfunc(fetch(&dsid));
90534     +           %do %while(&obs=0);
90535     +              %let namevalue = %sysfunc(getvarc(&dsid, &namenum));
90536     +              %let binvalue = %sysfunc(getvarc(&dsid, &binnum));
90537     +              %let value    = %sysfunc(getvarc(&dsid,  &valnum));
90539     +              %if "&oldname" ne "&namevalue" %then %do;
90541     +                /* if variable has been re-coded for special codes, must include
90541    !+these values as well */
90542     +                put;
90543     +                put "if &namevalue eq . then &binvalue = .;";
90545     +                %let i=1;
90546     +                %if %sysfunc(index(%upcase(&BIN_VARIABLES) , %upcase(&binvalue))) eq
90546    !+ 0 %then %do;
90547     +                  %let BIN_VARIABLES=&BIN_VARIABLES &binvalue;
90548     +                %end;
90549     +                %let QUOTE_BIN_VARIABLES=&QUOTE_BIN_VARIABLES "&namevalue";
90551     +                /* cycle through special codes if they exist */
90552     +                %let index2 = %index(&namevalue, SV_);
90553     +                %if &index2 gt 0 %then %do;
90554     +                  %let choice = CODEVAR ="&namevalue";
90555     +                  %let cdsid =
90555    !+%sysfunc(open(&EM_USER_CODEMAPPINGS(where=(&choice))));
90556     +                  %if &cdsid %then %do;
90557     +                     %let codenum = %sysfunc(VARNUM(&cdsid, CODE));
90558     +                     %let cobs = %sysfunc(fetch(&cdsid));
90559     +                     %do %while(&cobs=0);
90560     +                       %let code = %sysfunc(getvarc(&cdsid, &codenum));
90561     +                       put "else if &namevalue eq &code then &binvalue = &code;";
90562     +                       %let cobs = %sysfunc(fetch(&cdsid));
90563     +                     %end;
90564     +                  %end;
90565     +                %if &cdsid %then %let cdsid = %sysfunc(close(&cdsid));
90566     +                %end;
90567     +                put "else ";
90568     +                %if "&value" ne "." %then %do;
90569     +                  put "  if &namevalue < &value then &binvalue=&i;";
90570     +                %end;
90571     +                %else %do;
90572     +                  put " &binvalue=&i;";
90573     +                %end;
90575     +              %end;
90576     +              %else %do;
90577     +                put "else ";
90578     +                %if "&value" ne "." %then %do;
90579     +                  put "  if &namevalue < &value then &binvalue=&i;";
90580     +                %end;
90581     +                %else %do;
90582     +                  put "  &binvalue=&i;";
90583     +                %end;
90584     +              %end;
90585     +              %let i = %eval(&i + 1);
90586     +              %let obs = %sysfunc(fetch(&dsid));
90587     +              %let oldname = &namevalue;
90588     +              %let oldbinvalue = &binvalue;
90589     +           %end;
90590     +        %end;
90591     +        %if &dsid >0 %then %let dsid = %sysfunc(close(&dsid));
90593     +      run;
90594     +      filename X;
90595     +      /* generate BINMAPPINGS dataset */
90596     +      data TEMPBINMAPPINGS;
90597     +        length NAME BIN_NAME $32 BIN GRP $8 LB UB 8 EM_BIN_LABEL $200 display_Var
90597    !+grp_name $32;
90599     +        %let choice = binflag = 1;
90600     +        %let dsid = %sysfunc(open(&EM_USER_IMPORTSUBSET(where=(&choice))));
90601     +        %if &dsid %then %do;
90602     +           %let varnum  = %sysfunc(VARNUM(&dsid, _VARIABLE_));
90603     +           %let codenum = %sysfunc(VARNUM(&dsid, CODEVAR));
90604     +           %let binnum  = %sysfunc(VARNUM(&dsid, binVar));
90605     +           %let valnum  = %sysfunc(VARNUM(&dsid, _SPLIT_VALUE_));
90606     +           %let grpnum  = %sysfunc(VARNUM(&dsid, _group_));
90608     +           /* retrieve information from first obs */
90609     +           %let obs = %sysfunc(fetchobs(&dsid, 1));
90610     +           %let oldvar = %sysfunc(getvarc(&dsid, &varnum));
90611     +           %let oldcodevar = %sysfunc(getvarc(&dsid, &codenum));
90612     +           %let oldbinvar  = %sysfunc(getvarc(&dsid, &binnum));
90613     +           %let oldgrpvar = GRP_%sysfunc(ksubstr(&oldbinvar,5));
90614     +           %let oldvalue   = %sysfunc(getvarc(&dsid, &valnum));
90615     +           %let oldgrpvalue = %sysfunc(getvarn(&dsid, &grpnum));
90616     +           %let i = 1;
90618     +           NAME = "&OLDCODEVAR";
90619     +           BIN_NAME = "&OLDBINVAR";
90620     +           GRP_NAME = "&OLDGRPVAR";
90621     +           BIN = "&i";
90622     +           GRP = "&oldgrpvalue";
90623     +           LB = . ;
90624     +           UB = &oldvalue;
90625     +           EM_BIN_LABEL = "&oldvar < &oldvalue" ;
90626     +           DISPLAY_VAR = "&oldvar";
90627     +           output;
90629     +           %let i = 2;
90630     +           %let obs = %sysfunc(fetch(&dsid));
90631     +           %do %while(&obs=0);
90632     +             %let var = %sysfunc(getvarc(&dsid, &varnum));
90633     +             %let codevar = %sysfunc(getvarc(&dsid, &codenum));
90634     +             %let binvar  = %sysfunc(getvarc(&dsid, &binnum));
90635     +             %let grpvar = GRP_%sysfunc(ksubstr(&binvar,5));
90636     +             %let value   = %sysfunc(getvarc(&dsid, &valnum));
90637     +             %let group   = %sysfunc(getvarn(&dsid, &grpnum));
90639     +             %if "&oldvar" ne "&var" %then %do;
90640     +              %let i = 1;
90641     +               %let oldvalue = .;
90642     +             %end;
90644     +             NAME = "&CODEVAR";
90645     +             BIN_NAME = "&BINVAR";
90646     +             GRP_NAME = "&GRPVAR";
90647     +             BIN = "&i";
90648     +             GRP = "&group";
90649     +             LB = &oldvalue ;
90650     +             UB = &value;
90651     +             %if "&oldvalue" ne "." AND "&value" ne "." %then %do;
90652     +               EM_BIN_LABEL = "&oldvalue <= &var < &value" ;
90653     +             %end;
90654     +             %else %do;
90655     +               %if "&oldvalue" eq "." %then %do;
90656     +                 EM_BIN_LABEL = "&var < &value" ;
90657     +               %end;
90658     +               %if "&value" eq "." %then %do;
90659     +                 EM_BIN_LABEL = "&oldvalue >= &var";
90660     +               %end;
90661     +             %end;
90662     +             DISPLAY_VAR = "&var";
90663     +             output;
90665     +             %let oldvar = &var;
90666     +             %let oldcodevar = &codevar;
90667     +             %let oldbinvar = &binvar;
90668     +             %let oldgrpvar = &grpvar;
90669     +             %let oldvalue   = &value;
90670     +             %let oldgrpvalue   = &group;
90671     +             %let i = %eval(&i + 1);
90672     +             %let obs = %sysfunc(fetch(&dsid));
90673     +           %end;
90674     +        %end;
90675     +        %if &dsid %then %let dsid=%sysfunc(close(&dsid));
90676     +      run;
90678     +      data &EM_USER_BINMAPPINGS;
90679     +        set &EM_USER_BINMAPPINGS tempBinMappings;
90680     +        if NAME = "" and BIN_NAME = "" and BIN= "" then delete;
90681     +      run;
90683     +      /* update importsubset with bin values instead of raw values */
90684     +      data &EM_USER_IMPORTSUBSET;
90685     +        set &EM_USER_IMPORTSUBSET;
90687     +        %let dsid = %sysfunc(open(&EM_USER_BINMAPPINGS));
90688     +        %if &dsid %then %do;
90689     +          %let binvarnum = %sysfunc(VARNUM(&dsid, BIN_NAME));
90690     +         %let displaynum = %sysfunc(VARNUM(&dsid, DISPLAY_VAR));
90691     +          %let binnum    = %sysfunc(VARNUM(&dsid, BIN));
90692     +          %let codenum   = %sysfunc(VARNUM(&dsid, NAME));
90693     +          %let ubnum     = %sysfunc(VARNUM(&dsid, UB));
90694     +          %let lbnum     = %sysfunc(VARNUM(&dsid, LB));
90696     +          %let oldvar = ;
90697     +          %let obs = %sysfunc(fetch(&dsid));
90698     +          %do %while(&obs=0);
90699     +            %let binvar = %sysfunc(getvarc(&dsid, &binvarnum));
90700     +            %let codevar = %sysfunc(getvarc(&dsid, &codenum));
90701     +            %let displayvar = %sysfunc(getvarc(&dsid, &displaynum));
90702     +            %let bin    = %sysfunc(getvarc(&dsid, &binnum));
90703     +            %let ub     = %sysfunc(getvarn(&dsid, &ubnum));
90704     +            %let lb     = %sysfunc(getvarn(&dsid, &lbnum));
90706     +            %if "&oldvar" eq "&displayvar" %then %do;
90707     +              else
90708     +            %end;
90709     +            if BinVar = "&binvar" and _SPLIT_VALUE_ = "&UB" then do;
90710     +               _SPLIT_VALUE_ = "&bin";
90711     +            end;
90712     +            %let oldvar = &displayvar;
90713     +            %let obs = %sysfunc(fetch(&dsid));
90714     +          %end;
90715     +        %end;
90716     +        %if &dsid %then %let dsid = %sysfunc(close(&dsid));
90717     +      run;
90719     +      proc sort data=&EM_USER_IMPORTSUBSET;
90720     +        by _VARIABLE_ _SPLIT_VALUE_;
90721     +      run;
90723     +      proc datasets library=work nolist;
90724     +        delete tempBinMappings;
90725     +      run;
90726     +      quit;
90727     +  %end;
90728     +%mend EM_IMPORT_BINNING;
90730     +%macro EM_FREEZE_BINNING(binningCode);
90732     +   data tempintfreeze;
90733     +     set &EM_USER_FREEZESUBSET;
90734     +     if binflag = 1;
90735     +   run;
90737     +   %let idsid = %sysfunc(open(work.tempintfreeze));
90738     +   %if &idsid %then %do;
90739     +     %let nvars = %sysfunc(ATTRN(&idsid, NVARS));
90740     +     %let nobs = %sysfunc(ATTRN(&idsid, NOBS));
90741     +   %end;
90742     +   %else %do;
90743     +     %let nvars = 0;
90744     +     %let nobs = 0;
90745     +   %end;
90746     +   %if &idsid %then %let idsid=%sysfunc(close(&idsid));
90748     +   proc datasets library=work nolist;
90749     +     delete tempintimport;
90750     +   run;
90751     +   quit;
90753     +   %if ((&nobs gt 0) and (&nvars gt 0))%then %do;
90755     +      filename X "&binningCode";
90756     +      data _null_;
90757     +        FILE X MOD;
90759     +        %let bin_variables=.;
90760     +        %let quote_bin_variables=.;
90761     +        %let freeze_variables=;
90762     +        %let choice = binflag = 1;
90763     +        %let dsid = %sysfunc(open(&EM_USER_FREEZESUBSET(where=(&choice))));
90764     +        %if &dsid %then %do;
90765     +           %let namenum = %sysfunc(VARNUM(&dsid, CODEVAR));
90766     +           %let binnum  = %sysfunc(VARNUM(&dsid, binVar));
90767     +           %let valnum  = %sysfunc(VARNUM(&dsid, _SPLIT_VALUE_));
90768     +           %let vnum    = %sysfunc(VARNUM(&dsid, _variable_));
90770     +           %let note = %sysfunc(sasmsg(sashelp.dmine, generatingfrozenbins_note ,
90770    !+NOQUOTE));
90771     +           put "&EM_CODEBAR;";
90772     +           put "&note;";
90773     +           put "&EM_CODEBAR;";
90775     +           /* retrieve value for first obs */
90776     +           %let obs = %sysfunc(fetchobs(&dsid, 1));
90777     +           %let oldname = %sysfunc(getvarc(&dsid, &namenum));
90778     +           %let value   = %sysfunc(getvarc(&dsid,  &valnum));
90779     +           %let variable = %sysfunc(getvarc(&dsid, &vnum));
90781     +           %let binvalue = %sysfunc(getvarc(&dsid, &binnum));
90782     +           %let i = 1;
90783     +           %if %sysfunc(index(%upcase(&BIN_VARIABLES) , %upcase(&binvalue))) eq 0
90783    !+%then %do;
90784     +             %let BIN_VARIABLES=&BIN_VARIABLES &binvalue;
90785     +           %end;
90786     +           %let QUOTE_BIN_VARIABLES=&QUOTE_BIN_VARIABLES "&namevalue";
90787     +           %let FREEZE_VARIABLES = &FREEZE_VARIABLES "&variable";
90789     +           put " ";
90790     +           put "if &oldname eq . then &binvalue = .;";
90792     +           /* cycle through special codes if they exist */
90793     +           %let index2 = %index(&oldname, SV_);
90794     +           %if &index2 gt 0 %then %do;
90795     +             %let choice = CODEVAR ="&oldname";
90796     +             %let cdsid = %sysfunc(open(&EM_USER_CODEMAPPINGS(where=(&choice))));
90797     +             %if &cdsid %then %do;
90798     +                %let codenum = %sysfunc(VARNUM(&cdsid, CODE));
90799     +                %let cobs = %sysfunc(fetch(&cdsid));
90800     +                %do %while(&cobs=0);
90801     +                   %let code = %sysfunc(getvarc(&cdsid, &codenum));
90802     +                    put "else if &oldname eq &code then &binvalue = &code;";
90803     +                   %let cobs = %sysfunc(fetch(&cdsid));
90804     +                %end;
90805     +             %end;
90806     +             %if &cdsid %then %let cdsid = %sysfunc(close(&cdsid));
90807     +           %end;
90808     +           put "else ";
90809     +           %if "&value" eq "." %then %do;
90810     +             put " &binvalue=&i;";
90811     +           %end;
90812     +           %else %do;
90813     +             put "  if &oldname < &value then &binvalue=&i;";
90814     +           %end;
90816     +           %let i= %eval(&i+1);
90818     +           %let obs = %sysfunc(fetch(&dsid));
90819     +           %do %while(&obs=0);
90820     +              %let namevalue = %sysfunc(getvarc(&dsid, &namenum));
90821     +              %let binvalue = %sysfunc(getvarc(&dsid, &binnum));
90822     +              %let value    = %sysfunc(getvarc(&dsid,  &valnum));
90823     +              %let variable = %sysfunc(getvarc(&dsid, &vnum));
90825     +              %if "&oldname" ne "&namevalue" %then %do;
90827     +                /* if variable has been re-coded for special codes, must include
90827    !+these values as well */
90828     +                put;
90829     +                put "if &namevalue eq . then &binvalue = .;";
90831     +                %let i=1;
90832     +                %if %sysfunc(index(%upcase(&BIN_VARIABLES) , %upcase(&binvalue))) eq
90832    !+ 0 %then %do;
90833     +                  %let BIN_VARIABLES=&BIN_VARIABLES &binvalue;
90834     +                %end;
90835     +                %let QUOTE_BIN_VARIABLES=&QUOTE_BIN_VARIABLES "&namevalue";
90836     +                %let FREEZE_VARIABLES = &FREEZE_VARIABLES "&variable";
90838     +                /* cycle through special codes if they exist */
90839     +                %let index2 = %index(&namevalue, SV_);
90840     +                %if &index2 gt 0 %then %do;
90841     +                  %let choice = CODEVAR ="&namevalue";
90842     +                  %let cdsid =
90842    !+%sysfunc(open(&EM_USER_CODEMAPPINGS(where=(&choice))));
90843     +                  %if &cdsid %then %do;
90844     +                     %let codenum = %sysfunc(VARNUM(&cdsid, CODE));
90845     +                     %let cobs = %sysfunc(fetch(&cdsid));
90846     +                     %do %while(&cobs=0);
90847     +                       %let code = %sysfunc(getvarc(&cdsid, &codenum));
90848     +                       put "else if &namevalue eq &code then &binvalue = &code;";
90849     +                       %let cobs = %sysfunc(fetch(&cdsid));
90850     +                     %end;
90851     +                  %end;
90852     +                %if &cdsid %then %let cdsid = %sysfunc(close(&cdsid));
90853     +                %end;
90854     +                put "else ";
90855     +                %if "&value" ne "." %then %do;
90856     +                  put "  if &namevalue < &value then &binvalue=&i;";
90857     +                %end;
90858     +                %else %do;
90859     +                  put " &binvalue=&i;";
90860     +                %end;
90862     +              %end;
90863     +              %else %do;
90864     +                put "else ";
90865     +                %if "&value" ne "." %then %do;
90866     +                  put "  if &namevalue < &value then &binvalue=&i;";
90867     +                %end;
90868     +                %else %do;
90869     +                  put " &binvalue=&i;";
90870     +                %end;
90871     +              %end;
90872     +              %let i = %eval(&i + 1);
90873     +              %let obs = %sysfunc(fetch(&dsid));
90874     +              %let oldname = &namevalue;
90875     +              %let oldbinvalue = &binvalue;
90876     +           %end;
90877     +        %end;
90878     +        %if &dsid >0 %then %let dsid = %sysfunc(close(&dsid));
90880     +      run;
90881     +      filename X;
90882     +      /* generate BINMAPPINGS dataset */
90883     +      data TEMPBINMAPPINGS;
90884     +        length NAME BIN_NAME $32 BIN GRP $8 LB UB 8 EM_BIN_LABEL $200 display_Var
90884    !+grp_name $32;
90886     +        %let choice = binflag = 1;
90887     +        %let dsid = %sysfunc(open(&EM_USER_FREEZESUBSET(where=(&choice))));
90888     +        %if &dsid %then %do;
90889     +           %let varnum  = %sysfunc(VARNUM(&dsid, _VARIABLE_));
90890     +           %let codenum = %sysfunc(VARNUM(&dsid, CODEVAR));
90891     +           %let binnum  = %sysfunc(VARNUM(&dsid, binVar));
90892     +           %let valnum  = %sysfunc(VARNUM(&dsid, _SPLIT_VALUE_));
90893     +           %let grpnum  = %sysfunc(VARNUM(&dsid, _group_));
90895     +           /* retrieve information from first obs */
90896     +           %let obs = %sysfunc(fetchobs(&dsid, 1));
90897     +           %let oldvar = %sysfunc(getvarc(&dsid, &varnum));
90898     +           %let oldcodevar = %sysfunc(getvarc(&dsid, &codenum));
90899     +           %let oldbinvar  = %sysfunc(getvarc(&dsid, &binnum));
90900     +           %let oldgrpvar = GRP_%sysfunc(ksubstr(&oldbinvar, 5));
90901     +           %let oldvalue   = %sysfunc(getvarc(&dsid, &valnum));
90902     +           %let oldgrpvalue = %sysfunc(getvarn(&dsid, &grpnum));
90903     +           %let i = 1;
90905     +           NAME = "&OLDCODEVAR";
90906     +           BIN_NAME = "&OLDBINVAR";
90907     +           GRP_NAME = "&OLDGRPVAR";
90908     +           BIN = "&i";
90909     +           GRP = "&oldgrpvalue";
90910     +           LB = . ;
90911     +           UB = &oldvalue;
90912     +           EM_BIN_LABEL = "&oldvar < &oldvalue" ;
90913     +           DISPLAY_VAR = "&oldvar";
90914     +           output;
90916     +           %let i = 2;
90917     +           %let obs = %sysfunc(fetch(&dsid));
90918     +           %do %while(&obs=0);
90919     +             %let var = %sysfunc(getvarc(&dsid, &varnum));
90920     +             %let codevar = %sysfunc(getvarc(&dsid, &codenum));
90921     +             %let binvar  = %sysfunc(getvarc(&dsid, &binnum));
90922     +             %let grpvar = GRP_%sysfunc(ksubstr(&binvar, 5));
90923     +             %let value   = %sysfunc(getvarc(&dsid, &valnum));
90924     +             %let group   = %sysfunc(getvarn(&dsid, &grpnum));
90926     +             %if "&oldvar" ne "&var" %then %do;
90928     +               %let i = 1;
90929     +               %let oldvalue = .;
90930     +             %end;
90932     +             NAME = "&CODEVAR";
90933     +             BIN_NAME = "&BINVAR";
90934     +             GRP_NAME = "&GRPVAR";
90935     +             BIN = "&i";
90936     +             GRP = "&group";
90937     +             LB = &oldvalue ;
90938     +             UB = &value;
90939     +             %if "&oldvalue" ne "." AND "&value" ne "." %then %do;
90940     +               EM_BIN_LABEL = "&oldvalue <= &var < &value" ;
90941     +             %end;
90942     +             %else %do;
90943     +               %if "&oldvalue" eq "." %then %do;
90944     +                 EM_BIN_LABEL = "&var < &value" ;
90945     +               %end;
90946     +               %if "&value" eq "." %then %do;
90947     +                 EM_BIN_LABEL = "&oldvalue >= &var";
90948     +               %end;
90949     +             %end;
90950     +             DISPLAY_VAR = "&var";
90951     +             output;
90953     +             %let oldvar = &var;
90954     +             %let oldcodevar = &codevar;
90955     +             %let oldbinvar = &binvar;
90956     +             %let oldgrpvar = &grpvar;
90957     +             %let oldvalue   = &value;
90958     +             %let oldgrpvalue = &group;
90959     +             %let i = %eval(&i + 1);
90960     +             %let obs = %sysfunc(fetch(&dsid));
90961     +           %end;
90962     +        %end;
90964     +        %if &dsid %then %let dsid=%sysfunc(close(&dsid));
90965     +      run;
90967     +      /* remove obs from EM_USER_BINMAPPINGS that have vars also in tempBinMappings
90967    !+-- prevents duplicate entries */
90968     +      data &EM_USER_BINMAPPINGS;
90969     +        set &EM_USER_BINMAPPINGS;
90970     +        if NAME in (&FREEZE_VARIABLES) then delete;
90971     +      run;
90973     +      data &EM_USER_BINMAPPINGS;
90974     +        length NAME BIN_NAME $32 BIN GRP $8 LB UB 8 EM_BIN_LABEL $200 display_Var
90974    !+grp_name $32;
90976     +        set &EM_USER_BINMAPPINGS tempBinMappings;
90977     +        if NAME = "" and BIN_NAME = "" and BIN= "" then delete;
90978     +      run;
90980     +      /* update freezesubset with bin values instead of raw values */
90981     +      data &EM_USER_FREEZESUBSET;
90982     +        set &EM_USER_FREEZESUBSET;
90984     +        %let dsid = %sysfunc(open(&EM_USER_BINMAPPINGS));
90985     +        %if &dsid %then %do;
90986     +          %let binvarnum = %sysfunc(VARNUM(&dsid, BIN_NAME));
90987     +         %let displaynum = %sysfunc(VARNUM(&dsid, DISPLAY_VAR));
90988     +          %let binnum    = %sysfunc(VARNUM(&dsid, BIN));
90989     +          %let codenum   = %sysfunc(VARNUM(&dsid, NAME));
90990     +          %let ubnum     = %sysfunc(VARNUM(&dsid, UB));
90991     +          %let lbnum     = %sysfunc(VARNUM(&dsid, LB));
90993     +          %let oldvar = ;
90994     +          %let obs = %sysfunc(fetch(&dsid));
90995     +          %do %while(&obs=0);
90996     +            %let binvar = %sysfunc(getvarc(&dsid, &binvarnum));
90997     +            %let codevar = %sysfunc(getvarc(&dsid, &codenum));
90998     +            %let displayvar = %sysfunc(getvarc(&dsid, &displaynum));
90999     +            %let bin    = %sysfunc(getvarc(&dsid, &binnum));
91000     +            %let ub     = %sysfunc(getvarn(&dsid, &ubnum));
91001     +            %let lb     = %sysfunc(getvarn(&dsid, &lbnum));
91003     +            %if "&oldvar" eq "&displayvar" %then %do;
91004     +              else
91005     +            %end;
91006     +            if BinVar = "&binvar" and _SPLIT_VALUE_ = "&UB" then do;
91007     +               _SPLIT_VALUE_ = "&bin";
91008     +            end;
91009     +            %let oldvar =&displayvar;
91010     +            %let obs = %sysfunc(fetch(&dsid));
91011     +          %end;
91012     +        %end;
91013     +        %if &dsid %then %let dsid = %sysfunc(close(&dsid));
91014     +      run;
91016     +      proc sort data=&EM_USER_FREEZESUBSET;
91017     +        by _VARIABLE_ _SPLIT_VALUE_;
91018     +      run;
91020     +      proc datasets library=work nolist;
91021     +        delete tempBinMappings;
91022     +      run;
91023     +      quit;
91024     +   %end;
91025     +%mend EM_FREEZE_BINNING;
91027     +%macro EM_EQUAL_SPACED_BINNING(input, bindata, binningCode);
91030     +/* initialize new bucket_binning macro */
91031     +filename temp catalog 'sashelp.emapps.bucket_binning.source';
91032     +%include temp;
91033     +filename temp;
91035     +/* create fileref for generation of binningCode */
91036     +filename X "&binningCode";
91038     +/* determine if there are inputs to be binned */
91039     +%let numbinvars = 0;
91040     +%let intdsid = %sysfunc(open(work._intmid));
91041     +%if &intdsid %then %do;
91042     +  %let numbinvars = %sysfunc(ATTRN(&intdsid, NOBS));
91043     +%end;
91044     +%if &intdsid ne %then %let intdsid = %sysfunc(close(&intdsid));
91045     +%if &numbinvars > 0 %then %do;
91048     +/* get data in format needed for quantile_binning macro */
91049     +data work.vartable;
91050     +  set work._intmid;
91051     +  level = "INTERVAL";
91052     +  role  = "INPUT";
91053     +  rename variable=name;
91054     +run;
91056     +/* if freq var exists, add this to vartable so it will be processed by
91056    !+quantile_binning */
91057     +%if %EM_FREQ ne %then %do;
91058     +   data work.freq;
91059     +     name="%EM_FREQ";
91060     +     role="FREQ";
91061     +   run;
91063     +   data work.vartable;
The SAS System
 
91064     +     set work.vartable work.freq;
91065     +   run;
91066     +%end;
91068     +/* perform bucket binning of data */
91069     +%let precision =  1 / %sysevalf(10**&EM_PROPERTY_PRECISION);
91070     +%em_apps_bucket_binning( &input, work.vartable, &EM_PROPERTY_NUMBINS,
91070    !+&EM_USER_BINMAPPINGS, X, precision=&precision, dropOriginal=Y);
91072     +proc sort data=&EM_USER_BINMAPPINGS; by name lb; run;
91073     +%end;
91074     +%else %do;
91075     +  /* initialize binmappings table */
91076     +  data &EM_USER_BINMAPPINGS;
91077     +    length NAME BIN_NAME $32 LB UB 8 BIN EM_BIN_LABEL $200;
91078     +  run;
91080     +  data _null_;
91081     +    FILE X;
91083     +    put "&EM_CODEBAR;";
91084     +    %let note = %sysfunc(sasmsg(sashelp.dmine, generatebins_note, NOQUOTE));
91085     +    put "* &note;";
91086     +    put "&EM_CODEBAR;";
91087     +  run;
91089     +%end;
91091     +/* assign display_var values to binmappings table as well as initial group values */
91092     +data &EM_USER_BINMAPPINGS;
91093     +  set &EM_USER_BINMAPPINGS;
91094     +  length display_var $32 grp $8;
91095     +  display_var = name;
91097     +  %if &EM_PROPERTY_MISSINGASLEVEL eq Y %then %do;
91098     +    GRP = BIN + 1;
91099     +  %end;
91100     +  %else %do;
91101     +    GRP = BIN;
91102     +  %end;
91103     +run;
91105     +/* de-assign fileref */
91106     +filename X;
91108     +    /* append to binning code those values that were included in the importSubset
91108    !+data */
91109     +    %if &useImport eq 1 %then %do;
91110     +      %EM_IMPORT_BINNING(&binningcode);
91111     +    %end;
91113     +    /* append to binning code those values that were included in the freezeSubset
91113    !+data */
91114     +    %if &useFreeze eq 1 %then %do;
91115     +      %EM_FREEZE_BINNING(&binningcode);
91116     +    %end;
91118     +    proc sort data=&EM_USER_BINMAPPINGS out=sortedmapping nodupkey;
91119     +     by NAME;
91120     +     run;
91122     +     /* create grouping for missing level */
91123     +    data tempmissvalues;
91124     +    run;
91126     +    %if &EM_PROPERTY_MISSINGASLEVEL eq Y %then %do;
91127     +       data tempmissvalues;
91128     +         %if &useImport eq 1 %then %do;
91129     +           merge sortedmapping &EM_USER_IMPORtSUBSET(in=_a rename=(_variable_=NAME))
91129    !+;
91130     +         %end;
91131     +         %if &useFreeze eq 1 %then %do;
91132     +           merge sortedmapping &EM_USER_FreezeSUBSET(in=_b rename=(_variable_=NAME))
91132    !+;
91133     +         %end;
91134     +         %else %do;
91135     +           set sortedmapping;
91136     +         %end;
91137     +         GRP="1";
91138     +         bin="Missing";
91139     +         _split_value_ = "Missing";
91140     +         %if &useImport eq 1 %then %do;
91141     +            if _a then delete;
91142     +         %end;
91143     +         %if &useFreeze eq 1 %then %do;
91144     +            if _b then delete;
91145     +         %end;
91147     +       run;
91148     +    %end;
91150     +    /* create binData from binningCode */
91151     +    proc sort data=&EM_USER_BINMAPPINGS out=sortedmapping nodupkey;
91152     +      by NAME;
91153     +    run;
91155     +    filename X "&binningCode";
91156     +    data &bindata;
91157     +      set &input;
91158     +      %inc X;
91159     +    run;
91161     +    filename X;
91163     +    /* create splitvals dataset */
91164     +    data tempsplitvals;
91165     +      set &EM_USER_BINMAPPINGS
91166     +        %let tdsid = %sysfunc(open(work.tempmissvalues));
91167     +        %if &tdsid %then %do;
91168     +          tempmissvalues
91169     +        %end;
91170     +        %if &tdsid %then %let tdsid = %sysfunc(close(&tdsid));
91171     +      ;
91172     +      length newgroup _group_ 8 _level_ $8;
91173     +      newgroup =.;
91174     +      _LEVEL_ = 'ORDINAL';
91175     +      _Group_ = grp;
91176     +      rename NAME=DISPLAY_VAR BIN=_SPLIT_VALUE_ BIN_NAME = _VARIABLE_;
91177     +      keep NAME NEWGROUP BIN_NAME BIN _LEVEL_ _GROUP_;
91178     +    run;
91180     +    data tempsplitvals;
91181     +      set tempsplitvals;
91182     +      _order_ = _N_;
91183     +    run;
91185     +    /* determine if EM_USER_SPLITVALS already exists */
91186     +    %let sdsid = %sysfunc(open(&EM_USER_SPLITVALS));
91187     +    %if &sdsid > 0 %then %do;
91188     +      %let nvars = %sysfunc(ATTRN(&sdsid, NVARS));
91189     +      %if &nvars > 0 %then %do;
91190     +        proc sql;
91191     +          reset noprint;
91192     +          select count(*) into :nobs from &EM_USER_SPLITVALS;
91193     +        quit;
91194     +      %end;
91195     +      %else %let nobs=0;
91196     +    %end;
91197     +    %else %do;
91198     +       %let nobs=0;
91199     +       %let nvars=0;
91200     +    %end;
91201     +    %if &sdsid > 0 %then %let sdsid = %sysfunc(close(&sdsid));
91203     +    /* if useIMport=1 also include import definitions here as well */
91204     +    %if &useImport eq 1 %then %do;
91205     +      data tempImport;
91206     +        set &EM_USER_IMPORTSUBSET;
91207     +        _variable_ = binVar;
91208     +      run;
91209     +    %end;
91211     +    /* if useFreeze=1 also include import definitions here as well */
91212     +    %if &useFreeze eq 1 %then %do;
91213     +      data tempFreeze;
91214     +        length display_var $32;
91215     +        set &EM_USER_FREEZESUBSET;
91216     +        display_var = _variable_;
91217     +        _variable_ = binVar;
91218     +      run;
91219     +    %end;
91222     +    data &EM_USER_SPLITVALS;
91223     +      %if ((&nobs > 0) AND (&nvars > 0)) %then %do;
91224     +        set &EM_USER_SPLITVALS tempsplitvals
91225     +        %if ((&useImport eq 1) AND (&useFreeze eq 0)) %then %do;
91226     +           tempImport( where=(binVar ne "" and _split_value_ eq "MISSING"))
91227     +        %end;
91228     +        %if &useFreeze eq 1 %then %do;
91229     +           tempFreeze( where=(binVar ne "" and _split_value_ eq "MISSING"))
91230     +        %end;
91231     +        ;
91232     +      %end;
91233     +      %else %do;
91234     +        set tempsplitvals
91235     +        %if ((&useImport eq 1) AND (&useFreeze eq 0)) %then %do;
91236     +           tempImport( where=(binVar ne "" and _split_value_ eq "MISSING"))
91237     +        %end;
91238     +        %if &useFreeze eq 1 %then %do;
91239     +           tempFreeze( where=(binVar ne "" and _split_value_ eq "MISSING"))
91240     +        %end;
91241     +        ;
91242     +      %end;
91243     +      keep display_var _split_value_ _variable_ newgroup _group_ _level_ _ORDER_;
91244     +    run;
91246     +    /* create temporary mapping dataset of normalized and non-normalized values for
91246    !+char variables*/
91247     +    data tempvariableset;
91248     +      set &EM_DATA_VARIABLESET;
91249     +      where TYPE = 'C';
91250     +    run;
91252     +    /* add all interval vars that aren't special codes to the intervalvar macro
91253     +    %let dsid = %sysfunc(open(work.tempvariableset));
91254     +    %if &dsid %then %do;
91255     +      %let varnum = %sysfunc(VARNUM(&dsid, NAME));
91256     +      %let obs = %sysfunc(fetch(&dsid));
91257     +      %do %while(&obs=0);
91258     +        %let varname = %sysfunc(getvarc(&dsid, &varnum));
91259     +        %let classvars = &classvars &varname;
91260     +        %let qclassvars = &qclassvars "&varname";
91261     +        %let obs = %sysfunc(fetch(&dsid));
91262     +      %end;
91263     +    %end;
91264     +    %if &dsid %then %let dsid = %sysfunc(close(&dsid));
91265     +    */
91266     +   %em_varmacro(name=classvars, metadata=tempvariableset, key=NAME,
91266    !+nummacro=num_classvars);
91268     +    %if %classvars ne %then %do;
91269     +      proc dmdb data =&bindata classout=_classout nonorm;
91270     +        class %classvars;
91271     +      run;
91273     +      proc dmdb data=&bindata classout=_classout2;
91274     +       class %classvars;
91275     +      run;
91277     +      proc sort data=_classout; by NAME CRAW; run;
91278     +      proc sort data=_classout2; by NAME CRAW; run;
91280     +      data _classout;
91281     +        length _variable_ $32;
91282     +        merge _classout _classout2 (rename=(LEVEL=_split_value_));
91283     +        _split_value_ = trim(left(_split_value_));
91284     +        LEVEL = trim(left(LEVEL));
91285     +        by NAME CRAW;
91286     +       _variable_ = NAME;
91287     +      run;
91289     +      proc sort data=_classout; by _variable_ _split_value_; run;
91290     +      proc sort data=&EM_USER_SPLITVALS; by _variable_ _split_value_; run;
91292     +      data &EM_USER_SPLITVALS;
91293     +        length _norm_level_ $200 _split_value_ $200;
91294     +        merge &EM_USER_SPLITVALS _classout(rename=(LEVEL=_norm_level_));
91295     +        by _variable_ _split_value_;
91296     +        LEVEL = trim(left(LEVEL));
91297     +        _norm_level_ = trim(left(_norm_level_));
91298     +        _split_value_ = trim(left(_split_value_));
91299     +        if _norm_level_ eq '' then _norm_level_= _split_value_;
91300     +        drop NAME FREQUENCY TYPE CRAW NRAW;
91301     +      run;
91303     +      proc datasets library=work nolist;
91304     +        delete _classout _classout2;
91305     +      run;
91306     +      quit;
91307     +    %end;
91308     +    data &EM_USER_SPLITVALS;
91309     +      set &EM_USER_SPLITVALS;
91310     +      if _norm_level_ eq '' then _norm_level_= _split_value_;
91311     +    run;
91313     +    proc sort data=&EM_USER_SPLITVALS;
91314     +      by DISPLAY_VAR _Group_;
91315     +    run;
91317     +   proc datasets library=work nolist;
91318     +     delete tempBinMappings temp_binmappings tempBinNames tempsplitvals
91318    !+sortedmapping tempmissvalues
91319     +      %if &useImport eq 1 %then %do;
91320     +        tempImport
91321     +      %end;
91322     +      %if &useFreeze eq 1 %then %do;
91323     +        tempFreeze
91324     +      %end;
91325     +     ;
91326     +   run;
91327     +   quit;
91329     +%mend;
91331     +%macro EM_QUANTILE_BINNING(input, pctdata, bindata, binningCode);
91333     +/* initialize new quantile_binning macro */
91334     +filename temp catalog 'sashelp.emapps.quantile_binning.source';
91335     +%include temp;
91336     +filename temp;
91338     +/* generate fileref for quantile_binning macro */
91339     +filename X "&binningCode";
91341     +/* determine if there are inputs to be binned */
91342     +%let numbinvars = 0;
91343     +%let intdsid = %sysfunc(open(work._intmid));
91344     +%if &intdsid %then %do;
91345     +  %let numbinvars = %sysfunc(ATTRN(&intdsid, NOBS));
91346     +%end;
91347     +%if &intdsid ne %then %let intdsid = %sysfunc(close(&intdsid));
91348     +%if &numbinvars > 0 %then %do;
91350     +/* get data in format needed for quantile_binning macro */
91351     +data work.vartable;
91352     +  set work._intmid;
91353     +  level = "INTERVAL";
91354     +  role  = "INPUT";
91355     +  rename variable=name;
91356     +run;
91358     +/* if freq var exists, add this to vartable so it will be processed by
91358    !+quantile_binning */
91359     +%if %EM_FREQ ne %then %do;
91360     +   data work.freq;
91361     +     name="%EM_FREQ";
91362     +     role="FREQ";
91363     +   run;
91365     +   data work.vartable;
91366     +     set work.vartable work.freq;
91367     +   run;
91368     +%end;
91371     +/* perform quantile binning of data */
91372     +%let precision =  1 / %sysevalf(10**&EM_PROPERTY_PRECISION);
91373     +%em_apps_quantile_binning( &input, work.vartable, &EM_PROPERTY_NUMBINS,
91373    !+&EM_USER_BINMAPPINGS, X, precision=&precision, dropOriginal=Y);
91375     +proc sort data=&EM_USER_BINMAPPINGS; by name lb; run;
91376     +%end;
91377     +%else %do;
91378     +  /* initialize binmappings table */
91379     +  data &EM_USER_BINMAPPINGS;
91380     +    length NAME BIN_NAME $32 LB UB 8 BIN EM_BIN_LABEL $200;
91381     +  run;
91383     +  data _null_;
91384     +    FILE X;
91386     +    put "&EM_CODEBAR;";
91387     +    %let note = %sysfunc(sasmsg(sashelp.dmine, generatebins_note, NOQUOTE));
91388     +    put "* &note;";
91389     +    put "&EM_CODEBAR;";
91390     +  run;
91392     +%end;
91394     +/* assign display_var values to binmappings table as well as initial group values */
91395     +data &EM_USER_BINMAPPINGS;
91396     +  set &EM_USER_BINMAPPINGS;
91397     +  length display_var $32 grp $8;
91398     +  display_var = name;
91400     +  %if &EM_PROPERTY_MISSINGASLEVEL eq Y %then %do;
91401     +    GRP = BIN + 1;
91402     +  %end;
91403     +  %else %do;
91404     +    GRP = BIN;
91405     +  %end;
91406     +run;
91408     +/* de-assign fileref */
91409     +filename X;
91411     +    /* append to binning code those values that were included in the importSubset
91411    !+data */
91412     +    %if &useImport eq 1 %then %do;
91413     +      %EM_IMPORT_BINNING(&binningcode);
91414     +    %end;
91416     +    /* append to binning code those values that were included in the freezeSubset
91416    !+data */
91417     +    %if &useFreeze eq 1 %then %do;
91418     +      %EM_FREEZE_BINNING(&binningcode);
91419     +    %end;
91421     +    proc sort data=&EM_USER_BINMAPPINGS out=sortedmapping nodupkey;
91422     +      by NAME;
91423     +    run;
91425     +    /* create grouping for missing level */
91426     +    data tempmissvalues;
91427     +    run;
91429     +    %if &EM_PROPERTY_MISSINGASLEVEL eq Y %then %do;
91430     +       data tempmissvalues;
91431     +         %if ((&useImport eq 1) OR (&useFreeze eq 1)) %then %do;
91432     +           merge sortedmapping
91433     +           %if &useImport eq 1 %then %do;
91434     +              &EM_USER_IMPORtSUBSET(in=_a rename=(_variable_=NAME))
91435     +           %end;
91436     +           %if &useFreeze eq 1 %then %do;
91437     +             &EM_USER_FreezeSUBSET(in=_b rename=(_variable_=NAME))
91438     +           %end;
91439     +           ;
91440     +         %end;
91441     +         %else %do;
91442     +           set sortedmapping;
91443     +         %end;
91444     +         GRP="1";
91445     +         bin="Missing";
91446     +         _split_value_ = "Missing";
91447     +         %if &useImport eq 1 %then %do;
91448     +            if _a then delete;
91449     +         %end;
91450     +         %if &useFreeze eq 1 %then %do;
91451     +            if _b then delete;
91452     +         %end;
91454     +       run;
91455     +    %end;
91458     +    /* create binData from binningCode */
91459     +    filename X "&binningCode";
91461     +    data &bindata;
91462     +      set &input;
91463     +      %inc X;
91464     +    run;
91466     +    filename X;
91468     +    /* create splitvals dataset */
91469     +    data tempsplitvals;
91470     +      set &EM_USER_BINMAPPINGS tempmissvalues;
91471     +      length newgroup _group_ _order_ 8 _level_ $8;
91472     +      newgroup =.;
91473     +      _LEVEL_ = 'ORDINAL';
91474     +      _Group_ = grp;
91475     +      rename NAME=DISPLAY_VAR BIN =_SPLIT_VALUE_ BIN_NAME = _VARIABLE_;
91476     +      keep NAME NEWGROUP BIN_NAME BIN _LEVEL_ _GROUP_ _ORDER_;
91477     +    run;
91479     +    data tempsplitvals;
91480     +      set tempsplitvals;
91481     +      _order_ = _N_;
91482     +    run;
91484     +    /* determine if EM_USER_SPLITVALS already exists */
91485     +    %let sdsid = %sysfunc(open(&EM_USER_SPLITVALS));
91486     +    %if &sdsid > 0 %then %do;
91487     +      %let nvars = %sysfunc(ATTRN(&sdsid, NVARS));
91488     +      %if &nvars > 0 %then %do;
91489     +        proc sql;
91490     +          reset noprint;
91491     +          select count(*) into :nobs from &EM_USER_SPLITVALS;
91492     +        quit;
91493     +      %end;
91494     +      %else %let nobs=0;
91495     +    %end;
91496     +    %else %do;
91497     +       %let nobs=0;
91498     +       %let nvars=0;
91499     +    %end;
91500     +    %if &sdsid > 0 %then %let sdsid = %sysfunc(close(&sdsid));
91502     +    /* if useIMport=1 also include import definitions here as well */
91503     +    %if &useImport eq 1 %then %do;
91504     +      data tempImport;
91505     +        set &EM_USER_IMPORTSUBSET;
91506     +        _variable_ = binVar;
91507     +      run;
91508     +    %end;
91510     +    /* if useFreeze=1 also include frozen definitions here as well */
91511     +    %if &useFreeze eq 1 %then %do;
91512     +      data tempFreeze;
91513     +        length display_var $32;
91514     +        set &EM_USER_FreezeSUBSET;
91515     +        display_var = _variable_;
91516     +        _variable_ = binVar;
91517     +      run;
91518     +    %end;
91520     +    data &EM_USER_SPLITVALS;
91521     +      %if ((&nobs > 0) AND (&nvars > 0)) %then %do;
91522     +        set &EM_USER_SPLITVALS tempsplitvals
91523     +        %if ((&useImport eq 1) AND (&useFreeze eq 0)) %then %do;
91524     +           tempImport( where=(binVar ne "" and _split_value_ eq "MISSING"))
91525     +        %end;
91526     +        %if &useFreeze eq 1 %then %do;
91527     +           tempFreeze( where=(binVar ne "" and _split_value_ eq "MISSING"))
91528     +        %end;
91529     +        ;
91530     +      %end;
91531     +      %else %do;
91532     +        set tempsplitvals
91533     +        %if ((&useImport eq 1) AND (&useFreeze eq 0)) %then %do;
91534     +           tempImport( where=(binVar ne "" and _split_value_ eq "MISSING"))
91535     +        %end;
91536     +        %if &useFreeze eq 1 %then %do;
91537     +           tempFreeze( where=(binVar ne "" and _split_value_ eq "MISSING"))
91538     +        %end;
91539     +        ;
91540     +      %end;
91541     +      keep display_var _split_value_ _variable_ newgroup _group_ _level_ _order_;
91542     +    run;
91544     +    /* create temporary mapping dataset of normalized and non-normalized values for
91544    !+char variables*/
91545     +    data tempvariableset;
91546     +      set &EM_DATA_VARIABLESET;
91547     +      where LEVEL ^= 'INTERVAL' and TYPE = 'C' and ((ROLE='INPUT' and USE in ('Y',
91547    !+'D')) OR (ROLE='REJECTED' and USE='Y'));
91548     +    run;
91550     +   %em_varmacro(name=classvars, metadata=tempvariableset, key=NAME,
91550    !+nummacro=num_classvars);
91552     +    /* add all interval vars that aren't special codes to the intervalvar macro
91553     +    %let dsid = %sysfunc(open(work.tempvariableset));
91554     +    %if &dsid %then %do;
91555     +      %let varnum = %sysfunc(VARNUM(&dsid, NAME));
91556     +      %let obs = %sysfunc(fetch(&dsid));
91557     +      %do %while(&obs=0);
91558     +        %let varname = %sysfunc(getvarc(&dsid, &varnum));
91559     +        %let classvars = &classvars &varname;
91560     +        %let qclassvars = &qclassvars "&varname";
91561     +        %let obs = %sysfunc(fetch(&dsid));
91562     +      %end;
91563     +    %end;
91564     +    %if &dsid %then %let dsid = %sysfunc(close(&dsid));
91565     +*/
91566     +    %if %classvars ne %then %do;
91567     +      proc dmdb data =&bindata classout=_classout nonorm;
91568     +        class %classvars;
91569     +      run;
91571     +      proc dmdb data=&bindata classout=_classout2;
91572     +       class %classvars;
91573     +      run;
91575     +      proc sort data=_classout; by NAME CRAW; run;
91576     +      proc sort data=_classout2; by NAME CRAW; run;
91578     +      data _classout;
91579     +        length _variable_ $32;
91580     +        merge _classout _classout2 (rename=(LEVEL=_split_value_));
91581     +        by NAME CRAW;
91582     +       _variable_ = NAME;
91583     +      run;
91585     +      proc sort data=_classout; by _variable_ _split_value_; run;
91586     +      proc sort data=&EM_USER_SPLITVALS; by _variable_ _split_value_; run;
91588     +      data &EM_USER_SPLITVALS;
91589     +        length _norm_level_ $200 _split_value_ $200;
91590     +        merge &EM_USER_SPLITVALS _classout(rename=(LEVEL=_norm_level_));
91591     +        by _variable_ _split_value_;
91592     +        LEVEL = trim(left(LEVEL));
91593     +        _split_value_ = trim(left(_split_value_));
91594     +        _norm_level_ = trim(left(_norm_level_));
91595     +        if _norm_level_ eq '' then _norm_level_= _split_value_;
91596     +        drop NAME FREQUENCY TYPE CRAW NRAW;
91597     +      run;
91599     +      proc datasets library=work nolist;
91600     +        delete _classout _classout2;
91601     +      run;
91602     +      quit;
91603     +    %end;
91605     +    data &EM_USER_SPLITVALS;
91606     +      set &EM_USER_SPLITVALS;
91607     +      if _norm_level_ eq '' then _norm_level_= _split_value_;
91608     +    run;
91611     +    proc sort data=&EM_USER_SPLITVALS;
91612     +      by DISPLAY_VAR _Group_;
91613     +    run;
91615     +    proc datasets library=work nolist;
91616     +      delete sortedmapping tempsplitvals tempmissvalues
91617     +      %if &useImport eq 1 %then %do;
91618     +        tempImport
91619     +      %end;
91620     +      %if &useFreeze eq 1 %then %do;
91621     +        tempFreeze
91622     +      %end;
91623     +      ;
91624     +    run;
91625     +    quit;
91626     +/*
91627     +%end;
91628     +%else %do;
91629     +    data &bindata;
91630     +      set &input;
91631     +    run;
91632     +%end;
91633     +*/
91634     +%mend EM_QUANTILE_BINNING;
91636     +%macro EM_ORDVARS_GROUP;
91638     +   /* retrieve all ordinal variables from the incoming dataset */
91639     +   proc sort data=&EM_DATA_VARIABLESET out=tempvariableset;
91640     +     by NAME;
91641     +     where LEVEL = 'ORDINAL' and ((ROLE='INPUT' and USE in ('Y', 'D')) OR
91641    !+(ROLE='REJECTED' and USE='Y'));
91642     +   run;
91644     +   /* add all vars marked as interval that are actually class vars to this data */
91645     +   %let nobs = 0;
91646     +   %let dsid = %sysfunc(open(WORK._DISCRETEMID));
91647     +   %if &dsid %then %do;
91648     +     %let nobs = %sysfunc(ATTRN(&dsid, NOBS));
91649     +     %if &nobs gt 0 %then %do;
91651     +     data tempvars;
91652     +       set &EM_DATA_VARIABLESET;
91653     +       if NAME in (
91654     +         %let obs = %sysfunc(fetch(&dsid));
91655     +         %do %while(&obs=0);
91656     +           %let varnum = %sysfunc(VARNUM(&dsid, VARIABLE));
91657     +           %let varname = %sysfunc(GETVARC(&dsid, &varnum));
91658     +           "&varname"
91659     +           %let obs = %sysfunc(fetch(&dsid));
91660     +         %end;
91661     +        );
91662     +     run;
91663     +     data tempvariableset;
91664     +       set tempvariableset tempvars;
91665     +     run;
91666     +     %end;
91667     +   %end;
91668     +   %if &dsid %then %let dsid = %sysfunc(close(&dsid));
91670     +   %if &useImport eq 1 %then %do;
91671     +     /* remove all variables from tempvariableset that are included in the
91671    !+importsubset */
91672     +     proc sort data=&EM_USER_IMPORTSUBSET out=tempimport(rename=(_VARIABLE_ = NAME))
91672    !+;
91673     +       by _VARIABLE_ ;
91674     +     run;
91675     +     proc sort data=tempvariableset; by NAME; run;
91677     +     data tempvariableset;
91678     +       merge tempimport(in=_a) tempvariableset(in=_b);
91679     +       by NAME;
91680     +       if ^_a then output;
91681     +     run;
91682     +   %end;
91684     +   %if &useFreeze eq 1 %then %do;
91685     +     /* remove all variables from tempvariableset that are included in the
91685    !+freezesubset */
91686     +     proc sort data=&EM_USER_FREEZESUBSET out=tempfreeze(rename=(_VARIABLE_ = NAME))
91686    !+;
91687     +       by _VARIABLE_ ;
91688     +     run;
91689     +     proc sort data=tempvariableset; by NAME; run;
91691     +     data tempvariableset;
91692     +       merge tempfreeze(in=_a) tempvariableset(in=_b);
91693     +       by NAME;
91694     +       if ^_a then output;
91695     +     run;
91696     +   %end;
91698     +   /* get dataset of distinct values for the ordinal variable */
91699     +   %let nobs = 0;
91700     +   %let dsid = %sysfunc(open(WORK.tempvariableset));
91701     +   %if &dsid %then %do;
91702     +     %let nobs = %sysfunc(ATTRN(&dsid, NOBS));
91703     +     %if &nobs gt 0 %then %do;
91704     +         %let obs = %sysfunc(fetch(&dsid));
91705     +         %do %while(&obs=0);
91706     +           %let varnum = %sysfunc(VARNUM(&dsid, NAME));
91707     +           %let varname = %sysfunc(GETVARC(&dsid, &varnum));
91708     +           %let typenum = %sysfunc(VARNUM(&dsid, TYPE));
91709     +           %let input_type = %sysfunc(getvarc(&dsid, &typenum));
91710     +           %let fmtnum = %sysfunc(VARNUM(&dsid, FORMAT));
91711     +           %let input_fmt = %sysfunc(getvarc(&dsid, &fmtnum));
91712     +           %let lblnum  = %sysfunc(VARNUM(&dsid, LABEL));
91713     +           %let varlvlnum = %sysfunc(VARNUM(&dsid, LEVEL));
91714     +           %let varlvl = %sysfunc(getvarc(&dsid, &varlvlnum));
91716     +           data temp;
91717     +             set &EM_USER_BINDATA(keep=&varname);
91718     +             %if &input_fmt ne %then %do;
91719     +               %dmnormcp(put(&varname, &input_fmt), _norm);
91720     +             %end;
91721     +             %else %do;
91722     +               %dmnormcp(&varname, _norm);
91723     +             %end;
91724     +             keep &varname _norm;
91725     +           run;
91727     +          proc dmdb data=temp classout=_classout2;
91728     +           class _norm;
91729     +         run;
91730     +         proc sort data=_classout2; by LEVEL; run;
91732     +         /* re-order numeric inputs based on non-normalized values */
91733     +         %if &input_type eq N %then %do;
91734     +           proc sort data=temp nodupkey; by _norm; run;
91735     +           data varvals;
91736     +             merge temp _classout2(rename=(LEVEL=_norm));
91737     +             by _norm;
91738     +             if craw='' and _norm ne '.' then delete;
91739     +             keep &varname _norm nraw craw;
91740     +           run;
91742     +           proc sort data=varvals; by &varname; run;
91743     +         %end;
91744     +         %else %do;
91745     +           data varvals;
91746     +              set _classout2(rename=(LEVEL=_norm));
91747     +              if _norm='' then delete;
91748     +              if _norm='.' then delete;
91749     +              keep _norm;
91750     +           run;
91751     +         %end;
91752     +         data varvals;
91753     +           set varvals;
91754     +           if &varname="." then delete;
91755     +           if upcase(&varname) = "MISSING" then delete;
91756     +         run;
91758     +          /* generate Splitvals Data */
91759     +          data tempsplitvals;
91760     +            length DISPLAY_VAR _VARIABLE_ $32 _Split_value_ $200 newgroup _group_
91760    !+_order_ 8 _level_ $8 _norm_level_ $200 ;
91762     +            %if &EM_PROPERTY_MISSINGASLEVEL eq Y %then %do;
91763     +              DISPLAY_VAR="&varname";
91764     +              _VARIABLE_ ="&varname";
91765     +              newgroup   =.;
91766     +              _group_    =1;
91767     +              _Split_Value_="Missing";
91768     +              _level_    ="ORDINAL";
91769     +              output;
91770     +              %let group=2;
91771     +            %end;
91772     +            %else %let group=1;
91774     +            %let vdsid = %sysfunc(open(WORK.VARVALS));
91775     +            %if &vdsid %then %do;
91776     +            %let namenum = %sysfunc(VARNUM(&vdsid, _norm));
91777     +            /*%let group = 2;*/
91778     +            %let vobs = %sysfunc(fetch(&vdsid));
91779     +            %do %while(&vobs=0);
91780     +                %let nameval = %bquote(%upcase(%sysfunc(getvarc(&vdsid, &namenum))))
91780    !+;
91782     +                DISPLAY_VAR   = "&varname";
91783     +                _variable_    = "&varname";
91784     +                newgroup      = .;
91785     +                _group_       = &group;
91786     +                _split_value_ = "&nameval";
91787     +                _level_       = 'ORDINAL';
91788     +                output;
91790     +              %let group = %eval(&group + 1);
91791     +              %let vobs = %sysfunc(fetch(&vdsid));
91792     +            %end;
91793     +            %if &vdsid %then %let vdsid = %sysfunc(close(&vdsid));
91794     +          run;
91796     +          /* determine if EM_USER_SPLITVALS already exists */
91797     +          %let sdsid = %sysfunc(open(&EM_USER_SPLITVALS));
91798     +          %if &sdsid > 0 %then %do;
91799     +            %let nvars = %sysfunc(ATTRN(&sdsid, NVARS));
91800     +            %if &nvars > 0 %then %do;
91801     +               proc sql;
91802     +                reset noprint;
91803     +                select count(*) into :nobs from &EM_USER_SPLITVALS;
91804     +               quit;
91805     +            %end;
91806     +            %else %let nobs=0;
91807     +            %end;
91808     +            %else %do;
91809     +              %let nobs=0;
91810     +              %let nvars=0;
91811     +            %end;
91812     +          %end;
91813     +          %if &sdsid > 0 %then %let sdsid = %sysfunc(close(&sdsid));
91815     +          /* if tempsplitvals doesn't exist; create empty data set */
91816     +          %let sdsid = %sysfunc(open(work.tempsplitvals));
91817     +          %if &sdsid <= 0 %then %do;
91818     +            data tempsplitvals;
91819     +              length DISPLAY_VAR _VARIABLE_ $32 _Split_value_ $200 newgroup _group_
91819    !+8 _level_ $8 ;
91820     +            run;
91821     +          %end;
91822     +          %if &sdsid > 0 %then %let sdsid = %sysfunc(close(&sdsid));
91824     +          data tempsplitvals;
91825     +            set tempsplitvals;
91826     +            _order_ = _N_;
91827     +          run;
91829     +          %if ((&nobs > 0) AND (&nvars > 0)) %then %do;
91830     +             proc sort data = &EM_USER_SPLITVALS; by _variable_ _split_value_; run;
91831     +             proc sort data = tempsplitvals nodupkey; by _variable_ _split_Value_
91831    !+_group_; run;
91832     +          %end;
91834     +          data &EM_USER_SPLITVALS;
91835     +           %if ((&nobs > 0) AND (&nvars > 0)) %then %do;
91836     +             merge &EM_USER_SPLITVALS tempsplitvals;
91837     +             by _variable_ _split_value_;
91838     +           %end;
91839     +           %else %do;
91840     +             set tempsplitvals;
91841     +           %end;
91842     +           if display_var eq "" then delete;
91843     +           if _norm_level_ eq "" then _norm_level_ = _split_value_;
91844     +           keep display_var _split_value_ _variable_ newgroup _group_ _level_
91844    !+_norm_level_ _order_;
91845     +         run;
91847     +           %let obs = %sysfunc(fetch(&dsid));
91848     +         %end;
91849     +     %end;
91850     +   %end;
91851     +   %if &dsid %then %let dsid = %sysfunc(close(&dsid));
91853     +   proc sort data=&EM_USER_SPLITVALS;
91854     +      by DISPLAY_VAR _Group_;
91855     +   run;
91857     +   /* delete temporary datasets */
91858     +   proc datasets library= work nolist;
91859     +     delete tempsplitvals varvals tempvariableset tempvars
91860     +     ;
91861     +   run;
91862     +   quit;
91863     +%mend EM_ORDVARS_GROUP;
91866     +%macro EM_CLASSVARS_GROUP(groupRare);
91868     +   /* retrieve all class variables from the incoming dataset */
91869     +   proc sort data=&EM_DATA_VARIABLESET out=tempvariableset;
91870     +     by NAME;
91871     +     where ((LEVEL = 'NOMINAL') OR (LEVEL='BINARY')) and ((ROLE='INPUT' and USE in
91871    !+('Y', 'D')) OR (ROLE='REJECTED' and USE='Y'));
91872     +   run;
91874     +   %if &useImport eq 1 %then %do;
91875     +     /* remove all variables from tempvariableset that are included in the
91875    !+importsubset */
91876     +     proc sort data=&EM_USER_IMPORTSUBSET out=tempimport(rename=(_VARIABLE_ = NAME))
91876    !+;
91877     +       by _VARIABLE_ ;
91878     +     run;
91879     +     proc sort data=tempvariableset; by NAME; run;
91881     +     data tempvariableset;
91882     +       merge tempimport(in=_a) tempvariableset(in=_b);
91883     +       by NAME;
91884     +       if ^_a then output;
91885     +     run;
91886     +   %end;
91888     +   %if &useFreeze eq 1 %then %do;
91889     +     /* remove all variables from tempvariableset that are included in the
91889    !+freezesubset */
91890     +     proc sort data=&EM_USER_FREEZESUBSET out=tempfreeze(rename=(_VARIABLE_ = NAME))
91890    !+;
91891     +       by _VARIABLE_ ;
91892     +     run;
91893     +     proc sort data=tempvariableset; by NAME; run;
91895     +     data tempvariableset;
91896     +       merge tempfreeze(in=_a) tempvariableset(in=_b);
91897     +       by NAME;
91898     +       if ^_a then output;
91899     +     run;
91900     +   %end;
91902     +   /* run dmdb to retrieve list of all class levels and counts */
91903     +   %let dsid = %sysfunc(open(work.tempvariableset));
91904     +   %let nobs = 0;
91905     +   %if &dsid %then %do;
91906     +     %let nobs = %sysfunc(ATTRN(&dsid, NOBS));
91908     +   %end;
91910     +   %if &nobs gt 0 %then %do;
91911     +     proc dmdb data=&EM_IMPORT_DATA classout=tempclassout;
91912     +       class
91914     +        %let namenum = %sysfunc(VARNUM(&dsid, NAME));
91915     +        %let obs = %sysfunc(fetch(&dsid));
91916     +        %do %while(&obs=0);
91917     +           %let name = %sysfunc(getvarc(&dsid, &namenum));
91918     +           &name
91919     +           %let obs = %sysfunc(fetch(&dsid));
91920     +        %end;
91921     +     ;
91923     +     %if %EM_FREQ ne %then %do;
91924     +        freq %EM_FREQ;
91925     +     %end;
91926     +    run;
91927     +   %end;
91928     +   %if &dsid %then %let dsid = %sysfunc(close(&dsid));
91930     +   %let dsid = %sysfunc(open(work.tempclassout));
91931     +   %let nobs = 0;
91932     +   %if &dsid %then %do;
91933     +     %let nobs = %sysfunc(ATTRN(&dsid, NOBS));
91934     +     %let dsid = %sysfunc(close(&dsid));
91935     +   %end;
91937     +   %if &nobs gt 0 %then %do;
91938     +    data tempclassout;
91939     +       set tempclassout;
91940     +       if LEVEL='MISSING' then level='Missing';
91941     +    run;
91943     +    proc sort data=tempclassout nodupkey;
91944     +      by NAME descending FREQUENCY LEVEL;
91945     +    run;
91947     +    data tempds(keep=NAME NOBS);
91948     +      retain NOBS;
91949     +      set tempclassout;
91950     +      by NAME;
91951     +      if first.NAME then
91952     +        NOBS = frequency;
91953     +      else
91954     +        NOBS=NOBS+frequency;
91955     +      if last.name then do;
91956     +        output;
91957     +      end;
91958     +    run;
91960     +    data tempds;
91961     +      merge tempclassout
91962     +      tempds;
91963     +      by NAME;
91964     +      if ((LEVEL ne '') AND (LEVEL ne "."));
91965     +      %if &groupRare eq Y %then %do;
91966     +        PCT = 100 * (FREQUENCY/NOBS);
91967     +        if PCT < &EM_PROPERTY_GROUPCUTOFF then flag=1;
91968     +        else flag=0;
91969     +      %end;
91970     +      %else %do;
91971     +        flag = 0;
91972     +      %end;
91973     +    run;
91975     +    %if &EM_PROPERTY_MISSINGASLEVEL eq Y %then %do;
91976     +      data tempmissvalues;
91977     +        length NAME $32 LEVEL $200 _LEVEL_ $8 _GROUP_ 8;
91979     +      %let dsid = %sysfunc(open(WORK.TEMPVARIABLESET));
91980     +      %if &dsid %then %do;
91981     +        %let varnum = %sysfunc(VARNUM(&dsid, NAME));
91982     +        %let fmtnum = %sysfunc(VARNUM(&dsid, FORMAT));
91983     +        %let typenum = %sysfunc(VARNUM(&dsid, TYPE));
91984     +        %let lblnum  = %sysfunc(VARNUM(&dsid, LABEL));
91985     +        %let varlvlnum = %sysfunc(VARNUM(&dsid, LEVEL));
91986     +        %let obs = %sysfunc(fetch(&dsid));
91988     +        %do %while(&obs=0);
91989     +          %let var = %sysfunc(getvarc(&dsid, &varnum));
91990     +          %let format = %sysfunc(getvarc(&dsid, &fmtnum));
91991     +          %let type = %sysfunc(getvarc(&dsid, &typenum));
91992     +          %let varlvl = %sysfunc(getvarc(&dsid, &varlvlnum));
91994     +          NAME="&var";
91995     +          LEVEL="Missing";
91996     +          _LEVEL_="&varlvl";
91997     +          _group_ = 1;
91998     +          output;
92000     +          %let obs = %sysfunc(fetch(&dsid));
92001     +        %end;
92002     +      %end;
92003     +      %if &dsid %then %let dsid = %sysfunc(close(&dsid));
92004     +      run;
92005     +    %end;
92007     +    /* generate Splitvals Data */
92008     +    data tempsplitvals;
92009     +      length _VARIABLE_ $32 newgroup _group_ 8 _Split_value_ $200;
92011     +      set tempclassout
92012     +      %if &EM_PROPERTY_MISSINGASLEVEL eq Y %then %do;
92013     +         tempmissvalues
92014     +      %end;
92015     +      ;
92016     +      if ((level ne '') AND (level ne '.'));
92018     +     %let dsid = %sysfunc(open(WORK.TEMPVARIABLESET));
92019     +     %if &dsid %then %do;
92020     +        %let varnum = %sysfunc(VARNUM(&dsid, NAME));
92021     +        %let fmtnum = %sysfunc(VARNUM(&dsid, FORMAT));
92022     +        %let typenum = %sysfunc(VARNUM(&dsid, TYPE));
92023     +        %let lblnum  = %sysfunc(VARNUM(&dsid, LABEL));
92024     +        %let varlvlnum = %sysfunc(VARNUM(&dsid, LEVEL));
92025     +        %let obs = %sysfunc(fetch(&dsid));
92027     +        %do %while(&obs=0);
92028     +          %let var = %sysfunc(getvarc(&dsid, &varnum));
92029     +          %let format = %sysfunc(getvarc(&dsid, &fmtnum));
92030     +          %let type = %sysfunc(getvarc(&dsid, &typenum));
92031     +          %let varlvl = %sysfunc(getvarc(&dsid, &varlvlnum));
92033     +          if NAME = "&var" then do;
92034     +            _LEVEL_ = "&varlvl";
92036     +          /* cycle through levels, assigning group values;              */
92037     +          /* flag=1 indicates to put value in "_OTHER_" group;          */
92038     +          /* flag=0 indicates that value shoudld be in group of its own */
92039     +          %let choice = ((NAME="&Var") and (FLAG=0));
92040     +          %if &EM_PROPERTY_MISSINGASLEVEL eq Y %then %do;
92041     +            %let group=2;
92042     +          %end;
92043     +          %else %do;
92044     +            %let group = 1;
92045     +          %end;
92046     +          %let fdsid = %sysfunc(open(work.tempds(where=(&choice))));
92047     +          %if &fdsid %then %do;
92049     +            %let lvlnum = %sysfunc(VARNUM(&fdsid, LEVEL));
92050     +            %let fobs = %sysfunc(fetch(&Fdsid));
92051     +            %let fflag = 0;
92052     +            %do %while(&fobs=0);
92053     +              %let fflag = 1;
92054     +              %let temp = %nrbquote(%sysfunc(getvarc(&fdsid, &lvlnum)));
92055     +              %let level = %nrbquote(%sysfunc(tranwrd(&temp, %str(%"),"")));
92056     +              %let level = %nrbquote(%sysfunc(strip(&level)));
92057     +              %if &EM_PROPERTY_MISSINGASLEVEL eq Y %then %do;
92058     +                %if &group eq 2 %then %do;
92059     +                   if LEVEL = "&level" then _GROUP_ = &group;
92060     +                %end;
92061     +                %else %do;
92062     +                   else if LEVEL = "&level" then _GROUP_ = &group;
92063     +                %end;
92064     +              %end;
92065     +              %else %do;
92066     +                %if &group eq 1 %then %do;
92067     +                   if LEVEL = "&level" then _GROUP_ = &group;
92068     +                %end;
92069     +                %else %do;
92070     +                   else if LEVEL = "&level" then _GROUP_ = &group;
92071     +                %end;
92072     +              %end;
92074     +              %let group = %eval(&group + 1);
92075     +              %let fobs = %sysfunc(fetch(&fdsid));
92076     +            %end;
92078     +          %end;
92079     +          %if &fflag eq 1 %then %do;
92080     +            else if LEVEL ^='Missing' then _GROUP_ = &group;
92081     +          %end;
92082     +          end;
92084     +          %if &fdsid %then %let fdsid = %sysfunc(close(&fdsid));
92085     +          %let obs = %sysfunc(fetch(&dsid));
92086     +        %end;
92087     +     %end;
92088     +     %if &dsid %then %let dsid = %sysfunc(close(&dsid));
92089     +     _VARIABLE_ = NAME;
92090     +     newgroup = .;
92091     +     rename NAME = DISPLAY_VAR
92092     +            LEVEL = _SPLIT_VALUE_;
92093     +     keep NAME NEWGROUP _VARIABLE_ LEVEL _LEVEL_ _GROUP_;
92094     +    run;
92095     +  %end;
92096     +   %if &dsid %then %let dsid = %sysfunc(close(&dsid));
92098     +    /* determine if EM_USER_SPLITVALS already exists */
92099     +    %let sdsid = %sysfunc(open(&EM_USER_SPLITVALS));
92100     +    %if &sdsid > 0 %then %do;
92101     +      %let nvars = %sysfunc(ATTRN(&sdsid, NVARS));
92102     +      %if &nvars > 0 %then %do;
92103     +        proc sql;
92104     +          reset noprint;
92105     +          select count(*) into :nobs from &EM_USER_SPLITVALS;
92106     +        quit;
92107     +      %end;
92108     +      %else %let nobs=0;
92109     +    %end;
92110     +    %else %do;
92111     +       %let nobs=0;
92112     +       %let nvars=0;
92113     +    %end;
92114     +    %if &sdsid > 0 %then %let sdsid = %sysfunc(close(&sdsid));
92116     +   /* if tempsplitvals doesn't exist; create empty data set */
92117     +    %let sdsid = %sysfunc(open(work.tempsplitvals));
92118     +    %if &sdsid <= 0 %then %do;
92119     +      data tempsplitvals;
92120     +        length _VARIABLE_ $32 newgroup _group_ 8 _Split_value_ $200;
92121     +      run;
92122     +    %end;
92123     +    %if &sdsid > 0 %then %let sdsid = %sysfunc(close(&sdsid));
92125     +    %if ((&nobs > 0) AND (&nvars > 0)) %then %do;
92126     +      proc sort data = &EM_USER_SPLITVALS; by _variable_ _split_value_; run;
92127     +      proc sort data = tempsplitvals nodupkey; by _variable_ _split_Value_ _group_;
92127    !+run;
92128     +    %end;
92130     +    /* if useIMport=1 also include import definitions here as well */
92131     +    %if &useImport eq 1 %then %do;
92132     +      proc sort data=&EM_USER_IMPORTSUBSET; by _variable_ _split_value_; run;
92133     +    %end;
92134     +    %if &useFreeze eq 1 %then %do;
92135     +      proc sort data=&EM_USER_FREEZESUBSET; by _variable_ _split_value_; run;
92136     +    %end;
92137     +    data &EM_USER_SPLITVALS;
92138     +      %if ((&nobs > 0) AND (&nvars > 0)) %then %do;
92139     +        merge &EM_USER_SPLITVALS tempsplitvals
92140     +        %if &useImport eq 1 %then %do;
92141     +           &EM_USER_IMPORTSUBSET(where=(binVar eq "" and _level_ ne "INTERVAL"))
92142     +        %end;
92143     +        %if &useFreeze eq 1 %then %do;
92144     +           &EM_USER_FREEZESUBSET(where=(binVar eq "" and _level_ ne "INTERVAL"))
92145     +        %end;
92147     +        ;
92148     +        by _variable_ _split_value_
92149     +        ;
92150     +      %end;
92151     +      %else %do;
92152     +        set tempsplitvals
92153     +        %if &useImport eq 1 %then %do;
92154     +           &EM_USER_IMPORTSUBSET(where=(binVar eq "" and _level_ ne "INTERVAL"))
92155     +        %end;
92156     +        %if &useFreeze eq 1 %then %do;
92157     +           &EM_USER_FREEZESUBSET(where=(binVar eq "" and _level_ ne "INTERVAL"))
92158     +        %end;
92159     +        ;
92160     +      %end;
92161     +      if display_var eq "" then delete;
92162     +      if _norm_level_ eq "" then _norm_level_ = _split_value_;
92163     +      keep display_var _split_value_ _variable_ newgroup _group_ _level_
92163    !+_norm_level_;
92164     +    run;
92166     +    proc sort data=&EM_USER_SPLITVALS;
92167     +      by DISPLAY_VAR _Group_;
92168     +    run;
92170     +   /* delete temporary datasets */
92171     +   proc datasets library= work nolist;
92172     +     delete tempsplitvals tempds tempclassout tempvariableset tempvars
92173     +     %if &EM_PROPERTY_MISSINGASLEVEL eq Y %then %do;
92174     +       tempmissvalues
92175     +     %end;
92176     +     ;
92177     +   run;
92178     +   quit;
92179     +%mend EM_CLASSVARS_GROUP;
92182     +%macro EM_SUMMARIZE_TABLE(data, inputData, outData, varname=);
92184     +  proc sort data=&EM_DATA_VARIABLESET out=tempvarset; by name; run;
92186     +  data temptrain ;
92187     +    set &data;
92188     +  run;
92190     +  /* normalize all values prior to calculating counts */
92191     +  filename _temp catalog 'sashelp.emapps.em_Prenormalizeclassvars.source';
92192     +  %include _temp;
92193     +  filename _temp;
92194     +  filename _temp catalog 'sashelp.emapps.em_Normalizeclassvars.source';
92195     +  %include _temp;
92196     +  filename _temp;
92198     +  proc sort data=&EM_USER_VARMAPPINGS
92199     +  %if &varname ne %then %do;
92200     +    (where=(_variable_="&varname"))
92201     +  %end;
92202     +  out=tempmap; by _variable_; run;
92204     +  data _cmeta;
92205     +    merge tempvarset tempmap(in=_a rename=(_variable_=name ));
92206     +    by name;
92207     +    if ((_a) or (role="TARGET"));
92208     +    if role="INPUT" or (role="REJECTED" and Use="Y") then name=_proc_var_;
92209     +    %if %length(%EM_BINARY_TARGET) %then %do;
92210     +      if role="TARGET" then role="INPUT";
92211     +    %end;
92212     +    level = procLevel;
92213     +    index = kindex(name, "BIN_");
92214     +    if index gt 0 then do;
92215     +     level="ORDINAL";
92216     +     format = "";
92217     +    end;
92218     +    drop index;
92219     +  run;
92221     +  %em_PreNormalizeClassVars(incmeta=_cmeta, outcmeta=_cmetatmp);
92222     +  %em_NormalizeClassVars(indata=work.temptrain, cmeta=_cmetatmp, encodedTarget=N,
92222    !+outdata=_tmp_train);
92224     +  proc sort data=&inputData out=sortedmap; by _proc_var_; run;
92226     +  data _null_;
92227     +    set sortedmap end=eof;
92228     +    by _proc_var_;
92229     +    if _n_=1 then do;
92230     +      call execute("ods output CrossTabFreqs=crosstabfreq ;");
92231     +      call execute("ods listing close;");
92232     +      call execute("proc freq data=_tmp_train order=formatted addnames;");
92233     +      call execute("tables ("||_proc_var_);
92234     +    end;
92235     +    else do;
92236     +      call execute(_proc_var_);
92237     +    end;
92238     +    if eof then do;
92239     +      call execute(") * &ignbintarget/ missing;");
92240     +      %if %EM_FREQ ne %then %do;
92241     +        call execute("weight %EM_FREQ;");
92242     +      %end;
92243     +      call execute("run;");
92244     +      call execute("ods output close;");
92245     +      call execute("ods listing;");
92246     +    end;
92247     +  run;
92249     +  data _null_;
92250     +    set sortedmap end=eof;
92251     +    by _proc_var_;
92252     +    if _n_=1 then do;
92253     +      call execute("data crosstabs;");
92254     +      call execute("  length _variable_ _split_value_  $200 ;");
92255     +      call execute("  set crosstabfreq(where=(_type_='11'));");
92256     +      call execute("  _variable_= RowVariable;");
92257     +    end;
92259     +    call execute("if strip(RowVariable) = '"||strip(_proc_var_)||"' then do;");
92260     +    call execute("  _split_value_="||_proc_var_||";");
92261     +    call execute("end;");
92263     +    if eof then do;
92264     +      call execute("keep _variable_ _split_value_ &ignbintarget Frequency Percent
92264    !+display_var;");
92265     +      call execute("run;");
92266     +    end;
92267     +  run;
92269     +  proc sort data=crosstabs; by _variable_ _split_value_; run;
92271     +  data crosstabs;
92272     +    length display_var $32;
92273     +    merge crosstabs sortedmap(rename=(_variable_=display_var _proc_var_=_variable_ )
92273    !+ keep=_variable_ _proc_var_ );
92274     +    by _variable_;
92275     +  run;
92277     +  proc sort data=crosstabs; by display_var _split_value_; run;
92278     +  proc sort data=&EM_DATA_VARIABLESET out=tempvarset; by name; run;
92280     +  data crosstabs;
92281     +    merge crosstabs tempvarset(rename=(name=display_var) keep=type format name
92281    !+level);
92282     +    by display_var;
92283     +    index = kindex(_variable_, "BIN_");
92284     +    if index gt 0 then do;
92285     +     level="ORDINAL";
92286     +     format = "";
92287     +    end;
92288     +    _temp = &ignbintarget;
92289     +    /*
92290     +    %if ((&target_type eq C) OR (&target_format ne ))  %then %do;
92291     +      %if &target_format ne %then %do;
92292     +        %if &target_type eq C %then %do;
92293     +           %dmnormcp(put(&ignbintarget, &target_format), _temp);
92294     +        %end;
92295     +        %else %do;
92296     +           %dmnormcp(put(&ignbintarget, &target_format), _temp);
92297     +        %end;
92298     +      %end;
92299     +      %else %do;
92300     +        %dmnormcp(&ignbintarget, _temp);
92301     +      %end;
92302     +    %end;
92303     +    %else %do;
92304     +      _temp = &ignbintarget;
92305     +    %end;
92306     +*/
92308     +    drop index;
92309     +  run;
92311     +  proc sort data=crosstabs; by _variable_ _split_value_; run;
92313     +  data &outdata;
92314     +    length _variable_ _split_value_ $200 eventCount nonEventCount Total EventRate
92314    !+nonEventRate  8 type $1 valfmt $20 ;
92316     +    retain eventCount noneventCount ;
92317     +    set crosstabs;
92318     +    by  _variable_ _split_value_;
92320     +    if first._split_value_ then do;
92321     +     total=0;
92322     +     eventcount=0;
92323     +     noneventcount=0;
92324     +    end;
92326     +    %if ((&target_type eq C) OR (&target_format ne ))  %then %do;
92327     +      %if &target_format ne %then %do;
92328     +        if upcase(strip(_temp))="&target_event" then
92329     +          eventCount=Frequency;
92330     +      %end;
92331     +      %else %do;
92332     +         if upcase(strip(_temp)) ="&target_event" then
92333     +          eventCount=Frequency;
92334     +      %end;
92335     +    %end;
92336     +    %else %do;
92337     +      if _temp=&target_event then
92338     +        eventCount=Frequency;
92339     +    %end;
92340     +    else
92341     +      noneventCount=Frequency;
92343     +    if last._split_value_ then do;
92344     +      total = eventCount + noneventCount;
92346     +      if total ne 0 then do;
92347     +        eventRate = eventCount / total;
92348     +        nonEventRate = nonEventCount / total;
92349     +      end;
92350     +      else do;
92351     +        eventRate = 0;
92352     +        nonEventRate = 0;
92353     +      end;
92354     +     output;
92355     +    end;
92356     +    valfmt = format;
92358     +    drop _temp Frequency percent;
92359     +   run;
92361     +%mend EM_SUMMARIZE_TABLE;
92364     +%macro EM_FINE_DETAIL(bindata, varmappings, fineDetailData, splitVals, binMappings,
92364    !+interactiveFlag=0);
92366     +   proc freq data=&bindata noprint;
92367     +     table &ignbintarget / missing out=temptargetB;
92368     +     %if %EM_FREQ ne %then %do;
92369     +       weight %EM_FREQ;
92370     +     %end;
92371     +   run;
92373     +   %let tdsid = %sysfunc(open(work.temptargetB));
92374     +   %if &tdsid %then %do;
92375     +      %let tarnum = %sysfunc(VARNUM(&tdsid, &ignbintarget));
92376     +      %let tnum  = %sysfunc(VARNUM(&tdsid, COUNT));
92378     +      %let temp = %nrbquote(%sysfunc(strip(&target_event)));
92379     +      %let target_event = %nrbquote(%sysfunc(tranwrd(&temp, %str(%"),"")));
92380     +      %let temp = %nrbquote(%sysfunc(strip(&target_nonevent)));
92381     +      %let target_nonevent = %nrbquote(%sysfunc(tranwrd(&temp, %str(%"),"")));
92384     +      %let obs = %sysfunc(fetch(&tdsid));
92385     +      %do %while(&obs = 0);
92386     +         %if ((&target_type eq C) or (&target_format ne )) %then %do;
92387     +           %if &target_type eq C %then %do;
92388     +             %let temp = %nrbquote(%sysfunc(getvarc(&tdsid, &tarnum)));
92389     +             %let tarvalue = %nrbquote(%sysfunc(tranwrd(&temp, %str(%"),"")));
92390     +           %end;
92391     +           %else
92392     +             %let tarvalue = %sysfunc(getvarn(&tdsid, &tarnum));
92394     +           %if &target_format ne %then %do;
92395     +              %if &target_type eq C %then %do;
92396     +                %let temp = %nrbquote(%sysfunc(putc(%nrbquote(&tarvalue),
92396    !+&target_format)));
92397     +                %let tarvalue = %nrbquote(%sysfunc(tranwrd(&temp, %str(%"),"")));
92398     +              %end;
92399     +              %else
92400     +                %let tarvalue = %sysfunc(putn(&tarvalue, &target_format));
92401     +           %end;
92402     +           %let tarvalue = %nrbquote(%upcase(%sysfunc(strip(&tarvalue))));
92403     +           %let count = %sysfunc(getvarn(&tdsid, &tnum));
92405     +           %if "&tarvalue" eq "&target_event" %then %do;
92406     +             %let totalevent = &count;
92407     +           %end;
92408     +           %else %if "&tarvalue" eq "&target_nonevent" %then %do;
92409     +              %let totalnonevent= &count;
92410     +           %end;
92411     +         %end;
92412     +         %else %do;
92413     +           %let tarvalue = %sysfunc(getvarn(&tdsid, &tarnum));
92414     +           %let count = %sysfunc(getvarn(&tdsid, &tnum));
92416     +           %if &tarvalue eq &target_event %then %do;
92417     +             %let totalevent = &count;
92418     +           %end;
92419     +           %else %if &tarvalue eq &target_nonevent %then %do;
92420     +              %let totalnonevent= &count;
92421     +           %end;
92422     +         %end;
92423     +         %let obs = %sysfunc(fetch(&tdsid));
92424     +      %end;
92425     +   %end;
92426     +   %if &tdsid %then %let tdsid = %sysfunc(close(&tdsid));
92428     +   proc datasets lib=work nolist;
92429     +      delete temptargetB;
92430     +   run;
92431     +   quit;
92433     +   %if &interactiveFlag eq 0 %then %do;
92434     +     %EM_SUMMARIZE_TABLE(&bindata, &varmappings, &fineDetailData);
92435     +   %end;
92436     +   %else %do;
92437     +     %EM_SUMMARIZE_TABLE(&bindata, &varmappings, &fineDetailData, varname=&wherevar)
92437    !+;
92438     +   %end;
92441     +   data &fineDetailData;
92442     +     length display_var $32 newgroup numsplitval 8;
92443     +     set &fineDetailData;
92445     +     display_var = _variable_;
92447     +     index = kindex(display_var, "BIN_");
92448     +     if index gt 0 then do;
92449     +       display_var = ksubstr(display_var, 5);
92450     +     end;
92452     +     index2 = kindex(display_var, "SV_");
92453     +     if index2 gt 0 then do;
92454     +       display_var = ksubstr(display_var, 4);
92455     +     end;
92457     +     /* re-code missing values to "Missing" */
92458     +     if ((_SPLIT_VALUE_ = "") or (_SPLIT_VALUE_ = " ") or (_SPLIT_VALUE_ = "."))
92458    !+then _SPLIT_VALUE_="MISSING";
92459     +     _index_ = _N_;
92460     +     newgroup = .;
92461     +     drop index index2 ;
92462     +   run;
92464     +   /* add group information to fineDetailData; */
92465     +   /* add label information for binned variables to fineDetailData*/
92467     +   proc sort data=&fineDetailData; by _variable_ _split_value_; run;
92469     +   data tmpsplitvals;
92470     +     set &splitvals;
92471     +     _norm_level_ = upcase(_norm_level_);
92472     +     if _split_value_ eq 'Missing' then _split_value_ = 'MISSING';
92473     +    * drop _split_value_;
92474     +   run;
92476     +   proc sort data=tmpsplitvals out=sortedsplit; by _variable_ _split_value_; run;
92477     +   proc datasets library=work nolist;
92478     +     delete tmpsplitvals;
92479     +   run;
92480     +   quit;
92482     +   proc sort data=&BINMAPPINGS out=sortedbin; by BIN_NAME BIN; run;
92484     +   data &fineDetailData;
92485     +      merge &fineDetailData(in=_c) work.sortedsplit(in=_b)
92485    !+work.sortedbin(rename=(BIN_NAME=_variable_ BIN=_split_value_) in=_a);
92486     +      by _variable_ _split_value_;
92487     +      if _a then do;
92488     +        binFlag = 1;
92489     +        VALUE=EM_BIN_LABEL;
92490     +      end;
92491     +      else do;
92492     +        binFlag = 0;
92493     +        *VALUE=strip(display_var)!!"="!!strip(_split_value_);
92494     +        VALUE=strip(_split_value_);
92496     +      end;
92498     +      if ((eventCount=.) or (nonEventCount=.)) then do;
92499     +        eventCount=0;
92500     +        nonEventCount=0;
92501     +        total = 0;
92502     +        eventRate= 0;
92503     +        nonEventRate = 0;
92504     +      end;
92506     +      eventCount = round(eventCount, .001);
92507     +      nonEventCount = round(nonEventCount, .001);
92508     +      total= round(total, .001);
92509     +      eventRate = round(eventRate, .001);
92510     +      nonEventRate = round(nonEventRate, .001);
92512     +     if ((type='N') AND (VERIFY(trim(left(_split_value_)) , '.0123456789')=0) ) then
92513     +         numsplitval = _split_value_;
92514     +     else if ((type='N') AND (valfmt ne "")) then
92515     +        numsplitval = _order_;
92516     +     else numsplitval=.;
92518     +      if DISPLAY_VAR = "" and _VARIABLE_ = "" then delete;
92519     +      if _a and ^_b then delete;
92520     +      if _c and ^_b then delete;
92521     +      drop NAME EM_BIN_LABEL valfmt;
92522     +   run;
92524     +   /* for class variables that have values falling into the "other" category, set
92524    !+_LEVEL_ and _GROUP_ based on Missing level */
92525     +   data &fineDetailData;
92526     +     set &fineDetailData;
92528     +     %let choice = _LEVEL_ ne "INTERVAL" and _SPLIT_VALUE_ eq "Missing";
92529     +     %let dsid = %sysfunc(open(&splitvals(where=(&choice))));
92530     +     %if &dsid %then %do;
92531     +       %let dnum = %sysfunc(VARNUM(&dsid, DISPLAY_VAR));
92532     +       %let lvlnum = %sysfunc(VARNUM(&dsid, _LEVEL_));
92533     +       %let grpnum = %sysfunc(VARNUM(&dsid, _GROUP_));
92535     +       %let obs = %sysfunc(fetch(&dsid));
92536     +       %do %while(&obs=0);
92537     +         %let dispvar = %sysfunc(getvarc(&dsid, &dnum));
92538     +         %let lvl     = %sysfunc(getvarc(&dsid, &lvlnum));
92539     +         %let group   = %sysfunc(getvarn(&dsid, &grpnum));
92541     +         if DISPLAY_VAR = "&dispvar" then do;
92542     +           if _LEVEL_ = "" then _LEVEL_ ="&lvl";
92543     +           if _GROUP_ = . then _GROUP_ = &group;
92544     +         end;
92546     +         %let obs = %sysfunc(fetch(&dsid));
92547     +       %end;
92548     +     %end;
92549     +     %if &dsid %then %let dsid = %sysfunc(close(&dsid));
92550     +     if _GROUP_ = . then delete;
92551     +    * if binFlag=1 and UB=LB then delete;
92552     +    * if upcase(_SPLIT_VALUE_) ne "MISSING" and _index_ eq . then delete;
92553     +   run;
92555     +   proc sort data=&fineDetailData;
92556     +     by DISPLAY_VAR _index_;
92557     +   run;
92559     +   proc datasets lib=work nolist;
92560     +     delete sortedsplit sortedbin
92561     +     ;
92562     +   run;
92563     +   quit;
92564     +%mend EM_FINE_DETAIL;
92566     +%macro EM_CREATE_GROUPING(bindata, fineDetailData, coarse);
92568     +   proc freq data=&bindata noprint;
92569     +     table &ignbintarget / missing out=temptargetC;
92570     +     %if %EM_FREQ ne %then %do;weight %EM_FREQ;
92571     +     %end;
92572     +   run;
92574     +   %let tdsid = %sysfunc(open(work.temptargetC));
92575     +   %if &tdsid %then %do;
92576     +      %let tarnum = %sysfunc(VARNUM(&tdsid, &ignbintarget));
92577     +      %let tnum  = %sysfunc(VARNUM(&tdsid, COUNT));
92579     +      %let obs = %sysfunc(fetch(&tdsid));
92580     +      %do %while(&obs = 0);
92581     +        /* %if &target_type eq C or &target_format ne %then %do; */
92582     +         %if ((&target_type eq C) or (&target_format ne )) %then %do;
92583     +           %if &target_type eq C %then %do;
92584     +             %let temp = %nrbquote(%sysfunc(getvarc(&tdsid, &tarnum)));
92585     +             %let tarvalue = %nrbquote(%sysfunc(tranwrd(&temp, %str(%"),"")));
92586     +           %end;
92587     +           %else
92588     +             %let tarvalue = %sysfunc(getvarn(&tdsid, &tarnum));
92590     +           %if &target_format ne %then %do;
92591     +              %if &target_type eq C %then %do;
92592     +                %let temp = %nrbquote(%sysfunc(putc(%nrbquote(&tarvalue),
92592    !+&target_format)));
92593     +                %let tarvalue = %nrbquote(%sysfunc(tranwrd(&temp, %str(%"),"")));
92594     +              %end;
92595     +              %else
92596     +                %let tarvalue = %sysfunc(putn(&tarvalue, &target_format));
92597     +           %end;
92598     +           %let tarvalue =%nrbquote(%upcase(&tarvalue));
92599     +           %let count = %sysfunc(getvarn(&tdsid, &tnum));
92601     +           %let tarvalue = %nrbquote(%upcase(%sysfunc(strip(&tarvalue))));
92602     +           %let target_event = %nrbquote(%sysfunc(strip(&target_event)));
92603     +           %let target_nonevent = %nrbquote(%sysfunc(strip(&target_nonevent)));
92605     +           %if "&tarvalue" eq "&target_event" %then %do;
92606     +             %let totalevent = &count;
92607     +           %end;
92608     +           %else %if "&tarvalue" eq "&target_nonevent" %then %do;
92609     +              %let totalnonevent= &count;
92610     +           %end;
92611     +         %end;
92612     +         %else %do;
92613     +           %let tarvalue = %sysfunc(getvarn(&tdsid, &tarnum));
92614     +           %let count = %sysfunc(getvarn(&tdsid, &tnum));
92616     +           %if &tarvalue eq &target_event %then %do;
92617     +             %let totalevent = &count;
92618     +           %end;
92619     +           %else %if &tarvalue eq &target_nonevent %then %do;
92620     +              %let totalnonevent= &count;
92621     +           %end;
92622     +         %end;
92623     +         %let obs = %sysfunc(fetch(&tdsid));
92624     +      %end;
92625     +   %end;
92626     +   %if &tdsid %then %let tdsid = %sysfunc(close(&tdsid));
92628     +   proc datasets lib=work nolist;
92629     +      delete temptargetC;
92630     +   run;
92631     +   quit;
92633     +   proc means data=&FINEDETAILDATA noprint;
92634     +      var eventCount nonEventCount;
92635     +      class _variable_  _group_;
92636     +      output out=summ(where=(_type_ in(2,3))) sum=eventCount nonEventCount;
92637     +   run;
92639     +   proc sort data=summ(drop=_type_ _freq_);
92640     +     by _variable_ _group_;
92641     +   run;
92643     +   data gini(keep=_variable_ eventCount nonEventCount groupresprate)
92644     +        tempcoarse(keep=_variable_  _group_ eventCount nonEventCount groupresprate
92644    !+groupNonRespRate eventRate nonEventRate respper nrespper);
92645     +        set summ;
92646     +        *format groupresprate 6.2;
92647     +        *format groupnonresprate 6.2;
92648     +        by _variable_ ;
92649     +        if _group_=. then do;
92650     +        end;
92651     +        else do;
92652     +           respper = eventCount / &totalEvent;
92653     +           nrespper = nonEventCount / &totalNonEvent;
92655     +           if ((nonEventCount = 0) AND (eventCount = 0)) then do;
92656     +                groupresprate=0;
92657     +                groupNonresprate = 0;
92658     +                eventRate = 0;
92659     +                nonEventRate = 0;
92660     +           end;
92661     +           else do;
92662     +               groupresprate = eventCount / (eventCount + nonEventCount) ;
92663     +               groupNonRespRate = 1 - groupRespRate;
92664     +               eventRate = eventCount / &totalEvent ;
92665     +               nonEventRate = nonEventCount / &totalNonEvent ;
92666     +            end;
92668     +           output gini tempcoarse;
92670     +        end;
92671     +   run;
92672     +   proc sort data=gini;
92673     +      by _variable_ descending groupresprate;
92674     +   run;
92676     +   data gini(keep= _variable_ _gini_);
92677     +     retain between within cumresp cumnresp;
92678     +     set gini(keep=_variable_  eventCount nonEventCount);
92679     +     by _variable_;
92680     +     if first._variable_ then do;
92681     +       between  = 0;
92682     +       within   = 0;
92683     +       cumresp  = 0;
92684     +       cumnresp = 0;
92685     +     end;
92686     +     between + 2 * cumnresp * eventCount;
92687     +     within + nonEventCount * eventCount;
92688     +     cumresp + eventCount;
92689     +     cumnresp + nonEventCount;
92690     +     if last._variable_ then do;
92691     +       if ^(cumnresp=0 or cumresp=0) then do;
92692     +         _gini_ = 100 * (1 - (within + between) / (cumnresp * cumresp));
92693     +         output;
92694     +       end;
92695     +     end;
92696     +   run;
92698     +   data tempdisplayvar;
92699     +      set &EM_USER_VARMAPPINGS;
92700     +      rename _variable_ = display_var
92701     +      _proc_var_ = _variable_;
92702     +   keep _variable_ _proc_var_ label;
92703     +   run;
92704     +   proc sort data=tempdisplayvar; by _variable_; run;
92706     +   data  &COARSE;
92707     +     length display_Var $32 label _label_ $200 role $10 _group_ 8;
92708     +     merge tempdisplayvar tempcoarse gini ;
92709     +     by _variable_;
92710     +     label display_var = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel ,
92710    !+NOQUOTE))"
92711     +           eventRate   = "%sysfunc(sasmsg(sashelp.dmine, rpt_eventrate_vlabel ,
92711    !+NOQUOTE))"
92712     +           nonEventRate = "%sysfunc(sasmsg(sashelp.dmine, rpt_noneventrate_vlabel ,
92712    !+NOQUOTE))"
92713     +           _group_    = "%sysfunc(sasmsg(sashelp.dmine, rpt_group_vlabel ,
92713    !+NOQUOTE))"
92714     +           role       = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel ,
92714    !+NOQUOTE))"
92715     +           _gini_     = "%sysfunc(sasmsg(sashelp.dmine, rpt_gini_vlabel  ,
92715    !+NOQUOTE))"
92716     +           eventcount = "%sysfunc(sasmsg(sashelp.dmine, rpt_eventcount_vlabel  ,
92716    !+NOQUOTE))"
92717     +           noneventcount = "%sysfunc(sasmsg(sashelp.dmine, rpt_noneventcount_vlabel
92717    !+ , NOQUOTE))"
92718     +           groupresprate = "%sysfunc(sasmsg(sashelp.dmine, rpt_groupresprate_vlabel
92718    !+ , NOQUOTE))"
92719     +           groupnonresprate = "%sysfunc(sasmsg(sashelp.dmine,
92719    !+rpt_groupnonresprate_vlabel  , NOQUOTE))"
92720     +           ;
92722     +    eventCount = round(eventCount, .001);
92723     +    nonEventCount = round(nonEventCount, .001);
92724     +    groupRespRate = round(groupRespRate, .001);
92726     +     drop _variable_ index index2 respper nrespper;
92727     +   run;
92729     +   proc datasets library=work nolist;
92730     +     delete  tempcoarse gini             ;
92732     +   run;
92733     +   quit;
92735     +%mend EM_CREATE_GROUPING;
92739     +%macro EM_GENERATE_LABELVALUES(filename, splitvals, binmappings, coarse);
92741     +         data _null_;
92742     +            FILE &filename;
92743     +            put " length _LABEL_ $200;";
92744     +            put ' label _LABEL_="%sysfunc(sasmsg(sashelp.dmine,
92744    !+rpt_groupvalues_vlabel , NOQUOTE))";';
92745     +         run;
92747     +         proc sort data=&SPLITVALS out=work.sortedsplitval; by display_var
92747    !+_split_Value_; run;
92748     +         proc sort data=&BINMAPPINGS; by display_var bin; run;
92750     +         data temp;
92751     +           merge work.sortedsplitval(in=_a) &BINMAPPINGS(rename=(BIN_NAME=_VARIABLE_
92751    !+ BIN=_SPLIT_VALUE_));
92752     +           by Display_Var _Split_value_;
92753     +           if upcase(_Split_value_) ne 'MISSING';
92754     +           if _a then output;
92755     +           if display_var eq '' then delete;
92756     +         run;
92758     +         data temp_missing;
92759     +           merge work.sortedsplitval(in=_a rename=(_GROUP_=MISSGRP))
92759    !+&BINMAPPINGS(rename=(BIN_NAME=_VARIABLE_ BIN=_SPLIT_VALUE_));
92760     +           by Display_Var _Split_value_;
92761     +           if upcase(_Split_value_) eq 'MISSING';
92762     +           if _a then output;
92763     +           keep _variable_ display_var missgrp;
92764     +         run;
92766     +         proc sort data=temp out=class;
92767     +            by _variable_ _group_ LB;
92768     +         run;
92770     +         data _null_;
92772     +            file &filename MOD;
92773     +            length string $200 flag 8;
92774     +            retain string flag;
92775     +            set class end=eof;
92776     +            by _variable_  _group_;
92778     +            index = kindex(_variable_, "BIN_");
92779     +            if index gt 0 then do;
92780     +              if first._group_ then do;
92781     +                flag = 0;
92782     +                if ^first._variable_ then
92783     +                    put 'else';
92784     +                 else
92785     +                    put ' ';
92787     +                 string = "if DISPLAY_VAR='"!!strip(DISPLAY_VAR)!!"' and _GROUP_ = "
92788     +                          !!strip(put(_GROUP_,best12.))!!' then do;';
92789     +                 put string;
92791     +                 if LB ne . then do;
92792     +                   * string = strip(string)!!" _LABEL_='"!!strip(LB)!!"<=
92792    !+"!!strip(DISPLAY_VAR);
92793     +                    string = " _LABEL_='"!!strip(LB)!!"<= "!!strip(DISPLAY_VAR);
92794     +                 end;
92795     +                 else do;
92796     +                    flag = 1;
92797     +                    *string = strip(string)!!" _LABEL_='"!!strip(DISPLAY_VAR);
92798     +                    string = " _LABEL_='"!!strip(DISPLAY_VAR);
92799     +                 end;
92801     +              end;
92802     +              if last._Group_ then do;
92803     +                 if UB ne . then do;
92804     +                    string = strip(string)!!'< '!!strip(UB)!!"';";
92805     +                 end;
92806     +                 else do;
92807     +                    if flag=1 then do;
92808     +                      string = strip(string)!!"';";
92809     +                     /* string = strip(string)!!'='!!strip(_split_Value_)!!"';";*/
92810     +                    end;
92811     +                    else do;
92812     +                      string = strip(string)!!"';";
92813     +                    end;
92814     +                 end;
92815     +                 put string;
92817     +                 string= " UB="!!strip(UB)!!";";
92818     +                 put string;
92819     +                 put "end;";
92822     +              end;
92823     +            end;
92824     +            else do;
92825     +              _split_value_ = tranwrd(_split_value_,"'","''");
92826     +              if first._group_ then do;
92827     +                 flag = 0;
92828     +                 if ^first._variable_ then
92829     +                    put 'else';
92830     +                 else
92831     +                    put ' ';
92832     +                 string = "if DISPLAY_VAR='"!!strip(DISPLAY_VAR)!!"' and _GROUP_ = "
92833     +                          !!strip(put(_GROUP_,best12.))!!' then';
92834     +                 put string;
92835     +                 string = "_LABEL_='"!!strip(_split_value_);
92836     +              end;
92837     +              else do;
92838     +                 if flag ne 1 then do;
92839     +                   tempstring = strip(string)!!', '!!strip(_split_value_);
92840     +                   length = length(tempstring);
92842     +                   if length < 195 then do;
92843     +                      string = tempstring;
92844     +                   end;
92845     +                   else do;
92846     +                      string = strip(string)||",...";
92847     +                      flag=1;
92848     +                   end;
92849     +                 end;
92850     +              end;
92852     +              if last._group_ then do;
92853     +                 string = strip(string)!!"';";
92854     +                 put string;
92855     +              end;
92856     +            end;
92857     +         run;
92859     +         data &COARSE;
92860     +           set &COARSE;
92861     +          /* %inc Y; */
92862     +           %inc &filename;
92863     +         run;
92864     +         *filename Y;
92866     +         /* add missing to appropriate label - based on temp_missing data */
92867     +         data &COARSE;
92868     +           set &COARSE;
92870     +           %let dsid = %sysfunc(open(work.temp_missing));
92871     +           %if &dsid %then %do;
92872     +              %let varnum = %sysfunc(VARNUM(&dsid, DISPLAY_VAR));
92873     +              %let grpnum = %sysfunc(VARNUM(&dsid, MISSGRP));
92875     +              %let obs = %sysfunc(fetch(&dsid));
92876     +              %do %while(&obs=0);
92877     +                 %let var = %sysfunc(getvarc(&dsid, &varnum));
92878     +                 %let grp = %sysfunc(getvarn(&dsid, &grpnum));
92880     +                 if DISPLAY_VAR = "&var" and _GROUP_ = &grp then do;
92881     +                   if _LABEL_ eq '' then do;
92882     +                     _LABEL_ = "Missing";
92883     +                   end;
92884     +                   else do;
92885     +                     _LABEL_ = strip(_LABEL_)!!", Missing";
92886     +                   end;
92887     +                 end;
92888     +                 %let obs = %sysfunc(fetch(&dsid));
92889     +              %end;
92890     +           %end;
92891     +           %if &dsid %then %let dsid = %sysfunc(close(&dsid));
92892     +           drop ub;
92893     +         run;
92895     +         proc datasets library=work nolist;
92896     +           delete class temp temp_missing;
92897     +         run;
92898     +         quit;
92900     +%mend EM_GENERATE_LABELVALUES;
92902     +%macro calcValidationCoarse(input, output, varmappings, resultsTable);
92905     +%mend calcValidationCoarse;
92908     +%macro EM_IBN_IntTargetTrans(inttgtvar,method,newlevels=binlevs);
92909     +/* macro for transforming interval target to binary */
92911     +   %if &method = CUTMEAN %then %do;
92912     +      proc sql noprint;
92913     +         %if %EM_FREQ ne %then %do;
92914     +            select sum(&inttgtvar * %EM_FREQ) / sum(%EM_FREQ)
92915     +         %end;
92916     +         %else %do;
92917     +            select mean(&inttgtvar)
92918     +         %end;
92919     +         into :ignbincut from &em_import_data;
92920     +      quit;
92921     +   %end;
92923     +   /* create binary target */
92924     +   data &EM_USER_NEWTRAIN;
92925     +      set &EM_IMPORT_DATA;
92926     +      %if &method = CUTUSER %then %do;
92927     +           %let ignbincut = &EM_PROPERTY_USERCUTVALUE;
92928     +      %end;
92929     +      if &inttgtvar = . then &IGNBinTarget = .;
92930     +      else do;
92931     +         if &inttgtvar > &ignbincut then &IGNBinTarget=1;
92932     +         else &IGNBinTarget=0;
92933     +      end;
92934     +   run;
92936     +   /* Check that new target is actually binary */
92937     +   proc sql noprint;
92938     +      select distinct &IGNBINTarget into :bintv1 - from &EM_USER_NEWTRAIN where
92938    !+&IGNBinTarget ne .;
92939     +   quit;
92940     +   %global &newlevels;
92941     +   %let &newlevels=&sqlobs;
92943     +%mend EM_IBN_IntTargetTrans;
NOTE: %INCLUDE (level 1) ending.
MPRINT(TRAIN):   filename trtemp;
NOTE: Fileref TRTEMP has been deassigned.
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(TRAIN):  ;
MPRINT(TRAIN):  ;
MPRINT(TRAIN):   data temp;
MPRINT(TRAIN):   set EMWS1.BINNING_VariableSet;
MPRINT(TRAIN):   where NAME =
MPRINT(TRAIN):  "BAD";
MPRINT(TRAIN):   run;
 
NOTE: There were 1 observations read from the data set EMWS1.BINNING_VARIABLESET.
      WHERE NAME='BAD';
NOTE: The data set WORK.TEMP has 1 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(TRAIN):   proc dmdb data=EMWS1.Trans_TRAIN(where=(^missing(
MPRINT(EM_BINARY_TARGET):  BAD
MPRINT(TRAIN):  ))) classout=EVENTOUT;
MPRINT(TRAIN):   target
MPRINT(EM_BINARY_TARGET):   BAD
MPRINT(TRAIN):  ;
MPRINT(TRAIN):   class
MPRINT(EM_BINARY_TARGET):   BAD
MPRINT(TRAIN):  (DESC);
MPRINT(TRAIN):   run;
 
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=100 BAD=1 LOAN=4100 MORTDUE=. VALUE=19132 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=0 CLAGE=100.77465221 NINQ=0 CLNO=19 DEBTINC=33.840919904 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=100.77465221 IMP_CLNO=19 IMP_DEBTINC=33.840919904 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=19132 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=49
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=119 BAD=0 LOAN=4500 MORTDUE=. VALUE=49044 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=0
CLAGE=. NINQ=0 CLNO=0 DEBTINC=11.652738796 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=11.652738796 IMP_DELINQ=0 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=49044 IMP_YOJ=0 INDELINQ=0 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=60
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=206 BAD=0 LOAN=5100 MORTDUE=66834 VALUE=87361 REASON=HomeImp JOB=Other YOJ=0 DEROG=2
DELINQ=0 CLAGE=290.03410799 NINQ=0 CLNO=6 DEBTINC=38.766985071 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=290.03410799 IMP_CLNO=6 IMP_DEBTINC=38.766985071 IMP_DELINQ=0 IMP_DEROG=2
IMP_MORTDUE=66834 IMP_NINQ=0 IMP_VALUE=87361 IMP_YOJ=0 INDELINQ=0 INDEROG=1 LOG_yoj=. _ERROR_=1
_N_=97
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=207 BAD=0 LOAN=5100 MORTDUE=73882 VALUE=96031 REASON=DebtCon JOB=Other YOJ=0 DEROG=0
DELINQ=0 CLAGE=125.78740011 NINQ=1 CLNO=10 DEBTINC=34.446079222 IMP_JOB=Other
IMP_REASON=DebtCon IMP_CLAGE=125.78740011 IMP_CLNO=10 IMP_DEBTINC=34.446079222 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=73882 IMP_NINQ=1 IMP_VALUE=96031 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=98
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=213 BAD=0 LOAN=5200 MORTDUE=19000 VALUE=26000 REASON=DebtCon JOB=Other YOJ=0 DEROG=1
DELINQ=0 CLAGE=17.2 NINQ=10 CLNO=7 DEBTINC=. IMP_JOB=Other IMP_REASON=DebtCon IMP_CLAGE=17.2
IMP_CLNO=7 IMP_DEBTINC=33.786945547 IMP_DELINQ=0 IMP_DEROG=1 IMP_MORTDUE=19000 IMP_NINQ=10
IMP_VALUE=26000 IMP_YOJ=0 INDELINQ=0 INDEROG=1 LOG_yoj=. _ERROR_=1 _N_=102
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=221 BAD=0 LOAN=5300 MORTDUE=. VALUE=49396 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=0
CLAGE=. NINQ=0 CLNO=0 DEBTINC=12.043670576 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=12.043670576 IMP_DELINQ=0 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=49396 IMP_YOJ=0 INDELINQ=0 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=109
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=273 BAD=0 LOAN=5700 MORTDUE=. VALUE=68591 REASON=HomeImp JOB=Office YOJ=0 DEROG=0
DELINQ=0 CLAGE=69.645660473 NINQ=0 CLNO=4 DEBTINC=41.185039558 IMP_JOB=Office
IMP_REASON=HomeImp IMP_CLAGE=69.645660473 IMP_CLNO=4 IMP_DEBTINC=41.185039558 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=68591 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=128
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=279 BAD=1 LOAN=5700 MORTDUE=77213 VALUE=92661 REASON=DebtCon JOB=Sales YOJ=0 DEROG=0
DELINQ=0 CLAGE=97.133170952 NINQ=1 CLNO=16 DEBTINC=41.777888631 IMP_JOB=Sales
IMP_REASON=DebtCon IMP_CLAGE=97.133170952 IMP_CLNO=16 IMP_DEBTINC=41.777888631 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=77213 IMP_NINQ=1 IMP_VALUE=92661 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=131
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=284 BAD=0 LOAN=5700 MORTDUE=28116 VALUE=33450 REASON=DebtCon JOB=Other YOJ=0 DEROG=1
DELINQ=0 CLAGE=15.396587392 NINQ=9 CLNO=7 DEBTINC=30.017013296 IMP_JOB=Other IMP_REASON=DebtCon
IMP_CLAGE=15.396587392 IMP_CLNO=7 IMP_DEBTINC=30.017013296 IMP_DELINQ=0 IMP_DEROG=1
IMP_MORTDUE=28116 IMP_NINQ=9 IMP_VALUE=33450 IMP_YOJ=0 INDELINQ=0 INDEROG=1 LOG_yoj=. _ERROR_=1
_N_=133
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=320 BAD=0 LOAN=6000 MORTDUE=69876 VALUE=94394.07 REASON=HomeImp JOB=Other YOJ=0
DEROG=0 DELINQ=1 CLAGE=179.56666667 NINQ=0 CLNO=32 DEBTINC=. IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=179.56666667 IMP_CLNO=32 IMP_DEBTINC=33.786945547 IMP_DELINQ=1 IMP_DEROG=0
IMP_MORTDUE=69876 IMP_NINQ=0 IMP_VALUE=94394.07 IMP_YOJ=0 INDELINQ=1 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=153
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=329 BAD=0 LOAN=6000 MORTDUE=79046 VALUE=103048 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=0 CLAGE=181.69653802 NINQ=0 CLNO=32 DEBTINC=37.289989924 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=181.69653802 IMP_CLNO=32 IMP_DEBTINC=37.289989924 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=79046 IMP_NINQ=0 IMP_VALUE=103048 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=160
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=342 BAD=0 LOAN=6100 MORTDUE=. VALUE=46830 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=1
CLAGE=. NINQ=0 CLNO=0 DEBTINC=13.306013076 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=13.306013076 IMP_DELINQ=1 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=46830 IMP_YOJ=0 INDELINQ=1 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=166
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=356 BAD=0 LOAN=6200 MORTDUE=73881 VALUE=98550 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=1 CLAGE=182.8787798 NINQ=0 CLNO=31 DEBTINC=37.19944569 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=182.8787798 IMP_CLNO=31 IMP_DEBTINC=37.19944569 IMP_DELINQ=1 IMP_DEROG=0
IMP_MORTDUE=73881 IMP_NINQ=0 IMP_VALUE=98550 IMP_YOJ=0 INDELINQ=1 INDEROG=0 LOG_yoj=. _ERROR_=1
_N_=172
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=392 BAD=0 LOAN=6400 MORTDUE=44968 VALUE=62747 REASON=HomeImp JOB=Other YOJ=0 DEROG=1
DELINQ=. CLAGE=101.39144532 NINQ=. CLNO=12 DEBTINC=36.602947343 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=101.39144532 IMP_CLNO=12 IMP_DEBTINC=36.602947343
IMP_DELINQ=0.4622255303 IMP_DEROG=1 IMP_MORTDUE=44968 IMP_NINQ=1.1569852941 IMP_VALUE=62747
IMP_YOJ=0 INDELINQ=1 INDEROG=1 LOG_yoj=. _ERROR_=1 _N_=188
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=419 BAD=0 LOAN=6600 MORTDUE=. VALUE=48800 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=0
CLAGE=. NINQ=0 CLNO=0 DEBTINC=12.219436152 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=12.219436152 IMP_DELINQ=0 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=48800 IMP_YOJ=0 INDELINQ=0 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=197
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=423 BAD=0 LOAN=6600 MORTDUE=. VALUE=46516 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=0
CLAGE=. NINQ=0 CLNO=0 DEBTINC=14.845990728 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=14.845990728 IMP_DELINQ=0 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=46516 IMP_YOJ=0 INDELINQ=0 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=198
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=454 BAD=0 LOAN=6800 MORTDUE=71666 VALUE=99913 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=1 CLAGE=196.46499893 NINQ=0 CLNO=31 DEBTINC=35.761604731 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=196.46499893 IMP_CLNO=31 IMP_DEBTINC=35.761604731 IMP_DELINQ=1
IMP_DEROG=0 IMP_MORTDUE=71666 IMP_NINQ=0 IMP_VALUE=99913 IMP_YOJ=0 INDELINQ=1 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=214
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=471 BAD=0 LOAN=7000 MORTDUE=73873 VALUE=111781 REASON=DebtCon JOB=Office YOJ=0
DEROG=0 DELINQ=0 CLAGE=231.79991346 NINQ=0 CLNO=38 DEBTINC=19.273579455 IMP_JOB=Office
IMP_REASON=DebtCon IMP_CLAGE=231.79991346 IMP_CLNO=38 IMP_DEBTINC=19.273579455 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=73873 IMP_NINQ=0 IMP_VALUE=111781 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=220
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=474 BAD=0 LOAN=7000 MORTDUE=78284 VALUE=98214 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=1 CLAGE=171.83838617 NINQ=0 CLNO=31 DEBTINC=36.247963031 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=171.83838617 IMP_CLNO=31 IMP_DEBTINC=36.247963031 IMP_DELINQ=1
IMP_DEROG=0 IMP_MORTDUE=78284 IMP_NINQ=0 IMP_VALUE=98214 IMP_YOJ=0 INDELINQ=1 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=223
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
WARNING: Limit set by ERRORS= option reached.  Further errors of this type will not be printed.
_dataobs_=516 BAD=0 LOAN=7100 MORTDUE=57863 VALUE=70969 REASON=DebtCon JOB=Other YOJ=0 DEROG=0
DELINQ=0 CLAGE=65.872044812 NINQ=7 CLNO=21 DEBTINC=26.829490191 IMP_JOB=Other
IMP_REASON=DebtCon IMP_CLAGE=65.872044812 IMP_CLNO=21 IMP_DEBTINC=26.829490191 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=57863 IMP_NINQ=7 IMP_VALUE=70969 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=239
NOTE: Records processed = 2979   Memory used = 511K.
NOTE: There were 2979 observations read from the data set EMWS1.PART_TRAIN.
NOTE: Mathematical operations could not be performed at the following places. The results of
      the operations have been set to missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      209 at 83566:10
NOTE: View EMWS1.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.14 seconds
      cpu time            0.13 seconds
 
NOTE: There were 2979 observations read from the data set EMWS1.IMPT_TRAIN.
NOTE: There were 2979 observations read from the data set EMWS1.TRANS_TRAIN.
      WHERE not MISSING(BAD);
NOTE: The data set WORK.EVENTOUT has 2 observations and 9 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.15 seconds
      cpu time            0.15 seconds
 
 
MPRINT(TRAIN):   data _null_;
MPRINT(TRAIN):   dsid = open("EVENTOUT");
MPRINT(TRAIN):   if dsid>0 then do;
MPRINT(TRAIN):   levelnum = VARNUM(dsid, "LEVEL");
MPRINT(TRAIN):   if levelnum then do;
MPRINT(TRAIN):   if ^fetch(dsid) then call symput('TARGET_EVENT', strip(getvarc(dsid,
levelnum)));
MPRINT(TRAIN):   if ^fetch(dsid) then call symput('TARGET_NONEVENT',strip(getvarc(dsid,
levelnum)));
MPRINT(TRAIN):   end;
MPRINT(TRAIN):   dsid=close(dsid);
MPRINT(TRAIN):   end;
MPRINT(TRAIN):   run;
 
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(TRAIN):   proc datasets library=work nolist;
MPRINT(TRAIN):   delete eventout;
MPRINT(TRAIN):   run;
 
NOTE: Deleting WORK.EVENTOUT (memtype=DATA).
MPRINT(TRAIN):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(TRAIN):   data EMWS1.BINNING_NEWTRAIN;
MPRINT(TRAIN):   set EMWS1.Trans_TRAIN;
MPRINT(TRAIN):   run;
 
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=100 BAD=1 LOAN=4100 MORTDUE=. VALUE=19132 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=0 CLAGE=100.77465221 NINQ=0 CLNO=19 DEBTINC=33.840919904 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=100.77465221 IMP_CLNO=19 IMP_DEBTINC=33.840919904 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=19132 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=49
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=119 BAD=0 LOAN=4500 MORTDUE=. VALUE=49044 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=0
CLAGE=. NINQ=0 CLNO=0 DEBTINC=11.652738796 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=11.652738796 IMP_DELINQ=0 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=49044 IMP_YOJ=0 INDELINQ=0 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=60
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=206 BAD=0 LOAN=5100 MORTDUE=66834 VALUE=87361 REASON=HomeImp JOB=Other YOJ=0 DEROG=2
DELINQ=0 CLAGE=290.03410799 NINQ=0 CLNO=6 DEBTINC=38.766985071 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=290.03410799 IMP_CLNO=6 IMP_DEBTINC=38.766985071 IMP_DELINQ=0 IMP_DEROG=2
IMP_MORTDUE=66834 IMP_NINQ=0 IMP_VALUE=87361 IMP_YOJ=0 INDELINQ=0 INDEROG=1 LOG_yoj=. _ERROR_=1
_N_=97
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=207 BAD=0 LOAN=5100 MORTDUE=73882 VALUE=96031 REASON=DebtCon JOB=Other YOJ=0 DEROG=0
DELINQ=0 CLAGE=125.78740011 NINQ=1 CLNO=10 DEBTINC=34.446079222 IMP_JOB=Other
IMP_REASON=DebtCon IMP_CLAGE=125.78740011 IMP_CLNO=10 IMP_DEBTINC=34.446079222 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=73882 IMP_NINQ=1 IMP_VALUE=96031 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=98
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=213 BAD=0 LOAN=5200 MORTDUE=19000 VALUE=26000 REASON=DebtCon JOB=Other YOJ=0 DEROG=1
DELINQ=0 CLAGE=17.2 NINQ=10 CLNO=7 DEBTINC=. IMP_JOB=Other IMP_REASON=DebtCon IMP_CLAGE=17.2
IMP_CLNO=7 IMP_DEBTINC=33.786945547 IMP_DELINQ=0 IMP_DEROG=1 IMP_MORTDUE=19000 IMP_NINQ=10
IMP_VALUE=26000 IMP_YOJ=0 INDELINQ=0 INDEROG=1 LOG_yoj=. _ERROR_=1 _N_=102
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=221 BAD=0 LOAN=5300 MORTDUE=. VALUE=49396 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=0
CLAGE=. NINQ=0 CLNO=0 DEBTINC=12.043670576 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=12.043670576 IMP_DELINQ=0 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=49396 IMP_YOJ=0 INDELINQ=0 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=109
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=273 BAD=0 LOAN=5700 MORTDUE=. VALUE=68591 REASON=HomeImp JOB=Office YOJ=0 DEROG=0
DELINQ=0 CLAGE=69.645660473 NINQ=0 CLNO=4 DEBTINC=41.185039558 IMP_JOB=Office
IMP_REASON=HomeImp IMP_CLAGE=69.645660473 IMP_CLNO=4 IMP_DEBTINC=41.185039558 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=68591 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=128
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=279 BAD=1 LOAN=5700 MORTDUE=77213 VALUE=92661 REASON=DebtCon JOB=Sales YOJ=0 DEROG=0
DELINQ=0 CLAGE=97.133170952 NINQ=1 CLNO=16 DEBTINC=41.777888631 IMP_JOB=Sales
IMP_REASON=DebtCon IMP_CLAGE=97.133170952 IMP_CLNO=16 IMP_DEBTINC=41.777888631 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=77213 IMP_NINQ=1 IMP_VALUE=92661 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=131
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=284 BAD=0 LOAN=5700 MORTDUE=28116 VALUE=33450 REASON=DebtCon JOB=Other YOJ=0 DEROG=1
DELINQ=0 CLAGE=15.396587392 NINQ=9 CLNO=7 DEBTINC=30.017013296 IMP_JOB=Other IMP_REASON=DebtCon
IMP_CLAGE=15.396587392 IMP_CLNO=7 IMP_DEBTINC=30.017013296 IMP_DELINQ=0 IMP_DEROG=1
IMP_MORTDUE=28116 IMP_NINQ=9 IMP_VALUE=33450 IMP_YOJ=0 INDELINQ=0 INDEROG=1 LOG_yoj=. _ERROR_=1
_N_=133
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=320 BAD=0 LOAN=6000 MORTDUE=69876 VALUE=94394.07 REASON=HomeImp JOB=Other YOJ=0
DEROG=0 DELINQ=1 CLAGE=179.56666667 NINQ=0 CLNO=32 DEBTINC=. IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=179.56666667 IMP_CLNO=32 IMP_DEBTINC=33.786945547 IMP_DELINQ=1 IMP_DEROG=0
IMP_MORTDUE=69876 IMP_NINQ=0 IMP_VALUE=94394.07 IMP_YOJ=0 INDELINQ=1 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=153
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=329 BAD=0 LOAN=6000 MORTDUE=79046 VALUE=103048 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=0 CLAGE=181.69653802 NINQ=0 CLNO=32 DEBTINC=37.289989924 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=181.69653802 IMP_CLNO=32 IMP_DEBTINC=37.289989924 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=79046 IMP_NINQ=0 IMP_VALUE=103048 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=160
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=342 BAD=0 LOAN=6100 MORTDUE=. VALUE=46830 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=1
CLAGE=. NINQ=0 CLNO=0 DEBTINC=13.306013076 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=13.306013076 IMP_DELINQ=1 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=46830 IMP_YOJ=0 INDELINQ=1 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=166
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=356 BAD=0 LOAN=6200 MORTDUE=73881 VALUE=98550 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=1 CLAGE=182.8787798 NINQ=0 CLNO=31 DEBTINC=37.19944569 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=182.8787798 IMP_CLNO=31 IMP_DEBTINC=37.19944569 IMP_DELINQ=1 IMP_DEROG=0
IMP_MORTDUE=73881 IMP_NINQ=0 IMP_VALUE=98550 IMP_YOJ=0 INDELINQ=1 INDEROG=0 LOG_yoj=. _ERROR_=1
_N_=172
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=392 BAD=0 LOAN=6400 MORTDUE=44968 VALUE=62747 REASON=HomeImp JOB=Other YOJ=0 DEROG=1
DELINQ=. CLAGE=101.39144532 NINQ=. CLNO=12 DEBTINC=36.602947343 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=101.39144532 IMP_CLNO=12 IMP_DEBTINC=36.602947343
IMP_DELINQ=0.4622255303 IMP_DEROG=1 IMP_MORTDUE=44968 IMP_NINQ=1.1569852941 IMP_VALUE=62747
IMP_YOJ=0 INDELINQ=1 INDEROG=1 LOG_yoj=. _ERROR_=1 _N_=188
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=419 BAD=0 LOAN=6600 MORTDUE=. VALUE=48800 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=0
CLAGE=. NINQ=0 CLNO=0 DEBTINC=12.219436152 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=12.219436152 IMP_DELINQ=0 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=48800 IMP_YOJ=0 INDELINQ=0 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=197
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=423 BAD=0 LOAN=6600 MORTDUE=. VALUE=46516 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=0
CLAGE=. NINQ=0 CLNO=0 DEBTINC=14.845990728 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=14.845990728 IMP_DELINQ=0 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=46516 IMP_YOJ=0 INDELINQ=0 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=198
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=454 BAD=0 LOAN=6800 MORTDUE=71666 VALUE=99913 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=1 CLAGE=196.46499893 NINQ=0 CLNO=31 DEBTINC=35.761604731 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=196.46499893 IMP_CLNO=31 IMP_DEBTINC=35.761604731 IMP_DELINQ=1
IMP_DEROG=0 IMP_MORTDUE=71666 IMP_NINQ=0 IMP_VALUE=99913 IMP_YOJ=0 INDELINQ=1 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=214
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=471 BAD=0 LOAN=7000 MORTDUE=73873 VALUE=111781 REASON=DebtCon JOB=Office YOJ=0
DEROG=0 DELINQ=0 CLAGE=231.79991346 NINQ=0 CLNO=38 DEBTINC=19.273579455 IMP_JOB=Office
IMP_REASON=DebtCon IMP_CLAGE=231.79991346 IMP_CLNO=38 IMP_DEBTINC=19.273579455 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=73873 IMP_NINQ=0 IMP_VALUE=111781 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=220
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=474 BAD=0 LOAN=7000 MORTDUE=78284 VALUE=98214 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=1 CLAGE=171.83838617 NINQ=0 CLNO=31 DEBTINC=36.247963031 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=171.83838617 IMP_CLNO=31 IMP_DEBTINC=36.247963031 IMP_DELINQ=1
IMP_DEROG=0 IMP_MORTDUE=78284 IMP_NINQ=0 IMP_VALUE=98214 IMP_YOJ=0 INDELINQ=1 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=223
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
WARNING: Limit set by ERRORS= option reached.  Further errors of this type will not be printed.
_dataobs_=516 BAD=0 LOAN=7100 MORTDUE=57863 VALUE=70969 REASON=DebtCon JOB=Other YOJ=0 DEROG=0
DELINQ=0 CLAGE=65.872044812 NINQ=7 CLNO=21 DEBTINC=26.829490191 IMP_JOB=Other
IMP_REASON=DebtCon IMP_CLAGE=65.872044812 IMP_CLNO=21 IMP_DEBTINC=26.829490191 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=57863 IMP_NINQ=7 IMP_VALUE=70969 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=239
NOTE: There were 2979 observations read from the data set EMWS1.PART_TRAIN.
NOTE: Mathematical operations could not be performed at the following places. The results of
      the operations have been set to missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      209 at 83566:10
NOTE: View EMWS1.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.18 seconds
      cpu time            0.12 seconds
 
NOTE: There were 2979 observations read from the data set EMWS1.IMPT_TRAIN.
NOTE: There were 2979 observations read from the data set EMWS1.TRANS_TRAIN.
NOTE: The data set EMWS1.BINNING_NEWTRAIN has 2979 observations and 28 variables.
NOTE: DATA statement used (Total process time):
      real time           0.23 seconds
      cpu time            0.17 seconds
 
 
MPRINT(TRAIN):  ;
MPRINT(TRAIN):  ;
MPRINT(TRAIN):  ;
MPRINT(TRAIN):  ;
MPRINT(TRAIN):  ;
MPRINT(TRAIN):  ;
MPRINT(TRAIN):  ;
MPRINT(TRAIN):  ;
MPRINT(TRAIN):  ;
MPRINT(TRAIN):  ;
MPRINT(TRAIN):  ;
MPRINT(TRAIN):   data tempvarnames;
MPRINT(TRAIN):   set EMWS1.BINNING_VariableSet;
MPRINT(TRAIN):   where ((ROLE='INPUT' and USE in('Y', 'D')) or (ROLE='REJECTED' and USE='Y'))
and level ne 'UNARY';
MPRINT(TRAIN):   keep NAME LEVEL LABEL;
MPRINT(TRAIN):   run;
 
NOTE: There were 12 observations read from the data set EMWS1.BINNING_VARIABLESET.
      WHERE (((ROLE='INPUT') and USE in ('D', 'Y')) or ((ROLE='REJECTED') and (USE='Y'))) and
      (level not = 'UNARY');
NOTE: The data set WORK.TEMPVARNAMES has 12 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(TRAIN):   proc dmdb data=tempvarnames outtable=tempmapping nameserver;
MPRINT(TRAIN):   names NAME;
MPRINT(TRAIN):   prefix WOE_ GRP_ ;
MPRINT(TRAIN):   run;
 
NOTE: There were 12 observations read from the data set WORK.TEMPVARNAMES.
NOTE: The data set WORK.TEMPMAPPING has 12 observations and 3 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(TRAIN):   proc sort data=tempmapping;
MPRINT(TRAIN):   by name;
MPRINT(TRAIN):   run;
 
NOTE: There were 12 observations read from the data set WORK.TEMPMAPPING.
NOTE: The data set WORK.TEMPMAPPING has 12 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(TRAIN):   proc sort data=tempvarnames;
MPRINT(TRAIN):   by name;
MPRINT(TRAIN):   run;
 
NOTE: There were 12 observations read from the data set WORK.TEMPVARNAMES.
NOTE: The data set WORK.TEMPVARNAMES has 12 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(TRAIN):   data tempmapping;
MPRINT(TRAIN):   merge tempmapping tempvarnames;
MPRINT(TRAIN):   by NAME;
MPRINT(TRAIN):   rename LEVEL=procLevel;
MPRINT(TRAIN):   run;
 
NOTE: There were 12 observations read from the data set WORK.TEMPMAPPING.
NOTE: There were 12 observations read from the data set WORK.TEMPVARNAMES.
NOTE: The data set WORK.TEMPMAPPING has 12 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_GENERATE_MAPPING_TABLE):  ;
MPRINT(EM_GENERATE_MAPPING_TABLE):   data EMWS1.BINNING_VARMAPPINGS(keep=_variable_
_grp_variable_ procLevel label);
MPRINT(EM_GENERATE_MAPPING_TABLE):   length _variable_ _grp_variable_ $32 procLevel $8;
MPRINT(EM_GENERATE_MAPPING_TABLE):   set tempmapping;
MPRINT(EM_GENERATE_MAPPING_TABLE):   label _variable_ = "Input Variable" _grp_variable_ =
"Group Variable";
MPRINT(EM_GENERATE_MAPPING_TABLE):   _variable_ = NAME;
MPRINT(EM_GENERATE_MAPPING_TABLE):   _grp_variable_ = GRP;
MPRINT(EM_GENERATE_MAPPING_TABLE):   run;
 
NOTE: There were 12 observations read from the data set WORK.TEMPMAPPING.
NOTE: The data set EMWS1.BINNING_VARMAPPINGS has 12 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
 
 
MPRINT(TRAIN):  ;
MPRINT(TRAIN):   proc datasets library=work nolist;
MPRINT(TRAIN):   delete tempImport tempScore;
MPRINT(TRAIN):   run;
 
NOTE: The file WORK.TEMPIMPORT (memtype=DATA) was not found, but appears on a DELETE statement.
NOTE: The file WORK.TEMPSCORE (memtype=DATA) was not found, but appears on a DELETE statement.
MPRINT(TRAIN):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(TRAIN):   proc datasets library=EMWS1 nolist;
MPRINT(TRAIN):   delete BINNING_SPLITVALS;
MPRINT(TRAIN):   run;
 
NOTE: Deleting EMWS1.BINNING_SPLITVALS (memtype=DATA).
MPRINT(TRAIN):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.12 seconds
      cpu time            0.12 seconds
 
 
MPRINT(EM_PRE_BINNING):   data tempvariableset;
MPRINT(EM_PRE_BINNING):   set EMWS1.BINNING_VariableSet;
MPRINT(EM_PRE_BINNING):   where LEVEL = 'INTERVAL' and ((ROLE='INPUT' and USE in ('Y', 'D'))
OR (ROLE='REJECTED' and USE='Y'));
MPRINT(EM_PRE_BINNING):   run;
 
NOTE: There were 10 observations read from the data set EMWS1.BINNING_VARIABLESET.
      WHERE (LEVEL='INTERVAL') and (((ROLE='INPUT') and USE in ('D', 'Y')) or
      ((ROLE='REJECTED') and (USE='Y')));
NOTE: The data set WORK.TEMPVARIABLESET has 10 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_VARMACRO):   filename macFile catalog 'work.emutil.macro.source';
MPRINT(EM_VARMACRO):   data _null_;
MPRINT(EM_VARMACRO):   length _STRING_ $80;
MPRINT(EM_VARMACRO):   retain _STRING_;
MPRINT(EM_VARMACRO):   set tempvariableset end=eof;
MPRINT(EM_VARMACRO):   file macFile;
MPRINT(EM_VARMACRO):   if _N_=1 then do;
MPRINT(EM_VARMACRO):   string = "%"!!"macro intervalvars;";
MPRINT(EM_VARMACRO):   put string;
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   if (length(_STRING_) + length(trim(NAME))+ 1 < 80) then do;
MPRINT(EM_VARMACRO):   _STRING_ = trim(_STRING_)!!' '!!trim(NAME);
MPRINT(EM_VARMACRO):   if eof then do;
MPRINT(EM_VARMACRO):   put _STRING_;
MPRINT(EM_VARMACRO):   string = "%"!!"mend intervalvars;";
MPRINT(EM_VARMACRO):   put string;
MPRINT(EM_VARMACRO):   string = strip(put(_N_, best.));
MPRINT(EM_VARMACRO):   put "%" "global num_intvars;";
MPRINT(EM_VARMACRO):   put "%" "let num_intvars = " string ";";
MPRINT(EM_VARMACRO):   call symput('_METAOBS', string);
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   else do;
MPRINT(EM_VARMACRO):   put _STRING_;
MPRINT(EM_VARMACRO):   _string_ = TRIM(NAME);
MPRINT(EM_VARMACRO):   if eof then do;
MPRINT(EM_VARMACRO):   put _STRING_;
MPRINT(EM_VARMACRO):   string = "%"!!"mend intervalvars;";
MPRINT(EM_VARMACRO):   put string;
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   if eof then do;
MPRINT(EM_VARMACRO):   string = strip(put(_N_, best.));
MPRINT(EM_VARMACRO):   call symput('_METAOBS', string);
MPRINT(EM_VARMACRO):   put "%" "global num_intvars;";
MPRINT(EM_VARMACRO):   put "%" "let num_intvars = " string ";";
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   run;
 
NOTE: The file MACFILE is:
      Catalog Name=WORK.EMUTIL.MACRO.SOURCE,
      Catalog Page Size=4096,
      Number of Catalog Pages=4,
      Created=Wed, Nov  4, 2015 07:40:37 AM,
      Last Modified=Wed, Nov  4, 2015 07:40:37 AM,
      Filename=C:\Users\sakerb01\AppData\Local\Temp\SAS Temporary
      Files\_TD4856_COB-IT-M11_\Prc2\emutil.sas7bcat,
      Release Created=9.0401M1,Host Created=X64_7PRO
 
NOTE: 8 records were written to the file MACFILE.
      The minimum record length was 19.
      The maximum record length was 70.
NOTE: There were 10 observations read from the data set WORK.TEMPVARIABLESET.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
NOTE: %INCLUDE (level 1) file MACFILE is file WORK.EMUTIL.MACRO.SOURCE.
92948     +%macro intervalvars;
92949     +IMP_CLAGE IMP_CLNO IMP_DEBTINC IMP_MORTDUE IMP_NINQ IMP_VALUE INDELINQ
92950     +INDEROG LOAN LOG_yoj
92951     +%mend intervalvars;
92952     +%global num_intvars;
92953     +%let num_intvars = 10 ;
92954     +%global num_intvars;
92955     +%let num_intvars = 10 ;
NOTE: %INCLUDE (level 1) ending.
MPRINT(EM_VARMACRO):   filename macFile;
NOTE: Fileref MACFILE has been deassigned.
MPRINT(EM_PRE_BINNING):  ;
MPRINT(EM_PRE_BINNING):   proc dmdb data=EMWS1.BINNING_NEWTRAIN classout=_CLASSOUT maxlevel=5;
MPRINT(EM_PRE_BINNING):   class
MPRINT(INTERVALVARS):   IMP_CLAGE IMP_CLNO IMP_DEBTINC IMP_MORTDUE IMP_NINQ IMP_VALUE INDELINQ
INDEROG LOAN LOG_yoj
MPRINT(EM_PRE_BINNING):  ;
MPRINT(EM_PRE_BINNING):   run;
 
NOTE: Records processed = 2979   Memory used = 511K.
NOTE: There were 2979 observations read from the data set EMWS1.BINNING_NEWTRAIN.
NOTE: The data set WORK._CLASSOUT has 44 observations and 9 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_PRE_BINNING):   proc freq data=_CLASSOUT order=DATA noprint;
MPRINT(EM_PRE_BINNING):   table NAME / OUT= _COUNT(where=(COUNT<5));
MPRINT(EM_PRE_BINNING):   run;
 
NOTE: There were 44 observations read from the data set WORK._CLASSOUT.
NOTE: The data set WORK._COUNT has 2 observations and 3 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_PRE_BINNING):   data _null_;
MPRINT(EM_PRE_BINNING):   set _COUNT;
MPRINT(EM_PRE_BINNING):   call symput('_INTBINS',symget('_INTBINS') !! ' ' !!
ktrim(kleft(NAME)));
MPRINT(EM_PRE_BINNING):   run;
 
NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_PRE_BINNING):   proc sort data=_CLASSOUT;
MPRINT(EM_PRE_BINNING):   by NAME;
MPRINT(EM_PRE_BINNING):   run;
 
NOTE: There were 44 observations read from the data set WORK._CLASSOUT.
NOTE: The data set WORK._CLASSOUT has 44 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_PRE_BINNING):   proc transpose data=_CLASSOUT out=_OUT(DROP=_NAME_
RENAME=(NAME=VARIABLE)) prefix=_MIDPOINT;
MPRINT(EM_PRE_BINNING):   var NRAW;
MPRINT(EM_PRE_BINNING):   by NAME;
MPRINT(EM_PRE_BINNING):   run;
 
NOTE: There were 44 observations read from the data set WORK._CLASSOUT.
NOTE: The data set WORK._OUT has 10 observations and 6 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_PRE_BINNING):   data _null_;
MPRINT(EM_PRE_BINNING):   dsid = open('_OUT');
MPRINT(EM_PRE_BINNING):   if dsid then do;
MPRINT(EM_PRE_BINNING):   call symput('NUMCLASSBARS', kleft(ktrim(put(attrn(dsid, 'NVARS')-1,
best12.))));
MPRINT(EM_PRE_BINNING):   csid = close(dsid);
MPRINT(EM_PRE_BINNING):   end;
MPRINT(EM_PRE_BINNING):   run;
 
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_PRE_BINNING):   data _INTMID;
MPRINT(EM_PRE_BINNING):   set _OUT;
MPRINT(EM_PRE_BINNING):   keep VARIABLE _MIDPOINT1--_MIDPOINT5 ;
MPRINT(EM_PRE_BINNING):   run;
 
NOTE: There were 10 observations read from the data set WORK._OUT.
NOTE: The data set WORK._INTMID has 10 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(TRAIN):  ;
MPRINT(TRAIN):   data EMWS1.BINNING_VARMAPPINGS;
MPRINT(TRAIN):   set EMWS1.BINNING_VARMAPPINGS;
MPRINT(TRAIN):   label procLevel = "Level for Interactive";
MPRINT(TRAIN):   run;
 
NOTE: There were 12 observations read from the data set EMWS1.BINNING_VARMAPPINGS.
NOTE: The data set EMWS1.BINNING_VARMAPPINGS has 12 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   filename temp catalog 'sashelp.emapps.quantile_binning.source';
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMAPPS.QUANTILE_BINNING.SOURCE.
92957     +%macro em_apps_quantile_binning(input, vartable, numbins, binmappings, binningCode,
92957    !+codeMappings=, precision=0.01, dropOriginal=N, IncludeTarget=N);
92959     +  /* initialize binmappings table */
92960     +  data &BINMAPPINGS;
92961     +    length NAME BIN_NAME $32 LB UB 8 BIN EM_BIN_LABEL $200;
92962     +  run;
92966     +  %if &IncludeTarget=N %then %do;
92967     +   /* process only INTERVAL INPUTS */
92968     +  data tempvars;
92969     +    set &vartable(where=(ROLE="INPUT" AND LEVEL="INTERVAL"));
92970     +  run;
92971     +  %end;
92973     +  %if &IncludeTarget=Y %then %do;
92974     +   /* process both INTERVAL INPUTS and INTERVAL TARGETS*/
92975     +  data tempvars;
92976     +    set &vartable(where=((ROLE="INPUT" AND LEVEL="INTERVAL") or (ROLE="TARGET" AND
92976    !+LEVEL="INTERVAL")));
92977     +  run;
92978     +  %end;
92980     +  /* retrieve the name of interval inputs to bin */
92981     +  filename tempopen catalog 'sashelp.emutil.em_varmacro.source';
92982     +  %include tempopen;
92983     +  filename tempopen;
92985     +  %let intvars = ;
92986     +  %global num_intvars;
92987     +  %let num_intvars = 0;
92988     +  %em_varmacro(name=intvars, metadata=tempvars, key=NAME, nummacro=num_intvars);
92990     +  /* retrieve the name of frequency variable if it exists */
92991     +  %let em_bin_freq = ;
92992     +  %let choice = ROLE="FREQ";
92993     +  %let fdsid = %sysfunc(open(&vartable(where=(&choice))));
92994     +  %if &fdsid %then %do;
92995     +    %let fvarnum = %sysfunc(VARNUM(&fdsid, NAME));
92996     +    %let fobs = %sysfunc(fetch(&fdsid));
92997     +    %do %while(&fobs=0);
92998     +       %let em_bin_freq = %sysfunc(getvarc(&fdsid, &fvarnum));
92999     +       %let fobs = %sysfunc(fetch(&fdsid));
93000     +    %end;
93001     +  %end;
93002     +  %if &fdsid >0 %then %let fdsid = %sysfunc(close(&fdsid));
93004     +  /* process all inputs */
93005     +  %if &num_intvars > 0 %then %do;
93007     +    /* Computing quantile binning of interval inputs */
93008     +    %let numbin = %eval(&NUMBINS - 1);
93009     +    %let optstr=;
93010     +    %do i=1 %to &numbin;
93011     +       %let optstr = &optstr %sysevalf(&i*100/&&NUMBINS);
93012     +    %end;
93014     +    data tempInt / view = tempInt;
93015     +      set &input(keep= %intvars
93016     +      %if &em_bin_freq ne %then %do;
93017     +        &em_bin_freq
93018     +      %end;
93019     +      );
93020     +    run;
93022     +    proc stdize data=work.tempInt outstat=work.pctdata out=_null_ pctlpts=&optstr;
93023     +       var %intvars;
93024     +       %if &em_bin_freq ne %then %do;
93025     +          freq &em_bin_freq / notrunc;
93026     +       %end;
93027     +    run;
93029     +    proc transpose data=work.pctdata(where=(_type_=:'P')) out=work.pctdata;
93030     +    run;
93032     +    /* generate unique BIN_xxx names for all inputs processed */
93033     +    proc dmdb data=tempvars outtable=tempmapping nameserver;
93034     +     names NAME;
93035     +     prefix BIN_ ;
93036     +    run;
93038     +    proc sort data=tempmapping(keep=NAME bin); by NAME; run;
93039     +    proc sort data=work.pctdata; by _NAME_; run;
93040     +    %if ((&codemappings ne ) and (%sysfunc(exist(&codemappings, data)))) %then %do;
93041     +      proc sort data=&codemappings nodupkey out=tempcodemappings(keep= codeVar
93041    !+variable) ; by codeVar; run;
93042     +    %end;
93044     +    data tempbins;
93045     +      length display_var $32;
93046     +      merge work.pctdata(in=_a) tempmapping(rename=(name=_name_ bin=binVar))
93047     +      %if ((&codemappings ne ) and (%sysfunc(exist(&codemappings, data)))) %then %do
93047    !+;
93048     +         tempcodemappings(rename=(codeVar=_name_ variable=display_var))
93049     +      %end;
93050     +      ;
93051     +      by _NAME_;
93052     +      if _a;
93053     +      if missing(display_var) then display_var = _NAME_;
93054     +    run;
93056     +    /* generate BINMAPPINGS dataset and binningCode file*/
93057     +    data _null_;
93058     +      FILE &binningCode;
93059     +      set tempbins end=eof;
93060     +      length string $200;
93061     +      by _NAME_;
93063     +      if _n_=1 then do;
93064     +        put "&EM_CODEBAR;";
93065     +        %let note = %sysfunc(sasmsg(sashelp.dmine, generatebins_note, NOQUOTE));
93066     +        put "* &note;";
93067     +        put "&EM_CODEBAR;";
93069     +        call execute(" data &BINMAPPINGS; ");
93070     +        call execute("   length name bin_name $32 LB UB 8 EM_BIN_LABEL BIN $200;");
93071     +      end;
93073     +      %do i=1 %to %eval(&numbins-1);
93074     +       %if &i eq 1 %then %do;
93075     +         %let colname = COL&i;
93076     +         %let binvalnum = 1;
93077     +         LB = .;
93078     +         UB = round(&colname, &precision);
93079     +         bin=&binvalnum;
93081     +         call execute("name='"||strip(_NAME_)||"'; ");
93082     +         call execute("bin_name='"||strip(binVar)||"'; ");
93083     +         call execute("bin='"||strip(bin)||"';");
93084     +         call execute("LB=.;");
93085     +         call execute("UB="||UB||";");
93086     +         call execute("EM_BIN_LABEL='"||strip(display_var)||" < "||strip(UB)||"';");
93087     +         call execute("output;");
93089     +         string = "if "||strip(_name_)||" eq . then "||strip(binVar)||"= .;";
93091     +         put string;
93092     +         string = "else do;";
93093     +         put string;
93095     +         string= "  if "||strip(_name_)||" < "||strip(UB)||" then
93095    !+"||strip(binVar)||"="||strip(bin)||";";
93096     +         put string;
93099     +       %end;
93100     +       %else %do;
93101     +         %let colname = COL&i;
93102     +         %let lbnum = %sysevalf(&i-1);
93103     +         %let lbcol = COL&lbnum;
93104     +         UB = round(&colname, &precision);
93105     +         LB = round(&lbcol, &precision);
93106     +         if UB ne LB then do;
93107     +           bin=bin+1;
93109     +           call execute("name='"||strip(_NAME_)||"'; ");
93110     +           call execute("bin_name='"||strip(binVar)||"'; ");
93111     +           call execute("bin='"||strip(bin)||"';");
93112     +           call execute("LB="||LB||";");
93113     +           call execute("UB="||UB||";");
93114     +           call execute("EM_BIN_LABEL='"||strip(LB)||" <= "||strip(display_Var)||" <
93114    !+ "||strip(UB)||"';");
93115     +           call execute("output;");
93117     +           string= "  else if "||strip(_name_)||" < "||strip(UB)||" then
93117    !+"||strip(binVar)||"="||strip(bin)||";";
93118     +           put string;
93120     +         end;
93121     +       %end;
93122     +      %end;
93123     +      %let binvalnum = %sysevalf(&binvalnum + 1);
93124     +      bin=bin+1;
93125     +      LB = round(&colname, &precision);
93126     +      UB = .;
93128     +      call execute("name='"||strip(_NAME_)||"'; ");
93129     +      call execute("bin_name = '"||strip(binVar)||"'; ");
93130     +      call execute("bin='"||strip(bin)||"';");
93131     +      call execute("UB=.;");
93132     +      call execute("LB="||LB||";");
93133     +      call execute("EM_BIN_LABEL='"||strip(display_Var)||" >= "||strip(LB)||"';");
93134     +      call execute("output;");
93136     +      string= "  else if "||strip(_name_)||" >= "||strip(LB)||" then
93136    !+"||strip(binVar)||"="||strip(bin)||";";
93137     +      put string;
93138     +      string="end;";
93139     +      put string;
93141     +      if eof then do;
93142     +        call execute("  if NAME='' and BIN_NAME='' and BIN='' then delete;");
93143     +        call execute("  if LB=UB then delete;");
93144     +        call execute("run;");
93145     +      end;
93147     +    run;
93149     +    /* drop original inputs */
93150     +    %if &dropOriginal=Y %then %do;
93151     +      data _null_;
93152     +        set work.tempvars end=eof;
93153     +        FILE &binningCode MOD;
93154     +        length string $200;
93156     +        if _n_=1 then do;
93157     +          put "drop";
93158     +        end;
93159     +        string = " "||strip(name);
93160     +        put string;
93162     +        if eof then do;
93163     +          put ";";
93164     +        end;
93165     +      run;
93166     +    %end;
93168     +    proc datasets library=work nolist;
93169     +      delete pctdata tempmapping tempbins tempInt;
93170     +    run;
93171     +    quit;
93172     +  %end;
93174     +  proc datasets library=work nolist;
93175     +    delete tempvars;
93176     +  run;
93177     +  quit;
93179     +%mend em_apps_quantile_binning;
NOTE: %INCLUDE (level 1) ending.
MPRINT(EM_QUANTILE_BINNING):   filename temp;
NOTE: Fileref TEMP has been deassigned.
MPRINT(EM_QUANTILE_BINNING):   filename X "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
Projects\Project_3\Workspaces\EMWS1\BINNING\BINNINGCODE.sas";
MPRINT(EM_QUANTILE_BINNING):   data work.vartable;
MPRINT(EM_QUANTILE_BINNING):   set work._intmid;
MPRINT(EM_QUANTILE_BINNING):   level = "INTERVAL";
MPRINT(EM_QUANTILE_BINNING):   role = "INPUT";
MPRINT(EM_QUANTILE_BINNING):   rename variable=name;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 10 observations read from the data set WORK._INTMID.
NOTE: The data set WORK.VARTABLE has 10 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_APPS_QUANTILE_BINNING):   data EMWS1.BINNING_BINMAPPINGS;
MPRINT(EM_APPS_QUANTILE_BINNING):   length NAME BIN_NAME $32 LB UB 8 BIN EM_BIN_LABEL $200;
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
 
NOTE: Variable NAME is uninitialized.
NOTE: Variable BIN_NAME is uninitialized.
NOTE: Variable LB is uninitialized.
NOTE: Variable UB is uninitialized.
NOTE: Variable BIN is uninitialized.
NOTE: Variable EM_BIN_LABEL is uninitialized.
NOTE: The data set EMWS1.BINNING_BINMAPPINGS has 1 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_APPS_QUANTILE_BINNING):   data tempvars;
MPRINT(EM_APPS_QUANTILE_BINNING):   set work.vartable(where=(ROLE="INPUT" AND
LEVEL="INTERVAL"));
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
 
NOTE: There were 10 observations read from the data set WORK.VARTABLE.
      WHERE (ROLE='INPUT') and (LEVEL='INTERVAL');
NOTE: The data set WORK.TEMPVARS has 10 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_APPS_QUANTILE_BINNING):   filename tempopen catalog
'sashelp.emutil.em_varmacro.source';
NOTE: %INCLUDE (level 1) file TEMPOPEN is file SASHELP.EMUTIL.EM_VARMACRO.SOURCE.
93183     +
93184     +%macro em_varMacro(name=emMacro, metadata=, where=, key=NAME, nummacro=);
93185     +
93186     +   filename macFile catalog 'work.emutil.macro.source';
93187     +   %let _METAOBS = 0;
93188     +
93189     +   %if (%sysfunc(exist(&metadata))<1 and %sysfunc(exist(&metadata, VIEW))<1)
93190     +                   or (&metadata eq ) %then %do;
93191     +       %put * No metadata data set defined;
93192     +       %goto doend;
93193     +   %end;
93194     +
93195     +   data _null_;
93196     +      length _STRING_ $80;
93197     +      retain _STRING_;
93198     +      set &metadata end=eof;
93199     +      file macFile;
93200     +      %if %nrbquote(&where) ne %then %do;
93201     +          %let whereClause = where (%nrbquote(&where));
93202     +          %unquote(&whereClause);
93203     +      %end;
93204     +      if _N_=1 then do;
93205     +         string = "%"!!"macro &name;";
93206     +         put string;
93207     +      end;
93208     +      if (length(_STRING_) + length(trim(&key))+ 1 < 80) then do;
93209     +         _STRING_ = trim(_STRING_)!!' '!!trim(&key);
93210     +         if eof then do;
93211     +            put _STRING_;
93212     +            string = "%"!!"mend &name;";
93213     +            put string;
93214     +            %if (&nummacro ne ) %then %do;
93215     +                string = strip(put(_N_, best.));
93216     +                put "%" "global &nummacro;";
93217     +                put "%" "let &nummacro = " string ";";
93218     +                call symput('_METAOBS', string);
93219     +            %end;
93220     +         end;
93221     +      end;
93222     +      else do;
93223     +         put _STRING_;
93224     +         _string_ = TRIM(&key);
93225     +         if eof then do;
93226     +            put _STRING_;
93227     +            string = "%"!!"mend &name;";
93228     +            put string;
93229     +        end;
93230     +      end;
93231     +      if eof then do;
93232     +         string = strip(put(_N_, best.));
93233     +         call symput('_METAOBS', string);
93234     +         %if (&nummacro ne ) %then %do;
93235     +             put "%" "global &nummacro;";
93236     +             put "%" "let &nummacro = " string ";";
93237     +         %end;
93238     +      end;
93239     +   run;
93240     +
93241     +   %doend:
93242     +   %if ^&_METAOBS %then %do;
93243     +       data _null_;
93244     +          file macFile;
93245     +          put "%" "macro &name;";
93246     +          put "%" "mend &name;";
93247     +          %if (&nummacro ne ) %then %do;
93248     +              put "%" "global &nummacro;";
93249     +              put "%" "let &nummacro = 0;";
93250     +          %end;
93251     +      run;
93252     +   %end;
93253     +   %inc macFile;
93254     +   filename macFile;
93255     +%mend em_varMacro;
NOTE: %INCLUDE (level 1) ending.
MPRINT(EM_APPS_QUANTILE_BINNING):   filename tempopen;
NOTE: Fileref TEMPOPEN has been deassigned.
MPRINT(EM_VARMACRO):   filename macFile catalog 'work.emutil.macro.source';
MPRINT(EM_VARMACRO):   data _null_;
MPRINT(EM_VARMACRO):   length _STRING_ $80;
MPRINT(EM_VARMACRO):   retain _STRING_;
MPRINT(EM_VARMACRO):   set tempvars end=eof;
MPRINT(EM_VARMACRO):   file macFile;
MPRINT(EM_VARMACRO):   if _N_=1 then do;
MPRINT(EM_VARMACRO):   string = "%"!!"macro intvars;";
MPRINT(EM_VARMACRO):   put string;
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   if (length(_STRING_) + length(trim(NAME))+ 1 < 80) then do;
MPRINT(EM_VARMACRO):   _STRING_ = trim(_STRING_)!!' '!!trim(NAME);
MPRINT(EM_VARMACRO):   if eof then do;
MPRINT(EM_VARMACRO):   put _STRING_;
MPRINT(EM_VARMACRO):   string = "%"!!"mend intvars;";
MPRINT(EM_VARMACRO):   put string;
MPRINT(EM_VARMACRO):   string = strip(put(_N_, best.));
MPRINT(EM_VARMACRO):   put "%" "global num_intvars;";
MPRINT(EM_VARMACRO):   put "%" "let num_intvars = " string ";";
MPRINT(EM_VARMACRO):   call symput('_METAOBS', string);
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   else do;
MPRINT(EM_VARMACRO):   put _STRING_;
MPRINT(EM_VARMACRO):   _string_ = TRIM(NAME);
MPRINT(EM_VARMACRO):   if eof then do;
MPRINT(EM_VARMACRO):   put _STRING_;
MPRINT(EM_VARMACRO):   string = "%"!!"mend intvars;";
MPRINT(EM_VARMACRO):   put string;
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   if eof then do;
MPRINT(EM_VARMACRO):   string = strip(put(_N_, best.));
MPRINT(EM_VARMACRO):   call symput('_METAOBS', string);
MPRINT(EM_VARMACRO):   put "%" "global num_intvars;";
MPRINT(EM_VARMACRO):   put "%" "let num_intvars = " string ";";
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   run;
 
NOTE: The file MACFILE is:
      Catalog Name=WORK.EMUTIL.MACRO.SOURCE,
      Catalog Page Size=4096,
      Number of Catalog Pages=5,
      Created=Wed, Nov  4, 2015 07:40:37 AM,
      Last Modified=Wed, Nov  4, 2015 07:40:37 AM,
      Filename=C:\Users\sakerb01\AppData\Local\Temp\SAS Temporary
      Files\_TD4856_COB-IT-M11_\Prc2\emutil.sas7bcat,
      Release Created=9.0401M1,Host Created=X64_7PRO
 
NOTE: 8 records were written to the file MACFILE.
      The minimum record length was 14.
      The maximum record length was 70.
NOTE: There were 10 observations read from the data set WORK.TEMPVARS.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: %INCLUDE (level 1) file MACFILE is file WORK.EMUTIL.MACRO.SOURCE.
93256     +%macro intvars;
93257     +IMP_CLAGE IMP_CLNO IMP_DEBTINC IMP_MORTDUE IMP_NINQ IMP_VALUE INDELINQ
93258     +INDEROG LOAN LOG_yoj
93259     +%mend intvars;
93260     +%global num_intvars;
93261     +%let num_intvars = 10 ;
93262     +%global num_intvars;
93263     +%let num_intvars = 10 ;
NOTE: %INCLUDE (level 1) ending.
MPRINT(EM_VARMACRO):   filename macFile;
NOTE: Fileref MACFILE has been deassigned.
MPRINT(EM_APPS_QUANTILE_BINNING):  ;
MPRINT(EM_APPS_QUANTILE_BINNING):   data tempInt / view = tempInt;
MPRINT(EM_APPS_QUANTILE_BINNING):   set EMWS1.BINNING_NEWTRAIN(keep
MPRINT(EM_APPS_QUANTILE_BINNING):  = IMP_CLAGE IMP_CLNO IMP_DEBTINC IMP_MORTDUE IMP_NINQ
IMP_VALUE INDELINQ INDEROG LOAN LOG_yoj );
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
 
NOTE: DATA STEP view saved on file WORK.TEMPINT.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_APPS_QUANTILE_BINNING):   proc stdize data=work.tempInt outstat=work.pctdata
out=_null_ pctlpts=25 50 75;
MPRINT(EM_APPS_QUANTILE_BINNING):   var
MPRINT(INTVARS):   IMP_CLAGE IMP_CLNO IMP_DEBTINC IMP_MORTDUE IMP_NINQ IMP_VALUE INDELINQ
INDEROG LOAN LOG_yoj
MPRINT(EM_APPS_QUANTILE_BINNING):  ;
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
 
NOTE: View WORK.TEMPINT.VIEW used (Total process time):
      real time           0.21 seconds
      cpu time            0.20 seconds
 
NOTE: There were 2979 observations read from the data set EMWS1.BINNING_NEWTRAIN.
NOTE: There were 2979 observations read from the data set WORK.TEMPINT.
NOTE: The data set WORK.PCTDATA has 11 observations and 11 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.25 seconds
      cpu time            0.21 seconds
 
 
MPRINT(EM_APPS_QUANTILE_BINNING):   proc transpose data=work.pctdata(where=(_type_=:'P'))
out=work.pctdata;
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
 
NOTE: There were 3 observations read from the data set WORK.PCTDATA.
      WHERE _type_=:'P';
NOTE: The data set WORK.PCTDATA has 10 observations and 5 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_APPS_QUANTILE_BINNING):   proc dmdb data=tempvars outtable=tempmapping nameserver;
MPRINT(EM_APPS_QUANTILE_BINNING):   names NAME;
MPRINT(EM_APPS_QUANTILE_BINNING):   prefix BIN_ ;
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
 
NOTE: There were 10 observations read from the data set WORK.TEMPVARS.
NOTE: The data set WORK.TEMPMAPPING has 10 observations and 2 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_APPS_QUANTILE_BINNING):   proc sort data=tempmapping(keep=NAME bin);
MPRINT(EM_APPS_QUANTILE_BINNING):   by NAME;
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
 
NOTE: There were 10 observations read from the data set WORK.TEMPMAPPING.
NOTE: The data set WORK.TEMPMAPPING has 10 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_APPS_QUANTILE_BINNING):   proc sort data=work.pctdata;
MPRINT(EM_APPS_QUANTILE_BINNING):   by _NAME_;
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
 
NOTE: There were 10 observations read from the data set WORK.PCTDATA.
NOTE: The data set WORK.PCTDATA has 10 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_APPS_QUANTILE_BINNING):   data tempbins;
MPRINT(EM_APPS_QUANTILE_BINNING):   length display_var $32;
MPRINT(EM_APPS_QUANTILE_BINNING):   merge work.pctdata(in=_a) tempmapping(rename=(name=_name_
bin=binVar)) ;
MPRINT(EM_APPS_QUANTILE_BINNING):   by _NAME_;
MPRINT(EM_APPS_QUANTILE_BINNING):   if _a;
MPRINT(EM_APPS_QUANTILE_BINNING):   if missing(display_var) then display_var = _NAME_;
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
 
WARNING: Multiple lengths were specified for the BY variable _NAME_ by input data sets. This
         might cause unexpected results.
NOTE: There were 10 observations read from the data set WORK.PCTDATA.
NOTE: There were 10 observations read from the data set WORK.TEMPMAPPING.
NOTE: The data set WORK.TEMPBINS has 10 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_APPS_QUANTILE_BINNING):   data _null_;
MPRINT(EM_APPS_QUANTILE_BINNING):   FILE X;
MPRINT(EM_APPS_QUANTILE_BINNING):   set tempbins end=eof;
MPRINT(EM_APPS_QUANTILE_BINNING):   length string $200;
MPRINT(EM_APPS_QUANTILE_BINNING):   by _NAME_;
MPRINT(EM_APPS_QUANTILE_BINNING):   if _n_=1 then do;
MPRINT(EM_APPS_QUANTILE_BINNING):   put
"*------------------------------------------------------------*;";
MPRINT(EM_APPS_QUANTILE_BINNING):   put "* Generating Bins for interval variables;";
MPRINT(EM_APPS_QUANTILE_BINNING):   put
"*------------------------------------------------------------*;";
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute(" data EMWS1.BINNING_BINMAPPINGS; ");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("   length name bin_name $32 LB UB 8
EM_BIN_LABEL BIN $200;");
MPRINT(EM_APPS_QUANTILE_BINNING):   end;
MPRINT(EM_APPS_QUANTILE_BINNING):   LB = .;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB = round(COL1, 1 / 100);
MPRINT(EM_APPS_QUANTILE_BINNING):   bin=1;
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("name='"||strip(_NAME_)||"'; ");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("bin_name='"||strip(binVar)||"'; ");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("bin='"||strip(bin)||"';");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("LB=.;");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("UB="||UB||";");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("EM_BIN_LABEL='"||strip(display_var)||" <
"||strip(UB)||"';");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("output;");
MPRINT(EM_APPS_QUANTILE_BINNING):   string = "if "||strip(_name_)||" eq . then
"||strip(binVar)||"= .;";
MPRINT(EM_APPS_QUANTILE_BINNING):   put string;
MPRINT(EM_APPS_QUANTILE_BINNING):   string = "else do;";
MPRINT(EM_APPS_QUANTILE_BINNING):   put string;
MPRINT(EM_APPS_QUANTILE_BINNING):   string= "  if "||strip(_name_)||" < "||strip(UB)||" then
"||strip(binVar)||"="||strip(bin)||";";
MPRINT(EM_APPS_QUANTILE_BINNING):   put string;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB = round(COL2, 1 / 100);
MPRINT(EM_APPS_QUANTILE_BINNING):   LB = round(COL1, 1 / 100);
MPRINT(EM_APPS_QUANTILE_BINNING):   if UB ne LB then do;
MPRINT(EM_APPS_QUANTILE_BINNING):   bin=bin+1;
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("name='"||strip(_NAME_)||"'; ");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("bin_name='"||strip(binVar)||"'; ");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("bin='"||strip(bin)||"';");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("LB="||LB||";");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("UB="||UB||";");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("EM_BIN_LABEL='"||strip(LB)||" <=
"||strip(display_Var)||" < "||strip(UB)||"';");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("output;");
MPRINT(EM_APPS_QUANTILE_BINNING):   string= "  else if "||strip(_name_)||" < "||strip(UB)||"
then "||strip(binVar)||"="||strip(bin)||";";
MPRINT(EM_APPS_QUANTILE_BINNING):   put string;
MPRINT(EM_APPS_QUANTILE_BINNING):   end;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB = round(COL3, 1 / 100);
MPRINT(EM_APPS_QUANTILE_BINNING):   LB = round(COL2, 1 / 100);
MPRINT(EM_APPS_QUANTILE_BINNING):   if UB ne LB then do;
MPRINT(EM_APPS_QUANTILE_BINNING):   bin=bin+1;
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("name='"||strip(_NAME_)||"'; ");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("bin_name='"||strip(binVar)||"'; ");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("bin='"||strip(bin)||"';");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("LB="||LB||";");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("UB="||UB||";");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("EM_BIN_LABEL='"||strip(LB)||" <=
"||strip(display_Var)||" < "||strip(UB)||"';");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("output;");
MPRINT(EM_APPS_QUANTILE_BINNING):   string= "  else if "||strip(_name_)||" < "||strip(UB)||"
then "||strip(binVar)||"="||strip(bin)||";";
MPRINT(EM_APPS_QUANTILE_BINNING):   put string;
MPRINT(EM_APPS_QUANTILE_BINNING):   end;
MPRINT(EM_APPS_QUANTILE_BINNING):   bin=bin+1;
MPRINT(EM_APPS_QUANTILE_BINNING):   LB = round(COL3, 1 / 100);
MPRINT(EM_APPS_QUANTILE_BINNING):   UB = .;
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("name='"||strip(_NAME_)||"'; ");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("bin_name = '"||strip(binVar)||"'; ");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("bin='"||strip(bin)||"';");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("UB=.;");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("LB="||LB||";");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("EM_BIN_LABEL='"||strip(display_Var)||" >=
"||strip(LB)||"';");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("output;");
MPRINT(EM_APPS_QUANTILE_BINNING):   string= "  else if "||strip(_name_)||" >= "||strip(LB)||"
then "||strip(binVar)||"="||strip(bin)||";";
MPRINT(EM_APPS_QUANTILE_BINNING):   put string;
MPRINT(EM_APPS_QUANTILE_BINNING):   string="end;";
MPRINT(EM_APPS_QUANTILE_BINNING):   put string;
MPRINT(EM_APPS_QUANTILE_BINNING):   if eof then do;
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("  if NAME='' and BIN_NAME='' and BIN='' then
delete;");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("  if LB=UB then delete;");
MPRINT(EM_APPS_QUANTILE_BINNING):   call execute("run;");
MPRINT(EM_APPS_QUANTILE_BINNING):   end;
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
 
NOTE: Numeric values have been converted to character values at the places given by:
      (Line):(Column).
      216:110   222:129   225:166   254:48    254:89    283:110   286:111   289:122   292:139
      292:185   303:44    303:85    337:110   340:111   343:122   346:139   346:185   357:44
      357:85    388:108   394:129   397:167   407:45    407:86
NOTE: The file X is:
 
      Filename=C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
      Projects\Project_3\Workspaces\EMWS1\BINNING\BINNINGCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=04Nov2015:07:40:37,
      Create Time=03Nov2015:13:53:39
 
MPRINT(EM_APPS_QUANTILE_BINNING):   data EMWS1.BINNING_BINMAPPINGS;
MPRINT(EM_APPS_QUANTILE_BINNING):   length name bin_name $32 LB UB 8 EM_BIN_LABEL BIN $200;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_CLAGE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_CLAGE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='1';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 118.57;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='IMP_CLAGE < 118.57';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_CLAGE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_CLAGE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='2';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 118.57;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 179.57;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='118.57 <= IMP_CLAGE < 179.57';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_CLAGE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_CLAGE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='3';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 179.57;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 226.86;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='179.57 <= IMP_CLAGE < 226.86';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_CLAGE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name = 'BIN_IMP_CLAGE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='4';
MPRINT(EM_APPS_QUANTILE_BINNING):   UB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 226.86;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='IMP_CLAGE >= 226.86';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_CLNO';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_CLNO';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='1';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 15;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='IMP_CLNO < 15';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_CLNO';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_CLNO';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='2';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 15;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 21;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='15 <= IMP_CLNO < 21';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_CLNO';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_CLNO';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='3';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 21;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 26;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='21 <= IMP_CLNO < 26';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_CLNO';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name = 'BIN_IMP_CLNO';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='4';
MPRINT(EM_APPS_QUANTILE_BINNING):   UB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 26;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='IMP_CLNO >= 26';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_DEBTINC';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_DEBTINC';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='1';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 30.4;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='IMP_DEBTINC < 30.4';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_DEBTINC';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_DEBTINC';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='2';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 30.4;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 33.79;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='30.4 <= IMP_DEBTINC < 33.79';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_DEBTINC';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_DEBTINC';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='3';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 33.79;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 38.07;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='33.79 <= IMP_DEBTINC < 38.07';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_DEBTINC';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name = 'BIN_IMP_DEBTINC';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='4';
MPRINT(EM_APPS_QUANTILE_BINNING):   UB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 38.07;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='IMP_DEBTINC >= 38.07';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_MORTDUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_MORTDUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='1';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 48273;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='IMP_MORTDUE < 48273';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_MORTDUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_MORTDUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='2';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 48273;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 68959;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='48273 <= IMP_MORTDUE < 68959';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_MORTDUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_MORTDUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='3';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 68959;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 89226;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='68959 <= IMP_MORTDUE < 89226';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_MORTDUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name = 'BIN_IMP_MORTDUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='4';
MPRINT(EM_APPS_QUANTILE_BINNING):   UB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 89226;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='IMP_MORTDUE >= 89226';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_NINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_NINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='1';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 0;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='IMP_NINQ < 0';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_NINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_NINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='2';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 0;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 1;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='0 <= IMP_NINQ < 1';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_NINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_NINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='3';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 1;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 2;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='1 <= IMP_NINQ < 2';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_NINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name = 'BIN_IMP_NINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='4';
MPRINT(EM_APPS_QUANTILE_BINNING):   UB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 2;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='IMP_NINQ >= 2';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_VALUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_VALUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='1';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 66692;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='IMP_VALUE < 66692';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_VALUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_VALUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='2';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 66692;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 90000;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='66692 <= IMP_VALUE < 90000';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_VALUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_IMP_VALUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='3';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 90000;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 120724;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='90000 <= IMP_VALUE < 120724';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='IMP_VALUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name = 'BIN_IMP_VALUE';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='4';
MPRINT(EM_APPS_QUANTILE_BINNING):   UB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 120724;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='IMP_VALUE >= 120724';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='INDELINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_INDELINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='1';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 0;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='INDELINQ < 0';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='INDELINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_INDELINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='2';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 0;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 1;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='0 <= INDELINQ < 1';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='INDELINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name = 'BIN_INDELINQ';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='3';
MPRINT(EM_APPS_QUANTILE_BINNING):   UB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 1;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='INDELINQ >= 1';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='INDEROG';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_INDEROG';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='1';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 0;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='INDEROG < 0';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='INDEROG';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name = 'BIN_INDEROG';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='2';
MPRINT(EM_APPS_QUANTILE_BINNING):   UB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 0;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='INDEROG >= 0';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='LOAN';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_LOAN';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='1';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 11100;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='LOAN < 11100';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='LOAN';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_LOAN';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='2';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 11100;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 16200;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='11100 <= LOAN < 16200';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='LOAN';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_LOAN';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='3';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 16200;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 23200;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='16200 <= LOAN < 23200';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='LOAN';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name = 'BIN_LOAN';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='4';
MPRINT(EM_APPS_QUANTILE_BINNING):   UB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 23200;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='LOAN >= 23200';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='LOG_yoj';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_LOG_yoj';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='1';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 1.39;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='LOG_yoj < 1.39';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='LOG_yoj';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_LOG_yoj';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='2';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 1.39;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 2.18;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='1.39 <= LOG_yoj < 2.18';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='LOG_yoj';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name='BIN_LOG_yoj';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='3';
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 2.18;
MPRINT(EM_APPS_QUANTILE_BINNING):   UB= 2.56;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='2.18 <= LOG_yoj < 2.56';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   name='LOG_yoj';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin_name = 'BIN_LOG_yoj';
MPRINT(EM_APPS_QUANTILE_BINNING):   bin='4';
MPRINT(EM_APPS_QUANTILE_BINNING):   UB=.;
MPRINT(EM_APPS_QUANTILE_BINNING):   LB= 2.56;
MPRINT(EM_APPS_QUANTILE_BINNING):   EM_BIN_LABEL='LOG_yoj >= 2.56';
MPRINT(EM_APPS_QUANTILE_BINNING):   output;
MPRINT(EM_APPS_QUANTILE_BINNING):   if NAME='' and BIN_NAME='' and BIN='' then delete;
MPRINT(EM_APPS_QUANTILE_BINNING):   if LB=UB then delete;
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
NOTE: 70 records were written to the file X.
      The minimum record length was 4.
      The maximum record length was 63.
NOTE: There were 10 observations read from the data set WORK.TEMPBINS.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
 
 
NOTE: CALL EXECUTE generated line.
1         +  data EMWS1.BINNING_BINMAPPINGS;
2         +    length name bin_name $32 LB UB 8 EM_BIN_LABEL BIN $200;
MPRINT(EM_APPS_QUANTILE_BINNING):  32 LB UB EM_BIN_LABEL BIN200
3         + name='IMP_CLAGE';
4         + bin_name='BIN_IMP_CLAGE';
5         + bin='1';
6         + LB=.;
7         + UB=      118.57;
8         + EM_BIN_LABEL='IMP_CLAGE < 118.57';
9         + output;
10        + name='IMP_CLAGE';
11        + bin_name='BIN_IMP_CLAGE';
12        + bin='2';
13        + LB=      118.57;
14        + UB=      179.57;
15        + EM_BIN_LABEL='118.57 <= IMP_CLAGE < 179.57';
16        + output;
17        + name='IMP_CLAGE';
18        + bin_name='BIN_IMP_CLAGE';
19        + bin='3';
20        + LB=      179.57;
21        + UB=      226.86;
22        + EM_BIN_LABEL='179.57 <= IMP_CLAGE < 226.86';
23        + output;
24        + name='IMP_CLAGE';
25        + bin_name = 'BIN_IMP_CLAGE';
26        + bin='4';
27        + UB=.;
28        + LB=      226.86;
29        + EM_BIN_LABEL='IMP_CLAGE >= 226.86';
30        + output;
31        + name='IMP_CLNO';
32        + bin_name='BIN_IMP_CLNO';
33        + bin='1';
34        + LB=.;
35        + UB=          15;
36        + EM_BIN_LABEL='IMP_CLNO < 15';
37        + output;
38        + name='IMP_CLNO';
39        + bin_name='BIN_IMP_CLNO';
40        + bin='2';
41        + LB=          15;
42        + UB=          21;
43        + EM_BIN_LABEL='15 <= IMP_CLNO < 21';
44        + output;
45        + name='IMP_CLNO';
46        + bin_name='BIN_IMP_CLNO';
47        + bin='3';
48        + LB=          21;
49        + UB=          26;
50        + EM_BIN_LABEL='21 <= IMP_CLNO < 26';
51        + output;
52        + name='IMP_CLNO';
53        + bin_name = 'BIN_IMP_CLNO';
54        + bin='4';
55        + UB=.;
56        + LB=          26;
57        + EM_BIN_LABEL='IMP_CLNO >= 26';
58        + output;
59        + name='IMP_DEBTINC';
60        + bin_name='BIN_IMP_DEBTINC';
61        + bin='1';
62        + LB=.;
63        + UB=        30.4;
64        + EM_BIN_LABEL='IMP_DEBTINC < 30.4';
65        + output;
66        + name='IMP_DEBTINC';
67        + bin_name='BIN_IMP_DEBTINC';
68        + bin='2';
69        + LB=        30.4;
70        + UB=       33.79;
71        + EM_BIN_LABEL='30.4 <= IMP_DEBTINC < 33.79';
72        + output;
73        + name='IMP_DEBTINC';
74        + bin_name='BIN_IMP_DEBTINC';
75        + bin='3';
76        + LB=       33.79;
77        + UB=       38.07;
78        + EM_BIN_LABEL='33.79 <= IMP_DEBTINC < 38.07';
79        + output;
80        + name='IMP_DEBTINC';
81        + bin_name = 'BIN_IMP_DEBTINC';
82        + bin='4';
83        + UB=.;
84        + LB=       38.07;
85        + EM_BIN_LABEL='IMP_DEBTINC >= 38.07';
86        + output;
87        + name='IMP_MORTDUE';
88        + bin_name='BIN_IMP_MORTDUE';
89        + bin='1';
90        + LB=.;
91        + UB=       48273;
92        + EM_BIN_LABEL='IMP_MORTDUE < 48273';
93        + output;
94        + name='IMP_MORTDUE';
95        + bin_name='BIN_IMP_MORTDUE';
96        + bin='2';
97        + LB=       48273;
98        + UB=       68959;
99        + EM_BIN_LABEL='48273 <= IMP_MORTDUE < 68959';
100       + output;
101       + name='IMP_MORTDUE';
102       + bin_name='BIN_IMP_MORTDUE';
103       + bin='3';
104       + LB=       68959;
105       + UB=       89226;
106       + EM_BIN_LABEL='68959 <= IMP_MORTDUE < 89226';
107       + output;
108       + name='IMP_MORTDUE';
109       + bin_name = 'BIN_IMP_MORTDUE';
110       + bin='4';
111       + UB=.;
112       + LB=       89226;
113       + EM_BIN_LABEL='IMP_MORTDUE >= 89226';
114       + output;
115       + name='IMP_NINQ';
116       + bin_name='BIN_IMP_NINQ';
117       + bin='1';
118       + LB=.;
119       + UB=           0;
120       + EM_BIN_LABEL='IMP_NINQ < 0';
121       + output;
122       + name='IMP_NINQ';
123       + bin_name='BIN_IMP_NINQ';
124       + bin='2';
125       + LB=           0;
126       + UB=           1;
127       + EM_BIN_LABEL='0 <= IMP_NINQ < 1';
128       + output;
129       + name='IMP_NINQ';
130       + bin_name='BIN_IMP_NINQ';
131       + bin='3';
132       + LB=           1;
133       + UB=           2;
134       + EM_BIN_LABEL='1 <= IMP_NINQ < 2';
135       + output;
136       + name='IMP_NINQ';
137       + bin_name = 'BIN_IMP_NINQ';
138       + bin='4';
139       + UB=.;
140       + LB=           2;
141       + EM_BIN_LABEL='IMP_NINQ >= 2';
142       + output;
143       + name='IMP_VALUE';
144       + bin_name='BIN_IMP_VALUE';
145       + bin='1';
146       + LB=.;
147       + UB=       66692;
148       + EM_BIN_LABEL='IMP_VALUE < 66692';
149       + output;
150       + name='IMP_VALUE';
151       + bin_name='BIN_IMP_VALUE';
152       + bin='2';
153       + LB=       66692;
154       + UB=       90000;
155       + EM_BIN_LABEL='66692 <= IMP_VALUE < 90000';
156       + output;
157       + name='IMP_VALUE';
158       + bin_name='BIN_IMP_VALUE';
159       + bin='3';
160       + LB=       90000;
161       + UB=      120724;
162       + EM_BIN_LABEL='90000 <= IMP_VALUE < 120724';
163       + output;
164       + name='IMP_VALUE';
165       + bin_name = 'BIN_IMP_VALUE';
166       + bin='4';
167       + UB=.;
168       + LB=      120724;
169       + EM_BIN_LABEL='IMP_VALUE >= 120724';
170       + output;
171       + name='INDELINQ';
172       + bin_name='BIN_INDELINQ';
173       + bin='1';
174       + LB=.;
175       + UB=           0;
176       + EM_BIN_LABEL='INDELINQ < 0';
177       + output;
178       + name='INDELINQ';
179       + bin_name='BIN_INDELINQ';
180       + bin='2';
181       + LB=           0;
182       + UB=           1;
183       + EM_BIN_LABEL='0 <= INDELINQ < 1';
184       + output;
185       + name='INDELINQ';
186       + bin_name = 'BIN_INDELINQ';
187       + bin='3';
188       + UB=.;
189       + LB=           1;
190       + EM_BIN_LABEL='INDELINQ >= 1';
191       + output;
192       + name='INDEROG';
193       + bin_name='BIN_INDEROG';
194       + bin='1';
195       + LB=.;
196       + UB=           0;
197       + EM_BIN_LABEL='INDEROG < 0';
198       + output;
199       + name='INDEROG';
200       + bin_name = 'BIN_INDEROG';
201       + bin='2';
202       + UB=.;
203       + LB=           0;
204       + EM_BIN_LABEL='INDEROG >= 0';
205       + output;
206       + name='LOAN';
207       + bin_name='BIN_LOAN';
208       + bin='1';
209       + LB=.;
210       + UB=       11100;
211       + EM_BIN_LABEL='LOAN < 11100';
212       + output;
213       + name='LOAN';
214       + bin_name='BIN_LOAN';
215       + bin='2';
216       + LB=       11100;
217       + UB=       16200;
218       + EM_BIN_LABEL='11100 <= LOAN < 16200';
219       + output;
220       + name='LOAN';
221       + bin_name='BIN_LOAN';
222       + bin='3';
223       + LB=       16200;
224       + UB=       23200;
225       + EM_BIN_LABEL='16200 <= LOAN < 23200';
226       + output;
227       + name='LOAN';
228       + bin_name = 'BIN_LOAN';
229       + bin='4';
230       + UB=.;
231       + LB=       23200;
232       + EM_BIN_LABEL='LOAN >= 23200';
233       + output;
234       + name='LOG_yoj';
235       + bin_name='BIN_LOG_yoj';
236       + bin='1';
237       + LB=.;
238       + UB=        1.39;
239       + EM_BIN_LABEL='LOG_yoj < 1.39';
240       + output;
241       + name='LOG_yoj';
242       + bin_name='BIN_LOG_yoj';
243       + bin='2';
244       + LB=        1.39;
245       + UB=        2.18;
246       + EM_BIN_LABEL='1.39 <= LOG_yoj < 2.18';
247       + output;
248       + name='LOG_yoj';
249       + bin_name='BIN_LOG_yoj';
250       + bin='3';
251       + LB=        2.18;
252       + UB=        2.56;
253       + EM_BIN_LABEL='2.18 <= LOG_yoj < 2.56';
254       + output;
255       + name='LOG_yoj';
256       + bin_name = 'BIN_LOG_yoj';
257       + bin='4';
258       + UB=.;
259       + LB=        2.56;
260       + EM_BIN_LABEL='LOG_yoj >= 2.56';
261       + output;
262       +   if NAME='' and BIN_NAME='' and BIN='' then delete;
263       +   if LB=UB then delete;
264       + run;
 
NOTE: The data set EMWS1.BINNING_BINMAPPINGS has 37 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_APPS_QUANTILE_BINNING):   data _null_;
MPRINT(EM_APPS_QUANTILE_BINNING):   set work.tempvars end=eof;
MPRINT(EM_APPS_QUANTILE_BINNING):   FILE X MOD;
MPRINT(EM_APPS_QUANTILE_BINNING):   length string $200;
MPRINT(EM_APPS_QUANTILE_BINNING):   if _n_=1 then do;
MPRINT(EM_APPS_QUANTILE_BINNING):   put "drop";
MPRINT(EM_APPS_QUANTILE_BINNING):   end;
MPRINT(EM_APPS_QUANTILE_BINNING):   string = " "||strip(name);
MPRINT(EM_APPS_QUANTILE_BINNING):   put string;
MPRINT(EM_APPS_QUANTILE_BINNING):   if eof then do;
MPRINT(EM_APPS_QUANTILE_BINNING):   put ";";
MPRINT(EM_APPS_QUANTILE_BINNING):   end;
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
 
NOTE: The file X is:
 
      Filename=C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
      Projects\Project_3\Workspaces\EMWS1\BINNING\BINNINGCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=2520,
      Last Modified=04Nov2015:07:40:37,
      Create Time=03Nov2015:13:53:39
 
NOTE: 12 records were written to the file X.
      The minimum record length was 1.
      The maximum record length was 11.
NOTE: There were 10 observations read from the data set WORK.TEMPVARS.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_APPS_QUANTILE_BINNING):   proc datasets library=work nolist;
MPRINT(EM_APPS_QUANTILE_BINNING):   delete pctdata tempmapping tempbins tempInt;
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
 
NOTE: The file WORK.TEMPINT (memtype=DATA) was not found, but appears on a DELETE statement.
NOTE: Deleting WORK.PCTDATA (memtype=DATA).
NOTE: Deleting WORK.TEMPMAPPING (memtype=DATA).
NOTE: Deleting WORK.TEMPBINS (memtype=DATA).
MPRINT(EM_APPS_QUANTILE_BINNING):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
 
MPRINT(EM_APPS_QUANTILE_BINNING):   proc datasets library=work nolist;
MPRINT(EM_APPS_QUANTILE_BINNING):   delete tempvars;
MPRINT(EM_APPS_QUANTILE_BINNING):   run;
 
NOTE: Deleting WORK.TEMPVARS (memtype=DATA).
MPRINT(EM_APPS_QUANTILE_BINNING):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):  ;
MPRINT(EM_QUANTILE_BINNING):   proc sort data=EMWS1.BINNING_BINMAPPINGS;
MPRINT(EM_QUANTILE_BINNING):   by name lb;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 37 observations read from the data set EMWS1.BINNING_BINMAPPINGS.
NOTE: The data set EMWS1.BINNING_BINMAPPINGS has 37 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   data EMWS1.BINNING_BINMAPPINGS;
MPRINT(EM_QUANTILE_BINNING):   set EMWS1.BINNING_BINMAPPINGS;
MPRINT(EM_QUANTILE_BINNING):   length display_var $32 grp $8;
MPRINT(EM_QUANTILE_BINNING):   display_var = name;
MPRINT(EM_QUANTILE_BINNING):   GRP = BIN + 1;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: Character values have been converted to numeric values at the places given by:
      (Line):(Column).
      76:92
NOTE: Numeric values have been converted to character values at the places given by:
      (Line):(Column).
      76:96
NOTE: There were 37 observations read from the data set EMWS1.BINNING_BINMAPPINGS.
NOTE: The data set EMWS1.BINNING_BINMAPPINGS has 37 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   filename X;
NOTE: Fileref X has been deassigned.
MPRINT(EM_QUANTILE_BINNING):   proc sort data=EMWS1.BINNING_BINMAPPINGS out=sortedmapping
nodupkey;
MPRINT(EM_QUANTILE_BINNING):   by NAME;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 37 observations read from the data set EMWS1.BINNING_BINMAPPINGS.
NOTE: 27 observations with duplicate key values were deleted.
NOTE: The data set WORK.SORTEDMAPPING has 10 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   data tempmissvalues;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: The data set WORK.TEMPMISSVALUES has 1 observations and 0 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   data tempmissvalues;
MPRINT(EM_QUANTILE_BINNING):   set sortedmapping;
MPRINT(EM_QUANTILE_BINNING):   GRP="1";
MPRINT(EM_QUANTILE_BINNING):   bin="Missing";
MPRINT(EM_QUANTILE_BINNING):   _split_value_ = "Missing";
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 10 observations read from the data set WORK.SORTEDMAPPING.
NOTE: The data set WORK.TEMPMISSVALUES has 10 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   filename X "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
Projects\Project_3\Workspaces\EMWS1\BINNING\BINNINGCODE.sas";
MPRINT(EM_QUANTILE_BINNING):   data EMWS1.BINNING_BINDATA;
MPRINT(EM_QUANTILE_BINNING):   set EMWS1.BINNING_NEWTRAIN;
NOTE: %INCLUDE (level 1) file X is file C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
      Projects\Project_3\Workspaces\EMWS1\BINNING\BINNINGCODE.sas.
93264     +*------------------------------------------------------------*;
MPRINT(EM_QUANTILE_BINNING):   *------------------------------------------------------------*;
93265     +* Generating Bins for interval variables;
MPRINT(EM_QUANTILE_BINNING):   * Generating Bins for interval variables;
93266     +*------------------------------------------------------------*;
MPRINT(EM_QUANTILE_BINNING):   *------------------------------------------------------------*;
93267     +if IMP_CLAGE eq . then BIN_IMP_CLAGE= .;
MPRINT(EM_QUANTILE_BINNING):   if IMP_CLAGE eq . then BIN_IMP_CLAGE= .;
93268     +else do;
MPRINT(EM_QUANTILE_BINNING):   else do;
93269     +if IMP_CLAGE < 118.57 then BIN_IMP_CLAGE=1;
MPRINT(EM_QUANTILE_BINNING):   if IMP_CLAGE < 118.57 then BIN_IMP_CLAGE=1;
93270     +else if IMP_CLAGE < 179.57 then BIN_IMP_CLAGE=2;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_CLAGE < 179.57 then BIN_IMP_CLAGE=2;
93271     +else if IMP_CLAGE < 226.86 then BIN_IMP_CLAGE=3;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_CLAGE < 226.86 then BIN_IMP_CLAGE=3;
93272     +else if IMP_CLAGE >= 226.86 then BIN_IMP_CLAGE=4;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_CLAGE >= 226.86 then BIN_IMP_CLAGE=4;
93273     +end;
MPRINT(EM_QUANTILE_BINNING):   end;
93274     +if IMP_CLNO eq . then BIN_IMP_CLNO= .;
MPRINT(EM_QUANTILE_BINNING):   if IMP_CLNO eq . then BIN_IMP_CLNO= .;
93275     +else do;
MPRINT(EM_QUANTILE_BINNING):   else do;
93276     +if IMP_CLNO < 15 then BIN_IMP_CLNO=1;
MPRINT(EM_QUANTILE_BINNING):   if IMP_CLNO < 15 then BIN_IMP_CLNO=1;
93277     +else if IMP_CLNO < 21 then BIN_IMP_CLNO=2;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_CLNO < 21 then BIN_IMP_CLNO=2;
93278     +else if IMP_CLNO < 26 then BIN_IMP_CLNO=3;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_CLNO < 26 then BIN_IMP_CLNO=3;
93279     +else if IMP_CLNO >= 26 then BIN_IMP_CLNO=4;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_CLNO >= 26 then BIN_IMP_CLNO=4;
93280     +end;
MPRINT(EM_QUANTILE_BINNING):   end;
93281     +if IMP_DEBTINC eq . then BIN_IMP_DEBTINC= .;
MPRINT(EM_QUANTILE_BINNING):   if IMP_DEBTINC eq . then BIN_IMP_DEBTINC= .;
93282     +else do;
MPRINT(EM_QUANTILE_BINNING):   else do;
93283     +if IMP_DEBTINC < 30.4 then BIN_IMP_DEBTINC=1;
MPRINT(EM_QUANTILE_BINNING):   if IMP_DEBTINC < 30.4 then BIN_IMP_DEBTINC=1;
93284     +else if IMP_DEBTINC < 33.79 then BIN_IMP_DEBTINC=2;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_DEBTINC < 33.79 then BIN_IMP_DEBTINC=2;
93285     +else if IMP_DEBTINC < 38.07 then BIN_IMP_DEBTINC=3;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_DEBTINC < 38.07 then BIN_IMP_DEBTINC=3;
93286     +else if IMP_DEBTINC >= 38.07 then BIN_IMP_DEBTINC=4;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_DEBTINC >= 38.07 then BIN_IMP_DEBTINC=4;
93287     +end;
MPRINT(EM_QUANTILE_BINNING):   end;
93288     +if IMP_MORTDUE eq . then BIN_IMP_MORTDUE= .;
MPRINT(EM_QUANTILE_BINNING):   if IMP_MORTDUE eq . then BIN_IMP_MORTDUE= .;
93289     +else do;
MPRINT(EM_QUANTILE_BINNING):   else do;
93290     +if IMP_MORTDUE < 48273 then BIN_IMP_MORTDUE=1;
MPRINT(EM_QUANTILE_BINNING):   if IMP_MORTDUE < 48273 then BIN_IMP_MORTDUE=1;
93291     +else if IMP_MORTDUE < 68959 then BIN_IMP_MORTDUE=2;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_MORTDUE < 68959 then BIN_IMP_MORTDUE=2;
93292     +else if IMP_MORTDUE < 89226 then BIN_IMP_MORTDUE=3;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_MORTDUE < 89226 then BIN_IMP_MORTDUE=3;
93293     +else if IMP_MORTDUE >= 89226 then BIN_IMP_MORTDUE=4;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_MORTDUE >= 89226 then BIN_IMP_MORTDUE=4;
93294     +end;
MPRINT(EM_QUANTILE_BINNING):   end;
93295     +if IMP_NINQ eq . then BIN_IMP_NINQ= .;
MPRINT(EM_QUANTILE_BINNING):   if IMP_NINQ eq . then BIN_IMP_NINQ= .;
93296     +else do;
MPRINT(EM_QUANTILE_BINNING):   else do;
93297     +if IMP_NINQ < 0 then BIN_IMP_NINQ=1;
MPRINT(EM_QUANTILE_BINNING):   if IMP_NINQ < 0 then BIN_IMP_NINQ=1;
93298     +else if IMP_NINQ < 1 then BIN_IMP_NINQ=2;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_NINQ < 1 then BIN_IMP_NINQ=2;
93299     +else if IMP_NINQ < 2 then BIN_IMP_NINQ=3;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_NINQ < 2 then BIN_IMP_NINQ=3;
93300     +else if IMP_NINQ >= 2 then BIN_IMP_NINQ=4;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_NINQ >= 2 then BIN_IMP_NINQ=4;
93301     +end;
MPRINT(EM_QUANTILE_BINNING):   end;
93302     +if IMP_VALUE eq . then BIN_IMP_VALUE= .;
MPRINT(EM_QUANTILE_BINNING):   if IMP_VALUE eq . then BIN_IMP_VALUE= .;
93303     +else do;
MPRINT(EM_QUANTILE_BINNING):   else do;
93304     +if IMP_VALUE < 66692 then BIN_IMP_VALUE=1;
MPRINT(EM_QUANTILE_BINNING):   if IMP_VALUE < 66692 then BIN_IMP_VALUE=1;
93305     +else if IMP_VALUE < 90000 then BIN_IMP_VALUE=2;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_VALUE < 90000 then BIN_IMP_VALUE=2;
93306     +else if IMP_VALUE < 120724 then BIN_IMP_VALUE=3;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_VALUE < 120724 then BIN_IMP_VALUE=3;
93307     +else if IMP_VALUE >= 120724 then BIN_IMP_VALUE=4;
MPRINT(EM_QUANTILE_BINNING):   else if IMP_VALUE >= 120724 then BIN_IMP_VALUE=4;
93308     +end;
MPRINT(EM_QUANTILE_BINNING):   end;
93309     +if INDELINQ eq . then BIN_INDELINQ= .;
MPRINT(EM_QUANTILE_BINNING):   if INDELINQ eq . then BIN_INDELINQ= .;
93310     +else do;
MPRINT(EM_QUANTILE_BINNING):   else do;
93311     +if INDELINQ < 0 then BIN_INDELINQ=1;
MPRINT(EM_QUANTILE_BINNING):   if INDELINQ < 0 then BIN_INDELINQ=1;
93312     +else if INDELINQ < 1 then BIN_INDELINQ=2;
MPRINT(EM_QUANTILE_BINNING):   else if INDELINQ < 1 then BIN_INDELINQ=2;
93313     +else if INDELINQ >= 1 then BIN_INDELINQ=3;
MPRINT(EM_QUANTILE_BINNING):   else if INDELINQ >= 1 then BIN_INDELINQ=3;
93314     +end;
MPRINT(EM_QUANTILE_BINNING):   end;
93315     +if INDEROG eq . then BIN_INDEROG= .;
MPRINT(EM_QUANTILE_BINNING):   if INDEROG eq . then BIN_INDEROG= .;
93316     +else do;
MPRINT(EM_QUANTILE_BINNING):   else do;
93317     +if INDEROG < 0 then BIN_INDEROG=1;
MPRINT(EM_QUANTILE_BINNING):   if INDEROG < 0 then BIN_INDEROG=1;
93318     +else if INDEROG >= 0 then BIN_INDEROG=2;
MPRINT(EM_QUANTILE_BINNING):   else if INDEROG >= 0 then BIN_INDEROG=2;
93319     +end;
MPRINT(EM_QUANTILE_BINNING):   end;
93320     +if LOAN eq . then BIN_LOAN= .;
MPRINT(EM_QUANTILE_BINNING):   if LOAN eq . then BIN_LOAN= .;
93321     +else do;
MPRINT(EM_QUANTILE_BINNING):   else do;
93322     +if LOAN < 11100 then BIN_LOAN=1;
MPRINT(EM_QUANTILE_BINNING):   if LOAN < 11100 then BIN_LOAN=1;
93323     +else if LOAN < 16200 then BIN_LOAN=2;
MPRINT(EM_QUANTILE_BINNING):   else if LOAN < 16200 then BIN_LOAN=2;
93324     +else if LOAN < 23200 then BIN_LOAN=3;
MPRINT(EM_QUANTILE_BINNING):   else if LOAN < 23200 then BIN_LOAN=3;
93325     +else if LOAN >= 23200 then BIN_LOAN=4;
MPRINT(EM_QUANTILE_BINNING):   else if LOAN >= 23200 then BIN_LOAN=4;
93326     +end;
MPRINT(EM_QUANTILE_BINNING):   end;
93327     +if LOG_yoj eq . then BIN_LOG_yoj= .;
MPRINT(EM_QUANTILE_BINNING):   if LOG_yoj eq . then BIN_LOG_yoj= .;
93328     +else do;
MPRINT(EM_QUANTILE_BINNING):   else do;
93329     +if LOG_yoj < 1.39 then BIN_LOG_yoj=1;
MPRINT(EM_QUANTILE_BINNING):   if LOG_yoj < 1.39 then BIN_LOG_yoj=1;
93330     +else if LOG_yoj < 2.18 then BIN_LOG_yoj=2;
MPRINT(EM_QUANTILE_BINNING):   else if LOG_yoj < 2.18 then BIN_LOG_yoj=2;
93331     +else if LOG_yoj < 2.56 then BIN_LOG_yoj=3;
MPRINT(EM_QUANTILE_BINNING):   else if LOG_yoj < 2.56 then BIN_LOG_yoj=3;
93332     +else if LOG_yoj >= 2.56 then BIN_LOG_yoj=4;
MPRINT(EM_QUANTILE_BINNING):   else if LOG_yoj >= 2.56 then BIN_LOG_yoj=4;
93333     +end;
MPRINT(EM_QUANTILE_BINNING):   end;
93334     +drop
93335     +IMP_clage
93336     +IMP_clno
93337     +IMP_debtinc
93338     +IMP_mortdue
93339     +IMP_ninq
93340     +IMP_value
93341     +INDELINQ
93342     +INDEROG
93343     +LOG_yoj
93344     +loan
93345     +;
MPRINT(EM_QUANTILE_BINNING):   drop IMP_clage IMP_clno IMP_debtinc IMP_mortdue IMP_ninq
IMP_value INDELINQ INDEROG LOG_yoj loan ;
93346     +drop
93347     +IMP_CLAGE
93348     +IMP_CLNO
93349     +IMP_DEBTINC
93350     +IMP_MORTDUE
93351     +IMP_NINQ
93352     +IMP_VALUE
93353     +INDELINQ
93354     +INDEROG
93355     +LOAN
93356     +LOG_yoj
93357     +;
MPRINT(EM_QUANTILE_BINNING):   drop IMP_CLAGE IMP_CLNO IMP_DEBTINC IMP_MORTDUE IMP_NINQ
IMP_VALUE INDELINQ INDEROG LOAN LOG_yoj ;
NOTE: %INCLUDE (level 1) ending.
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 2979 observations read from the data set EMWS1.BINNING_NEWTRAIN.
NOTE: The data set EMWS1.BINNING_BINDATA has 2979 observations and 28 variables.
NOTE: DATA statement used (Total process time):
      real time           0.07 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   filename X;
NOTE: Fileref X has been deassigned.
MPRINT(EM_QUANTILE_BINNING):   data tempsplitvals;
MPRINT(EM_QUANTILE_BINNING):   set EMWS1.BINNING_BINMAPPINGS tempmissvalues;
MPRINT(EM_QUANTILE_BINNING):   length newgroup _group_ _order_ 8 _level_ $8;
MPRINT(EM_QUANTILE_BINNING):   newgroup =.;
MPRINT(EM_QUANTILE_BINNING):   _LEVEL_ = 'ORDINAL';
MPRINT(EM_QUANTILE_BINNING):   _Group_ = grp;
MPRINT(EM_QUANTILE_BINNING):   rename NAME=DISPLAY_VAR BIN =_SPLIT_VALUE_ BIN_NAME =
_VARIABLE_;
MPRINT(EM_QUANTILE_BINNING):   keep NAME NEWGROUP BIN_NAME BIN _LEVEL_ _GROUP_ _ORDER_;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: Character values have been converted to numeric values at the places given by:
      (Line):(Column).
      199:121
NOTE: Variable _order_ is uninitialized.
NOTE: There were 37 observations read from the data set EMWS1.BINNING_BINMAPPINGS.
NOTE: There were 10 observations read from the data set WORK.TEMPMISSVALUES.
NOTE: The data set WORK.TEMPSPLITVALS has 47 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   data tempsplitvals;
MPRINT(EM_QUANTILE_BINNING):   set tempsplitvals;
MPRINT(EM_QUANTILE_BINNING):   _order_ = _N_;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 47 observations read from the data set WORK.TEMPSPLITVALS.
NOTE: The data set WORK.TEMPSPLITVALS has 47 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   data EMWS1.BINNING_SPLITVALS;
MPRINT(EM_QUANTILE_BINNING):   set tempsplitvals ;
MPRINT(EM_QUANTILE_BINNING):   keep display_var _split_value_ _variable_ newgroup _group_
_level_ _order_;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 47 observations read from the data set WORK.TEMPSPLITVALS.
NOTE: The data set EMWS1.BINNING_SPLITVALS has 47 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   data tempvariableset;
MPRINT(EM_QUANTILE_BINNING):   set EMWS1.BINNING_VariableSet;
MPRINT(EM_QUANTILE_BINNING):   where LEVEL ^= 'INTERVAL' and TYPE = 'C' and ((ROLE='INPUT' and
USE in ('Y', 'D')) OR (ROLE='REJECTED' and USE='Y'));
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 2 observations read from the data set EMWS1.BINNING_VARIABLESET.
      WHERE (LEVEL not = 'INTERVAL') and (TYPE='C') and (((ROLE='INPUT') and USE in ('D',
      'Y')) or ((ROLE='REJECTED') and (USE='Y')));
NOTE: The data set WORK.TEMPVARIABLESET has 2 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_VARMACRO):   filename macFile catalog 'work.emutil.macro.source';
MPRINT(EM_VARMACRO):   data _null_;
MPRINT(EM_VARMACRO):   length _STRING_ $80;
MPRINT(EM_VARMACRO):   retain _STRING_;
MPRINT(EM_VARMACRO):   set tempvariableset end=eof;
MPRINT(EM_VARMACRO):   file macFile;
MPRINT(EM_VARMACRO):   if _N_=1 then do;
MPRINT(EM_VARMACRO):   string = "%"!!"macro classvars;";
MPRINT(EM_VARMACRO):   put string;
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   if (length(_STRING_) + length(trim(NAME))+ 1 < 80) then do;
MPRINT(EM_VARMACRO):   _STRING_ = trim(_STRING_)!!' '!!trim(NAME);
MPRINT(EM_VARMACRO):   if eof then do;
MPRINT(EM_VARMACRO):   put _STRING_;
MPRINT(EM_VARMACRO):   string = "%"!!"mend classvars;";
MPRINT(EM_VARMACRO):   put string;
MPRINT(EM_VARMACRO):   string = strip(put(_N_, best.));
MPRINT(EM_VARMACRO):   put "%" "global num_classvars;";
MPRINT(EM_VARMACRO):   put "%" "let num_classvars = " string ";";
MPRINT(EM_VARMACRO):   call symput('_METAOBS', string);
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   else do;
MPRINT(EM_VARMACRO):   put _STRING_;
MPRINT(EM_VARMACRO):   _string_ = TRIM(NAME);
MPRINT(EM_VARMACRO):   if eof then do;
MPRINT(EM_VARMACRO):   put _STRING_;
MPRINT(EM_VARMACRO):   string = "%"!!"mend classvars;";
MPRINT(EM_VARMACRO):   put string;
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   if eof then do;
MPRINT(EM_VARMACRO):   string = strip(put(_N_, best.));
MPRINT(EM_VARMACRO):   call symput('_METAOBS', string);
MPRINT(EM_VARMACRO):   put "%" "global num_classvars;";
MPRINT(EM_VARMACRO):   put "%" "let num_classvars = " string ";";
MPRINT(EM_VARMACRO):   end;
MPRINT(EM_VARMACRO):   run;
 
NOTE: The file MACFILE is:
      Catalog Name=WORK.EMUTIL.MACRO.SOURCE,
      Catalog Page Size=4096,
      Number of Catalog Pages=5,
      Created=Wed, Nov  4, 2015 07:40:37 AM,
      Last Modified=Wed, Nov  4, 2015 07:40:37 AM,
      Filename=C:\Users\sakerb01\AppData\Local\Temp\SAS Temporary
      Files\_TD4856_COB-IT-M11_\Prc2\emutil.sas7bcat,
      Release Created=9.0401M1,Host Created=X64_7PRO
 
NOTE: 7 records were written to the file MACFILE.
      The minimum record length was 16.
      The maximum record length was 24.
NOTE: There were 2 observations read from the data set WORK.TEMPVARIABLESET.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
NOTE: %INCLUDE (level 1) file MACFILE is file WORK.EMUTIL.MACRO.SOURCE.
93358     +%macro classvars;
93359     +IMP_JOB IMP_REASON
93360     +%mend classvars;
93361     +%global num_classvars;
93362     +%let num_classvars = 2 ;
93363     +%global num_classvars;
93364     +%let num_classvars = 2 ;
NOTE: %INCLUDE (level 1) ending.
MPRINT(EM_VARMACRO):   filename macFile;
NOTE: Fileref MACFILE has been deassigned.
MPRINT(EM_QUANTILE_BINNING):  ;
MPRINT(EM_QUANTILE_BINNING):   proc dmdb data =EMWS1.BINNING_BINDATA classout=_classout nonorm;
MPRINT(EM_QUANTILE_BINNING):   class
MPRINT(CLASSVARS):   IMP_JOB IMP_REASON
MPRINT(EM_QUANTILE_BINNING):  ;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: Records processed = 2979   Memory used = 511K.
NOTE: There were 2979 observations read from the data set EMWS1.BINNING_BINDATA.
NOTE: The data set WORK._CLASSOUT has 8 observations and 9 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   proc dmdb data=EMWS1.BINNING_BINDATA classout=_classout2;
MPRINT(EM_QUANTILE_BINNING):   class
MPRINT(CLASSVARS):   IMP_JOB IMP_REASON
MPRINT(EM_QUANTILE_BINNING):  ;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: Records processed = 2979   Memory used = 511K.
NOTE: There were 2979 observations read from the data set EMWS1.BINNING_BINDATA.
NOTE: The data set WORK._CLASSOUT2 has 8 observations and 9 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   proc sort data=_classout;
MPRINT(EM_QUANTILE_BINNING):   by NAME CRAW;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 8 observations read from the data set WORK._CLASSOUT.
NOTE: The data set WORK._CLASSOUT has 8 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   proc sort data=_classout2;
MPRINT(EM_QUANTILE_BINNING):   by NAME CRAW;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 8 observations read from the data set WORK._CLASSOUT2.
NOTE: The data set WORK._CLASSOUT2 has 8 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   data _classout;
MPRINT(EM_QUANTILE_BINNING):   length _variable_ $32;
MPRINT(EM_QUANTILE_BINNING):   merge _classout _classout2 (rename=(LEVEL=_split_value_));
MPRINT(EM_QUANTILE_BINNING):   by NAME CRAW;
MPRINT(EM_QUANTILE_BINNING):   _variable_ = NAME;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 8 observations read from the data set WORK._CLASSOUT.
NOTE: There were 8 observations read from the data set WORK._CLASSOUT2.
NOTE: The data set WORK._CLASSOUT has 8 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   proc sort data=_classout;
MPRINT(EM_QUANTILE_BINNING):   by _variable_ _split_value_;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 8 observations read from the data set WORK._CLASSOUT.
NOTE: The data set WORK._CLASSOUT has 8 observations and 11 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   proc sort data=EMWS1.BINNING_SPLITVALS;
MPRINT(EM_QUANTILE_BINNING):   by _variable_ _split_value_;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 47 observations read from the data set EMWS1.BINNING_SPLITVALS.
NOTE: The data set EMWS1.BINNING_SPLITVALS has 47 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   data EMWS1.BINNING_SPLITVALS;
MPRINT(EM_QUANTILE_BINNING):   length _norm_level_ $200 _split_value_ $200;
MPRINT(EM_QUANTILE_BINNING):   merge EMWS1.BINNING_SPLITVALS
_classout(rename=(LEVEL=_norm_level_));
MPRINT(EM_QUANTILE_BINNING):   by _variable_ _split_value_;
MPRINT(EM_QUANTILE_BINNING):   LEVEL = trim(left(LEVEL));
MPRINT(EM_QUANTILE_BINNING):   _split_value_ = trim(left(_split_value_));
MPRINT(EM_QUANTILE_BINNING):   _norm_level_ = trim(left(_norm_level_));
MPRINT(EM_QUANTILE_BINNING):   if _norm_level_ eq '' then _norm_level_= _split_value_;
MPRINT(EM_QUANTILE_BINNING):   drop NAME FREQUENCY TYPE CRAW NRAW;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: Numeric values have been converted to character values at the places given by:
      (Line):(Column).
      356:121
NOTE: Character values have been converted to numeric values at the places given by:
      (Line):(Column).
      356:111
NOTE: There were 47 observations read from the data set EMWS1.BINNING_SPLITVALS.
NOTE: There were 8 observations read from the data set WORK._CLASSOUT.
NOTE: The data set EMWS1.BINNING_SPLITVALS has 55 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   proc datasets library=work nolist;
MPRINT(EM_QUANTILE_BINNING):   delete _classout _classout2;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: Deleting WORK._CLASSOUT (memtype=DATA).
NOTE: Deleting WORK._CLASSOUT2 (memtype=DATA).
MPRINT(EM_QUANTILE_BINNING):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   data EMWS1.BINNING_SPLITVALS;
MPRINT(EM_QUANTILE_BINNING):   set EMWS1.BINNING_SPLITVALS;
MPRINT(EM_QUANTILE_BINNING):   if _norm_level_ eq '' then _norm_level_= _split_value_;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 55 observations read from the data set EMWS1.BINNING_SPLITVALS.
NOTE: The data set EMWS1.BINNING_SPLITVALS has 55 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   proc sort data=EMWS1.BINNING_SPLITVALS;
MPRINT(EM_QUANTILE_BINNING):   by DISPLAY_VAR _Group_;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: There were 55 observations read from the data set EMWS1.BINNING_SPLITVALS.
NOTE: The data set EMWS1.BINNING_SPLITVALS has 55 observations and 12 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_QUANTILE_BINNING):   proc datasets library=work nolist;
MPRINT(EM_QUANTILE_BINNING):   delete sortedmapping tempsplitvals tempmissvalues ;
MPRINT(EM_QUANTILE_BINNING):   run;
 
NOTE: Deleting WORK.SORTEDMAPPING (memtype=DATA).
NOTE: Deleting WORK.TEMPSPLITVALS (memtype=DATA).
NOTE: Deleting WORK.TEMPMISSVALUES (memtype=DATA).
MPRINT(EM_QUANTILE_BINNING):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(TRAIN):  ;
MPRINT(EM_CLASSVARS_GROUP):   proc sort data=EMWS1.BINNING_VariableSet out=tempvariableset;
MPRINT(EM_CLASSVARS_GROUP):   by NAME;
MPRINT(EM_CLASSVARS_GROUP):   where ((LEVEL = 'NOMINAL') OR (LEVEL='BINARY')) and
((ROLE='INPUT' and USE in ('Y', 'D')) OR (ROLE='REJECTED' and USE='Y'));
MPRINT(EM_CLASSVARS_GROUP):   run;
 
NOTE: There were 2 observations read from the data set EMWS1.BINNING_VARIABLESET.
      WHERE LEVEL in ('BINARY', 'NOMINAL') and (((ROLE='INPUT') and USE in ('D', 'Y')) or
      ((ROLE='REJECTED') and (USE='Y')));
NOTE: The data set WORK.TEMPVARIABLESET has 2 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CLASSVARS_GROUP):   proc dmdb data=EMWS1.Trans_TRAIN classout=tempclassout;
MPRINT(EM_CLASSVARS_GROUP):   class IMP_JOB IMP_REASON ;
MPRINT(EM_CLASSVARS_GROUP):   run;
 
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=100 BAD=1 LOAN=4100 MORTDUE=. VALUE=19132 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=0 CLAGE=100.77465221 NINQ=0 CLNO=19 DEBTINC=33.840919904 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=100.77465221 IMP_CLNO=19 IMP_DEBTINC=33.840919904 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=19132 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=49
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=119 BAD=0 LOAN=4500 MORTDUE=. VALUE=49044 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=0
CLAGE=. NINQ=0 CLNO=0 DEBTINC=11.652738796 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=11.652738796 IMP_DELINQ=0 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=49044 IMP_YOJ=0 INDELINQ=0 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=60
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=206 BAD=0 LOAN=5100 MORTDUE=66834 VALUE=87361 REASON=HomeImp JOB=Other YOJ=0 DEROG=2
DELINQ=0 CLAGE=290.03410799 NINQ=0 CLNO=6 DEBTINC=38.766985071 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=290.03410799 IMP_CLNO=6 IMP_DEBTINC=38.766985071 IMP_DELINQ=0 IMP_DEROG=2
IMP_MORTDUE=66834 IMP_NINQ=0 IMP_VALUE=87361 IMP_YOJ=0 INDELINQ=0 INDEROG=1 LOG_yoj=. _ERROR_=1
_N_=97
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=207 BAD=0 LOAN=5100 MORTDUE=73882 VALUE=96031 REASON=DebtCon JOB=Other YOJ=0 DEROG=0
DELINQ=0 CLAGE=125.78740011 NINQ=1 CLNO=10 DEBTINC=34.446079222 IMP_JOB=Other
IMP_REASON=DebtCon IMP_CLAGE=125.78740011 IMP_CLNO=10 IMP_DEBTINC=34.446079222 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=73882 IMP_NINQ=1 IMP_VALUE=96031 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=98
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=213 BAD=0 LOAN=5200 MORTDUE=19000 VALUE=26000 REASON=DebtCon JOB=Other YOJ=0 DEROG=1
DELINQ=0 CLAGE=17.2 NINQ=10 CLNO=7 DEBTINC=. IMP_JOB=Other IMP_REASON=DebtCon IMP_CLAGE=17.2
IMP_CLNO=7 IMP_DEBTINC=33.786945547 IMP_DELINQ=0 IMP_DEROG=1 IMP_MORTDUE=19000 IMP_NINQ=10
IMP_VALUE=26000 IMP_YOJ=0 INDELINQ=0 INDEROG=1 LOG_yoj=. _ERROR_=1 _N_=102
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=221 BAD=0 LOAN=5300 MORTDUE=. VALUE=49396 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=0
CLAGE=. NINQ=0 CLNO=0 DEBTINC=12.043670576 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=12.043670576 IMP_DELINQ=0 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=49396 IMP_YOJ=0 INDELINQ=0 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=109
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=273 BAD=0 LOAN=5700 MORTDUE=. VALUE=68591 REASON=HomeImp JOB=Office YOJ=0 DEROG=0
DELINQ=0 CLAGE=69.645660473 NINQ=0 CLNO=4 DEBTINC=41.185039558 IMP_JOB=Office
IMP_REASON=HomeImp IMP_CLAGE=69.645660473 IMP_CLNO=4 IMP_DEBTINC=41.185039558 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=68591 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=128
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=279 BAD=1 LOAN=5700 MORTDUE=77213 VALUE=92661 REASON=DebtCon JOB=Sales YOJ=0 DEROG=0
DELINQ=0 CLAGE=97.133170952 NINQ=1 CLNO=16 DEBTINC=41.777888631 IMP_JOB=Sales
IMP_REASON=DebtCon IMP_CLAGE=97.133170952 IMP_CLNO=16 IMP_DEBTINC=41.777888631 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=77213 IMP_NINQ=1 IMP_VALUE=92661 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=131
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=284 BAD=0 LOAN=5700 MORTDUE=28116 VALUE=33450 REASON=DebtCon JOB=Other YOJ=0 DEROG=1
DELINQ=0 CLAGE=15.396587392 NINQ=9 CLNO=7 DEBTINC=30.017013296 IMP_JOB=Other IMP_REASON=DebtCon
IMP_CLAGE=15.396587392 IMP_CLNO=7 IMP_DEBTINC=30.017013296 IMP_DELINQ=0 IMP_DEROG=1
IMP_MORTDUE=28116 IMP_NINQ=9 IMP_VALUE=33450 IMP_YOJ=0 INDELINQ=0 INDEROG=1 LOG_yoj=. _ERROR_=1
_N_=133
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=320 BAD=0 LOAN=6000 MORTDUE=69876 VALUE=94394.07 REASON=HomeImp JOB=Other YOJ=0
DEROG=0 DELINQ=1 CLAGE=179.56666667 NINQ=0 CLNO=32 DEBTINC=. IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=179.56666667 IMP_CLNO=32 IMP_DEBTINC=33.786945547 IMP_DELINQ=1 IMP_DEROG=0
IMP_MORTDUE=69876 IMP_NINQ=0 IMP_VALUE=94394.07 IMP_YOJ=0 INDELINQ=1 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=153
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=329 BAD=0 LOAN=6000 MORTDUE=79046 VALUE=103048 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=0 CLAGE=181.69653802 NINQ=0 CLNO=32 DEBTINC=37.289989924 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=181.69653802 IMP_CLNO=32 IMP_DEBTINC=37.289989924 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=79046 IMP_NINQ=0 IMP_VALUE=103048 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=160
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=342 BAD=0 LOAN=6100 MORTDUE=. VALUE=46830 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=1
CLAGE=. NINQ=0 CLNO=0 DEBTINC=13.306013076 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=13.306013076 IMP_DELINQ=1 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=46830 IMP_YOJ=0 INDELINQ=1 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=166
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=356 BAD=0 LOAN=6200 MORTDUE=73881 VALUE=98550 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=1 CLAGE=182.8787798 NINQ=0 CLNO=31 DEBTINC=37.19944569 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=182.8787798 IMP_CLNO=31 IMP_DEBTINC=37.19944569 IMP_DELINQ=1 IMP_DEROG=0
IMP_MORTDUE=73881 IMP_NINQ=0 IMP_VALUE=98550 IMP_YOJ=0 INDELINQ=1 INDEROG=0 LOG_yoj=. _ERROR_=1
_N_=172
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=392 BAD=0 LOAN=6400 MORTDUE=44968 VALUE=62747 REASON=HomeImp JOB=Other YOJ=0 DEROG=1
DELINQ=. CLAGE=101.39144532 NINQ=. CLNO=12 DEBTINC=36.602947343 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=101.39144532 IMP_CLNO=12 IMP_DEBTINC=36.602947343
IMP_DELINQ=0.4622255303 IMP_DEROG=1 IMP_MORTDUE=44968 IMP_NINQ=1.1569852941 IMP_VALUE=62747
IMP_YOJ=0 INDELINQ=1 INDEROG=1 LOG_yoj=. _ERROR_=1 _N_=188
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=419 BAD=0 LOAN=6600 MORTDUE=. VALUE=48800 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=0
CLAGE=. NINQ=0 CLNO=0 DEBTINC=12.219436152 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=12.219436152 IMP_DELINQ=0 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=48800 IMP_YOJ=0 INDELINQ=0 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=197
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=423 BAD=0 LOAN=6600 MORTDUE=. VALUE=46516 REASON=HomeImp JOB=  YOJ=0 DEROG=0 DELINQ=0
CLAGE=. NINQ=0 CLNO=0 DEBTINC=14.845990728 IMP_JOB=Other IMP_REASON=HomeImp
IMP_CLAGE=181.15305208 IMP_CLNO=0 IMP_DEBTINC=14.845990728 IMP_DELINQ=0 IMP_DEROG=0
IMP_MORTDUE=73574.90271 IMP_NINQ=0 IMP_VALUE=46516 IMP_YOJ=0 INDELINQ=0 INDEROG=0 LOG_yoj=.
_ERROR_=1 _N_=198
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=454 BAD=0 LOAN=6800 MORTDUE=71666 VALUE=99913 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=1 CLAGE=196.46499893 NINQ=0 CLNO=31 DEBTINC=35.761604731 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=196.46499893 IMP_CLNO=31 IMP_DEBTINC=35.761604731 IMP_DELINQ=1
IMP_DEROG=0 IMP_MORTDUE=71666 IMP_NINQ=0 IMP_VALUE=99913 IMP_YOJ=0 INDELINQ=1 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=214
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=471 BAD=0 LOAN=7000 MORTDUE=73873 VALUE=111781 REASON=DebtCon JOB=Office YOJ=0
DEROG=0 DELINQ=0 CLAGE=231.79991346 NINQ=0 CLNO=38 DEBTINC=19.273579455 IMP_JOB=Office
IMP_REASON=DebtCon IMP_CLAGE=231.79991346 IMP_CLNO=38 IMP_DEBTINC=19.273579455 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=73873 IMP_NINQ=0 IMP_VALUE=111781 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=220
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
_dataobs_=474 BAD=0 LOAN=7000 MORTDUE=78284 VALUE=98214 REASON=HomeImp JOB=Other YOJ=0 DEROG=0
DELINQ=1 CLAGE=171.83838617 NINQ=0 CLNO=31 DEBTINC=36.247963031 IMP_JOB=Other
IMP_REASON=HomeImp IMP_CLAGE=171.83838617 IMP_CLNO=31 IMP_DEBTINC=36.247963031 IMP_DELINQ=1
IMP_DEROG=0 IMP_MORTDUE=78284 IMP_NINQ=0 IMP_VALUE=98214 IMP_YOJ=0 INDELINQ=1 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=223
NOTE: Invalid argument to function LOG(0) at line 83566 column 10.
WARNING: Limit set by ERRORS= option reached.  Further errors of this type will not be printed.
_dataobs_=516 BAD=0 LOAN=7100 MORTDUE=57863 VALUE=70969 REASON=DebtCon JOB=Other YOJ=0 DEROG=0
DELINQ=0 CLAGE=65.872044812 NINQ=7 CLNO=21 DEBTINC=26.829490191 IMP_JOB=Other
IMP_REASON=DebtCon IMP_CLAGE=65.872044812 IMP_CLNO=21 IMP_DEBTINC=26.829490191 IMP_DELINQ=0
IMP_DEROG=0 IMP_MORTDUE=57863 IMP_NINQ=7 IMP_VALUE=70969 IMP_YOJ=0 INDELINQ=0 INDEROG=0
LOG_yoj=. _ERROR_=1 _N_=239
NOTE: Records processed = 2979   Memory used = 511K.
NOTE: There were 2979 observations read from the data set EMWS1.PART_TRAIN.
NOTE: Mathematical operations could not be performed at the following places. The results of
      the operations have been set to missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      209 at 83566:10
NOTE: View EMWS1.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.14 seconds
      cpu time            0.12 seconds
 
NOTE: There were 2979 observations read from the data set EMWS1.IMPT_TRAIN.
NOTE: There were 2979 observations read from the data set EMWS1.TRANS_TRAIN.
NOTE: The data set WORK.TEMPCLASSOUT has 8 observations and 9 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.15 seconds
      cpu time            0.14 seconds
 
 
MPRINT(EM_CLASSVARS_GROUP):   data tempclassout;
MPRINT(EM_CLASSVARS_GROUP):   set tempclassout;
MPRINT(EM_CLASSVARS_GROUP):   if LEVEL='MISSING' then level='Missing';
MPRINT(EM_CLASSVARS_GROUP):   run;
 
NOTE: There were 8 observations read from the data set WORK.TEMPCLASSOUT.
NOTE: The data set WORK.TEMPCLASSOUT has 8 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CLASSVARS_GROUP):   proc sort data=tempclassout nodupkey;
MPRINT(EM_CLASSVARS_GROUP):   by NAME descending FREQUENCY LEVEL;
MPRINT(EM_CLASSVARS_GROUP):   run;
 
NOTE: There were 8 observations read from the data set WORK.TEMPCLASSOUT.
NOTE: 0 observations with duplicate key values were deleted.
NOTE: The data set WORK.TEMPCLASSOUT has 8 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CLASSVARS_GROUP):   data tempds(keep=NAME NOBS);
MPRINT(EM_CLASSVARS_GROUP):   retain NOBS;
MPRINT(EM_CLASSVARS_GROUP):   set tempclassout;
MPRINT(EM_CLASSVARS_GROUP):   by NAME;
MPRINT(EM_CLASSVARS_GROUP):   if first.NAME then NOBS = frequency;
MPRINT(EM_CLASSVARS_GROUP):   else NOBS=NOBS+frequency;
MPRINT(EM_CLASSVARS_GROUP):   if last.name then do;
MPRINT(EM_CLASSVARS_GROUP):   output;
MPRINT(EM_CLASSVARS_GROUP):   end;
MPRINT(EM_CLASSVARS_GROUP):   run;
 
NOTE: There were 8 observations read from the data set WORK.TEMPCLASSOUT.
NOTE: The data set WORK.TEMPDS has 2 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CLASSVARS_GROUP):   data tempds;
MPRINT(EM_CLASSVARS_GROUP):   merge tempclassout tempds;
MPRINT(EM_CLASSVARS_GROUP):   by NAME;
MPRINT(EM_CLASSVARS_GROUP):   if ((LEVEL ne '') AND (LEVEL ne "."));
MPRINT(EM_CLASSVARS_GROUP):   PCT = 100 * (FREQUENCY/NOBS);
MPRINT(EM_CLASSVARS_GROUP):   if PCT < 0.5 then flag=1;
MPRINT(EM_CLASSVARS_GROUP):   else flag=0;
MPRINT(EM_CLASSVARS_GROUP):   run;
 
NOTE: There were 8 observations read from the data set WORK.TEMPCLASSOUT.
NOTE: There were 2 observations read from the data set WORK.TEMPDS.
NOTE: The data set WORK.TEMPDS has 8 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CLASSVARS_GROUP):   data tempmissvalues;
MPRINT(EM_CLASSVARS_GROUP):   length NAME $32 LEVEL $200 _LEVEL_ $8 _GROUP_ 8;
MPRINT(EM_CLASSVARS_GROUP):   NAME="IMP_JOB";
MPRINT(EM_CLASSVARS_GROUP):   LEVEL="Missing";
MPRINT(EM_CLASSVARS_GROUP):   _LEVEL_="NOMINAL";
MPRINT(EM_CLASSVARS_GROUP):   _group_ = 1;
MPRINT(EM_CLASSVARS_GROUP):   output;
MPRINT(EM_CLASSVARS_GROUP):   NAME="IMP_REASON";
MPRINT(EM_CLASSVARS_GROUP):   LEVEL="Missing";
MPRINT(EM_CLASSVARS_GROUP):   _LEVEL_="NOMINAL";
MPRINT(EM_CLASSVARS_GROUP):   _group_ = 1;
MPRINT(EM_CLASSVARS_GROUP):   output;
MPRINT(EM_CLASSVARS_GROUP):   run;
 
NOTE: The data set WORK.TEMPMISSVALUES has 2 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CLASSVARS_GROUP):   data tempsplitvals;
MPRINT(EM_CLASSVARS_GROUP):   length _VARIABLE_ $32 newgroup _group_ 8 _Split_value_ $200;
MPRINT(EM_CLASSVARS_GROUP):   set tempclassout tempmissvalues ;
MPRINT(EM_CLASSVARS_GROUP):   if ((level ne '') AND (level ne '.'));
MPRINT(EM_CLASSVARS_GROUP):   if NAME = "IMP_JOB" then do;
MPRINT(EM_CLASSVARS_GROUP):   _LEVEL_ = "NOMINAL";
MPRINT(EM_CLASSVARS_GROUP):   if LEVEL = "OTHER" then _GROUP_ = 2;
MPRINT(EM_CLASSVARS_GROUP):   else if LEVEL = "PROFEXE" then _GROUP_ = 3;
MPRINT(EM_CLASSVARS_GROUP):   else if LEVEL = "OFFICE" then _GROUP_ = 4;
MPRINT(EM_CLASSVARS_GROUP):   else if LEVEL = "MGR" then _GROUP_ = 5;
MPRINT(EM_CLASSVARS_GROUP):   else if LEVEL = "SELF" then _GROUP_ = 6;
MPRINT(EM_CLASSVARS_GROUP):   else if LEVEL = "SALES" then _GROUP_ = 7;
MPRINT(EM_CLASSVARS_GROUP):   else if LEVEL ^='Missing' then _GROUP_ = 8;
MPRINT(EM_CLASSVARS_GROUP):   end;
MPRINT(EM_CLASSVARS_GROUP):   if NAME = "IMP_REASON" then do;
MPRINT(EM_CLASSVARS_GROUP):   _LEVEL_ = "NOMINAL";
MPRINT(EM_CLASSVARS_GROUP):   if LEVEL = "DEBTCON" then _GROUP_ = 2;
MPRINT(EM_CLASSVARS_GROUP):   else if LEVEL = "HOMEIMP" then _GROUP_ = 3;
MPRINT(EM_CLASSVARS_GROUP):   else if LEVEL ^='Missing' then _GROUP_ = 4;
MPRINT(EM_CLASSVARS_GROUP):   end;
MPRINT(EM_CLASSVARS_GROUP):   _VARIABLE_ = NAME;
MPRINT(EM_CLASSVARS_GROUP):   newgroup = .;
MPRINT(EM_CLASSVARS_GROUP):   rename NAME = DISPLAY_VAR LEVEL = _SPLIT_VALUE_;
MPRINT(EM_CLASSVARS_GROUP):   keep NAME NEWGROUP _VARIABLE_ LEVEL _LEVEL_ _GROUP_;
MPRINT(EM_CLASSVARS_GROUP):   run;
 
NOTE: Variable _Split_value_ is uninitialized.
NOTE: There were 8 observations read from the data set WORK.TEMPCLASSOUT.
NOTE: There were 2 observations read from the data set WORK.TEMPMISSVALUES.
NOTE: The data set WORK.TEMPSPLITVALS has 10 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(EM_CLASSVARS_GROUP):   proc sql;
MPRINT(EM_CLASSVARS_GROUP):   reset noprint;
MPRINT(EM_CLASSVARS_GROUP):   select count(*) into :nobs from EMWS1.BINNING_SPLITVALS;
MPRINT(EM_CLASSVARS_GROUP):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CLASSVARS_GROUP):   proc sort data = EMWS1.BINNING_SPLITVALS;
MPRINT(EM_CLASSVARS_GROUP):   by _variable_ _split_value_;
MPRINT(EM_CLASSVARS_GROUP):   run;
 
NOTE: There were 55 observations read from the data set EMWS1.BINNING_SPLITVALS.
NOTE: The data set EMWS1.BINNING_SPLITVALS has 55 observations and 12 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CLASSVARS_GROUP):   proc sort data = tempsplitvals nodupkey;
MPRINT(EM_CLASSVARS_GROUP):   by _variable_ _split_Value_ _group_;
MPRINT(EM_CLASSVARS_GROUP):   run;
 
NOTE: There were 10 observations read from the data set WORK.TEMPSPLITVALS.
NOTE: 0 observations with duplicate key values were deleted.
NOTE: The data set WORK.TEMPSPLITVALS has 10 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CLASSVARS_GROUP):   data EMWS1.BINNING_SPLITVALS;
MPRINT(EM_CLASSVARS_GROUP):   merge EMWS1.BINNING_SPLITVALS tempsplitvals ;
MPRINT(EM_CLASSVARS_GROUP):   by _variable_ _split_value_ ;
MPRINT(EM_CLASSVARS_GROUP):   if display_var eq "" then delete;
MPRINT(EM_CLASSVARS_GROUP):   if _norm_level_ eq "" then _norm_level_ = _split_value_;
MPRINT(EM_CLASSVARS_GROUP):   keep display_var _split_value_ _variable_ newgroup _group_
_level_ _norm_level_;
MPRINT(EM_CLASSVARS_GROUP):   run;
 
NOTE: There were 55 observations read from the data set EMWS1.BINNING_SPLITVALS.
NOTE: There were 10 observations read from the data set WORK.TEMPSPLITVALS.
NOTE: The data set EMWS1.BINNING_SPLITVALS has 57 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_CLASSVARS_GROUP):   proc sort data=EMWS1.BINNING_SPLITVALS;
MPRINT(EM_CLASSVARS_GROUP):   by DISPLAY_VAR _Group_;
MPRINT(EM_CLASSVARS_GROUP):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_SPLITVALS.
NOTE: The data set EMWS1.BINNING_SPLITVALS has 57 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CLASSVARS_GROUP):   proc datasets library= work nolist;
MPRINT(EM_CLASSVARS_GROUP):   delete tempsplitvals tempds tempclassout tempvariableset
tempvars tempmissvalues ;
MPRINT(EM_CLASSVARS_GROUP):   run;
 
NOTE: The file WORK.TEMPVARS (memtype=DATA) was not found, but appears on a DELETE statement.
NOTE: Deleting WORK.TEMPSPLITVALS (memtype=DATA).
NOTE: Deleting WORK.TEMPDS (memtype=DATA).
NOTE: Deleting WORK.TEMPCLASSOUT (memtype=DATA).
NOTE: Deleting WORK.TEMPVARIABLESET (memtype=DATA).
NOTE: Deleting WORK.TEMPMISSVALUES (memtype=DATA).
MPRINT(EM_CLASSVARS_GROUP):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
 
MPRINT(TRAIN):  ;
MPRINT(EM_ORDVARS_GROUP):   proc sort data=EMWS1.BINNING_VariableSet out=tempvariableset;
MPRINT(EM_ORDVARS_GROUP):   by NAME;
MPRINT(EM_ORDVARS_GROUP):   where LEVEL = 'ORDINAL' and ((ROLE='INPUT' and USE in ('Y', 'D'))
OR (ROLE='REJECTED' and USE='Y'));
MPRINT(EM_ORDVARS_GROUP):   run;
 
NOTE: Input data set is empty.
NOTE: There were 0 observations read from the data set EMWS1.BINNING_VARIABLESET.
      WHERE (LEVEL='ORDINAL') and (((ROLE='INPUT') and USE in ('D', 'Y')) or
      ((ROLE='REJECTED') and (USE='Y')));
NOTE: The data set WORK.TEMPVARIABLESET has 0 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_ORDVARS_GROUP):   proc sort data=EMWS1.BINNING_SPLITVALS;
MPRINT(EM_ORDVARS_GROUP):   by DISPLAY_VAR _Group_;
MPRINT(EM_ORDVARS_GROUP):   run;
 
NOTE: Input data set is already sorted, no sorting done.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_ORDVARS_GROUP):   proc datasets library= work nolist;
MPRINT(EM_ORDVARS_GROUP):   delete tempsplitvals varvals tempvariableset tempvars ;
MPRINT(EM_ORDVARS_GROUP):   run;
 
NOTE: The file WORK.TEMPSPLITVALS (memtype=DATA) was not found, but appears on a DELETE
      statement.
NOTE: The file WORK.VARVALS (memtype=DATA) was not found, but appears on a DELETE statement.
NOTE: The file WORK.TEMPVARS (memtype=DATA) was not found, but appears on a DELETE statement.
NOTE: Deleting WORK.TEMPVARIABLESET (memtype=DATA).
MPRINT(EM_ORDVARS_GROUP):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(TRAIN):  ;
MPRINT(TRAIN):   proc print data=EMWS1.BINNING_VARMAPPINGS label;
MPRINT(TRAIN):   var _VARIABLE_ _GRP_VARIABLE_ ;
MPRINT(TRAIN):   run;
 
NOTE: There were 12 observations read from the data set EMWS1.BINNING_VARMAPPINGS.
NOTE: The PROCEDURE PRINT printed page 50.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(TRAIN):   proc sort data=EMWS1.BINNING_SPLITVALS out=tempsplitvals nodupkey;
MPRINT(TRAIN):   by _VARIABLE_;
MPRINT(TRAIN):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_SPLITVALS.
NOTE: 45 observations with duplicate key values were deleted.
NOTE: The data set WORK.TEMPSPLITVALS has 12 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(TRAIN):   data EMWS1.BINNING_VARMAPPINGS;
MPRINT(TRAIN):   set EMWS1.BINNING_VARMAPPINGS;
MPRINT(TRAIN):   length _proc_var_ $32;
MPRINT(TRAIN):   if upcase(_VARIABLE_) = "IMP_CLAGE" then _proc_var_ = "BIN_IMP_CLAGE";
MPRINT(TRAIN):   if upcase(_VARIABLE_) = "IMP_CLNO" then _proc_var_ = "BIN_IMP_CLNO";
MPRINT(TRAIN):   if upcase(_VARIABLE_) = "IMP_DEBTINC" then _proc_var_ = "BIN_IMP_DEBTINC";
MPRINT(TRAIN):   if upcase(_VARIABLE_) = "IMP_MORTDUE" then _proc_var_ = "BIN_IMP_MORTDUE";
MPRINT(TRAIN):   if upcase(_VARIABLE_) = "IMP_NINQ" then _proc_var_ = "BIN_IMP_NINQ";
MPRINT(TRAIN):   if upcase(_VARIABLE_) = "IMP_VALUE" then _proc_var_ = "BIN_IMP_VALUE";
MPRINT(TRAIN):   if upcase(_VARIABLE_) = "INDELINQ" then _proc_var_ = "BIN_INDELINQ";
MPRINT(TRAIN):   if upcase(_VARIABLE_) = "INDEROG" then _proc_var_ = "BIN_INDEROG";
MPRINT(TRAIN):   if upcase(_VARIABLE_) = "LOAN" then _proc_var_ = "BIN_LOAN";
MPRINT(TRAIN):   if upcase(_VARIABLE_) = "LOG_YOJ" then _proc_var_ = "BIN_LOG_yoj";
MPRINT(TRAIN):   if upcase(_VARIABLE_) = "IMP_JOB" then _proc_var_ = "IMP_JOB";
MPRINT(TRAIN):   if upcase(_VARIABLE_) = "IMP_REASON" then _proc_var_ = "IMP_REASON";
MPRINT(TRAIN):   if missing(_proc_var_) then _proc_var_=_variable_;
MPRINT(TRAIN):   run;
 
NOTE: There were 12 observations read from the data set EMWS1.BINNING_VARMAPPINGS.
NOTE: The data set EMWS1.BINNING_VARMAPPINGS has 12 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(TRAIN):   proc datasets library=work nolist;
MPRINT(TRAIN):   delete sortedbin tempsplitvals;
MPRINT(TRAIN):   run;
 
NOTE: The file WORK.SORTEDBIN (memtype=DATA) was not found, but appears on a DELETE statement.
NOTE: Deleting WORK.TEMPSPLITVALS (memtype=DATA).
MPRINT(TRAIN):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(EM_FINE_DETAIL):   proc freq data=EMWS1.BINNING_BINDATA noprint;
MPRINT(EM_FINE_DETAIL):   table BAD / missing out=temptargetB;
MPRINT(EM_FINE_DETAIL):   run;
 
NOTE: There were 2979 observations read from the data set EMWS1.BINNING_BINDATA.
NOTE: The data set WORK.TEMPTARGETB has 2 observations and 3 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_FINE_DETAIL):   proc datasets lib=work nolist;
MPRINT(EM_FINE_DETAIL):   delete temptargetB;
MPRINT(EM_FINE_DETAIL):   run;
 
NOTE: Deleting WORK.TEMPTARGETB (memtype=DATA).
MPRINT(EM_FINE_DETAIL):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):   proc sort data=EMWS1.BINNING_VariableSet out=tempvarset;
MPRINT(EM_SUMMARIZE_TABLE):   by name;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
NOTE: There were 14 observations read from the data set EMWS1.BINNING_VARIABLESET.
NOTE: The data set WORK.TEMPVARSET has 14 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):   data temptrain ;
MPRINT(EM_SUMMARIZE_TABLE):   set EMWS1.BINNING_BINDATA;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
NOTE: There were 2979 observations read from the data set EMWS1.BINNING_BINDATA.
NOTE: The data set WORK.TEMPTRAIN has 2979 observations and 28 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):   filename _temp catalog
'sashelp.emapps.em_Prenormalizeclassvars.source';
NOTE: %INCLUDE (level 1) file _TEMP is file SASHELP.EMAPPS.EM_PRENORMALIZECLASSVARS.SOURCE.
93365     +%macro em_PreNormalizeClassVars(incmeta=, outcmeta=);
93366     +
93367     +   data &outcmeta(keep=INDEXVAR NAME LEVEL TYPE LABEL FORMAT INFORMAT) ;
93368     +      length INDEXVAR $32; retain _index 0;
93369     +      set &incmeta(where=((ROLE='INPUT' and USE in('Y', 'D')) or ROLE='REJECTED' and
93369    !+ USE='Y'));
93370     +      if strip(LEVEL) eq 'INTERVAL' then delete;
93371     +      else do;
93372     +         _index+1;
93373     +         INDEXVAR='_INDEXVAR'||strip(put(_index, Best12.));
93374     +      end;
93375     +   run;
93376     +%mend em_PreNormalizeClassVars;
NOTE: %INCLUDE (level 1) ending.
MPRINT(EM_SUMMARIZE_TABLE):   filename _temp;
NOTE: Fileref _TEMP has been deassigned.
MPRINT(EM_SUMMARIZE_TABLE):   filename _temp catalog
'sashelp.emapps.em_Normalizeclassvars.source';
NOTE: %INCLUDE (level 1) file _TEMP is file SASHELP.EMAPPS.EM_NORMALIZECLASSVARS.SOURCE.
93377     +%macro em_NormalizeClassVars(indata=,
93378     +                          cmeta=,
93379     +                          encodedTarget=N,
93380     +                          target=,
93381     +                          targetEvent=,
93382     +                          targetNonEvent=,
93383     +                          outdata=);
93384     + %let dsid = %sysfunc(open(&cmeta));
93385     + %let vn_name =%sysfunc(varnum(&dsid, NAME));
93386     + %let vn_indexvar =%sysfunc(varnum(&dsid, INDEXVAR));
93387     + %let vn_format =%sysfunc(varnum(&dsid, FORMAT));
93388     + %let vn_type =%sysfunc(varnum(&dsid, TYPE));
93389     +
93390     + data &outdata/view=&outdata;
93391     +      length _normedvar32 $32.;
93392     +      set &indata( rename = (
93393     +      %let k = 1;
93394     +      %do %while(^%sysfunc(fetch(&dsid)));
93395     +          %let _name     = %sysfunc(getvarc(&dsid, &vn_name));
93396     +          %let _indexvar = %sysfunc(getvarc(&dsid, &vn_indexvar));
93397     +          %let _format   = %sysfunc(getvarc(&dsid, &vn_format));
93398     +          &_name = &_indexvar
93399     +          %let k = %eval(&k+1);
93400     +      %end;
93401     +      ));
93402     +      drop  _normedvar32;
93403     +
93404     +      %let rc=%sysfunc(rewind(&dsid));
93405     +      %let k = 1;
93406     +      %do %while(^%sysfunc(fetch(&dsid)));
93407     +          %let _name     = %sysfunc(getvarc(&dsid, &vn_name));
93408     +          %let _indexvar = %sysfunc(getvarc(&dsid, &vn_indexvar));
93409     +          %let _format   = %sysfunc(getvarc(&dsid, &vn_format));
93410     +          %let _type     = %sysfunc(getvarc(&dsid, &vn_type));
93411     +          %if &_format ne %then %do;
93412     +              _normedvar32 = put(&_indexvar, &_format);
93413     +          %end;
93414     +          %else %do;
93415     +              %if &_type = N %then %do;
93416     +                  _normedvar32 = put(&_indexvar, Best12.);
93417     +              %end;
93418     +              %else %do;
93419     +                  _normedvar32 = put(&_indexvar, $32.);
93420     +              %end;
93421     +          %end;
93422     +          %DMNORMIP(_normedvar32);
93423     +          &_name = _normedvar32;
93424     +          drop &_indexvar;
93425     +          %let k = %eval(&k+1);
93426     +      %end;
93427     +      %let dsid = %sysfunc(close(&dsid));
93428     +
93429     +      %if &encodedTarget = Y %then %do;
93430     +          %let qtargetEvent = %sysfunc(quote(&targetEvent));
93431     +          %let qtargetNonEvent = %sysfunc(quote(&targetNonEvent));
93432     +          if upcase(strip(&target)) = &qtargetEvent then _EncodedTarget_ =1;
93433     +          else if upcase(strip(&target)) = &qtargetNonEvent then _EncodedTarget_ = 0
93433    !+;
93434     +      %end;
93435     + run;
93436     +
93437     +%mend em_NormalizeClassVars;
NOTE: %INCLUDE (level 1) ending.
MPRINT(EM_SUMMARIZE_TABLE):   filename _temp;
NOTE: Fileref _TEMP has been deassigned.
MPRINT(EM_SUMMARIZE_TABLE):   proc sort data=EMWS1.BINNING_VARMAPPINGS out=tempmap;
MPRINT(EM_SUMMARIZE_TABLE):   by _variable_;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
NOTE: There were 12 observations read from the data set EMWS1.BINNING_VARMAPPINGS.
NOTE: The data set WORK.TEMPMAP has 12 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):   data _cmeta;
MPRINT(EM_SUMMARIZE_TABLE):   merge tempvarset tempmap(in=_a rename=(_variable_=name ));
MPRINT(EM_SUMMARIZE_TABLE):   by name;
MPRINT(EM_SUMMARIZE_TABLE):   if ((_a) or (role="TARGET"));
MPRINT(EM_SUMMARIZE_TABLE):   if role="INPUT" or (role="REJECTED" and Use="Y") then
name=_proc_var_;
MPRINT(EM_SUMMARIZE_TABLE):   if role="TARGET" then role="INPUT";
MPRINT(EM_SUMMARIZE_TABLE):   level = procLevel;
MPRINT(EM_SUMMARIZE_TABLE):   index = kindex(name, "BIN_");
MPRINT(EM_SUMMARIZE_TABLE):   if index gt 0 then do;
MPRINT(EM_SUMMARIZE_TABLE):   level="ORDINAL";
MPRINT(EM_SUMMARIZE_TABLE):   format = "";
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   drop index;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
NOTE: Numeric values have been converted to character values at the places given by:
      (Line):(Column).
      82:121
NOTE: Character values have been converted to numeric values at the places given by:
      (Line):(Column).
      85:105
NOTE: There were 14 observations read from the data set WORK.TEMPVARSET.
NOTE: There were 12 observations read from the data set WORK.TEMPMAP.
NOTE: The data set WORK._CMETA has 13 observations and 23 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_PRENORMALIZECLASSVARS):   data _cmetatmp(keep=INDEXVAR NAME LEVEL TYPE LABEL FORMAT
INFORMAT) ;
MPRINT(EM_PRENORMALIZECLASSVARS):   length INDEXVAR $32;
MPRINT(EM_PRENORMALIZECLASSVARS):   retain _index 0;
MPRINT(EM_PRENORMALIZECLASSVARS):   set _cmeta(where=((ROLE='INPUT' and USE in('Y', 'D')) or
ROLE='REJECTED' and USE='Y'));
MPRINT(EM_PRENORMALIZECLASSVARS):   if strip(LEVEL) eq 'INTERVAL' then delete;
MPRINT(EM_PRENORMALIZECLASSVARS):   else do;
MPRINT(EM_PRENORMALIZECLASSVARS):   _index+1;
MPRINT(EM_PRENORMALIZECLASSVARS):   INDEXVAR='_INDEXVAR'||strip(put(_index, Best12.));
MPRINT(EM_PRENORMALIZECLASSVARS):   end;
MPRINT(EM_PRENORMALIZECLASSVARS):   run;
 
NOTE: There were 13 observations read from the data set WORK._CMETA.
      WHERE ((ROLE='INPUT') and USE in ('D', 'Y')) or ((ROLE='REJECTED') and (USE='Y'));
NOTE: The data set WORK._CMETATMP has 13 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):  ;
MPRINT(EM_NORMALIZECLASSVARS):   data _tmp_train/view=_tmp_train;
MPRINT(EM_NORMALIZECLASSVARS):   length _normedvar32 $32.;
MPRINT(EM_NORMALIZECLASSVARS):   set work.temptrain( rename = ( BAD = _INDEXVAR1 BIN_IMP_CLAGE
= _INDEXVAR2 BIN_IMP_CLNO = _INDEXVAR3 BIN_IMP_DEBTINC = _INDEXVAR4 IMP_JOB = _INDEXVAR5
BIN_IMP_MORTDUE = _INDEXVAR6 BIN_IMP_NINQ = _INDEXVAR7 IMP_REASON = _INDEXVAR8 BIN_IMP_VALUE =
_INDEXVAR9 BIN_INDELINQ = _INDEXVAR10 BIN_INDEROG = _INDEXVAR11 BIN_LOAN = _INDEXVAR12
BIN_LOG_yoj = _INDEXVAR13 ));
MPRINT(EM_NORMALIZECLASSVARS):   drop _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   _normedvar32 = put(_INDEXVAR1, Best12.);
MPRINT(DMNORMIP):   call dmnorm(_normedvar32,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_NORMALIZECLASSVARS):  ;
MPRINT(EM_NORMALIZECLASSVARS):   BAD = _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   drop _INDEXVAR1;
MPRINT(EM_NORMALIZECLASSVARS):   _normedvar32 = put(_INDEXVAR2, Best12.);
MPRINT(DMNORMIP):   call dmnorm(_normedvar32,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_NORMALIZECLASSVARS):  ;
MPRINT(EM_NORMALIZECLASSVARS):   BIN_IMP_CLAGE = _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   drop _INDEXVAR2;
MPRINT(EM_NORMALIZECLASSVARS):   _normedvar32 = put(_INDEXVAR3, Best12.);
MPRINT(DMNORMIP):   call dmnorm(_normedvar32,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_NORMALIZECLASSVARS):  ;
MPRINT(EM_NORMALIZECLASSVARS):   BIN_IMP_CLNO = _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   drop _INDEXVAR3;
MPRINT(EM_NORMALIZECLASSVARS):   _normedvar32 = put(_INDEXVAR4, Best12.);
MPRINT(DMNORMIP):   call dmnorm(_normedvar32,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_NORMALIZECLASSVARS):  ;
MPRINT(EM_NORMALIZECLASSVARS):   BIN_IMP_DEBTINC = _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   drop _INDEXVAR4;
MPRINT(EM_NORMALIZECLASSVARS):   _normedvar32 = put(_INDEXVAR5, $32.);
MPRINT(DMNORMIP):   call dmnorm(_normedvar32,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_NORMALIZECLASSVARS):  ;
MPRINT(EM_NORMALIZECLASSVARS):   IMP_JOB = _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   drop _INDEXVAR5;
MPRINT(EM_NORMALIZECLASSVARS):   _normedvar32 = put(_INDEXVAR6, Best12.);
MPRINT(DMNORMIP):   call dmnorm(_normedvar32,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_NORMALIZECLASSVARS):  ;
MPRINT(EM_NORMALIZECLASSVARS):   BIN_IMP_MORTDUE = _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   drop _INDEXVAR6;
MPRINT(EM_NORMALIZECLASSVARS):   _normedvar32 = put(_INDEXVAR7, Best12.);
MPRINT(DMNORMIP):   call dmnorm(_normedvar32,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_NORMALIZECLASSVARS):  ;
MPRINT(EM_NORMALIZECLASSVARS):   BIN_IMP_NINQ = _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   drop _INDEXVAR7;
MPRINT(EM_NORMALIZECLASSVARS):   _normedvar32 = put(_INDEXVAR8, $32.);
MPRINT(DMNORMIP):   call dmnorm(_normedvar32,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_NORMALIZECLASSVARS):  ;
MPRINT(EM_NORMALIZECLASSVARS):   IMP_REASON = _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   drop _INDEXVAR8;
MPRINT(EM_NORMALIZECLASSVARS):   _normedvar32 = put(_INDEXVAR9, Best12.);
MPRINT(DMNORMIP):   call dmnorm(_normedvar32,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_NORMALIZECLASSVARS):  ;
MPRINT(EM_NORMALIZECLASSVARS):   BIN_IMP_VALUE = _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   drop _INDEXVAR9;
MPRINT(EM_NORMALIZECLASSVARS):   _normedvar32 = put(_INDEXVAR10, Best12.);
MPRINT(DMNORMIP):   call dmnorm(_normedvar32,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_NORMALIZECLASSVARS):  ;
MPRINT(EM_NORMALIZECLASSVARS):   BIN_INDELINQ = _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   drop _INDEXVAR10;
MPRINT(EM_NORMALIZECLASSVARS):   _normedvar32 = put(_INDEXVAR11, Best12.);
MPRINT(DMNORMIP):   call dmnorm(_normedvar32,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_NORMALIZECLASSVARS):  ;
MPRINT(EM_NORMALIZECLASSVARS):   BIN_INDEROG = _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   drop _INDEXVAR11;
MPRINT(EM_NORMALIZECLASSVARS):   _normedvar32 = put(_INDEXVAR12, Best12.);
MPRINT(DMNORMIP):   call dmnorm(_normedvar32,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_NORMALIZECLASSVARS):  ;
MPRINT(EM_NORMALIZECLASSVARS):   BIN_LOAN = _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   drop _INDEXVAR12;
MPRINT(EM_NORMALIZECLASSVARS):   _normedvar32 = put(_INDEXVAR13, Best12.);
MPRINT(DMNORMIP):   call dmnorm(_normedvar32,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_NORMALIZECLASSVARS):  ;
MPRINT(EM_NORMALIZECLASSVARS):   BIN_LOG_yoj = _normedvar32;
MPRINT(EM_NORMALIZECLASSVARS):   drop _INDEXVAR13;
MPRINT(EM_NORMALIZECLASSVARS):   run;
 
NOTE: DATA STEP view saved on file WORK._TMP_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):  ;
MPRINT(EM_SUMMARIZE_TABLE):   proc sort data=EMWS1.BINNING_VARMAPPINGS out=sortedmap;
MPRINT(EM_SUMMARIZE_TABLE):   by _proc_var_;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
NOTE: There were 12 observations read from the data set EMWS1.BINNING_VARMAPPINGS.
NOTE: The data set WORK.SORTEDMAP has 12 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):   data _null_;
MPRINT(EM_SUMMARIZE_TABLE):   set sortedmap end=eof;
MPRINT(EM_SUMMARIZE_TABLE):   by _proc_var_;
MPRINT(EM_SUMMARIZE_TABLE):   if _n_=1 then do;
MPRINT(EM_SUMMARIZE_TABLE):   call execute("ods output CrossTabFreqs=crosstabfreq ;");
MPRINT(EM_SUMMARIZE_TABLE):   call execute("ods listing close;");
MPRINT(EM_SUMMARIZE_TABLE):   call execute("proc freq data=_tmp_train order=formatted
addnames;");
MPRINT(EM_SUMMARIZE_TABLE):   call execute("tables ("||_proc_var_);
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   else do;
MPRINT(EM_SUMMARIZE_TABLE):   call execute(_proc_var_);
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   if eof then do;
MPRINT(EM_SUMMARIZE_TABLE):   call execute(") * BAD/ missing;");
MPRINT(EM_SUMMARIZE_TABLE):   call execute("run;");
MPRINT(EM_SUMMARIZE_TABLE):   call execute("ods output close;");
MPRINT(EM_SUMMARIZE_TABLE):   call execute("ods listing;");
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
MPRINT(EM_SUMMARIZE_TABLE):   ods output CrossTabFreqs=crosstabfreq ;
MPRINT(EM_SUMMARIZE_TABLE):   ods listing close;
MPRINT(EM_SUMMARIZE_TABLE):   proc freq data=_tmp_train order=formatted addnames;
MPRINT(EM_SUMMARIZE_TABLE):   ) * BAD/ missing;
MPRINT(EM_SUMMARIZE_TABLE):   run;
MPRINT(EM_SUMMARIZE_TABLE):   ods output close;
MPRINT(EM_SUMMARIZE_TABLE):   ods listing;
NOTE: There were 12 observations read from the data set WORK.SORTEDMAP.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: CALL EXECUTE generated line.
1         + ods output CrossTabFreqs=crosstabfreq ;
MPRINT(EM_SUMMARIZE_TABLE):   CrossTabFreqs ;
2         + ods listing close;
MPRINT(EM_SUMMARIZE_TABLE):   close
3         + proc freq data=_tmp_train order=formatted addnames;
4         + tables (BIN_IMP_CLAGE
5         + BIN_IMP_CLNO
6         + BIN_IMP_DEBTINC
7         + BIN_IMP_MORTDUE
8         + BIN_IMP_NINQ
9         + BIN_IMP_VALUE
10        + BIN_INDELINQ
11        + BIN_INDEROG
12        + BIN_LOAN
13        + BIN_LOG_yoj
14        + IMP_JOB
15        + IMP_REASON
16        + ) * BAD/ missing;
17        + run;
 
NOTE: View WORK._TMP_TRAIN.VIEW used (Total process time):
      real time           0.40 seconds
      cpu time            0.25 seconds
 
NOTE: There were 2979 observations read from the data set WORK.TEMPTRAIN.
NOTE: The data set WORK.CROSSTABFREQ has 165 observations and 23 variables.
NOTE: There were 2979 observations read from the data set WORK._TMP_TRAIN.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.46 seconds
      cpu time            0.31 seconds
 
 
18        + ods output close;
MPRINT(EM_SUMMARIZE_TABLE):   close
19        + ods listing;
MPRINT(EM_SUMMARIZE_TABLE):  ;
MPRINT(EM_SUMMARIZE_TABLE):   data _null_;
MPRINT(EM_SUMMARIZE_TABLE):   set sortedmap end=eof;
MPRINT(EM_SUMMARIZE_TABLE):   by _proc_var_;
MPRINT(EM_SUMMARIZE_TABLE):   if _n_=1 then do;
MPRINT(EM_SUMMARIZE_TABLE):   call execute("data crosstabs;");
MPRINT(EM_SUMMARIZE_TABLE):   call execute("  length _variable_ _split_value_  $200 ;");
MPRINT(EM_SUMMARIZE_TABLE):   call execute("  set crosstabfreq(where=(_type_='11'));");
MPRINT(EM_SUMMARIZE_TABLE):   call execute("  _variable_= RowVariable;");
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   call execute("if strip(RowVariable) = '"||strip(_proc_var_)||"'
then do;");
MPRINT(EM_SUMMARIZE_TABLE):   call execute("  _split_value_="||_proc_var_||";");
MPRINT(EM_SUMMARIZE_TABLE):   call execute("end;");
MPRINT(EM_SUMMARIZE_TABLE):   if eof then do;
MPRINT(EM_SUMMARIZE_TABLE):   call execute("keep _variable_ _split_value_ BAD Frequency
Percent display_var;");
MPRINT(EM_SUMMARIZE_TABLE):   call execute("run;");
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
MPRINT(EM_SUMMARIZE_TABLE):   data crosstabs;
MPRINT(EM_SUMMARIZE_TABLE):   length _variable_ _split_value_ $200 ;
MPRINT(EM_SUMMARIZE_TABLE):   set crosstabfreq(where=(_type_='11'));
MPRINT(EM_SUMMARIZE_TABLE):   _variable_= RowVariable;
MPRINT(EM_SUMMARIZE_TABLE):   if strip(RowVariable) = 'BIN_IMP_CLAGE' then do;
MPRINT(EM_SUMMARIZE_TABLE):   _split_value_=BIN_IMP_CLAGE ;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   if strip(RowVariable) = 'BIN_IMP_CLNO' then do;
MPRINT(EM_SUMMARIZE_TABLE):   _split_value_=BIN_IMP_CLNO ;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   if strip(RowVariable) = 'BIN_IMP_DEBTINC' then do;
MPRINT(EM_SUMMARIZE_TABLE):   _split_value_=BIN_IMP_DEBTINC ;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   if strip(RowVariable) = 'BIN_IMP_MORTDUE' then do;
MPRINT(EM_SUMMARIZE_TABLE):   _split_value_=BIN_IMP_MORTDUE ;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   if strip(RowVariable) = 'BIN_IMP_NINQ' then do;
MPRINT(EM_SUMMARIZE_TABLE):   _split_value_=BIN_IMP_NINQ ;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   if strip(RowVariable) = 'BIN_IMP_VALUE' then do;
MPRINT(EM_SUMMARIZE_TABLE):   _split_value_=BIN_IMP_VALUE ;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   if strip(RowVariable) = 'BIN_INDELINQ' then do;
MPRINT(EM_SUMMARIZE_TABLE):   _split_value_=BIN_INDELINQ ;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   if strip(RowVariable) = 'BIN_INDEROG' then do;
MPRINT(EM_SUMMARIZE_TABLE):   _split_value_=BIN_INDEROG ;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   if strip(RowVariable) = 'BIN_LOAN' then do;
MPRINT(EM_SUMMARIZE_TABLE):   _split_value_=BIN_LOAN ;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   if strip(RowVariable) = 'BIN_LOG_yoj' then do;
MPRINT(EM_SUMMARIZE_TABLE):   _split_value_=BIN_LOG_yoj ;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   if strip(RowVariable) = 'IMP_JOB' then do;
MPRINT(EM_SUMMARIZE_TABLE):   _split_value_=IMP_JOB ;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   if strip(RowVariable) = 'IMP_REASON' then do;
MPRINT(EM_SUMMARIZE_TABLE):   _split_value_=IMP_REASON ;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   keep _variable_ _split_value_ BAD Frequency Percent display_var;
MPRINT(EM_SUMMARIZE_TABLE):   run;
NOTE: There were 12 observations read from the data set WORK.SORTEDMAP.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
NOTE: CALL EXECUTE generated line.
1         + data crosstabs;
2         +   length _variable_ _split_value_  $200 ;
MPRINT(EM_SUMMARIZE_TABLE):  200
3         +   set crosstabfreq(where=(_type_='11'));
4         +   _variable_= RowVariable;
5         + if strip(RowVariable) = 'BIN_IMP_CLAGE' then do;
6         +   _split_value_=BIN_IMP_CLAGE                   ;
7         + end;
8         + if strip(RowVariable) = 'BIN_IMP_CLNO' then do;
9         +   _split_value_=BIN_IMP_CLNO                    ;
10        + end;
11        + if strip(RowVariable) = 'BIN_IMP_DEBTINC' then do;
12        +   _split_value_=BIN_IMP_DEBTINC                 ;
13        + end;
14        + if strip(RowVariable) = 'BIN_IMP_MORTDUE' then do;
15        +   _split_value_=BIN_IMP_MORTDUE                 ;
16        + end;
17        + if strip(RowVariable) = 'BIN_IMP_NINQ' then do;
18        +   _split_value_=BIN_IMP_NINQ                    ;
19        + end;
20        + if strip(RowVariable) = 'BIN_IMP_VALUE' then do;
21        +   _split_value_=BIN_IMP_VALUE                   ;
22        + end;
23        + if strip(RowVariable) = 'BIN_INDELINQ' then do;
24        +   _split_value_=BIN_INDELINQ                    ;
25        + end;
26        + if strip(RowVariable) = 'BIN_INDEROG' then do;
27        +   _split_value_=BIN_INDEROG                     ;
28        + end;
29        + if strip(RowVariable) = 'BIN_LOAN' then do;
30        +   _split_value_=BIN_LOAN                        ;
31        + end;
32        + if strip(RowVariable) = 'BIN_LOG_yoj' then do;
33        +   _split_value_=BIN_LOG_yoj                     ;
34        + end;
35        + if strip(RowVariable) = 'IMP_JOB' then do;
36        +   _split_value_=IMP_JOB                         ;
37        + end;
38        + if strip(RowVariable) = 'IMP_REASON' then do;
39        +   _split_value_=IMP_REASON                      ;
40        + end;
41        + keep _variable_ _split_value_ BAD Frequency Percent display_var;
42        + run;
 
WARNING: The variable display_var in the DROP, KEEP, or RENAME list has never been referenced.
NOTE: There were 86 observations read from the data set WORK.CROSSTABFREQ.
      WHERE _type_='11';
NOTE: The data set WORK.CROSSTABS has 86 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):   proc sort data=crosstabs;
MPRINT(EM_SUMMARIZE_TABLE):   by _variable_ _split_value_;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
NOTE: There were 86 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.CROSSTABS has 86 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):   data crosstabs;
MPRINT(EM_SUMMARIZE_TABLE):   length display_var $32;
MPRINT(EM_SUMMARIZE_TABLE):   merge crosstabs sortedmap(rename=(_variable_=display_var
_proc_var_=_variable_ ) keep=_variable_ _proc_var_ );
MPRINT(EM_SUMMARIZE_TABLE):   by _variable_;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
NOTE: There were 86 observations read from the data set WORK.CROSSTABS.
NOTE: There were 12 observations read from the data set WORK.SORTEDMAP.
NOTE: The data set WORK.CROSSTABS has 86 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):   proc sort data=crosstabs;
MPRINT(EM_SUMMARIZE_TABLE):   by display_var _split_value_;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
NOTE: There were 86 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.CROSSTABS has 86 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):   proc sort data=EMWS1.BINNING_VariableSet out=tempvarset;
MPRINT(EM_SUMMARIZE_TABLE):   by name;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
NOTE: There were 14 observations read from the data set EMWS1.BINNING_VARIABLESET.
NOTE: The data set WORK.TEMPVARSET has 14 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):   data crosstabs;
MPRINT(EM_SUMMARIZE_TABLE):   merge crosstabs tempvarset(rename=(name=display_var) keep=type
format name level);
MPRINT(EM_SUMMARIZE_TABLE):   by display_var;
MPRINT(EM_SUMMARIZE_TABLE):   index = kindex(_variable_, "BIN_");
MPRINT(EM_SUMMARIZE_TABLE):   if index gt 0 then do;
MPRINT(EM_SUMMARIZE_TABLE):   level="ORDINAL";
MPRINT(EM_SUMMARIZE_TABLE):   format = "";
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   _temp = BAD;
MPRINT(EM_SUMMARIZE_TABLE):   drop index;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
WARNING: Multiple lengths were specified for the BY variable display_var by input data sets.
         This might cause unexpected results.
NOTE: There were 86 observations read from the data set WORK.CROSSTABS.
NOTE: There were 14 observations read from the data set WORK.TEMPVARSET.
NOTE: The data set WORK.CROSSTABS has 88 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):   proc sort data=crosstabs;
MPRINT(EM_SUMMARIZE_TABLE):   by _variable_ _split_value_;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
NOTE: There were 88 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.CROSSTABS has 88 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_SUMMARIZE_TABLE):   data EMWS1.BINNING_FINEDETAILDATA;
MPRINT(EM_SUMMARIZE_TABLE):   length _variable_ _split_value_ $200 eventCount nonEventCount
Total EventRate nonEventRate 8 type $1 valfmt $20 ;
MPRINT(EM_SUMMARIZE_TABLE):   retain eventCount noneventCount ;
MPRINT(EM_SUMMARIZE_TABLE):   set crosstabs;
MPRINT(EM_SUMMARIZE_TABLE):   by _variable_ _split_value_;
MPRINT(EM_SUMMARIZE_TABLE):   if first._split_value_ then do;
MPRINT(EM_SUMMARIZE_TABLE):   total=0;
MPRINT(EM_SUMMARIZE_TABLE):   eventcount=0;
MPRINT(EM_SUMMARIZE_TABLE):   noneventcount=0;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   if _temp=1 then eventCount=Frequency;
MPRINT(EM_SUMMARIZE_TABLE):   else noneventCount=Frequency;
MPRINT(EM_SUMMARIZE_TABLE):   if last._split_value_ then do;
MPRINT(EM_SUMMARIZE_TABLE):   total = eventCount + noneventCount;
MPRINT(EM_SUMMARIZE_TABLE):   if total ne 0 then do;
MPRINT(EM_SUMMARIZE_TABLE):   eventRate = eventCount / total;
MPRINT(EM_SUMMARIZE_TABLE):   nonEventRate = nonEventCount / total;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   else do;
MPRINT(EM_SUMMARIZE_TABLE):   eventRate = 0;
MPRINT(EM_SUMMARIZE_TABLE):   nonEventRate = 0;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   output;
MPRINT(EM_SUMMARIZE_TABLE):   end;
MPRINT(EM_SUMMARIZE_TABLE):   valfmt = format;
MPRINT(EM_SUMMARIZE_TABLE):   drop _temp Frequency percent;
MPRINT(EM_SUMMARIZE_TABLE):   run;
 
NOTE: Character values have been converted to numeric values at the places given by:
      (Line):(Column).
      374:126
NOTE: Missing values were generated as a result of performing an operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      1 at 393:122   1 at 402:134   1 at 405:129
NOTE: There were 88 observations read from the data set WORK.CROSSTABS.
NOTE: The data set EMWS1.BINNING_FINEDETAILDATA has 44 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_FINE_DETAIL):  ;
MPRINT(EM_FINE_DETAIL):   data EMWS1.BINNING_FINEDETAILDATA;
MPRINT(EM_FINE_DETAIL):   length display_var $32 newgroup numsplitval 8;
MPRINT(EM_FINE_DETAIL):   set EMWS1.BINNING_FINEDETAILDATA;
MPRINT(EM_FINE_DETAIL):   display_var = _variable_;
MPRINT(EM_FINE_DETAIL):   index = kindex(display_var, "BIN_");
MPRINT(EM_FINE_DETAIL):   if index gt 0 then do;
MPRINT(EM_FINE_DETAIL):   display_var = ksubstr(display_var, 5);
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   index2 = kindex(display_var, "SV_");
MPRINT(EM_FINE_DETAIL):   if index2 gt 0 then do;
MPRINT(EM_FINE_DETAIL):   display_var = ksubstr(display_var, 4);
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if ((_SPLIT_VALUE_ = "") or (_SPLIT_VALUE_ = " ") or (_SPLIT_VALUE_
= ".")) then _SPLIT_VALUE_="MISSING";
MPRINT(EM_FINE_DETAIL):   _index_ = _N_;
MPRINT(EM_FINE_DETAIL):   newgroup = .;
MPRINT(EM_FINE_DETAIL):   drop index index2 ;
MPRINT(EM_FINE_DETAIL):   run;
 
NOTE: Variable numsplitval is uninitialized.
NOTE: There were 44 observations read from the data set EMWS1.BINNING_FINEDETAILDATA.
NOTE: The data set EMWS1.BINNING_FINEDETAILDATA has 44 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_FINE_DETAIL):   proc sort data=EMWS1.BINNING_FINEDETAILDATA;
MPRINT(EM_FINE_DETAIL):   by _variable_ _split_value_;
MPRINT(EM_FINE_DETAIL):   run;
 
NOTE: There were 44 observations read from the data set EMWS1.BINNING_FINEDETAILDATA.
NOTE: The data set EMWS1.BINNING_FINEDETAILDATA has 44 observations and 16 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_FINE_DETAIL):   data tmpsplitvals;
MPRINT(EM_FINE_DETAIL):   set EMWS1.BINNING_SPLITVALS;
MPRINT(EM_FINE_DETAIL):   _norm_level_ = upcase(_norm_level_);
MPRINT(EM_FINE_DETAIL):   if _split_value_ eq 'Missing' then _split_value_ = 'MISSING';
MPRINT(EM_FINE_DETAIL):   * drop _split_value_;
MPRINT(EM_FINE_DETAIL):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_SPLITVALS.
NOTE: The data set WORK.TMPSPLITVALS has 57 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_FINE_DETAIL):   proc sort data=tmpsplitvals out=sortedsplit;
MPRINT(EM_FINE_DETAIL):   by _variable_ _split_value_;
MPRINT(EM_FINE_DETAIL):   run;
 
NOTE: There were 57 observations read from the data set WORK.TMPSPLITVALS.
NOTE: The data set WORK.SORTEDSPLIT has 57 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_FINE_DETAIL):   proc datasets library=work nolist;
MPRINT(EM_FINE_DETAIL):   delete tmpsplitvals;
MPRINT(EM_FINE_DETAIL):   run;
 
NOTE: Deleting WORK.TMPSPLITVALS (memtype=DATA).
MPRINT(EM_FINE_DETAIL):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
 
MPRINT(EM_FINE_DETAIL):   proc sort data=EMWS1.BINNING_BINMAPPINGS out=sortedbin;
MPRINT(EM_FINE_DETAIL):   by BIN_NAME BIN;
MPRINT(EM_FINE_DETAIL):   run;
 
NOTE: There were 37 observations read from the data set EMWS1.BINNING_BINMAPPINGS.
NOTE: The data set WORK.SORTEDBIN has 37 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_FINE_DETAIL):   data EMWS1.BINNING_FINEDETAILDATA;
MPRINT(EM_FINE_DETAIL):   merge EMWS1.BINNING_FINEDETAILDATA(in=_c) work.sortedsplit(in=_b)
work.sortedbin(rename=(BIN_NAME=_variable_ BIN=_split_value_) in=_a);
MPRINT(EM_FINE_DETAIL):   by _variable_ _split_value_;
MPRINT(EM_FINE_DETAIL):   if _a then do;
MPRINT(EM_FINE_DETAIL):   binFlag = 1;
MPRINT(EM_FINE_DETAIL):   VALUE=EM_BIN_LABEL;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   else do;
MPRINT(EM_FINE_DETAIL):   binFlag = 0;
MPRINT(EM_FINE_DETAIL):   *VALUE=strip(display_var)!!"="!!strip(_split_value_);
MPRINT(EM_FINE_DETAIL):   VALUE=strip(_split_value_);
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if ((eventCount=.) or (nonEventCount=.)) then do;
MPRINT(EM_FINE_DETAIL):   eventCount=0;
MPRINT(EM_FINE_DETAIL):   nonEventCount=0;
MPRINT(EM_FINE_DETAIL):   total = 0;
MPRINT(EM_FINE_DETAIL):   eventRate= 0;
MPRINT(EM_FINE_DETAIL):   nonEventRate = 0;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   eventCount = round(eventCount, .001);
MPRINT(EM_FINE_DETAIL):   nonEventCount = round(nonEventCount, .001);
MPRINT(EM_FINE_DETAIL):   total= round(total, .001);
MPRINT(EM_FINE_DETAIL):   eventRate = round(eventRate, .001);
MPRINT(EM_FINE_DETAIL):   nonEventRate = round(nonEventRate, .001);
MPRINT(EM_FINE_DETAIL):   if ((type='N') AND (VERIFY(trim(left(_split_value_)) ,
'.0123456789')=0) ) then numsplitval = _split_value_;
MPRINT(EM_FINE_DETAIL):   else if ((type='N') AND (valfmt ne "")) then numsplitval = _order_;
MPRINT(EM_FINE_DETAIL):   else numsplitval=.;
MPRINT(EM_FINE_DETAIL):   if DISPLAY_VAR = "" and _VARIABLE_ = "" then delete;
MPRINT(EM_FINE_DETAIL):   if _a and ^_b then delete;
MPRINT(EM_FINE_DETAIL):   if _c and ^_b then delete;
MPRINT(EM_FINE_DETAIL):   drop NAME EM_BIN_LABEL valfmt;
MPRINT(EM_FINE_DETAIL):   run;
 
NOTE: Character values have been converted to numeric values at the places given by:
      (Line):(Column).
      321:70
NOTE: Variable _order_ is uninitialized.
NOTE: There were 44 observations read from the data set EMWS1.BINNING_FINEDETAILDATA.
NOTE: There were 57 observations read from the data set WORK.SORTEDSPLIT.
NOTE: There were 37 observations read from the data set WORK.SORTEDBIN.
NOTE: The data set EMWS1.BINNING_FINEDETAILDATA has 57 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(EM_FINE_DETAIL):   data EMWS1.BINNING_FINEDETAILDATA;
MPRINT(EM_FINE_DETAIL):   set EMWS1.BINNING_FINEDETAILDATA;
MPRINT(EM_FINE_DETAIL):   if DISPLAY_VAR = "IMP_CLAGE" then do;
MPRINT(EM_FINE_DETAIL):   if _LEVEL_ = "" then _LEVEL_ ="ORDINAL";
MPRINT(EM_FINE_DETAIL):   if _GROUP_ = . then _GROUP_ = 1;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if DISPLAY_VAR = "IMP_CLNO" then do;
MPRINT(EM_FINE_DETAIL):   if _LEVEL_ = "" then _LEVEL_ ="ORDINAL";
MPRINT(EM_FINE_DETAIL):   if _GROUP_ = . then _GROUP_ = 1;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if DISPLAY_VAR = "IMP_DEBTINC" then do;
MPRINT(EM_FINE_DETAIL):   if _LEVEL_ = "" then _LEVEL_ ="ORDINAL";
MPRINT(EM_FINE_DETAIL):   if _GROUP_ = . then _GROUP_ = 1;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if DISPLAY_VAR = "IMP_JOB" then do;
MPRINT(EM_FINE_DETAIL):   if _LEVEL_ = "" then _LEVEL_ ="NOMINAL";
MPRINT(EM_FINE_DETAIL):   if _GROUP_ = . then _GROUP_ = 1;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if DISPLAY_VAR = "IMP_MORTDUE" then do;
MPRINT(EM_FINE_DETAIL):   if _LEVEL_ = "" then _LEVEL_ ="ORDINAL";
MPRINT(EM_FINE_DETAIL):   if _GROUP_ = . then _GROUP_ = 1;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if DISPLAY_VAR = "IMP_NINQ" then do;
MPRINT(EM_FINE_DETAIL):   if _LEVEL_ = "" then _LEVEL_ ="ORDINAL";
MPRINT(EM_FINE_DETAIL):   if _GROUP_ = . then _GROUP_ = 1;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if DISPLAY_VAR = "IMP_REASON" then do;
MPRINT(EM_FINE_DETAIL):   if _LEVEL_ = "" then _LEVEL_ ="NOMINAL";
MPRINT(EM_FINE_DETAIL):   if _GROUP_ = . then _GROUP_ = 1;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if DISPLAY_VAR = "IMP_VALUE" then do;
MPRINT(EM_FINE_DETAIL):   if _LEVEL_ = "" then _LEVEL_ ="ORDINAL";
MPRINT(EM_FINE_DETAIL):   if _GROUP_ = . then _GROUP_ = 1;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if DISPLAY_VAR = "INDELINQ" then do;
MPRINT(EM_FINE_DETAIL):   if _LEVEL_ = "" then _LEVEL_ ="ORDINAL";
MPRINT(EM_FINE_DETAIL):   if _GROUP_ = . then _GROUP_ = 1;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if DISPLAY_VAR = "INDEROG" then do;
MPRINT(EM_FINE_DETAIL):   if _LEVEL_ = "" then _LEVEL_ ="ORDINAL";
MPRINT(EM_FINE_DETAIL):   if _GROUP_ = . then _GROUP_ = 1;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if DISPLAY_VAR = "LOAN" then do;
MPRINT(EM_FINE_DETAIL):   if _LEVEL_ = "" then _LEVEL_ ="ORDINAL";
MPRINT(EM_FINE_DETAIL):   if _GROUP_ = . then _GROUP_ = 1;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if DISPLAY_VAR = "LOG_yoj" then do;
MPRINT(EM_FINE_DETAIL):   if _LEVEL_ = "" then _LEVEL_ ="ORDINAL";
MPRINT(EM_FINE_DETAIL):   if _GROUP_ = . then _GROUP_ = 1;
MPRINT(EM_FINE_DETAIL):   end;
MPRINT(EM_FINE_DETAIL):   if _GROUP_ = . then delete;
MPRINT(EM_FINE_DETAIL):   * if binFlag=1 and UB=LB then delete;
MPRINT(EM_FINE_DETAIL):   * if upcase(_SPLIT_VALUE_) ne "MISSING" and _index_ eq . then delete;
MPRINT(EM_FINE_DETAIL):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_FINEDETAILDATA.
NOTE: The data set EMWS1.BINNING_FINEDETAILDATA has 57 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(EM_FINE_DETAIL):   proc sort data=EMWS1.BINNING_FINEDETAILDATA;
MPRINT(EM_FINE_DETAIL):   by DISPLAY_VAR _index_;
MPRINT(EM_FINE_DETAIL):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_FINEDETAILDATA.
NOTE: The data set EMWS1.BINNING_FINEDETAILDATA has 57 observations and 24 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_FINE_DETAIL):   proc datasets lib=work nolist;
MPRINT(EM_FINE_DETAIL):   delete sortedsplit sortedbin ;
MPRINT(EM_FINE_DETAIL):   run;
 
NOTE: Deleting WORK.SORTEDSPLIT (memtype=DATA).
NOTE: Deleting WORK.SORTEDBIN (memtype=DATA).
MPRINT(EM_FINE_DETAIL):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(TRAIN):  ;
MPRINT(EM_CREATE_GROUPING):   proc freq data=EMWS1.BINNING_BINDATA noprint;
MPRINT(EM_CREATE_GROUPING):   table BAD / missing out=temptargetC;
MPRINT(EM_CREATE_GROUPING):   run;
 
NOTE: There were 2979 observations read from the data set EMWS1.BINNING_BINDATA.
NOTE: The data set WORK.TEMPTARGETC has 2 observations and 3 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CREATE_GROUPING):   proc datasets lib=work nolist;
MPRINT(EM_CREATE_GROUPING):   delete temptargetC;
MPRINT(EM_CREATE_GROUPING):   run;
 
NOTE: Deleting WORK.TEMPTARGETC (memtype=DATA).
MPRINT(EM_CREATE_GROUPING):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(EM_CREATE_GROUPING):   proc means data=EMWS1.BINNING_FINEDETAILDATA noprint;
MPRINT(EM_CREATE_GROUPING):   var eventCount nonEventCount;
MPRINT(EM_CREATE_GROUPING):   class _variable_ _group_;
MPRINT(EM_CREATE_GROUPING):   output out=summ(where=(_type_ in(2,3))) sum=eventCount
nonEventCount;
MPRINT(EM_CREATE_GROUPING):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_FINEDETAILDATA.
NOTE: The data set WORK.SUMM has 69 observations and 6 variables.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(EM_CREATE_GROUPING):   proc sort data=summ(drop=_type_ _freq_);
MPRINT(EM_CREATE_GROUPING):   by _variable_ _group_;
MPRINT(EM_CREATE_GROUPING):   run;
 
NOTE: There were 69 observations read from the data set WORK.SUMM.
NOTE: The data set WORK.SUMM has 69 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CREATE_GROUPING):   data gini(keep=_variable_ eventCount nonEventCount
groupresprate) tempcoarse(keep=_variable_ _group_ eventCount nonEventCount groupresprate
groupNonRespRate eventRate nonEventRate respper nrespper);
MPRINT(EM_CREATE_GROUPING):   set summ;
MPRINT(EM_CREATE_GROUPING):   *format groupresprate 6.2;
MPRINT(EM_CREATE_GROUPING):   *format groupnonresprate 6.2;
MPRINT(EM_CREATE_GROUPING):   by _variable_ ;
MPRINT(EM_CREATE_GROUPING):   if _group_=. then do;
MPRINT(EM_CREATE_GROUPING):   end;
MPRINT(EM_CREATE_GROUPING):   else do;
MPRINT(EM_CREATE_GROUPING):   respper = eventCount / 594;
MPRINT(EM_CREATE_GROUPING):   nrespper = nonEventCount / 2385;
MPRINT(EM_CREATE_GROUPING):   if ((nonEventCount = 0) AND (eventCount = 0)) then do;
MPRINT(EM_CREATE_GROUPING):   groupresprate=0;
MPRINT(EM_CREATE_GROUPING):   groupNonresprate = 0;
MPRINT(EM_CREATE_GROUPING):   eventRate = 0;
MPRINT(EM_CREATE_GROUPING):   nonEventRate = 0;
MPRINT(EM_CREATE_GROUPING):   end;
MPRINT(EM_CREATE_GROUPING):   else do;
MPRINT(EM_CREATE_GROUPING):   groupresprate = eventCount / (eventCount + nonEventCount) ;
MPRINT(EM_CREATE_GROUPING):   groupNonRespRate = 1 - groupRespRate;
MPRINT(EM_CREATE_GROUPING):   eventRate = eventCount / 594 ;
MPRINT(EM_CREATE_GROUPING):   nonEventRate = nonEventCount / 2385 ;
MPRINT(EM_CREATE_GROUPING):   end;
MPRINT(EM_CREATE_GROUPING):   output gini tempcoarse;
MPRINT(EM_CREATE_GROUPING):   end;
MPRINT(EM_CREATE_GROUPING):   run;
 
NOTE: There were 69 observations read from the data set WORK.SUMM.
NOTE: The data set WORK.GINI has 57 observations and 4 variables.
NOTE: The data set WORK.TEMPCOARSE has 57 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CREATE_GROUPING):   proc sort data=gini;
MPRINT(EM_CREATE_GROUPING):   by _variable_ descending groupresprate;
MPRINT(EM_CREATE_GROUPING):   run;
 
NOTE: There were 57 observations read from the data set WORK.GINI.
NOTE: The data set WORK.GINI has 57 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_CREATE_GROUPING):   data gini(keep= _variable_ _gini_);
MPRINT(EM_CREATE_GROUPING):   retain between within cumresp cumnresp;
MPRINT(EM_CREATE_GROUPING):   set gini(keep=_variable_ eventCount nonEventCount);
MPRINT(EM_CREATE_GROUPING):   by _variable_;
MPRINT(EM_CREATE_GROUPING):   if first._variable_ then do;
MPRINT(EM_CREATE_GROUPING):   between = 0;
MPRINT(EM_CREATE_GROUPING):   within = 0;
MPRINT(EM_CREATE_GROUPING):   cumresp = 0;
MPRINT(EM_CREATE_GROUPING):   cumnresp = 0;
MPRINT(EM_CREATE_GROUPING):   end;
MPRINT(EM_CREATE_GROUPING):   between + 2 * cumnresp * eventCount;
MPRINT(EM_CREATE_GROUPING):   within + nonEventCount * eventCount;
MPRINT(EM_CREATE_GROUPING):   cumresp + eventCount;
MPRINT(EM_CREATE_GROUPING):   cumnresp + nonEventCount;
MPRINT(EM_CREATE_GROUPING):   if last._variable_ then do;
MPRINT(EM_CREATE_GROUPING):   if ^(cumnresp=0 or cumresp=0) then do;
MPRINT(EM_CREATE_GROUPING):   _gini_ = 100 * (1 - (within + between) / (cumnresp * cumresp));
MPRINT(EM_CREATE_GROUPING):   output;
MPRINT(EM_CREATE_GROUPING):   end;
MPRINT(EM_CREATE_GROUPING):   end;
MPRINT(EM_CREATE_GROUPING):   run;
 
NOTE: There were 57 observations read from the data set WORK.GINI.
NOTE: The data set WORK.GINI has 12 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CREATE_GROUPING):   data tempdisplayvar;
MPRINT(EM_CREATE_GROUPING):   set EMWS1.BINNING_VARMAPPINGS;
MPRINT(EM_CREATE_GROUPING):   rename _variable_ = display_var _proc_var_ = _variable_;
MPRINT(EM_CREATE_GROUPING):   keep _variable_ _proc_var_ label;
MPRINT(EM_CREATE_GROUPING):   run;
 
NOTE: There were 12 observations read from the data set EMWS1.BINNING_VARMAPPINGS.
NOTE: The data set WORK.TEMPDISPLAYVAR has 12 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CREATE_GROUPING):   proc sort data=tempdisplayvar;
MPRINT(EM_CREATE_GROUPING):   by _variable_;
MPRINT(EM_CREATE_GROUPING):   run;
 
NOTE: There were 12 observations read from the data set WORK.TEMPDISPLAYVAR.
NOTE: The data set WORK.TEMPDISPLAYVAR has 12 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_CREATE_GROUPING):   data EMWS1.BINNING_COARSE;
MPRINT(EM_CREATE_GROUPING):   length display_Var $32 label _label_ $200 role $10 _group_ 8;
MPRINT(EM_CREATE_GROUPING):   merge tempdisplayvar tempcoarse gini ;
MPRINT(EM_CREATE_GROUPING):   by _variable_;
MPRINT(EM_CREATE_GROUPING):   label display_var = "Variable" eventRate = "Event Rate"
nonEventRate = "Non-Event Rate" _group_ = "Group" role = "Role" _gini_ = "Gini Coefficient"
eventcount = "Event Count" noneventcount = "Non-Event Count" groupresprate = "Group Event
Rate" groupnonresprate = "Group Non-Event Rate" ;
MPRINT(EM_CREATE_GROUPING):   eventCount = round(eventCount, .001);
MPRINT(EM_CREATE_GROUPING):   nonEventCount = round(nonEventCount, .001);
MPRINT(EM_CREATE_GROUPING):   groupRespRate = round(groupRespRate, .001);
MPRINT(EM_CREATE_GROUPING):   drop _variable_ index index2 respper nrespper;
MPRINT(EM_CREATE_GROUPING):   run;
 
NOTE: Variable _label_ is uninitialized.
NOTE: Variable role is uninitialized.
WARNING: Multiple lengths were specified for the BY variable _variable_ by input data sets.
         This might cause unexpected results.
WARNING: The variable index in the DROP, KEEP, or RENAME list has never been referenced.
WARNING: The variable index2 in the DROP, KEEP, or RENAME list has never been referenced.
NOTE: There were 12 observations read from the data set WORK.TEMPDISPLAYVAR.
NOTE: There were 57 observations read from the data set WORK.TEMPCOARSE.
NOTE: There were 12 observations read from the data set WORK.GINI.
NOTE: The data set EMWS1.BINNING_COARSE has 57 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.09 seconds
 
 
MPRINT(EM_CREATE_GROUPING):   proc datasets library=work nolist;
MPRINT(EM_CREATE_GROUPING):   delete tempcoarse gini ;
MPRINT(EM_CREATE_GROUPING):   run;
 
NOTE: Deleting WORK.TEMPCOARSE (memtype=DATA).
NOTE: Deleting WORK.GINI (memtype=DATA).
MPRINT(EM_CREATE_GROUPING):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
 
MPRINT(TRAIN):  ;
MPRINT(TRAIN):   filename Y "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
Projects\Project_3\Workspaces\EMWS1\BINNING\GROUPMAPPINGSCORECODE.sas";
MPRINT(EM_GENERATE_LABELVALUES):   data _null_;
MPRINT(EM_GENERATE_LABELVALUES):   FILE Y;
MPRINT(EM_GENERATE_LABELVALUES):   put " length _LABEL_ $200;";
MPRINT(EM_GENERATE_LABELVALUES):   put ' label _LABEL_="%sysfunc(sasmsg(sashelp.dmine,
rpt_groupvalues_vlabel , NOQUOTE))";';
MPRINT(EM_GENERATE_LABELVALUES):   run;
 
NOTE: The file Y is:
 
      Filename=C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
      Projects\Project_3\Workspaces\EMWS1\BINNING\GROUPMAPPINGSCORECODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=04Nov2015:07:40:41,
      Create Time=03Nov2015:13:53:39
 
NOTE: 2 records were written to the file Y.
      The minimum record length was 21.
      The maximum record length was 83.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_GENERATE_LABELVALUES):   proc sort data=EMWS1.BINNING_SPLITVALS
out=work.sortedsplitval;
MPRINT(EM_GENERATE_LABELVALUES):   by display_var _split_Value_;
MPRINT(EM_GENERATE_LABELVALUES):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_SPLITVALS.
NOTE: The data set WORK.SORTEDSPLITVAL has 57 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_GENERATE_LABELVALUES):   proc sort data=EMWS1.BINNING_BINMAPPINGS;
MPRINT(EM_GENERATE_LABELVALUES):   by display_var bin;
MPRINT(EM_GENERATE_LABELVALUES):   run;
 
NOTE: There were 37 observations read from the data set EMWS1.BINNING_BINMAPPINGS.
NOTE: The data set EMWS1.BINNING_BINMAPPINGS has 37 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_GENERATE_LABELVALUES):   data temp;
MPRINT(EM_GENERATE_LABELVALUES):   merge work.sortedsplitval(in=_a)
EMWS1.BINNING_BINMAPPINGS(rename=(BIN_NAME=_VARIABLE_ BIN=_SPLIT_VALUE_));
MPRINT(EM_GENERATE_LABELVALUES):   by Display_Var _Split_value_;
MPRINT(EM_GENERATE_LABELVALUES):   if upcase(_Split_value_) ne 'MISSING';
MPRINT(EM_GENERATE_LABELVALUES):   if _a then output;
MPRINT(EM_GENERATE_LABELVALUES):   if display_var eq '' then delete;
MPRINT(EM_GENERATE_LABELVALUES):   run;
 
NOTE: There were 57 observations read from the data set WORK.SORTEDSPLITVAL.
NOTE: There were 37 observations read from the data set EMWS1.BINNING_BINMAPPINGS.
NOTE: The data set WORK.TEMP has 45 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_GENERATE_LABELVALUES):   data temp_missing;
MPRINT(EM_GENERATE_LABELVALUES):   merge work.sortedsplitval(in=_a rename=(_GROUP_=MISSGRP))
EMWS1.BINNING_BINMAPPINGS(rename=(BIN_NAME=_VARIABLE_ BIN=_SPLIT_VALUE_));
MPRINT(EM_GENERATE_LABELVALUES):   by Display_Var _Split_value_;
MPRINT(EM_GENERATE_LABELVALUES):   if upcase(_Split_value_) eq 'MISSING';
MPRINT(EM_GENERATE_LABELVALUES):   if _a then output;
MPRINT(EM_GENERATE_LABELVALUES):   keep _variable_ display_var missgrp;
MPRINT(EM_GENERATE_LABELVALUES):   run;
 
NOTE: There were 57 observations read from the data set WORK.SORTEDSPLITVAL.
NOTE: There were 37 observations read from the data set EMWS1.BINNING_BINMAPPINGS.
NOTE: The data set WORK.TEMP_MISSING has 12 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_GENERATE_LABELVALUES):   proc sort data=temp out=class;
MPRINT(EM_GENERATE_LABELVALUES):   by _variable_ _group_ LB;
MPRINT(EM_GENERATE_LABELVALUES):   run;
 
NOTE: There were 45 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.CLASS has 45 observations and 12 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_GENERATE_LABELVALUES):   data _null_;
MPRINT(EM_GENERATE_LABELVALUES):   file Y MOD;
MPRINT(EM_GENERATE_LABELVALUES):   length string $200 flag 8;
MPRINT(EM_GENERATE_LABELVALUES):   retain string flag;
MPRINT(EM_GENERATE_LABELVALUES):   set class end=eof;
MPRINT(EM_GENERATE_LABELVALUES):   by _variable_ _group_;
MPRINT(EM_GENERATE_LABELVALUES):   index = kindex(_variable_, "BIN_");
MPRINT(EM_GENERATE_LABELVALUES):   if index gt 0 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if first._group_ then do;
MPRINT(EM_GENERATE_LABELVALUES):   flag = 0;
MPRINT(EM_GENERATE_LABELVALUES):   if ^first._variable_ then put 'else';
MPRINT(EM_GENERATE_LABELVALUES):   else put ' ';
MPRINT(EM_GENERATE_LABELVALUES):   string = "if DISPLAY_VAR='"!!strip(DISPLAY_VAR)!!"' and
_GROUP_ = " !!strip(put(_GROUP_,best12.))!!' then do;';
MPRINT(EM_GENERATE_LABELVALUES):   put string;
MPRINT(EM_GENERATE_LABELVALUES):   if LB ne . then do;
MPRINT(EM_GENERATE_LABELVALUES):   * string = strip(string)!!" _LABEL_='"!!strip(LB)!!"<=
"!!strip(DISPLAY_VAR);
MPRINT(EM_GENERATE_LABELVALUES):   string = " _LABEL_='"!!strip(LB)!!"<= "!!strip(DISPLAY_VAR);
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   flag = 1;
MPRINT(EM_GENERATE_LABELVALUES):   *string = strip(string)!!" _LABEL_='"!!strip(DISPLAY_VAR);
MPRINT(EM_GENERATE_LABELVALUES):   string = " _LABEL_='"!!strip(DISPLAY_VAR);
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   if last._Group_ then do;
MPRINT(EM_GENERATE_LABELVALUES):   if UB ne . then do;
MPRINT(EM_GENERATE_LABELVALUES):   string = strip(string)!!'< '!!strip(UB)!!"';";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   if flag=1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   string = strip(string)!!"';";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   string = strip(string)!!"';";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   put string;
MPRINT(EM_GENERATE_LABELVALUES):   string= " UB="!!strip(UB)!!";";
MPRINT(EM_GENERATE_LABELVALUES):   put string;
MPRINT(EM_GENERATE_LABELVALUES):   put "end;";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   _split_value_ = tranwrd(_split_value_,"'","''");
MPRINT(EM_GENERATE_LABELVALUES):   if first._group_ then do;
MPRINT(EM_GENERATE_LABELVALUES):   flag = 0;
MPRINT(EM_GENERATE_LABELVALUES):   if ^first._variable_ then put 'else';
MPRINT(EM_GENERATE_LABELVALUES):   else put ' ';
MPRINT(EM_GENERATE_LABELVALUES):   string = "if DISPLAY_VAR='"!!strip(DISPLAY_VAR)!!"' and
_GROUP_ = " !!strip(put(_GROUP_,best12.))!!' then';
MPRINT(EM_GENERATE_LABELVALUES):   put string;
MPRINT(EM_GENERATE_LABELVALUES):   string = "_LABEL_='"!!strip(_split_value_);
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   if flag ne 1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   tempstring = strip(string)!!', '!!strip(_split_value_);
MPRINT(EM_GENERATE_LABELVALUES):   length = length(tempstring);
MPRINT(EM_GENERATE_LABELVALUES):   if length < 195 then do;
MPRINT(EM_GENERATE_LABELVALUES):   string = tempstring;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   string = strip(string)||",...";
MPRINT(EM_GENERATE_LABELVALUES):   flag=1;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   if last._group_ then do;
MPRINT(EM_GENERATE_LABELVALUES):   string = strip(string)!!"';";
MPRINT(EM_GENERATE_LABELVALUES):   put string;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   run;
 
NOTE: Numeric values have been converted to character values at the places given by:
      (Line):(Column).
      171:84    206:151   246:25
NOTE: The file Y is:
 
      Filename=C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
      Projects\Project_3\Workspaces\EMWS1\BINNING\GROUPMAPPINGSCORECODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=4487,
      Last Modified=04Nov2015:07:40:41,
      Create Time=03Nov2015:13:53:39
 
NOTE: 209 records were written to the file Y.
      The minimum record length was 1.
      The maximum record length was 53.
NOTE: There were 45 observations read from the data set WORK.CLASS.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_GENERATE_LABELVALUES):   data EMWS1.BINNING_COARSE;
MPRINT(EM_GENERATE_LABELVALUES):   set EMWS1.BINNING_COARSE;
NOTE: %INCLUDE (level 1) file Y is file C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _
      Projects\Project_3\Workspaces\EMWS1\BINNING\GROUPMAPPINGSCORECODE.sas.
93438     + length _LABEL_ $200;
MPRINT(EM_GENERATE_LABELVALUES):   length _LABEL_ $200;
93439     + label _LABEL_="%sysfunc(sasmsg(sashelp.dmine, rpt_groupvalues_vlabel , NOQUOTE))";
MPRINT(EM_GENERATE_LABELVALUES):   label _LABEL_= "Group Values";
93440     +
93441     +if DISPLAY_VAR='IMP_clage' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_clage' and _GROUP_ = 2 then do;
93442     +_LABEL_='IMP_clage< 118.57';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='IMP_clage< 118.57';
93443     +UB=118.57;
MPRINT(EM_GENERATE_LABELVALUES):   UB=118.57;
93444     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93445     +else
93446     +if DISPLAY_VAR='IMP_clage' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_clage' and _GROUP_ = 3 then do;
93447     +_LABEL_='118.57<= IMP_clage< 179.57';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='118.57<= IMP_clage< 179.57';
93448     +UB=179.57;
MPRINT(EM_GENERATE_LABELVALUES):   UB=179.57;
93449     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93450     +else
93451     +if DISPLAY_VAR='IMP_clage' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_clage' and _GROUP_ = 4 then do;
93452     +_LABEL_='179.57<= IMP_clage< 226.86';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='179.57<= IMP_clage< 226.86';
93453     +UB=226.86;
MPRINT(EM_GENERATE_LABELVALUES):   UB=226.86;
93454     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93455     +else
93456     +if DISPLAY_VAR='IMP_clage' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_clage' and _GROUP_ = 5 then do;
93457     +_LABEL_='226.86<= IMP_clage';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='226.86<= IMP_clage';
93458     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93459     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93460     +
93461     +if DISPLAY_VAR='IMP_clno' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_clno' and _GROUP_ = 2 then do;
93462     +_LABEL_='IMP_clno< 15';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='IMP_clno< 15';
93463     +UB=15;
MPRINT(EM_GENERATE_LABELVALUES):   UB=15;
93464     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93465     +else
93466     +if DISPLAY_VAR='IMP_clno' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_clno' and _GROUP_ = 3 then do;
93467     +_LABEL_='15<= IMP_clno< 21';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='15<= IMP_clno< 21';
93468     +UB=21;
MPRINT(EM_GENERATE_LABELVALUES):   UB=21;
93469     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93470     +else
93471     +if DISPLAY_VAR='IMP_clno' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_clno' and _GROUP_ = 4 then do;
93472     +_LABEL_='21<= IMP_clno< 26';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='21<= IMP_clno< 26';
93473     +UB=26;
MPRINT(EM_GENERATE_LABELVALUES):   UB=26;
93474     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93475     +else
93476     +if DISPLAY_VAR='IMP_clno' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_clno' and _GROUP_ = 5 then do;
93477     +_LABEL_='26<= IMP_clno';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='26<= IMP_clno';
93478     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93479     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93480     +
93481     +if DISPLAY_VAR='IMP_debtinc' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_debtinc' and _GROUP_ = 2 then do;
93482     +_LABEL_='IMP_debtinc< 30.4';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='IMP_debtinc< 30.4';
93483     +UB=30.4;
MPRINT(EM_GENERATE_LABELVALUES):   UB=30.4;
93484     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93485     +else
93486     +if DISPLAY_VAR='IMP_debtinc' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_debtinc' and _GROUP_ = 3 then do;
93487     +_LABEL_='30.4<= IMP_debtinc< 33.79';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='30.4<= IMP_debtinc< 33.79';
93488     +UB=33.79;
MPRINT(EM_GENERATE_LABELVALUES):   UB=33.79;
93489     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93490     +else
93491     +if DISPLAY_VAR='IMP_debtinc' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_debtinc' and _GROUP_ = 4 then do;
93492     +_LABEL_='33.79<= IMP_debtinc< 38.07';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='33.79<= IMP_debtinc< 38.07';
93493     +UB=38.07;
MPRINT(EM_GENERATE_LABELVALUES):   UB=38.07;
93494     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93495     +else
93496     +if DISPLAY_VAR='IMP_debtinc' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_debtinc' and _GROUP_ = 5 then do;
93497     +_LABEL_='38.07<= IMP_debtinc';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='38.07<= IMP_debtinc';
93498     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93499     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93500     +
93501     +if DISPLAY_VAR='IMP_mortdue' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_mortdue' and _GROUP_ = 2 then do;
93502     +_LABEL_='IMP_mortdue< 48273';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='IMP_mortdue< 48273';
93503     +UB=48273;
MPRINT(EM_GENERATE_LABELVALUES):   UB=48273;
93504     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93505     +else
93506     +if DISPLAY_VAR='IMP_mortdue' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_mortdue' and _GROUP_ = 3 then do;
93507     +_LABEL_='48273<= IMP_mortdue< 68959';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='48273<= IMP_mortdue< 68959';
93508     +UB=68959;
MPRINT(EM_GENERATE_LABELVALUES):   UB=68959;
93509     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93510     +else
93511     +if DISPLAY_VAR='IMP_mortdue' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_mortdue' and _GROUP_ = 4 then do;
93512     +_LABEL_='68959<= IMP_mortdue< 89226';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='68959<= IMP_mortdue< 89226';
93513     +UB=89226;
MPRINT(EM_GENERATE_LABELVALUES):   UB=89226;
93514     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93515     +else
93516     +if DISPLAY_VAR='IMP_mortdue' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_mortdue' and _GROUP_ = 5 then do;
93517     +_LABEL_='89226<= IMP_mortdue';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='89226<= IMP_mortdue';
93518     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93519     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93520     +
93521     +if DISPLAY_VAR='IMP_ninq' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_ninq' and _GROUP_ = 2 then do;
93522     +_LABEL_='IMP_ninq< 0';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='IMP_ninq< 0';
93523     +UB=0;
MPRINT(EM_GENERATE_LABELVALUES):   UB=0;
93524     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93525     +else
93526     +if DISPLAY_VAR='IMP_ninq' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_ninq' and _GROUP_ = 3 then do;
93527     +_LABEL_='0<= IMP_ninq< 1';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='0<= IMP_ninq< 1';
93528     +UB=1;
MPRINT(EM_GENERATE_LABELVALUES):   UB=1;
93529     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93530     +else
93531     +if DISPLAY_VAR='IMP_ninq' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_ninq' and _GROUP_ = 4 then do;
93532     +_LABEL_='1<= IMP_ninq< 2';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='1<= IMP_ninq< 2';
93533     +UB=2;
MPRINT(EM_GENERATE_LABELVALUES):   UB=2;
93534     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93535     +else
93536     +if DISPLAY_VAR='IMP_ninq' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_ninq' and _GROUP_ = 5 then do;
93537     +_LABEL_='2<= IMP_ninq';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='2<= IMP_ninq';
93538     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93539     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93540     +
93541     +if DISPLAY_VAR='IMP_value' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_value' and _GROUP_ = 2 then do;
93542     +_LABEL_='IMP_value< 66692';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='IMP_value< 66692';
93543     +UB=66692;
MPRINT(EM_GENERATE_LABELVALUES):   UB=66692;
93544     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93545     +else
93546     +if DISPLAY_VAR='IMP_value' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_value' and _GROUP_ = 3 then do;
93547     +_LABEL_='66692<= IMP_value< 90000';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='66692<= IMP_value< 90000';
93548     +UB=90000;
MPRINT(EM_GENERATE_LABELVALUES):   UB=90000;
93549     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93550     +else
93551     +if DISPLAY_VAR='IMP_value' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_value' and _GROUP_ = 4 then do;
93552     +_LABEL_='90000<= IMP_value< 120724';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='90000<= IMP_value< 120724';
93553     +UB=120724;
MPRINT(EM_GENERATE_LABELVALUES):   UB=120724;
93554     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93555     +else
93556     +if DISPLAY_VAR='IMP_value' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_value' and _GROUP_ = 5 then do;
93557     +_LABEL_='120724<= IMP_value';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='120724<= IMP_value';
93558     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93559     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93560     +
93561     +if DISPLAY_VAR='INDELINQ' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='INDELINQ' and _GROUP_ = 2 then do;
93562     +_LABEL_='INDELINQ< 0';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='INDELINQ< 0';
93563     +UB=0;
MPRINT(EM_GENERATE_LABELVALUES):   UB=0;
93564     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93565     +else
93566     +if DISPLAY_VAR='INDELINQ' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='INDELINQ' and _GROUP_ = 3 then do;
93567     +_LABEL_='0<= INDELINQ< 1';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='0<= INDELINQ< 1';
93568     +UB=1;
MPRINT(EM_GENERATE_LABELVALUES):   UB=1;
93569     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93570     +else
93571     +if DISPLAY_VAR='INDELINQ' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='INDELINQ' and _GROUP_ = 4 then do;
93572     +_LABEL_='1<= INDELINQ';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='1<= INDELINQ';
93573     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93574     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93575     +
93576     +if DISPLAY_VAR='INDEROG' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='INDEROG' and _GROUP_ = 2 then do;
93577     +_LABEL_='INDEROG< 0';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='INDEROG< 0';
93578     +UB=0;
MPRINT(EM_GENERATE_LABELVALUES):   UB=0;
93579     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93580     +else
93581     +if DISPLAY_VAR='INDEROG' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='INDEROG' and _GROUP_ = 3 then do;
93582     +_LABEL_='0<= INDEROG';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='0<= INDEROG';
93583     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93584     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93585     +
93586     +if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 2 then do;
93587     +_LABEL_='LOG_yoj< 1.39';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='LOG_yoj< 1.39';
93588     +UB=1.39;
MPRINT(EM_GENERATE_LABELVALUES):   UB=1.39;
93589     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93590     +else
93591     +if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 3 then do;
93592     +_LABEL_='1.39<= LOG_yoj< 2.18';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='1.39<= LOG_yoj< 2.18';
93593     +UB=2.18;
MPRINT(EM_GENERATE_LABELVALUES):   UB=2.18;
93594     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93595     +else
93596     +if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 4 then do;
93597     +_LABEL_='2.18<= LOG_yoj< 2.56';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='2.18<= LOG_yoj< 2.56';
93598     +UB=2.56;
MPRINT(EM_GENERATE_LABELVALUES):   UB=2.56;
93599     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93600     +else
93601     +if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 5 then do;
93602     +_LABEL_='2.56<= LOG_yoj';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='2.56<= LOG_yoj';
93603     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93604     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93605     +
93606     +if DISPLAY_VAR='loan' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='loan' and _GROUP_ = 2 then do;
93607     +_LABEL_='loan< 11100';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='loan< 11100';
93608     +UB=11100;
MPRINT(EM_GENERATE_LABELVALUES):   UB=11100;
93609     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93610     +else
93611     +if DISPLAY_VAR='loan' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='loan' and _GROUP_ = 3 then do;
93612     +_LABEL_='11100<= loan< 16200';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='11100<= loan< 16200';
93613     +UB=16200;
MPRINT(EM_GENERATE_LABELVALUES):   UB=16200;
93614     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93615     +else
93616     +if DISPLAY_VAR='loan' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='loan' and _GROUP_ = 4 then do;
93617     +_LABEL_='16200<= loan< 23200';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='16200<= loan< 23200';
93618     +UB=23200;
MPRINT(EM_GENERATE_LABELVALUES):   UB=23200;
93619     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93620     +else
93621     +if DISPLAY_VAR='loan' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='loan' and _GROUP_ = 5 then do;
93622     +_LABEL_='23200<= loan';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='23200<= loan';
93623     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93624     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93625     +
93626     +if DISPLAY_VAR='IMP_job' and _GROUP_ = 2 then
93627     +_LABEL_='OTHER';
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_job' and _GROUP_ = 2 then
_LABEL_='OTHER';
93628     +else
93629     +if DISPLAY_VAR='IMP_job' and _GROUP_ = 3 then
93630     +_LABEL_='PROFEX';
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_job' and _GROUP_ = 3 then
_LABEL_='PROFEX';
93631     +else
93632     +if DISPLAY_VAR='IMP_job' and _GROUP_ = 4 then
93633     +_LABEL_='OFFICE';
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_job' and _GROUP_ = 4 then
_LABEL_='OFFICE';
93634     +else
93635     +if DISPLAY_VAR='IMP_job' and _GROUP_ = 5 then
93636     +_LABEL_='MGR';
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_job' and _GROUP_ = 5 then
_LABEL_='MGR';
93637     +else
93638     +if DISPLAY_VAR='IMP_job' and _GROUP_ = 6 then
93639     +_LABEL_='SELF';
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_job' and _GROUP_ = 6 then
_LABEL_='SELF';
93640     +else
93641     +if DISPLAY_VAR='IMP_job' and _GROUP_ = 7 then
93642     +_LABEL_='SALES';
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_job' and _GROUP_ = 7 then
_LABEL_='SALES';
93643     +
93644     +if DISPLAY_VAR='IMP_reason' and _GROUP_ = 2 then
93645     +_LABEL_='DEBTCON';
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_reason' and _GROUP_ = 2 then
_LABEL_='DEBTCON';
93646     +else
93647     +if DISPLAY_VAR='IMP_reason' and _GROUP_ = 3 then
93648     +_LABEL_='HOMEIMP';
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_reason' and _GROUP_ = 3 then
_LABEL_='HOMEIMP';
93649     +
93650     +if DISPLAY_VAR='IMP_CLAGE' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_CLAGE' and _GROUP_ = 2 then do;
93651     +_LABEL_='IMP_CLAGE< 118.57';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='IMP_CLAGE< 118.57';
93652     +UB=118.57;
MPRINT(EM_GENERATE_LABELVALUES):   UB=118.57;
93653     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93654     +else
93655     +if DISPLAY_VAR='IMP_CLAGE' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_CLAGE' and _GROUP_ = 3 then do;
93656     +_LABEL_='118.57<= IMP_CLAGE< 179.57';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='118.57<= IMP_CLAGE< 179.57';
93657     +UB=179.57;
MPRINT(EM_GENERATE_LABELVALUES):   UB=179.57;
93658     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93659     +else
93660     +if DISPLAY_VAR='IMP_CLAGE' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_CLAGE' and _GROUP_ = 4 then do;
93661     +_LABEL_='179.57<= IMP_CLAGE< 226.86';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='179.57<= IMP_CLAGE< 226.86';
93662     +UB=226.86;
MPRINT(EM_GENERATE_LABELVALUES):   UB=226.86;
93663     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93664     +else
93665     +if DISPLAY_VAR='IMP_CLAGE' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_CLAGE' and _GROUP_ = 5 then do;
93666     +_LABEL_='226.86<= IMP_CLAGE';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='226.86<= IMP_CLAGE';
93667     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93668     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93669     +
93670     +if DISPLAY_VAR='IMP_CLNO' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_CLNO' and _GROUP_ = 2 then do;
93671     +_LABEL_='IMP_CLNO< 15';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='IMP_CLNO< 15';
93672     +UB=15;
MPRINT(EM_GENERATE_LABELVALUES):   UB=15;
93673     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93674     +else
93675     +if DISPLAY_VAR='IMP_CLNO' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_CLNO' and _GROUP_ = 3 then do;
93676     +_LABEL_='15<= IMP_CLNO< 21';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='15<= IMP_CLNO< 21';
93677     +UB=21;
MPRINT(EM_GENERATE_LABELVALUES):   UB=21;
93678     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93679     +else
93680     +if DISPLAY_VAR='IMP_CLNO' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_CLNO' and _GROUP_ = 4 then do;
93681     +_LABEL_='21<= IMP_CLNO< 26';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='21<= IMP_CLNO< 26';
93682     +UB=26;
MPRINT(EM_GENERATE_LABELVALUES):   UB=26;
93683     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93684     +else
93685     +if DISPLAY_VAR='IMP_CLNO' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_CLNO' and _GROUP_ = 5 then do;
93686     +_LABEL_='26<= IMP_CLNO';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='26<= IMP_CLNO';
93687     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93688     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93689     +
93690     +if DISPLAY_VAR='IMP_DEBTINC' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_DEBTINC' and _GROUP_ = 2 then do;
93691     +_LABEL_='IMP_DEBTINC< 30.4';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='IMP_DEBTINC< 30.4';
93692     +UB=30.4;
MPRINT(EM_GENERATE_LABELVALUES):   UB=30.4;
93693     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93694     +else
93695     +if DISPLAY_VAR='IMP_DEBTINC' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_DEBTINC' and _GROUP_ = 3 then do;
93696     +_LABEL_='30.4<= IMP_DEBTINC< 33.79';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='30.4<= IMP_DEBTINC< 33.79';
93697     +UB=33.79;
MPRINT(EM_GENERATE_LABELVALUES):   UB=33.79;
93698     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93699     +else
93700     +if DISPLAY_VAR='IMP_DEBTINC' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_DEBTINC' and _GROUP_ = 4 then do;
93701     +_LABEL_='33.79<= IMP_DEBTINC< 38.07';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='33.79<= IMP_DEBTINC< 38.07';
93702     +UB=38.07;
MPRINT(EM_GENERATE_LABELVALUES):   UB=38.07;
93703     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93704     +else
93705     +if DISPLAY_VAR='IMP_DEBTINC' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_DEBTINC' and _GROUP_ = 5 then do;
93706     +_LABEL_='38.07<= IMP_DEBTINC';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='38.07<= IMP_DEBTINC';
93707     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93708     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93709     +
93710     +if DISPLAY_VAR='IMP_MORTDUE' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_MORTDUE' and _GROUP_ = 2 then do;
93711     +_LABEL_='IMP_MORTDUE< 48273';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='IMP_MORTDUE< 48273';
93712     +UB=48273;
MPRINT(EM_GENERATE_LABELVALUES):   UB=48273;
93713     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93714     +else
93715     +if DISPLAY_VAR='IMP_MORTDUE' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_MORTDUE' and _GROUP_ = 3 then do;
93716     +_LABEL_='48273<= IMP_MORTDUE< 68959';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='48273<= IMP_MORTDUE< 68959';
93717     +UB=68959;
MPRINT(EM_GENERATE_LABELVALUES):   UB=68959;
93718     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93719     +else
93720     +if DISPLAY_VAR='IMP_MORTDUE' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_MORTDUE' and _GROUP_ = 4 then do;
93721     +_LABEL_='68959<= IMP_MORTDUE< 89226';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='68959<= IMP_MORTDUE< 89226';
93722     +UB=89226;
MPRINT(EM_GENERATE_LABELVALUES):   UB=89226;
93723     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93724     +else
93725     +if DISPLAY_VAR='IMP_MORTDUE' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_MORTDUE' and _GROUP_ = 5 then do;
93726     +_LABEL_='89226<= IMP_MORTDUE';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='89226<= IMP_MORTDUE';
93727     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93728     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93729     +
93730     +if DISPLAY_VAR='IMP_NINQ' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_NINQ' and _GROUP_ = 2 then do;
93731     +_LABEL_='IMP_NINQ< 0';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='IMP_NINQ< 0';
93732     +UB=0;
MPRINT(EM_GENERATE_LABELVALUES):   UB=0;
93733     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93734     +else
93735     +if DISPLAY_VAR='IMP_NINQ' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_NINQ' and _GROUP_ = 3 then do;
93736     +_LABEL_='0<= IMP_NINQ< 1';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='0<= IMP_NINQ< 1';
93737     +UB=1;
MPRINT(EM_GENERATE_LABELVALUES):   UB=1;
93738     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93739     +else
93740     +if DISPLAY_VAR='IMP_NINQ' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_NINQ' and _GROUP_ = 4 then do;
93741     +_LABEL_='1<= IMP_NINQ< 2';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='1<= IMP_NINQ< 2';
93742     +UB=2;
MPRINT(EM_GENERATE_LABELVALUES):   UB=2;
93743     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93744     +else
93745     +if DISPLAY_VAR='IMP_NINQ' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_NINQ' and _GROUP_ = 5 then do;
93746     +_LABEL_='2<= IMP_NINQ';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='2<= IMP_NINQ';
93747     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93748     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93749     +
93750     +if DISPLAY_VAR='IMP_VALUE' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_VALUE' and _GROUP_ = 2 then do;
93751     +_LABEL_='IMP_VALUE< 66692';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='IMP_VALUE< 66692';
93752     +UB=66692;
MPRINT(EM_GENERATE_LABELVALUES):   UB=66692;
93753     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93754     +else
93755     +if DISPLAY_VAR='IMP_VALUE' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_VALUE' and _GROUP_ = 3 then do;
93756     +_LABEL_='66692<= IMP_VALUE< 90000';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='66692<= IMP_VALUE< 90000';
93757     +UB=90000;
MPRINT(EM_GENERATE_LABELVALUES):   UB=90000;
93758     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93759     +else
93760     +if DISPLAY_VAR='IMP_VALUE' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_VALUE' and _GROUP_ = 4 then do;
93761     +_LABEL_='90000<= IMP_VALUE< 120724';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='90000<= IMP_VALUE< 120724';
93762     +UB=120724;
MPRINT(EM_GENERATE_LABELVALUES):   UB=120724;
93763     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93764     +else
93765     +if DISPLAY_VAR='IMP_VALUE' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_VALUE' and _GROUP_ = 5 then do;
93766     +_LABEL_='120724<= IMP_VALUE';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='120724<= IMP_VALUE';
93767     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93768     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93769     +
93770     +if DISPLAY_VAR='INDELINQ' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='INDELINQ' and _GROUP_ = 2 then do;
93771     +_LABEL_='INDELINQ< 0';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='INDELINQ< 0';
93772     +UB=0;
MPRINT(EM_GENERATE_LABELVALUES):   UB=0;
93773     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93774     +else
93775     +if DISPLAY_VAR='INDELINQ' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='INDELINQ' and _GROUP_ = 3 then do;
93776     +_LABEL_='0<= INDELINQ< 1';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='0<= INDELINQ< 1';
93777     +UB=1;
MPRINT(EM_GENERATE_LABELVALUES):   UB=1;
93778     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93779     +else
93780     +if DISPLAY_VAR='INDELINQ' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='INDELINQ' and _GROUP_ = 4 then do;
93781     +_LABEL_='1<= INDELINQ';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='1<= INDELINQ';
93782     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93783     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93784     +
93785     +if DISPLAY_VAR='INDEROG' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='INDEROG' and _GROUP_ = 2 then do;
93786     +_LABEL_='INDEROG< 0';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='INDEROG< 0';
93787     +UB=0;
MPRINT(EM_GENERATE_LABELVALUES):   UB=0;
93788     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93789     +else
93790     +if DISPLAY_VAR='INDEROG' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='INDEROG' and _GROUP_ = 3 then do;
93791     +_LABEL_='0<= INDEROG';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='0<= INDEROG';
93792     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93793     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93794     +
93795     +if DISPLAY_VAR='LOAN' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='LOAN' and _GROUP_ = 2 then do;
93796     +_LABEL_='LOAN< 11100';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='LOAN< 11100';
93797     +UB=11100;
MPRINT(EM_GENERATE_LABELVALUES):   UB=11100;
93798     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93799     +else
93800     +if DISPLAY_VAR='LOAN' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='LOAN' and _GROUP_ = 3 then do;
93801     +_LABEL_='11100<= LOAN< 16200';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='11100<= LOAN< 16200';
93802     +UB=16200;
MPRINT(EM_GENERATE_LABELVALUES):   UB=16200;
93803     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93804     +else
93805     +if DISPLAY_VAR='LOAN' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='LOAN' and _GROUP_ = 4 then do;
93806     +_LABEL_='16200<= LOAN< 23200';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='16200<= LOAN< 23200';
93807     +UB=23200;
MPRINT(EM_GENERATE_LABELVALUES):   UB=23200;
93808     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93809     +else
93810     +if DISPLAY_VAR='LOAN' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='LOAN' and _GROUP_ = 5 then do;
93811     +_LABEL_='23200<= LOAN';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='23200<= LOAN';
93812     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93813     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93814     +
93815     +if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 2 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 2 then do;
93816     +_LABEL_='LOG_yoj< 1.39';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='LOG_yoj< 1.39';
93817     +UB=1.39;
MPRINT(EM_GENERATE_LABELVALUES):   UB=1.39;
93818     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93819     +else
93820     +if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 3 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 3 then do;
93821     +_LABEL_='1.39<= LOG_yoj< 2.18';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='1.39<= LOG_yoj< 2.18';
93822     +UB=2.18;
MPRINT(EM_GENERATE_LABELVALUES):   UB=2.18;
93823     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93824     +else
93825     +if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 4 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 4 then do;
93826     +_LABEL_='2.18<= LOG_yoj< 2.56';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='2.18<= LOG_yoj< 2.56';
93827     +UB=2.56;
MPRINT(EM_GENERATE_LABELVALUES):   UB=2.56;
93828     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93829     +else
93830     +if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 5 then do;
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='LOG_yoj' and _GROUP_ = 5 then do;
93831     +_LABEL_='2.56<= LOG_yoj';
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_='2.56<= LOG_yoj';
93832     +UB=.;
MPRINT(EM_GENERATE_LABELVALUES):   UB=.;
93833     +end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
93834     +
93835     +if DISPLAY_VAR='IMP_JOB' and _GROUP_ = 2 then
93836     +_LABEL_='OTHER';
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_JOB' and _GROUP_ = 2 then
_LABEL_='OTHER';
93837     +else
93838     +if DISPLAY_VAR='IMP_JOB' and _GROUP_ = 3 then
93839     +_LABEL_='PROFEXE';
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_JOB' and _GROUP_ = 3 then
_LABEL_='PROFEXE';
93840     +else
93841     +if DISPLAY_VAR='IMP_JOB' and _GROUP_ = 4 then
93842     +_LABEL_='OFFICE';
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_JOB' and _GROUP_ = 4 then
_LABEL_='OFFICE';
93843     +else
93844     +if DISPLAY_VAR='IMP_JOB' and _GROUP_ = 5 then
93845     +_LABEL_='MGR';
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_JOB' and _GROUP_ = 5 then
_LABEL_='MGR';
93846     +else
93847     +if DISPLAY_VAR='IMP_JOB' and _GROUP_ = 6 then
93848     +_LABEL_='SELF';
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_JOB' and _GROUP_ = 6 then
_LABEL_='SELF';
93849     +else
93850     +if DISPLAY_VAR='IMP_JOB' and _GROUP_ = 7 then
93851     +_LABEL_='SALES';
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_JOB' and _GROUP_ = 7 then
_LABEL_='SALES';
93852     +
93853     +if DISPLAY_VAR='IMP_REASON' and _GROUP_ = 2 then
93854     +_LABEL_='DEBTCON';
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR='IMP_REASON' and _GROUP_ = 2 then
_LABEL_='DEBTCON';
93855     +else
93856     +if DISPLAY_VAR='IMP_REASON' and _GROUP_ = 3 then
93857     +_LABEL_='HOMEIMP';
MPRINT(EM_GENERATE_LABELVALUES):   else if DISPLAY_VAR='IMP_REASON' and _GROUP_ = 3 then
_LABEL_='HOMEIMP';
NOTE: %INCLUDE (level 1) ending.
MPRINT(EM_GENERATE_LABELVALUES):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_COARSE.
NOTE: The data set EMWS1.BINNING_COARSE has 57 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
 
 
MPRINT(EM_GENERATE_LABELVALUES):   *filename Y;
MPRINT(EM_GENERATE_LABELVALUES):   data EMWS1.BINNING_COARSE;
MPRINT(EM_GENERATE_LABELVALUES):   set EMWS1.BINNING_COARSE;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR = "IMP_CLAGE" and _GROUP_ = 1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if _LABEL_ eq '' then do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = "Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = strip(_LABEL_)!!", Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR = "IMP_CLNO" and _GROUP_ = 1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if _LABEL_ eq '' then do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = "Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = strip(_LABEL_)!!", Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR = "IMP_DEBTINC" and _GROUP_ = 1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if _LABEL_ eq '' then do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = "Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = strip(_LABEL_)!!", Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR = "IMP_JOB" and _GROUP_ = 1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if _LABEL_ eq '' then do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = "Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = strip(_LABEL_)!!", Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR = "IMP_MORTDUE" and _GROUP_ = 1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if _LABEL_ eq '' then do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = "Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = strip(_LABEL_)!!", Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR = "IMP_NINQ" and _GROUP_ = 1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if _LABEL_ eq '' then do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = "Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = strip(_LABEL_)!!", Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR = "IMP_REASON" and _GROUP_ = 1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if _LABEL_ eq '' then do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = "Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = strip(_LABEL_)!!", Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR = "IMP_VALUE" and _GROUP_ = 1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if _LABEL_ eq '' then do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = "Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = strip(_LABEL_)!!", Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR = "INDELINQ" and _GROUP_ = 1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if _LABEL_ eq '' then do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = "Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = strip(_LABEL_)!!", Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR = "INDEROG" and _GROUP_ = 1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if _LABEL_ eq '' then do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = "Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = strip(_LABEL_)!!", Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR = "LOAN" and _GROUP_ = 1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if _LABEL_ eq '' then do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = "Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = strip(_LABEL_)!!", Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   if DISPLAY_VAR = "LOG_yoj" and _GROUP_ = 1 then do;
MPRINT(EM_GENERATE_LABELVALUES):   if _LABEL_ eq '' then do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = "Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   else do;
MPRINT(EM_GENERATE_LABELVALUES):   _LABEL_ = strip(_LABEL_)!!", Missing";
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   end;
MPRINT(EM_GENERATE_LABELVALUES):   drop ub;
MPRINT(EM_GENERATE_LABELVALUES):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_COARSE.
NOTE: The data set EMWS1.BINNING_COARSE has 57 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(EM_GENERATE_LABELVALUES):   proc datasets library=work nolist;
MPRINT(EM_GENERATE_LABELVALUES):   delete class temp temp_missing;
MPRINT(EM_GENERATE_LABELVALUES):   run;
 
NOTE: Deleting WORK.CLASS (memtype=DATA).
NOTE: Deleting WORK.TEMP (memtype=DATA).
NOTE: Deleting WORK.TEMP_MISSING (memtype=DATA).
MPRINT(EM_GENERATE_LABELVALUES):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
 
MPRINT(TRAIN):  ;
MPRINT(TRAIN):   filename Y;
NOTE: Fileref Y has been deassigned.
MPRINT(EM_MODEL):   data WORK.EM_USER_MODEL;
MPRINT(EM_MODEL):   length DATA $65 TARGET $32 PREDICTED ASSESS DECSCORECODE FITSTATISTICS
CLASSIFICATION RESIDUALS $1;
MPRINT(EM_MODEL):   data = "";
MPRINT(EM_MODEL):   target = "BAD";
MPRINT(EM_MODEL):   predicted = "Y";
MPRINT(EM_MODEL):   assess = "N";
MPRINT(EM_MODEL):   decscorecode = "N";
MPRINT(EM_MODEL):   fitstatistics = "N";
MPRINT(EM_MODEL):   classification = "N";
MPRINT(EM_MODEL):   residuals = "N";
MPRINT(EM_MODEL):   run;
 
NOTE: The data set WORK.EM_USER_MODEL has 1 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(TRAIN):  ;
MPRINT(EM_REPORT):   data WORK.EM_USER_REPORT;
MPRINT(EM_REPORT):   retain id 0;
MPRINT(EM_REPORT):   id + 1;
MPRINT(EM_REPORT):   length VIEW 8 NAME $32 VALUE $400;
MPRINT(EM_REPORT):   NAME = "KEY";
MPRINT(EM_REPORT):   VALUE = "COARSE";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "VIEWTYPE";
MPRINT(EM_REPORT):   VALUE = "DATA";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "AUTODISPLAY";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SPK";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "COMPARE";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LOCALIZE";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZEROWX";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZEROWY";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZECOLX";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZECOLY";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NROWS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NCOLS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISCRETEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISCRETEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LATTICEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LATTICEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LATTICETYPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ABSOLUTEVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SORTORDER";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SORTORDERY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ORIENTATION";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "METHOD";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DIRECTION";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "BYSET";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "RENDERMODE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DESCRIPTION";
MPRINT(EM_REPORT):   VALUE = "EVENTRATESTAT";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "X";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EXCLUDEVARS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Z";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YVARS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FREQVARS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "AXIS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FREQ";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "GROUP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SUBGROUP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "BLOCK";
MPRINT(EM_REPORT):   VALUE = "MODEL";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "COLOR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "COLORINDEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TIPTEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TOOLTIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "REPORTID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "IDVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SIZE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "VALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "VIEWS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "PARENT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODETEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ABOVETEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "BELOWTEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODESIZE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "STATS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "CLASSDIST";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "INTDIST";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FOLDER";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YPLOTTYPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XREF";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XREF2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YREF";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2REF";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YREF2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2REF2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "GROUPINDEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "JOIN";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XEXCLUDE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FREQEXCLUDE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YEXCLUDE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NAME";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "HEIGHT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "WIDTH";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XAXISLABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2AXISLABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YAXISLABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISPLAYXLABEL";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISPLAYYLABEL";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "CHOICETEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SEGMENTVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LOWERBAND";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "UPPERBAND";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YLINE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKKEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODEKEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODEID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODEVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODECOLOR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODESHAPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODESHAPEVAR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODELABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODETIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKFROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKTO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKCOLOR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKWIDTH";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKTIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XFROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XTO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YFROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YTO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "MATRIXVAR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "RESPONSE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SERIES";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DESCARG";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SLIDER";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "MarkerSize";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Marker";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y1";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y3";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y4";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y5";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y6";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y7";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y8";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y9";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y10";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y11";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y12";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y13";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y14";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y15";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y16";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TITLE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LEGEND";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LEGENDTITLE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SHAPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "METHOD";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NOBINMISS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.4850922429399;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   run;
 
NOTE: The data set WORK.EM_USER_REPORT has 132 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.12 seconds
      cpu time            0.12 seconds
 
 
MPRINT(TRAIN):  ;
MPRINT(MAIN):  ;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * End TRAIN: BINNING;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
93858      *------------------------------------------------------------*;
93859      * End TRAIN: BINNING;
93860      *------------------------------------------------------------*;
93861
 
93862      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
93863      * Close any missing semi colons;
MPRINT(EM_DIAGRAM):   * Close any missing semi colons;
93864      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
93865      ;
MPRINT(EM_DIAGRAM):   ;
93866      ;
MPRINT(EM_DIAGRAM):   ;
93867      ;
MPRINT(EM_DIAGRAM):   ;
93868      ;
MPRINT(EM_DIAGRAM):   ;
93869      quit;
MPRINT(EM_DIAGRAM):   quit;
93870      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
93871      * Close any unbalanced quotes;
MPRINT(EM_DIAGRAM):   * Close any unbalanced quotes;
93872      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
93873      /*; *"; *'; */
93874      ;
MPRINT(EM_DIAGRAM):   ;
93875      run;
MPRINT(EM_DIAGRAM):   run;
93876      quit;
MPRINT(EM_DIAGRAM):   quit;
93877      /* Reset EM Options */
93878      options formchar="|----|+|---+=|-/\<>*";
MPRINT(EM_DIAGRAM):   options formchar="|----|+|---+=|-/\<>*";
93879      options nocenter ls=256 ps=10000;
MPRINT(EM_DIAGRAM):   options nocenter ls=256 ps=10000;
93880      goptions reset=all device=GIF NODISPLAY;
MPRINT(EM_DIAGRAM):   goptions reset=all device=GIF NODISPLAY;
93881      proc sort data=WORK.EM_USER_REPORT;
MPRINT(EM_DIAGRAM):    proc sort data=WORK.EM_USER_REPORT;
93882      by ID VIEW;
MPRINT(EM_DIAGRAM):   by ID VIEW;
93883      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 132 observations read from the data set WORK.EM_USER_REPORT.
NOTE: The data set WORK.EM_USER_REPORT has 132 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):    proc printto;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "November 04, 2015" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "07:40:43" );
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Score Log";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
*------------------------------------------------------------*
* Score Log
Date:                November 04, 2015
Time:                07:40:43
*------------------------------------------------------------*
MPRINT(EM_DIAGRAM):    filename O19VA2VD "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\EMSCORE.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   proc printto print=O19VA2VD new;
MPRINT(EM_DIAGRAM):   run;
93985      %let EMEXCEPTIONSTRING=;
93986      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
93987      * SCORE: BINNING;
MPRINT(EM_DIAGRAM):   * SCORE: BINNING;
93988      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
93989      %let EM_ACTION = SCORE;
93990      %let syscc = 0;
93991      %macro main;
93992
93993        filename temp catalog 'sashelp.emmdfy.binning_macros.source';
93994        %include temp;
93995        filename temp;
93996
93997        %setProperties;
93998
93999        %if %upcase(&EM_ACTION) = CREATE %then %do;
94000          filename temp catalog 'sashelp.emmdfy.binning_create.source';
94001          %include temp;
94002          filename temp;
94003
94004          %create;
94005        %end;
94006
94007         %else
94008         %if %upcase(&EM_ACTION) = TRAIN %then %do;
94009
94010             filename temp catalog 'sashelp.emmdfy.binning_train.source';
94011             %include temp;
94012             filename temp;
94013             %train;
94014         %end;
94015
94016        %else
94017        %if %upcase(&EM_ACTION) = SCORE %then %do;
94018          filename temp catalog 'sashelp.emmdfy.binning_score.source';
94019          %include temp;
94020          filename temp;
94021
94022          %score;
94023
94024        %end;
94025
94026        %else
94027        %if %upcase(&EM_ACTION) = REPORT %then %do;
94028
94029             filename temp catalog 'sashelp.emmdfy.binning_report.source';
94030             %include temp;
94031             filename temp;
94032
94033             %report;
94034         %end;
94035
94036         %doendm:
94037      %mend main;
94038
94039      %main;
MPRINT(EM_DIAGRAM):
MPRINT(MAIN):   filename temp catalog 'sashelp.emmdfy.binning_macros.source';
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMMDFY.BINNING_MACROS.SOURCE.
94040     +
94041     +%macro SetProperties;
94042     +
94043     +     /* IGN options */
94044     +     %em_checkmacro(name=EM_PROPERTY_APPLYLEVELRULE, value=N, global=Y);
94045     +     %em_checkmacro(name=EM_PROPERTY_BINMETHOD,  value=QUANTILE, global=Y);
94046     +     %em_checkmacro(name=EM_PROPERTY_NUMBINS,    value=4, global=Y);
94047     +
94048     +     %em_checkmacro(name=EM_PROPERTY_MISSINGASLEVEL, value=Y, global=Y);
94049     +     %em_checkmacro(name=EM_PROPERTY_PRECISION,    value=2, global=Y);
94050     +     %em_checkmacro(name=EM_PROPERTY_CREATEGROUPING, value=N, global=Y);
94051     +     %em_checkmacro(name=EM_PROPERTY_CREATEMETHOD, value=OVERWRITE, global=Y);
94052     +     %em_checkmacro(name=EM_PROPERTY_IMPORTGROUPING, value=N, global=Y);
94053     +     %em_checkmacro(name=EM_PROPERTY_IMPORTDATA, value=, global=Y);
94054     +     %em_checkmacro(name=EM_PROPERTY_FREEZE, value=N, global=Y);
94055     +     %em_checkmacro(name=EM_PROPERTY_VARSELMETHOD, value=GINI, global=Y);
94056     +     %em_checkmacro(name=EM_PROPERTY_GINICUTOFF,   value=20.0, global=Y);
94057     +     %em_checkmacro(name=EM_PROPERTY_GRPMSMNT,     value=ORDINAL, global=Y);
94058     +     %em_checkmacro(name=EM_PROPERTY_MAXVAR,       value=10, global=Y);
94059     +     %em_checkmacro(name=EM_PROPERTY_CLASSGROUPRARE, value=Y, global=Y);
94060     +     %em_checkmacro(name=EM_PROPERTY_GROUPCUTOFF,    value=0.5, global=Y);
94061     +     %em_checkmacro(name=EM_PROPERTY_GROUPMISSING,   value=N, global=Y);
94062     +
94063     +     %em_checkmacro(name=EM_PROPERTY_INTTARGETMETHOD, value=CUTMEAN, global=Y);
94064     +     %em_checkmacro(name=EM_PROPERTY_USERCUTVALUE, value=0.2, global=Y);
94065     +     %em_checkmacro(name=EM_PROPERTY_RejectIntTarget, value=N, global=Y);
94066     +
94067     +
94068     +%mend SetProperties;
94069     +%macro appendfiles(fileref1, fileref2);
94070     +     data _null_;
94071     +       length c $256;
94072     +       fid1=fopen("&fileref1",'A');
94073     +       fid2=fopen("&fileref2",'I');
94074     +       cval = finfo(fid2,'lrecl');
94075     +       put cval= fid1= fid2=;
94076     +       if (fid2 > 0) then
94077     +         do while(fread(fid2)=0);
94078     +           rc = fget(fid2,c,256);
94079     +           _msg_=sysmsg();
94080     +           /* put rc= c= _msg_=; */
94081     +           rc = fput(fid1,strip(c));
94082     +           rc = fwrite(fid1);
94083     +         end;
94084     +         _msg_=sysmsg();
94085     +         put _msg_=;
94086     +       rc = fclose(fid1);
94087     +       rc = fclose(fid2);
94088     +     run;
94089     +%mend appendfiles;
94090     +
94091     +%macro buildOptScoreCode;
94092     +
94093     +    %em_register(key=BINCODE, type=FOLDER);
94094     +
94095     +    filename x catalog 'sashelp.emutil.em_deldir.source';
94096     +    %inc x;
94097     +    filename x;
94098     +    %delDir(folder=%nrbquote(&em_user_bincode));
94099     +
94100     +    data _null_; length rc $200;
94101     +       rc = dcreate('BINCODE', "&EM_NODEDIR");
94102     +    run;
94103     +
94104     +    %if ^%sysfunc(exist(class_nosv)) %then %goto doendu;
94105     +
94106     +    %let dsid = %sysfunc(open(class_nosv));
94107     +    %let nameNum    = %sysfunc(varnum(&dsid, DISPLAY_VAR));
94108     +    %let grpnameNum = %sysfunc(varnum(&dsid, _grp_variable_));
94109     +
94110     +    %let oldname=;
94111     +    %do %while(^%sysfunc(fetch(&dsid)));
94112     +        %let name    = %sysfunc(getvarc(&dsid, &nameNum));
94113     +        %let grpname = %sysfunc(getvarc(&dsid, &grpnameNum));
94114     +
94115     +        %if &name ne &oldname %then %do;
94116     +             filename _F1 "&em_user_bincode&em_dsep.&grpname..sas" MOD;
94117     +             data _null_;
94118     +                length string $200 flag endflag 8;
94119     +                retain string flag endflag;
94120     +                set class_nosv end=eof;
94121     +                where DISPLAY_VAR ="&name";
94122     +                by _variable_ _group_;
94123     +                file _F1;
94124     +                index = kindex(_variable_, "BIN_");
94125     +                if index gt 0 then do;
94126     +                   if first._variable_ then do;
94127     +                      put ' ';
94128     +                      put "&EM_CODEBAR;";
94129     +                      string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
94130     +                      put string;
94131     +                      put "&EM_CODEBAR;";
94132     +
94133     +                      if origLabel ne "" then do;
94134     +                            string = 'LABEL '!!strip(_grp_variable_)!!' = ';
94135     +                            put string;
94136     +                            string = tranwrd(origLabel,"'","''");
94137     +                            string = "'Grouped: "!!%nrbquote(strip(substr(string, 1,188)))!!"';";
94138     +                            put string;
94139     +                      end;
94140     +                      else do;
94141     +                             string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!%nrbquote(strip(DISPLAY_VAR))!!'";';
94142     +                             put string;
94143     +                      end;
94144     +
94145     +                      put ' ';
94146     +
94147     +                      string =  "if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
94148     +                      put string;
94149     +                      string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
94150     +                      put string;
94151     +                      put "end;";
94152     +                      string = "else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
94153     +                      put string;
94154     +                   end;
94155     +                   if first._group_ then do;
94156     +                      flag = 0;
94157     +                      endflag = 1;
94158     +                      if ^first._variable_ then do;
94159     +                         put "else";
94160     +                      end;
94161     +                      if LB ne . then do;
94162     +                         string = "if "!!strip(LB)!!" <= "!!strip(DISPLAY_VAR);
94163     +                      end;
94164     +                      else do;
94165     +                         flag = 1;
94166     +                         string = "if";
94167     +                      end;
94168     +                   end;
94169     +                   if last._Group_ then do;
94170     +                      if UB ne . then do;
94171     +                        if flag ne 1 then do;
94172     +                          string = strip(string)!!" AND "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
94173     +                        end;
94174     +                        else do;
94175     +                          string = "if "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
94176     +                        end;
94177     +                      end;
94178     +                      else do;
94179     +                         if flag=1 then do;
94180     +                            string = strip(DISPLAY_VAR) ;
94181     +                            string = strip(string)!!'='!!strip(_split_Value_)!!" then do;";
94182     +                            endflag=0;
94183     +                            string="";
94184     +                         end;
94185     +                         else do;
94186     +                            string = strip(string)!!" then do;";
94187     +                         end;
94188     +                      end;
94189     +                      put string;
94190     +                      string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
94191     +                      put string;
94192     +                      if endflag eq 1 then do;
94193     +                        put "end;";
94194     +                      end;
94195     +                   end;
94196     +                   if last._variable_ then do;
94197     +                     string = "end;";
94198     +                     put string;
94199     +                   end;
94200     +
94201     +                end;
94202     +                else do;
94203     +                   _split_value_ = tranwrd(_split_value_,"'","''");
94204     +                   if first._group_ then do;
94205     +                      flag=0;
94206     +                      if ^first._variable_ then
94207     +                         put 'else';
94208     +                      else do;
94209     +                         put ' ';
94210     +                         put "&EM_CODEBAR;";
94211     +                         string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
94212     +                         put string;
94213     +                         put "&EM_CODEBAR;";
94214     +
94215     +                         if origLabel ne "" then do;
94216     +                               string = 'LABEL '!!strip(_grp_variable_)!!' = ';
94217     +                               put string;
94218     +                               string = tranwrd(origLabel,"'","''");
94219     +                               string = "'Grouped: "!!%nrbquote(strip(substr(string, 1,188)))!!"';";
94220     +                               put string;
94221     +                         end;
94222     +                         else do;
94223     +                               string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!%nrbquote(strip(DISPLAY_VAR))!!'";';
94224     +                               put string;
94225     +                         end;
94226     +
94227     +                         put ' ';
94228     +
94229     +                         if format ne '' then do;
94230     +                            if first._variable_ then do;
94231     +                               string = "_UFormat = put("!!strip(DISPLAY_VAR)!!","!!strip(format)!!");";
94232     +                               put string;
94233     +                               string = '%dmnormip(_UFormat);';
94234     +                               put string;
94235     +
94236     +                               string ="if MISSING(_UFORMAT) then do;";
94237     +                               put string;
94238     +                               string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
94239     +                               put string;
94240     +                               put "end;";
94241     +
94242     +                               string="else if NOT MISSING(_UFORMAT) then do;";
94243     +                               put string;
94244     +
94245     +                            end;
94246     +                         end;
94247     +                         else do;
94248     +                            if type = 'N' then do;
94249     +                              string ="if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
94250     +                              put string;
94251     +                              string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
94252     +                              put string;
94253     +                              put "end;";
94254     +
94255     +                              string="else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
94256     +                              put string;
94257     +                            end;
94258     +                            else if type='C' then do;
94259     +                              string = "_UFormat = "||strip(DISPLAY_VAR)||";";
94260     +                              put string;
94261     +                              string = '%dmnormip(_UFormat);';
94262     +                              put string;
94263     +
94264     +                              string ="if MISSING(_UFORMAT) then do;";
94265     +                              put string;
94266     +                              string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
94267     +                              put string;
94268     +                              put "end;";
94269     +
94270     +                              string="else if NOT MISSING(_UFORMAT) then do;";
94271     +                              put string;
94272     +                              string = '%dmnormip(_UFormat);';
94273     +                              put string;
94274     +                           end;
94275     +                         end;
94276     +                      end;
94277     +                      if format ne '' OR type='C' then do;
94278     +                        string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
94279     +                      end;
94280     +                      else do;
94281     +                        string = "if ("!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
94282     +                      end;
94283     +                   end;
94284     +                   else do;
94285     +                      if flag ne 1 then do;
94286     +                       if format ne '' OR type='C' then do;
94287     +                         tempstring = strip(string)!!" OR _UFORMAT eq '"!!strip(_split_value_)!!"'";
94288     +                       end;
94289     +                       else do;
94290     +                         tempstring = strip(string)!!" OR "!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
94291     +                       end;
94292     +                         length = length(tempstring);
94293     +
94294     +                         if length < 195 then do;
94295     +                            string = tempstring;
94296     +                         end;
94297     +                         else do;
94298     +
94299     +                            string = strip(string);
94300     +                            put string;
94301     +                            string = ") then do;";
94302     +                            put string;
94303     +
94304     +                            string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
94305     +                            put string;
94306     +                            put "end;";
94307     +
94308     +                            put 'else';
94309     +                            if format ne '' OR type='C' then do;
94310     +                              string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
94311     +                            end;
94312     +                            else do;
94313     +                              string = "if "!!strip(DISPLAY_VAR)!!" eq ("!!strip(_split_value_);
94314     +                            end;
94315     +                         end;
94316     +                      end;
94317     +                   end;
94318     +
94319     +                   if last._group_ then do;
94320     +                      string = strip(string);
94321     +                      put string;
94322     +
94323     +                      string = ") then do;";
94324     +                      put string;
94325     +
94326     +                      string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
94327     +                      put string;
94328     +                      put "end;";
94329     +                   end;
94330     +
94331     +                   if last._variable_ then do;
94332     +                     put "else do;";
94333     +
94334     +                     string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
94335     +                     put string;
94336     +
94337     +                     put "end;";
94338     +                     put "end;";
94339     +                   end;
94340     +                end;
94341     +             run;
94342     +
94343     +             %let oldname = &name;
94344     +        %end;
94345     +    %end;
94346     +    %let dsid = %sysfunc(close(&dsid));
94347     +
94348     +    filename _F1 "&em_user_bincode&em_dsep._ALL_.sas";
94349     +    data _null_;
94350     +       file _F1;
94351     +       put "length _UFormat $200;";
94352     +       put "drop _UFormat;";
94353     +       put "_UFormat='';";
94354     +    run;
94355     +    filename _F1;
94356     +
94357     +   %em_register(key=EMSCOREVAR, type=DATA);
94358     +   %let scorevarDs = %scan(&em_user_emscorevar, 2, .);
94359     +   proc datasets lib=&em_lib nolist;
94360     +      delete &scorevarDs;
94361     +   run;
94362     +   quit;
94363     +
94364     +   %let filrf=mydir;
94365     +   %let rc=%sysfunc(filename(filrf,&em_user_bincode));
94366     +   %let did=%sysfunc(dopen(&filrf));
94367     +
94368     +   %if &did %then %do;  %PUT  did= &did;
94369     +       %let memcount=%sysfunc(dnum(&did));
94370     +       %if &memcount > 0 %then %do;
94371     +           data &em_user_emscorevar;
94372     +              length Name $32 formula $70 file $200;
94373     +              keep NAME Formula file;
94374     +              formula  = '';
94375     +           %if %sysfunc(fileexist(&em_user_bincode&em_dsep._ALL_.sas)) %then %do;
94376     +               name=''; file="BINCODE&em_dsep._ALL_.sas";
94377     +               output;
94378     +           %end;
94379     +           %do i=1 %to &memcount;
94380     +               %let name =%nrbquote(%sysfunc(dread(&did,&i)));
94381     +               %let newvar = %scan(&name, 1, .);
94382     +               %if "&newvar" ne "_ALL_" %then %do;
94383     +                   name = "&newvar"; file="BINCODE&em_dsep&name";
94384     +                   output;
94385     +               %end;
94386     +           %end;
94387     +
94388     +           run;
94389     +       %end;
94390     +       %let did = %sysfunc(dclose(&did));
94391     +  %end;
94392     +
94393     +   %doendu:
94394     +%mend buildOptScoreCode;
94395     +
94396     +
94397     +%macro buildScoreCode(flowCode, publishCode);
94398     +
94399     +
94400     +  filename x "&flowCode";
94401     +
94402     +  proc sort data=&EM_USER_SPLITVALS; by display_var _split_Value_; run;
94403     +  proc sort data=&EM_USER_BINMAPPINGS; by display_var bin; run;
94404     +  proc sort data=&EM_USER_coarse out=tempcoarse; by display_var _group_; run;
94405     +
94406     +  data temp;
94407     +    merge &EM_USER_SPLITVALS &EM_USER_BINMAPPINGS(rename=(BIN=_SPLIT_VALUE_ BIN_NAME=_VARIABLE_));
94408     +    by display_var _Split_value_;
94409     +     if upcase(_Split_value_) ne 'MISSING';
94410     +   run;
94411     +
94412     +   data temp_missing;
94413     +     merge &EM_USER_SPLITVALS(rename=(_GROUP_=MISSGRP)) &EM_USER_BINMAPPINGS(rename=(
94414     +          BIN=_SPLIT_VALUE_ BIN_NAME=_VARIABLE_));
94415     +     by display_var _Split_value_;
94416     +     if upcase(_Split_value_) eq 'MISSING';
94417     +     keep _variable_ display_var missgrp;
94418     +   run;
94419     +
94420     +   proc sort data=temp_missing; by display_var missgrp; run;
94421     +
94422     +   data temp_missing;
94423     +     merge temp_missing(in=_a) tempcoarse(rename=(_GROUP_=MISSGRP));
94424     +     by display_var missgrp;
94425     +     if ^_a then delete;
94426     +     keep _variable_ display_var missgrp ;
94427     +   run;
94428     +
94429     +   data temp;
94430     +     merge temp temp_missing;
94431     +     by display_var;
94432     +     if display_Var eq '' then delete;
94433     +    run;
94434     +
94435     +    /* pull in wtev values */
94436     +    proc sort data=&EM_USER_varmappings out=tempmappings; by _variable_; run;
94437     +    proc sort data=&EM_IMPORT_DATA_CMETA out=tempcmeta; by NAME; run;
94438     +    proc sort data=temp;  by display_var _group_; run;
94439     +
94440     +   data temp;
94441     +      merge temp tempcoarse(keep=display_var _group_  role) ;
94442     +      by display_var _group_;
94443     +    run;
94444     +
94445     +    data temp;
94446     +      merge temp tempmappings(rename=(_variable_ = display_var)) tempcmeta(keep=NAME FORMAT TYPE LABEL rename=(NAME=display_var LABEL=origLabel));
94447     +      by display_var;
94448     +
94449     +      if _group_ = . then delete;
94450     +      if _variable_ = '' then delete;
94451     +    run;
94452     +
94453     +    proc sort data=temp out=class;
94454     +       by _variable_ _group_ LB;
94455     +    run;
94456     +
94457     +    data _null_;
94458     +      file X;
94459     +
94460     +      put "length _UFormat $200;";
94461     +      put "drop _UFormat;";
94462     +      put "_UFormat='';";
94463     +    run;
94464     +
94465     +    data class_nosv;
94466     +      set class;
94467     +      if upcase(role)="INPUT";
94468     +    run;
94469     +
94470     +    data _null_;
94471     +       file X MOD;
94472     +       length string $200 flag endflag 8;
94473     +       retain string flag endflag;
94474     +       set class_nosv end=eof;
94475     +       by _variable_ _group_;
94476     +
94477     +       index = kindex(_variable_, "BIN_");
94478     +       if index gt 0 then do;
94479     +
94480     +         if first._variable_ then do;
94481     +            put ' ';
94482     +            put "&EM_CODEBAR;";
94483     +            string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
94484     +            put string;
94485     +            put "&EM_CODEBAR;";
94486     +
94487     +
94488     +            if origLabel ne "" then do;
94489     +              string = 'LABEL '!!strip(_grp_variable_)!!' = ';
94490     +              put string;
94491     +              string = tranwrd(origLabel,"'","''");
94492     +              string = "'Grouped: "!!%nrbquote(strip(substr(string, 1,188)))!!"';";
94493     +              put string;
94494     +            end;
94495     +            else do;
94496     +             string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!%nrbquote(strip(DISPLAY_VAR))!!'";';
94497     +             put string;
94498     +            end;
94499     +
94500     +            put ' ';
94501     +
94502     +            string =  "if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
94503     +            put string;
94504     +            string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
94505     +            put string;
94506     +            put "end;";
94507     +            string = "else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
94508     +            put string;
94509     +          end;
94510     +           if first._group_ then do;
94511     +              flag = 0;
94512     +              endflag = 1;
94513     +              if ^first._variable_ then do;
94514     +                put "else";
94515     +              end;
94516     +              if LB ne . then do;
94517     +                 string = "if "!!strip(LB)!!" <= "!!strip(DISPLAY_VAR);
94518     +              end;
94519     +              else do;
94520     +                 flag = 1;
94521     +                 string = "if";
94522     +              end;
94523     +
94524     +           end;
94525     +           if last._Group_ then do;
94526     +              if UB ne . then do;
94527     +                if flag ne 1 then do;
94528     +                  string = strip(string)!!" AND "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
94529     +                end;
94530     +                else do;
94531     +                  string = "if "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
94532     +                end;
94533     +              end;
94534     +              else do;
94535     +                 if flag=1 then do;
94536     +                   string = strip(DISPLAY_VAR) ;
94537     +                   string = strip(string)!!'='!!strip(_split_Value_)!!" then do;";
94538     +                   endflag = 0;
94539     +                   string="";
94540     +                 end;
94541     +                 else do;
94542     +                   string = strip(string)!!" then do;";
94543     +                 end;
94544     +              end;
94545     +              put string;
94546     +
94547     +              string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
94548     +              put string;
94549     +              if endflag eq 1 then do;
94550     +                put "end;";
94551     +              end;
94552     +           end;
94553     +           if last._variable_ then do;
94554     +             string = "end;";
94555     +             put string;
94556     +           end;
94557     +       end;
94558     +       else do;
94559     +           _split_value_ = tranwrd(_split_value_,"'","''");
94560     +           if first._group_ then do;
94561     +              flag=0;
94562     +              if ^first._variable_ then
94563     +                 put 'else';
94564     +              else do;
94565     +                 put ' ';
94566     +                 put "&EM_CODEBAR;";
94567     +                 string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
94568     +                 put string;
94569     +                 put "&EM_CODEBAR;";
94570     +
94571     +                 if origLabel ne "" then do;
94572     +                   string = 'LABEL '!!strip(_grp_variable_)!!' = ';
94573     +                   put string;
94574     +                   string = tranwrd(origLabel,"'","''");
94575     +                   string = "'Grouped: "!!%nrbquote(strip(substr(string, 1,188)))!!"';";
94576     +                   put string;
94577     +                 end;
94578     +                 else do;
94579     +                   string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!%nrbquote(strip(DISPLAY_VAR))!!'";';
94580     +                   put string;
94581     +                 end;
94582     +
94583     +                 put ' ';
94584     +
94585     +                if format ne '' then do;
94586     +                  if first._variable_ then do;
94587     +                    string = "_UFormat = put("!!strip(DISPLAY_VAR)!!","!!strip(format)!!");";
94588     +                    put string;
94589     +                    string = '%dmnormip(_UFormat);';
94590     +                    put string;
94591     +
94592     +                     string ="if MISSING(_UFORMAT) then do;";
94593     +                     put string;
94594     +                     string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
94595     +                     put string;
94596     +                     put "end;";
94597     +
94598     +                     string="else if NOT MISSING(_UFORMAT) then do;";
94599     +                     put string;
94600     +
94601     +                  end;
94602     +                end;
94603     +                else do;
94604     +                     if type = 'N' then do;
94605     +                       string ="if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
94606     +                       put string;
94607     +                       string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
94608     +                       put string;
94609     +                       put "end;";
94610     +
94611     +                       string="else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
94612     +                       put string;
94613     +
94614     +                     end;
94615     +                     else if type='C' then do;
94616     +                        string = "_UFormat = "||strip(DISPLAY_VAR)||";";
94617     +                        put string;
94618     +                        string = '%dmnormip(_UFormat);';
94619     +                        put string;
94620     +
94621     +                        string ="if MISSING(_UFORMAT) then do;";
94622     +                        put string;
94623     +                        string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
94624     +                        put string;
94625     +                        put "end;";
94626     +
94627     +                        string="else if NOT MISSING(_UFORMAT) then do;";
94628     +                        put string;
94629     +                        string = '%dmnormip(_UFormat);';
94630     +                        put string;
94631     +                    end;
94632     +                end;
94633     +              end;
94634     +              if format ne '' OR type='C' then do;
94635     +                string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
94636     +              end;
94637     +              else do;
94638     +                string = "if ("!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
94639     +              end;
94640     +           end;
94641     +           else do;
94642     +              if flag ne 1 then do;
94643     +                if format ne '' OR type='C' then do;
94644     +                  tempstring = strip(string)!!" OR _UFORMAT eq '"!!strip(_split_value_)!!"'";
94645     +                end;
94646     +                else do;
94647     +                  tempstring = strip(string)!!" OR "!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
94648     +                end;
94649     +                length = klength(tempstring);
94650     +
94651     +                if length < 195 then do;
94652     +                   string = tempstring;
94653     +                end;
94654     +                else do;
94655     +
94656     +                   string = strip(string);
94657     +                   put string;
94658     +                   string = ") then do;";
94659     +                   put string;
94660     +
94661     +                   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
94662     +                   put string;
94663     +                   put "end;";
94664     +
94665     +                 /*  string = strip(string)||",'...';"; */
94666     +
94667     +                   put 'else';
94668     +                   if format ne '' OR type='C' then do;
94669     +                     string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
94670     +                   end;
94671     +                   else do;
94672     +                     string = "if ("!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
94673     +                   end;
94674     +
94675     +
94676     +                end;
94677     +              end;
94678     +           end;
94679     +
94680     +           if last._group_ then do;
94681     +              string = strip(string);
94682     +              put string;
94683     +              string = ") then do;";
94684     +              put string;
94685     +
94686     +              string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
94687     +              put string;
94688     +              put "end;";
94689     +           end;
94690     +
94691     +           if last._variable_ then do;
94692     +             put "else do;";
94693     +
94694     +             string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
94695     +             put string;
94696     +
94697     +             put "end;";
94698     +             put "end;";
94699     +           end;
94700     +         *end;
94701     +       end;
94702     +    run;
94703     +
94704     +    /* generate PublishCode the same as flowscorecode */
94705     +    filename Y "&publishCode";
94706     +
94707     +    /* if publishCode already exists, wipe it out first */
94708     +    %if %sysfunc(fexist(Y)) eq 1 %then %do;
94709     +      %let rc = %sysfunc(fdelete(Y));
94710     +    %end;
94711     +
94712     +    %appendfiles(Y, X);
94713     +
94714     +    %if %EM_BINARY_TARGET= %then %do;
94715     +      %if %symexist(EM_NUM_INTERVAL_TARGET)=0 %then %do;
94716     +         %em_varMacro(name=EM_INTERVAL_TARGET, metadata=&EM_DATA_variableSet, where=%nrbquote(ROLE="TARGET" and LEVEL="INTERVAL" and (USE="Y" or USE="D")), nummacro=em_num_interval_Target);
94717     +      %end;
94718     +      %let ibn_inttarget=%EM_INTERVAL_TARGET;
94719     +      %let ibn_inttarget_orig = &ibn_inttarget;
94720     +
94721     +      %if %symexist(IGNBinTarget)=0 %then %do;
94722     +         %global ignbintarget ignfreqvar;
94723     +         filename temp catalog 'sashelp.emutil.em_getvarname.source';
94724     +         %include temp;
94725     +         filename temp;
94726     +         %getVarName(&EM_IMPORT_DATA, BIN_%substr(&ibn_inttarget,1,%sysfunc(min(%length(&ibn_inttarget),28))), IGNBinTarget);
94727     +
94728     +         %if &EM_PROPERTY_INTTARGETMETHOD = DUPFREQ %then %do;
94729     +            %getVarName(&EM_IMPORT_DATA, _FREQ_, ignfreqvar);
94730     +         %end;
94731     +      %end;
94732     +      %if &EM_PROPERTY_INTTARGETMETHOD = CUTMEAN %then %do;
94733     +         proc sql noprint;
94734     +            %if %EM_FREQ ne %then %do;
94735     +               select sum(&ibn_inttarget * %EM_FREQ) / sum(%EM_FREQ)
94736     +            %end;
94737     +            %else %do;
94738     +               select mean(&ibn_inttarget)
94739     +            %end;
94740     +            into :ignbincut trimmed from &EM_IMPORT_DATA;
94741     +         quit;
94742     +      %end;
94743     +
94744     +      %let dsid=%sysfunc(open(&EM_IMPORT_DATA,i));
94745     +      %if &dsid %then %do;
94746     +         %let tarlabel=%trim(%sysfunc(varlabel(&dsid,%sysfunc(varnum(&dsid,&ibn_inttarget)))));
94747     +         %let rc=%sysfunc(close(&dsid));
94748     +      %end;
94749     +      %if %length(&tarlabel)=0 %then %let tarlabel = &ibn_inttarget;
94750     +
94751     +      data _null_;
94752     +         file x mod;
94753     +         put ' ';
94754     +
94755     +         %if &EM_PROPERTY_INTTARGETMETHOD = CUTMEAN %then %do;
94756     +             put "&EM_CODEBAR;";
94757     +             %let note = Mean Cutoff Binary Transformation for Target;
94758     +             put "* &note;";
94759     +             put "&EM_CODEBAR;";
94760     +         %end;
94761     +         %else %if &EM_PROPERTY_INTTARGETMETHOD = CUTUSER %then %do;
94762     +             put "&EM_CODEBAR;";
94763     +             %let note = User-Specified Cutoff Binary Transformation for Target;
94764     +             put "* &note;";
94765     +             put "&EM_CODEBAR;";
94766     +             %let ignbincut = &EM_PROPERTY_USERCUTVALUE;
94767     +         %end;
94768     +         put "if &ibn_inttarget = . then &IGNBinTarget = .;";
94769     +         put "else do;";
94770     +         put "   if &ibn_inttarget > &ignbincut then &IGNBinTarget=1;";
94771     +         put "   else &IGNBinTarget=0;";
94772     +         put "end;";
94773     +
94774     +         put "label &IGNBinTarget = 'Binary: %nrbquote(%substr(&tarlabel,1,192))';";
94775     +      run;
94776     +
94777     +      filename deltaref "&EM_FILE_CDELTA_TRAIN";
94778     +
94779     +      %if &EM_PROPERTY_RejectIntTarget = Y %then %do;
94780     +
94781     +         data _null_;
94782     +            file deltaref;
94783     +            put "if name='&ibn_inttarget_orig' then role='REJECTED';";
94784     +            put "if name='&IGNBinTarget' then do;";
94785     +            put "   role='TARGET';";
94786     +            put "   level='BINARY';";
94787     +            put "end;";
94788     +         run;
94789     +
94790     +      %end;
94791     +      %else %do;
94792     +
94793     +         data _null_;
94794     +            file deltaref;
94795     +            put "if name='&ibn_inttarget_orig' then role='TARGET';";
94796     +            put "if name='&IGNBinTarget' then do;";
94797     +            put "   role='REJECTED';";
94798     +            put "   level='BINARY';";
94799     +            put "end;";
94800     +         run;
94801     +      %end;
94802     +
94803     +      filename deltaref;
94804     +
94805     +   %end;
94806     +
94807     +    filename X;
94808     +    filename Y;
94809     +
94810     +    %buildOptScoreCode;
94811     +
94812     +    proc datasets library=work nolist;
94813     +      delete class class_nosv temp temp_missing tempmappings tempcmeta;
94814     +    run;
94815     +    quit;
94816     +
94817     +%mend buildScoreCode;
94818     +
94819     +%macro buildMetaCode(DeltaCodeFile=);
94820     +
94821     +   /* set variable roles based on New Role column in the Results table */
94822     +   data _null_;
94823     +      file &DeltaCodeFile %if %length(%EM_BINARY_TARGET)=0 %then mod;;
94824     +      %let dsid = %sysfunc(open(&EM_USER_RESULTSTABLE));
94825     +      %if &dsid %then %do;
94826     +        %let obs = %sysfunc(fetch(&dsid));
94827     +        %let vnum = %sysfunc(VARNUM(&dsid, DISPLAY_VAR));
94828     +        %let rnum = %sysfunc(VARNUM(&dsid, _new_role_));
94829     +        %let ornum = %sysfunc(VARNUM(&dsid, _role_));
94830     +
94831     +        %do %while(&obs=0);
94832     +          %let inputname = %sysfunc(getvarc(&dsid, &vnum));
94833     +          %let role      = %upcase(%sysfunc(getvarc(&dsid, &rnum)));
94834     +          %let oldrole   = %upcase(%sysfunc(getvarc(&dsid, &ornum)));
94835     +
94836     +          /* retrieve grp and woe names from varmappings dataset */
94837     +          %let choice = _VARIABLE_ = "&inputname";
94838     +          %let cdsid = %sysfunc(open(&EM_USER_VARMAPPINGS(where=(&choice))));
94839     +          %let cobs = %sysfunc(fetchobs(&cdsid, 1));
94840     +          %let grpnum = %sysfunc(VARNUM(&cdsid, _GRP_VARIABLE_));
94841     +          %let grpname = %sysfunc(getvarc(&cdsid, &grpnum));
94842     +          %if &cdsid %then %let cdsid = %sysfunc(close(&cdsid));
94843     +
94844     +          put "if name = '&inputname' then role='REJECTED';";
94845     +          %if "&role" ne "DEFAULT" %then %do;
94846     +            put "if name = '&grpname' then role='&role';";
94847     +          %end;
94848     +          %else %do;
94849     +            put "if name = '&grpname' then role='&oldrole';";
94850     +          %end;
94851     +          put "if name = '&grpname' then level='&EM_PROPERTY_GRPMSMNT';";
94852     +
94853     +          %let obs = %sysfunc(fetch(&dsid));
94854     +        %end;
94855     +      %end;
94856     +      %if &dsid %then %let dsid = %sysfunc(close(&dsid));
94857     +   run;
94858     +
94859     +   /* drop all vars in the splitvals dataset that aren't present in the varmappings dataset */
94860     +   data _null_;
94861     +      file &DeltaCodeFile MOD;
94862     +
94863     +      %let sdsid = %sysfunc(open(&EM_USER_SPLITVALS));
94864     +      %if &sdsid %then %do;
94865     +        %let sobs = %sysfunc(fetch(&sdsid));
94866     +        %do %while(&sobs=0);
94867     +          %let varnum = %sysfunc(VARNUM(&sdsid, _VARIABLE_));
94868     +          %let checkname = %sysfunc(getvarc(&sdsid, &varnum));
94869     +          %let dispvarnum = %sysfunc(VARNUM(&sdsid, DISPLAY_VAR));
94870     +          %let displayvar = %sysfunc(getvarc(&sdsid, &dispvarnum));
94871     +
94872     +          %let checkgrp = GRP_&checkname;
94873     +          %let lenname = %length(&checkgrp);
94874     +          %if %eval(&lenname-32) > 0 %then %do;
94875     +            %let checkgrp = %substr(&checkgrp, 1, 32);
94876     +          %end;
94877     +
94878     +          %let choice = _VARIABLE_ ="&checkname";
94879     +          %let vdsid = %sysfunc(open(&EM_USER_VARMAPPINGS(where=(&choice))));
94880     +
94881     +          /* if var not found in varmappings, delete variables; */
94882     +          /* this could happen when freeze=Y and vars in the frozen dataset aren't in the incoming training data */
94883     +          %if &vdsid eq 0 %then %do;
94884     +            put 'if name="&displayvar" then delete;';
94885     +            %let dispgrp = GRP_&displayvar;
94886     +            put 'if name="&dispgrp" then delete;';
94887     +          %end;
94888     +
94889     +          %if &vdsid > 0 %then %let vdsid = %sysfunc(close(&vdsid));
94890     +          %let sobs = %sysfunc(fetch(&sdsid));
94891     +        %end;
94892     +      %end;
94893     +      %if &sdsid > 0 %then %let sdsid= %sysfunc(close(&sdsid));
94894     +   run;
94895     +
94896     +%mend buildMetaCode;
94897     +
94898     +%macro EM_GENERATE_RESULTSTABLE(coarse, resultstable, varmappings);
94899     +
94900     +   proc sort data=&coarse out=sortedcoarse nodupkey;
94901     +     by display_var;
94902     +   run;
94903     +   proc sort data=&varmappings nodupkey;
94904     +     by _variable_;
94905     +   run;
94906     +   %if %sysfunc(exist(&resultstable, data)) %then %do;
94907     +     proc sort data=&resultstable; by display_var; run;
94908     +   %end;
94909     +
94910     +   data &resultstable (Keep = display_var _gini_  _role_ _new_role_ procLevel);
94911     +     merge sortedcoarse(in=_a) &varmappings(rename=(_Variable_ = DISPLAY_VAR))
94912     +     %if %sysfunc(exist(&resultstable, data)) %then %do;
94913     +        &resultstable (keep = display_var _new_role_ )
94914     +     %end;
94915     +     ;
94916     +     by display_var;
94917     +     length _role_ _new_role_ $10;
94918     +     label display_var = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel , NOQUOTE))"
94919     +           _gini_     = "%sysfunc(sasmsg(sashelp.dmine, rpt_ginistatistic_vlabel , NOQUOTE))"
94920     +           _role_     = "%sysfunc(sasmsg(sashelp.dmine, rpt_calcrole_vlabel, NOQUOTE))"
94921     +           _new_role_ = "%sysfunc(sasmsg(sashelp.dmine, meta_NEWROLE_vlabel, NOQUOTE))"
94922     +           LEVEL      = "%sysfunc(sasmsg(sashelp.dmine, rpt_level_vlabel , NOQUOTE))"
94923     +           ;
94924     +
94925     +           %if &EM_PROPERTY_VARSELMETHOD eq GINI %then %do;
94926     +             if _gini_ < &EM_PROPERTY_GINICUTOFF then
94927     +                _role_ = "Rejected";
94928     +             else _role_ = "Input";
94929     +           %end;
94930     +           %else %do;
94931     +             _role_ = "Input";
94932     +           %end;
94933     +           if _new_role_ eq "" then _new_role_="Default";
94934     +      if ^_a then do;
94935     +        _gini_ = 0;
94936     +        _role_ = 'Rejected';
94937     +        if _new_role_ eq "" then _new_role_="Default";
94938     +      end;
94939     +   run;
94940     +   proc sort data=&EM_DATA_VARIABLESET out=outlabel(keep=NAME LABEL LEVEL rename=(NAME=display_var LABEL=_label_));
94941     +     by NAME;
94942     +   run;
94943     +   data outlabel;
94944     +     set outlabel;
94945     +     if _label_ = '' then _label_ = _variable_;
94946     +   run;
94947     +   data &resultstable;
94948     +     merge &resultstable(in=_a_) outlabel;
94949     +     by display_Var;
94950     +     if _a_ then output;
94951     +   run;
94952     +   proc datasets library=work nolist;
94953     +     delete sortedcoarse outlabel;
94954     +   run;
94955     +   quit;
94956     +   proc sort data=&resultstable nodupkey;
94957     +      by DESCENDING
94958     +        _gini_ display_Var;
94959     +   run;
94960     +   data &resultstable;
94961     +     set &resultstable;
94962     +
94963     +     label giniOrder = "%sysfunc(sasmsg(sashelp.dmine, rpt_giniorder_vlabel , NOQUOTE))"
94964     +           LEVEL      = "%sysfunc(sasmsg(sashelp.dmine, rpt_level_vlabel , NOQUOTE))";
94965     +     giniOrder = _N_;
94966     +     _gini_ = round(_GINI_, .001);
94967     +     drop _variable_;
94968     +   run;
94969     +
94970     +   proc print data=&resultstable label;
94971     +   run;
94972     +
94973     +   /* merge role, infovalOrder or giniOrder back into Coarse table as well */
94974     +   data &coarse;
94975     +     set &coarse;
94976     +     length role $10;
94977     +     %let dsid = %sysfunc(open(&resultstable));
94978     +     %if &dsid %then %do;
94979     +       %let disnum = %sysfunc(VARNUM(&dsid, DISPLAY_VAR));
94980     +       %let rolenum = %sysfunc(VARNUM(&dsid, _ROLE_));
94981     +       %let orderNum = %sysfunc(VARNUM(&dsid, giniOrder));
94982     +
94983     +       %let obs = %sysfunc(fetch(&dsid));
94984     +       %do %while(&obs=0);
94985     +          %let displayvar = %sysfunc(getvarc(&dsid, &disnum));
94986     +          %let role       = %sysfunc(getvarc(&dsid, &rolenum));
94987     +          %let order = %sysfunc(getvarn(&dsid, &ordernum));
94988     +
94989     +                                                                                               if DISPLAY_VAR = "&displayVar" then do;
94990     +            label giniOrder = "%sysfunc(sasmsg(sashelp.dmine, rpt_giniorder_vlabel , NOQUOTE))";
94991     +            giniOrder = &order;
94992     +            role = "&role";
94993     +          end;
94994     +
94995     +          %let obs = %sysfunc(fetch(&dsid));
94996     +       %end;
94997     +     %end;
94998     +     %if &dsid %then %let dsid = %sysfunc(close(&dsid));
94999     +   run;
95000     +
95001     +
95002     +%mend EM_GENERATE_RESULTSTABLE;
95003     +
95004     +%macro EM_GENERATE_EXPORTGROUP(exportGrouping, createMethod);
95005     +
95006     +    /* instantiate the zchar macro to be used in adding bin definition */
95007     +    filename _temp catalog 'sashelp.emmacs.zchar.source';
95008     +    %inc _temp;
95009     +    filename _temp;
95010     +
95011     +    proc sort data=&EM_USER_FINEDETAILDATA out=sortedfine;
95012     +      by _variable_ binFlag _group_ LB;
95013     +    run;
95014     +
95015     +    data tempExport;
95016     +      set sortedFine;
95017     +      by _variable_ binFlag _group_;
95018     +      length _split_value_ $200;
95019     +
95020     +      /* for all binned variables, need to modify the split value to original cutoff as well as change level to interval */
95021     +      if binFlag = 0 then do;
95022     +        index = kindex(_variable_, "BIN_");
95023     +        if index gt 0 then do;
95024     +          _LEVEL_ = "INTERVAL";
95025     +        end;
95026     +        _Split_value_ = _split_value_;
95027     +        output;
95028     +      end;
95029     +      else do;
95030     +         * if last._group_ then do;
95031     +          index = kindex(_variable_, "BIN_");
95032     +          if index gt 0 then do;
95033     +            _LEVEL_ = "INTERVAL";
95034     +          end;
95035     +          _Split_value_ = %zchar(UB);
95036     +          output;
95037     +         * end;
95038     +      end;
95039     +
95040     +      rename display_Var = _variable_;
95041     +      keep display_var _level_ _group_ _split_value_ binFlag;
95042     +    run;
95043     +
95044     +    %if &CREATEMETHOD eq OVERWRITE %then %do;
95045     +       data &EXPORTGROUPING;
95046     +         set tempexport;
95047     +       run;
95048     +    %end;
95049     +    %else %do;
95050     +       /* determine if EXPORTGROUPING already exists */
95051     +       %if %sysfunc(exist(&EXPORTGROUPING, DATA)) %then %do;
95052     +         data &EXPORTGROUPING;
95053     +            set &EXPORTGROUPING tempexport;
95054     +         run;
95055     +       %end;
95056     +       %else %do;
95057     +         data &EXPORTGROUPING;
95058     +            set tempexport;
95059     +         run;
95060     +       %end;
95061     +    %end;
95062     +
95063     +    proc datasets lib=work nolist;
95064     +      delete sortedFine tempexport;
95065     +    run;
95066     +    quit;
95067     +
95068     +%mend EM_GENERATE_EXPORTGROUP;
95069     +
95070     +
95071     +
NOTE: %INCLUDE (level 1) ending.
MPRINT(MAIN):   filename temp;
NOTE: Fileref TEMP has been deassigned.
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(MAIN):  ;
MPRINT(MAIN):   filename temp catalog 'sashelp.emmdfy.binning_score.source';
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMMDFY.BINNING_SCORE.SOURCE.
95072     +
95073     +
95074     +%macro buildMetaCode(DeltaCodeFile=);
95075     +
95076     +   /* set variable roles based on New Role column in the Results table */
95077     +   data _null_;
95078     +      file &DeltaCodeFile %if %length(%EM_BINARY_TARGET)=0 %then mod;;
95079     +      %let dsid = %sysfunc(open(&EM_USER_RESULTSTABLE));
95080     +      %if &dsid %then %do;
95081     +        %let obs = %sysfunc(fetch(&dsid));
95082     +        %let vnum = %sysfunc(VARNUM(&dsid, DISPLAY_VAR));
95083     +        %let rnum = %sysfunc(VARNUM(&dsid, _Role_));
95084     +
95085     +        %do %while(&obs=0);
95086     +          %let inputname = %sysfunc(getvarc(&dsid, &vnum));
95087     +          %let role      = %upcase(%sysfunc(getvarc(&dsid, &rnum)));
95088     +
95089     +          /* retrieve grp and woe names from varmappings dataset */
95090     +          %let choice = _VARIABLE_ = "&inputname";
95091     +          %let cdsid = %sysfunc(open(&EM_USER_VARMAPPINGS(where=(&choice))));
95092     +          %let cobs = %sysfunc(fetchobs(&cdsid, 1));
95093     +          %let grpnum = %sysfunc(VARNUM(&cdsid, _GRP_VARIABLE_));
95094     +          %let grpname = %sysfunc(getvarc(&cdsid, &grpnum));
95095     +          %if &cdsid %then %let cdsid = %sysfunc(close(&cdsid));
95096     +
95097     +          put "if name = '&inputname' then role='REJECTED';";
95098     +          put "if name = '&grpname' then role='&role';";
95099     +          put "if name = '&grpname' then level='&EM_PROPERTY_GRPMSMNT';";
95100     +
95101     +          %let obs = %sysfunc(fetch(&dsid));
95102     +        %end;
95103     +      %end;
95104     +      %if &dsid %then %let dsid = %sysfunc(close(&dsid));
95105     +   run;
95106     +
95107     +   /* drop all vars in the splitvals dataset that aren't present in the varmappings dataset */
95108     +   data _null_;
95109     +      file &DeltaCodeFile MOD;
95110     +
95111     +      %let sdsid = %sysfunc(open(&EM_USER_SPLITVALS));
95112     +      %if &sdsid %then %do;
95113     +        %let sobs = %sysfunc(fetch(&sdsid));
95114     +        %do %while(&sobs=0);
95115     +          %let varnum = %sysfunc(VARNUM(&sdsid, _VARIABLE_));
95116     +          %let checkname = %sysfunc(getvarc(&sdsid, &varnum));
95117     +          %let dispvarnum = %sysfunc(VARNUM(&sdsid, DISPLAY_VAR));
95118     +          %let displayvar = %sysfunc(getvarc(&sdsid, &dispvarnum));
95119     +
95120     +          %let checkgrp = GRP_&checkname;
95121     +          %let lenname = %length(&checkgrp);
95122     +          %if %eval(&lenname-32) > 0 %then %do;
95123     +            %let checkgrp = %substr(&checkgrp, 1, 32);
95124     +          %end;
95125     +
95126     +          %let choice = _VARIABLE_ ="&checkname";
95127     +          %let vdsid = %sysfunc(open(&EM_USER_VARMAPPINGS(where=(&choice))));
95128     +
95129     +          /* if var not found in varmappings, delete variables; */
95130     +          /* this could happen when freeze=Y and vars in the frozen dataset aren't in the incoming training data */
95131     +          %if &vdsid eq 0 %then %do;
95132     +            put 'if name="&displayvar" then delete;';
95133     +            %let dispgrp = GRP_&displayvar;
95134     +            put 'if name="&dispgrp" then delete;';
95135     +          %end;
95136     +
95137     +          %if &vdsid > 0 %then %let vdsid = %sysfunc(close(&vdsid));
95138     +          %let sobs = %sysfunc(fetch(&sdsid));
95139     +        %end;
95140     +      %end;
95141     +      %if &sdsid > 0 %then %let sdsid= %sysfunc(close(&sdsid));
95142     +   run;
95143     +
95144     +%mend buildMetaCode;
95145     +
95146     +%macro score;
95147     +
95148     +   /* generate results table */
95149     +   %EM_GETNAME(key=COARSE, type=DATA);
95150     +   %EM_GETNAME(key=RESULTSTABLE, type=DATA);
95151     +   %EM_GETNAME(key=VARMAPPINGS, type=DATA);
95152     +   %EM_GETNAME(key=SPLITVALS, type=DATA);
95153     +
95154     +   %EM_GENERATE_RESULTSTABLE(&EM_USER_COARSE, &EM_USER_RESULTSTABLE, &EM_USER_VARMAPPINGS);
95155     +
95156     +   /* Generate Publish score code; same as flowscorecode */
95157     +   %EM_GETNAME(key=BINMAPPINGS, type=DATA);
95158     +   %buildScoreCode(&EM_FILE_EMFLOWSCORECODE, &EM_FILE_EMPUBLISHSCORECODE);
95159     +
95160     +   filename deltaref "&EM_FILE_CDELTA_TRAIN";
95161     +   %buildMetaCode(DeltaCodeFile=deltaref);
95162     +   filename deltaref;
95163     +
95164     +   /* generate results tables */
95165     +   %EM_REPORT(key=RESULTSTABLE, viewtype=DATA, block=MODEL, description=OUTPUTTABLE, autodisplay=Y);
95166     +   %EM_REPORT(key=RESULTSTABLE, viewtype=BAR, X=DISPLAY_VAR, Freq=_GINI_, TIPTEXT=_ROLE_, block=MODEL, description=STATPLOT, autodisplay=Y);
95167     +
95168     +%mend score;
NOTE: %INCLUDE (level 1) ending.
MPRINT(MAIN):   filename temp;
NOTE: Fileref TEMP has been deassigned.
MPRINT(SCORE):  ;
MPRINT(SCORE):  ;
MPRINT(SCORE):  ;
MPRINT(SCORE):  ;
MPRINT(EM_GENERATE_RESULTSTABLE):   proc sort data=EMWS1.BINNING_COARSE out=sortedcoarse nodupkey;
MPRINT(EM_GENERATE_RESULTSTABLE):   by display_var;
MPRINT(EM_GENERATE_RESULTSTABLE):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_COARSE.
NOTE: 45 observations with duplicate key values were deleted.
NOTE: The data set WORK.SORTEDCOARSE has 12 observations and 12 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_GENERATE_RESULTSTABLE):   proc sort data=EMWS1.BINNING_VARMAPPINGS nodupkey;
MPRINT(EM_GENERATE_RESULTSTABLE):   by _variable_;
MPRINT(EM_GENERATE_RESULTSTABLE):   run;
 
NOTE: There were 12 observations read from the data set EMWS1.BINNING_VARMAPPINGS.
NOTE: 0 observations with duplicate key values were deleted.
NOTE: The data set EMWS1.BINNING_VARMAPPINGS has 12 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_GENERATE_RESULTSTABLE):   data EMWS1.BINNING_RESULTSTABLE (Keep = display_var _gini_ _role_ _new_role_ procLevel);
MPRINT(EM_GENERATE_RESULTSTABLE):   merge sortedcoarse(in=_a) EMWS1.BINNING_VARMAPPINGS(rename=(_Variable_ = DISPLAY_VAR)) ;
MPRINT(EM_GENERATE_RESULTSTABLE):   by display_var;
MPRINT(EM_GENERATE_RESULTSTABLE):   length _role_ _new_role_ $10;
MPRINT(EM_GENERATE_RESULTSTABLE):   label display_var = "Variable" _gini_ = "Gini Statistic" _role_ = "Calculated Role" _new_role_ = "New Role" LEVEL = "Level" ;
MPRINT(EM_GENERATE_RESULTSTABLE):   if _gini_ < 20 then _role_ = "Rejected";
MPRINT(EM_GENERATE_RESULTSTABLE):   else _role_ = "Input";
MPRINT(EM_GENERATE_RESULTSTABLE):   if _new_role_ eq "" then _new_role_="Default";
MPRINT(EM_GENERATE_RESULTSTABLE):   if ^_a then do;
MPRINT(EM_GENERATE_RESULTSTABLE):   _gini_ = 0;
MPRINT(EM_GENERATE_RESULTSTABLE):   _role_ = 'Rejected';
MPRINT(EM_GENERATE_RESULTSTABLE):   if _new_role_ eq "" then _new_role_="Default";
MPRINT(EM_GENERATE_RESULTSTABLE):   end;
MPRINT(EM_GENERATE_RESULTSTABLE):   run;
 
NOTE: Variable LEVEL is uninitialized.
NOTE: There were 12 observations read from the data set WORK.SORTEDCOARSE.
NOTE: There were 12 observations read from the data set EMWS1.BINNING_VARMAPPINGS.
NOTE: The data set EMWS1.BINNING_RESULTSTABLE has 12 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
 
MPRINT(EM_GENERATE_RESULTSTABLE):   proc sort data=EMWS1.BINNING_VariableSet out=outlabel(keep=NAME LABEL LEVEL rename=(NAME=display_var LABEL=_label_));
MPRINT(EM_GENERATE_RESULTSTABLE):   by NAME;
MPRINT(EM_GENERATE_RESULTSTABLE):   run;
 
NOTE: There were 14 observations read from the data set EMWS1.BINNING_VARIABLESET.
NOTE: The data set WORK.OUTLABEL has 14 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_GENERATE_RESULTSTABLE):   data outlabel;
MPRINT(EM_GENERATE_RESULTSTABLE):   set outlabel;
MPRINT(EM_GENERATE_RESULTSTABLE):   if _label_ = '' then _label_ = _variable_;
MPRINT(EM_GENERATE_RESULTSTABLE):   run;
 
NOTE: Variable _variable_ is uninitialized.
NOTE: There were 14 observations read from the data set WORK.OUTLABEL.
NOTE: The data set WORK.OUTLABEL has 14 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_GENERATE_RESULTSTABLE):   data EMWS1.BINNING_RESULTSTABLE;
MPRINT(EM_GENERATE_RESULTSTABLE):   merge EMWS1.BINNING_RESULTSTABLE(in=_a_) outlabel;
MPRINT(EM_GENERATE_RESULTSTABLE):   by display_Var;
MPRINT(EM_GENERATE_RESULTSTABLE):   if _a_ then output;
MPRINT(EM_GENERATE_RESULTSTABLE):   run;
 
WARNING: Multiple lengths were specified for the BY variable display_Var by input data sets. This might cause unexpected results.
NOTE: There were 12 observations read from the data set EMWS1.BINNING_RESULTSTABLE.
NOTE: There were 14 observations read from the data set WORK.OUTLABEL.
NOTE: The data set EMWS1.BINNING_RESULTSTABLE has 12 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_GENERATE_RESULTSTABLE):   proc datasets library=work nolist;
MPRINT(EM_GENERATE_RESULTSTABLE):   delete sortedcoarse outlabel;
MPRINT(EM_GENERATE_RESULTSTABLE):   run;
 
NOTE: Deleting WORK.SORTEDCOARSE (memtype=DATA).
NOTE: Deleting WORK.OUTLABEL (memtype=DATA).
MPRINT(EM_GENERATE_RESULTSTABLE):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
 
MPRINT(EM_GENERATE_RESULTSTABLE):   proc sort data=EMWS1.BINNING_RESULTSTABLE nodupkey;
MPRINT(EM_GENERATE_RESULTSTABLE):   by DESCENDING _gini_ display_Var;
MPRINT(EM_GENERATE_RESULTSTABLE):   run;
 
NOTE: There were 12 observations read from the data set EMWS1.BINNING_RESULTSTABLE.
NOTE: 0 observations with duplicate key values were deleted.
NOTE: The data set EMWS1.BINNING_RESULTSTABLE has 12 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_GENERATE_RESULTSTABLE):   data EMWS1.BINNING_RESULTSTABLE;
MPRINT(EM_GENERATE_RESULTSTABLE):   set EMWS1.BINNING_RESULTSTABLE;
MPRINT(EM_GENERATE_RESULTSTABLE):   label giniOrder = "Gini Ordering" LEVEL = "Level";
MPRINT(EM_GENERATE_RESULTSTABLE):   giniOrder = _N_;
MPRINT(EM_GENERATE_RESULTSTABLE):   _gini_ = round(_GINI_, .001);
MPRINT(EM_GENERATE_RESULTSTABLE):   drop _variable_;
MPRINT(EM_GENERATE_RESULTSTABLE):   run;
 
NOTE: There were 12 observations read from the data set EMWS1.BINNING_RESULTSTABLE.
NOTE: The data set EMWS1.BINNING_RESULTSTABLE has 12 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(EM_GENERATE_RESULTSTABLE):   proc print data=EMWS1.BINNING_RESULTSTABLE label;
MPRINT(EM_GENERATE_RESULTSTABLE):   run;
 
NOTE: There were 12 observations read from the data set EMWS1.BINNING_RESULTSTABLE.
NOTE: The PROCEDURE PRINT printed page 51.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_GENERATE_RESULTSTABLE):   data EMWS1.BINNING_COARSE;
MPRINT(EM_GENERATE_RESULTSTABLE):   set EMWS1.BINNING_COARSE;
MPRINT(EM_GENERATE_RESULTSTABLE):   length role $10;
MPRINT(EM_GENERATE_RESULTSTABLE):   if DISPLAY_VAR = "IMP_DEBTINC" then do;
MPRINT(EM_GENERATE_RESULTSTABLE):   label giniOrder = "Gini Ordering";
MPRINT(EM_GENERATE_RESULTSTABLE):   giniOrder = 1;
MPRINT(EM_GENERATE_RESULTSTABLE):   role = "Input";
MPRINT(EM_GENERATE_RESULTSTABLE):   end;
MPRINT(EM_GENERATE_RESULTSTABLE):   if DISPLAY_VAR = "INDELINQ" then do;
MPRINT(EM_GENERATE_RESULTSTABLE):   label giniOrder = "Gini Ordering";
MPRINT(EM_GENERATE_RESULTSTABLE):   giniOrder = 2;
MPRINT(EM_GENERATE_RESULTSTABLE):   role = "Input";
MPRINT(EM_GENERATE_RESULTSTABLE):   end;
MPRINT(EM_GENERATE_RESULTSTABLE):   if DISPLAY_VAR = "IMP_CLAGE" then do;
MPRINT(EM_GENERATE_RESULTSTABLE):   label giniOrder = "Gini Ordering";
MPRINT(EM_GENERATE_RESULTSTABLE):   giniOrder = 3;
MPRINT(EM_GENERATE_RESULTSTABLE):   role = "Input";
MPRINT(EM_GENERATE_RESULTSTABLE):   end;
MPRINT(EM_GENERATE_RESULTSTABLE):   if DISPLAY_VAR = "IMP_NINQ" then do;
MPRINT(EM_GENERATE_RESULTSTABLE):   label giniOrder = "Gini Ordering";
MPRINT(EM_GENERATE_RESULTSTABLE):   giniOrder = 4;
MPRINT(EM_GENERATE_RESULTSTABLE):   role = "Input";
MPRINT(EM_GENERATE_RESULTSTABLE):   end;
MPRINT(EM_GENERATE_RESULTSTABLE):   if DISPLAY_VAR = "IMP_JOB" then do;
MPRINT(EM_GENERATE_RESULTSTABLE):   label giniOrder = "Gini Ordering";
MPRINT(EM_GENERATE_RESULTSTABLE):   giniOrder = 5;
MPRINT(EM_GENERATE_RESULTSTABLE):   role = "Rejected";
MPRINT(EM_GENERATE_RESULTSTABLE):   end;
MPRINT(EM_GENERATE_RESULTSTABLE):   if DISPLAY_VAR = "LOG_yoj" then do;
MPRINT(EM_GENERATE_RESULTSTABLE):   label giniOrder = "Gini Ordering";
MPRINT(EM_GENERATE_RESULTSTABLE):   giniOrder = 6;
MPRINT(EM_GENERATE_RESULTSTABLE):   role = "Rejected";
MPRINT(EM_GENERATE_RESULTSTABLE):   end;
MPRINT(EM_GENERATE_RESULTSTABLE):   if DISPLAY_VAR = "LOAN" then do;
MPRINT(EM_GENERATE_RESULTSTABLE):   label giniOrder = "Gini Ordering";
MPRINT(EM_GENERATE_RESULTSTABLE):   giniOrder = 7;
MPRINT(EM_GENERATE_RESULTSTABLE):   role = "Rejected";
MPRINT(EM_GENERATE_RESULTSTABLE):   end;
MPRINT(EM_GENERATE_RESULTSTABLE):   if DISPLAY_VAR = "IMP_MORTDUE" then do;
MPRINT(EM_GENERATE_RESULTSTABLE):   label giniOrder = "Gini Ordering";
MPRINT(EM_GENERATE_RESULTSTABLE):   giniOrder = 8;
MPRINT(EM_GENERATE_RESULTSTABLE):   role = "Rejected";
MPRINT(EM_GENERATE_RESULTSTABLE):   end;
MPRINT(EM_GENERATE_RESULTSTABLE):   if DISPLAY_VAR = "IMP_CLNO" then do;
MPRINT(EM_GENERATE_RESULTSTABLE):   label giniOrder = "Gini Ordering";
MPRINT(EM_GENERATE_RESULTSTABLE):   giniOrder = 9;
MPRINT(EM_GENERATE_RESULTSTABLE):   role = "Rejected";
MPRINT(EM_GENERATE_RESULTSTABLE):   end;
MPRINT(EM_GENERATE_RESULTSTABLE):   if DISPLAY_VAR = "IMP_VALUE" then do;
MPRINT(EM_GENERATE_RESULTSTABLE):   label giniOrder = "Gini Ordering";
MPRINT(EM_GENERATE_RESULTSTABLE):   giniOrder = 10;
MPRINT(EM_GENERATE_RESULTSTABLE):   role = "Rejected";
MPRINT(EM_GENERATE_RESULTSTABLE):   end;
MPRINT(EM_GENERATE_RESULTSTABLE):   if DISPLAY_VAR = "IMP_REASON" then do;
MPRINT(EM_GENERATE_RESULTSTABLE):   label giniOrder = "Gini Ordering";
MPRINT(EM_GENERATE_RESULTSTABLE):   giniOrder = 11;
MPRINT(EM_GENERATE_RESULTSTABLE):   role = "Rejected";
MPRINT(EM_GENERATE_RESULTSTABLE):   end;
MPRINT(EM_GENERATE_RESULTSTABLE):   if DISPLAY_VAR = "INDEROG" then do;
MPRINT(EM_GENERATE_RESULTSTABLE):   label giniOrder = "Gini Ordering";
MPRINT(EM_GENERATE_RESULTSTABLE):   giniOrder = 12;
MPRINT(EM_GENERATE_RESULTSTABLE):   role = "Rejected";
MPRINT(EM_GENERATE_RESULTSTABLE):   end;
MPRINT(EM_GENERATE_RESULTSTABLE):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_COARSE.
NOTE: The data set EMWS1.BINNING_COARSE has 57 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.10 seconds
      cpu time            0.10 seconds
 
 
MPRINT(SCORE):  ;
MPRINT(SCORE):  ;
MPRINT(BUILDSCORECODE):   filename x "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\EMFLOWSCORE.sas";
MPRINT(BUILDSCORECODE):   proc sort data=EMWS1.BINNING_SPLITVALS;
MPRINT(BUILDSCORECODE):   by display_var _split_Value_;
MPRINT(BUILDSCORECODE):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_SPLITVALS.
NOTE: The data set EMWS1.BINNING_SPLITVALS has 57 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDSCORECODE):   proc sort data=EMWS1.BINNING_BINMAPPINGS;
MPRINT(BUILDSCORECODE):   by display_var bin;
MPRINT(BUILDSCORECODE):   run;
 
NOTE: Input data set is already sorted, no sorting done.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(BUILDSCORECODE):   proc sort data=EMWS1.BINNING_COARSE out=tempcoarse;
MPRINT(BUILDSCORECODE):   by display_var _group_;
MPRINT(BUILDSCORECODE):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_COARSE.
NOTE: The data set WORK.TEMPCOARSE has 57 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDSCORECODE):   data temp;
MPRINT(BUILDSCORECODE):   merge EMWS1.BINNING_SPLITVALS EMWS1.BINNING_BINMAPPINGS(rename=(BIN=_SPLIT_VALUE_ BIN_NAME=_VARIABLE_));
MPRINT(BUILDSCORECODE):   by display_var _Split_value_;
MPRINT(BUILDSCORECODE):   if upcase(_Split_value_) ne 'MISSING';
MPRINT(BUILDSCORECODE):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_SPLITVALS.
NOTE: There were 37 observations read from the data set EMWS1.BINNING_BINMAPPINGS.
NOTE: The data set WORK.TEMP has 45 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(BUILDSCORECODE):   data temp_missing;
MPRINT(BUILDSCORECODE):   merge EMWS1.BINNING_SPLITVALS(rename=(_GROUP_=MISSGRP)) EMWS1.BINNING_BINMAPPINGS(rename=( BIN=_SPLIT_VALUE_ BIN_NAME=_VARIABLE_));
MPRINT(BUILDSCORECODE):   by display_var _Split_value_;
MPRINT(BUILDSCORECODE):   if upcase(_Split_value_) eq 'MISSING';
MPRINT(BUILDSCORECODE):   keep _variable_ display_var missgrp;
MPRINT(BUILDSCORECODE):   run;
 
NOTE: There were 57 observations read from the data set EMWS1.BINNING_SPLITVALS.
NOTE: There were 37 observations read from the data set EMWS1.BINNING_BINMAPPINGS.
NOTE: The data set WORK.TEMP_MISSING has 12 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDSCORECODE):   proc sort data=temp_missing;
MPRINT(BUILDSCORECODE):   by display_var missgrp;
MPRINT(BUILDSCORECODE):   run;
 
NOTE: There were 12 observations read from the data set WORK.TEMP_MISSING.
NOTE: The data set WORK.TEMP_MISSING has 12 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDSCORECODE):   data temp_missing;
MPRINT(BUILDSCORECODE):   merge temp_missing(in=_a) tempcoarse(rename=(_GROUP_=MISSGRP));
MPRINT(BUILDSCORECODE):   by display_var missgrp;
MPRINT(BUILDSCORECODE):   if ^_a then delete;
MPRINT(BUILDSCORECODE):   keep _variable_ display_var missgrp ;
MPRINT(BUILDSCORECODE):   run;
 
NOTE: There were 12 observations read from the data set WORK.TEMP_MISSING.
NOTE: There were 57 observations read from the data set WORK.TEMPCOARSE.
NOTE: The data set WORK.TEMP_MISSING has 12 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDSCORECODE):   data temp;
MPRINT(BUILDSCORECODE):   merge temp temp_missing;
MPRINT(BUILDSCORECODE):   by display_var;
MPRINT(BUILDSCORECODE):   if display_Var eq '' then delete;
MPRINT(BUILDSCORECODE):   run;
 
NOTE: There were 45 observations read from the data set WORK.TEMP.
NOTE: There were 12 observations read from the data set WORK.TEMP_MISSING.
NOTE: The data set WORK.TEMP has 45 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDSCORECODE):   proc sort data=EMWS1.BINNING_VARMAPPINGS out=tempmappings;
MPRINT(BUILDSCORECODE):   by _variable_;
MPRINT(BUILDSCORECODE):   run;
 
NOTE: Input data set is already sorted; it has been copied to the output data set.
NOTE: There were 12 observations read from the data set EMWS1.BINNING_VARMAPPINGS.
NOTE: The data set WORK.TEMPMAPPINGS has 12 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(BUILDSCORECODE):   proc sort data=EMWS1.Trans_CMeta_TRAIN out=tempcmeta;
MPRINT(BUILDSCORECODE):   by NAME;
MPRINT(BUILDSCORECODE):   run;
 
NOTE: There were 14 observations read from the data set EMWS1.TRANS_CMETA_TRAIN.
NOTE: The data set WORK.TEMPCMETA has 14 observations and 20 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDSCORECODE):   proc sort data=temp;
MPRINT(BUILDSCORECODE):   by display_var _group_;
MPRINT(BUILDSCORECODE):   run;
 
NOTE: There were 45 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 45 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDSCORECODE):   data temp;
MPRINT(BUILDSCORECODE):   merge temp tempcoarse(keep=display_var _group_ role) ;
MPRINT(BUILDSCORECODE):   by display_var _group_;
MPRINT(BUILDSCORECODE):   run;
 
NOTE: There were 45 observations read from the data set WORK.TEMP.
NOTE: There were 57 observations read from the data set WORK.TEMPCOARSE.
NOTE: The data set WORK.TEMP has 57 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(BUILDSCORECODE):   data temp;
MPRINT(BUILDSCORECODE):   merge temp tempmappings(rename=(_variable_ = display_var)) tempcmeta(keep=NAME FORMAT TYPE LABEL rename=(NAME=display_var LABEL=origLabel));
MPRINT(BUILDSCORECODE):   by display_var;
MPRINT(BUILDSCORECODE):   if _group_ = . then delete;
MPRINT(BUILDSCORECODE):   if _variable_ = '' then delete;
MPRINT(BUILDSCORECODE):   run;
 
WARNING: Multiple lengths were specified for the BY variable DISPLAY_VAR by input data sets. This might cause unexpected results.
NOTE: There were 57 observations read from the data set WORK.TEMP.
NOTE: There were 12 observations read from the data set WORK.TEMPMAPPINGS.
NOTE: There were 14 observations read from the data set WORK.TEMPCMETA.
NOTE: The data set WORK.TEMP has 45 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDSCORECODE):   proc sort data=temp out=class;
MPRINT(BUILDSCORECODE):   by _variable_ _group_ LB;
MPRINT(BUILDSCORECODE):   run;
 
NOTE: There were 45 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.CLASS has 45 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDSCORECODE):   data _null_;
MPRINT(BUILDSCORECODE):   file X;
MPRINT(BUILDSCORECODE):   put "length _UFormat $200;";
MPRINT(BUILDSCORECODE):   put "drop _UFormat;";
MPRINT(BUILDSCORECODE):   put "_UFormat='';";
MPRINT(BUILDSCORECODE):   run;
 
NOTE: The file X is:
      Filename=C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\EMFLOWSCORE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=04Nov2015:07:40:43,
      Create Time=04Nov2015:07:40:43
 
NOTE: 3 records were written to the file X.
      The minimum record length was 12.
      The maximum record length was 21.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDSCORECODE):   data class_nosv;
MPRINT(BUILDSCORECODE):   set class;
MPRINT(BUILDSCORECODE):   if upcase(role)="INPUT";
MPRINT(BUILDSCORECODE):   run;
 
NOTE: There were 45 observations read from the data set WORK.CLASS.
NOTE: The data set WORK.CLASS_NOSV has 15 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDSCORECODE):   data _null_;
MPRINT(BUILDSCORECODE):   file X MOD;
MPRINT(BUILDSCORECODE):   length string $200 flag endflag 8;
MPRINT(BUILDSCORECODE):   retain string flag endflag;
MPRINT(BUILDSCORECODE):   set class_nosv end=eof;
MPRINT(BUILDSCORECODE):   by _variable_ _group_;
MPRINT(BUILDSCORECODE):   index = kindex(_variable_, "BIN_");
MPRINT(BUILDSCORECODE):   if index gt 0 then do;
MPRINT(BUILDSCORECODE):   if first._variable_ then do;
MPRINT(BUILDSCORECODE):   put ' ';
MPRINT(BUILDSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDSCORECODE):   string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDSCORECODE):   if origLabel ne "" then do;
MPRINT(BUILDSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = ';
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = tranwrd(origLabel,"'","''");
MPRINT(BUILDSCORECODE):   string = "'Grouped: "!!strip(substr(string, 1,188))!!"';";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!strip(DISPLAY_VAR)!!'";';
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   put ' ';
MPRINT(BUILDSCORECODE):   string = "if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   put "end;";
MPRINT(BUILDSCORECODE):   string = "else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   if first._group_ then do;
MPRINT(BUILDSCORECODE):   flag = 0;
MPRINT(BUILDSCORECODE):   endflag = 1;
MPRINT(BUILDSCORECODE):   if ^first._variable_ then do;
MPRINT(BUILDSCORECODE):   put "else";
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   if LB ne . then do;
MPRINT(BUILDSCORECODE):   string = "if "!!strip(LB)!!" <= "!!strip(DISPLAY_VAR);
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   flag = 1;
MPRINT(BUILDSCORECODE):   string = "if";
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   if last._Group_ then do;
MPRINT(BUILDSCORECODE):   if UB ne . then do;
MPRINT(BUILDSCORECODE):   if flag ne 1 then do;
MPRINT(BUILDSCORECODE):   string = strip(string)!!" AND "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   string = "if "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   if flag=1 then do;
MPRINT(BUILDSCORECODE):   string = strip(DISPLAY_VAR) ;
MPRINT(BUILDSCORECODE):   string = strip(string)!!'='!!strip(_split_Value_)!!" then do;";
MPRINT(BUILDSCORECODE):   endflag = 0;
MPRINT(BUILDSCORECODE):   string="";
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   string = strip(string)!!" then do;";
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   if endflag eq 1 then do;
MPRINT(BUILDSCORECODE):   put "end;";
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   if last._variable_ then do;
MPRINT(BUILDSCORECODE):   string = "end;";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   _split_value_ = tranwrd(_split_value_,"'","''");
MPRINT(BUILDSCORECODE):   if first._group_ then do;
MPRINT(BUILDSCORECODE):   flag=0;
MPRINT(BUILDSCORECODE):   if ^first._variable_ then put 'else';
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   put ' ';
MPRINT(BUILDSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDSCORECODE):   string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDSCORECODE):   if origLabel ne "" then do;
MPRINT(BUILDSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = ';
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = tranwrd(origLabel,"'","''");
MPRINT(BUILDSCORECODE):   string = "'Grouped: "!!strip(substr(string, 1,188))!!"';";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!strip(DISPLAY_VAR)!!'";';
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   put ' ';
MPRINT(BUILDSCORECODE):   if format ne '' then do;
MPRINT(BUILDSCORECODE):   if first._variable_ then do;
MPRINT(BUILDSCORECODE):   string = "_UFormat = put("!!strip(DISPLAY_VAR)!!","!!strip(format)!!");";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string ="if MISSING(_UFORMAT) then do;";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   put "end;";
MPRINT(BUILDSCORECODE):   string="else if NOT MISSING(_UFORMAT) then do;";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   if type = 'N' then do;
MPRINT(BUILDSCORECODE):   string ="if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   put "end;";
MPRINT(BUILDSCORECODE):   string="else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else if type='C' then do;
MPRINT(BUILDSCORECODE):   string = "_UFormat = "||strip(DISPLAY_VAR)||";";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string ="if MISSING(_UFORMAT) then do;";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   put "end;";
MPRINT(BUILDSCORECODE):   string="else if NOT MISSING(_UFORMAT) then do;";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDSCORECODE):   string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   string = "if ("!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   if flag ne 1 then do;
MPRINT(BUILDSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDSCORECODE):   tempstring = strip(string)!!" OR _UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   tempstring = strip(string)!!" OR "!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   length = klength(tempstring);
MPRINT(BUILDSCORECODE):   if length < 195 then do;
MPRINT(BUILDSCORECODE):   string = tempstring;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   string = strip(string);
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = ") then do;";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   put "end;";
MPRINT(BUILDSCORECODE):   put 'else';
MPRINT(BUILDSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDSCORECODE):   string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   else do;
MPRINT(BUILDSCORECODE):   string = "if ("!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   if last._group_ then do;
MPRINT(BUILDSCORECODE):   string = strip(string);
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = ") then do;";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   put "end;";
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   if last._variable_ then do;
MPRINT(BUILDSCORECODE):   put "else do;";
MPRINT(BUILDSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDSCORECODE):   put string;
MPRINT(BUILDSCORECODE):   put "end;";
MPRINT(BUILDSCORECODE):   put "end;";
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   *end;
MPRINT(BUILDSCORECODE):   end;
MPRINT(BUILDSCORECODE):   run;
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      17:156   20:102   21:212   22:94    25:145   34:135   37:133   41:71    49:11    52:228   53:200
NOTE: The file X is:
      Filename=C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\EMFLOWSCORE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=53,
      Last Modified=04Nov2015:07:40:43,
      Create Time=04Nov2015:07:40:43
 
NOTE: 103 records were written to the file X.
      The minimum record length was 1.
      The maximum record length was 63.
NOTE: There were 15 observations read from the data set WORK.CLASS_NOSV.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(BUILDSCORECODE):   filename Y "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\EMPUBLISHSCORE.sas";
MPRINT(APPENDFILES):   data _null_;
MPRINT(APPENDFILES):   length c $256;
MPRINT(APPENDFILES):   fid1=fopen("Y",'A');
MPRINT(APPENDFILES):   fid2=fopen("X",'I');
MPRINT(APPENDFILES):   cval = finfo(fid2,'lrecl');
MPRINT(APPENDFILES):   put cval= fid1= fid2=;
MPRINT(APPENDFILES):   if (fid2 > 0) then do while(fread(fid2)=0);
MPRINT(APPENDFILES):   rc = fget(fid2,c,256);
MPRINT(APPENDFILES):   _msg_=sysmsg();
MPRINT(APPENDFILES):   rc = fput(fid1,strip(c));
MPRINT(APPENDFILES):   rc = fwrite(fid1);
MPRINT(APPENDFILES):   end;
MPRINT(APPENDFILES):   _msg_=sysmsg();
MPRINT(APPENDFILES):   put _msg_=;
MPRINT(APPENDFILES):   rc = fclose(fid1);
MPRINT(APPENDFILES):   rc = fclose(fid2);
MPRINT(APPENDFILES):   run;
 
cval=32767 fid1=1 fid2=2
_msg_=WARNING: End of file.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(BUILDSCORECODE):  ;
MPRINT(BUILDSCORECODE):   filename X;
NOTE: Fileref X has been deassigned.
MPRINT(BUILDSCORECODE):   filename Y;
NOTE: Fileref Y has been deassigned.
MPRINT(EM_REGISTER):   data WORK.EM_USER_KEY;
MPRINT(EM_REGISTER):   length KEY $32 TYPE $10 FILE $200 FOLDER $32 EXTENSION $8 AUTODELETE $1 property $1 action $8;
MPRINT(EM_REGISTER):   key = upcase("BINCODE");
MPRINT(EM_REGISTER):   type = upcase("FOLDER");
MPRINT(EM_REGISTER):   file = "BINCODE";
MPRINT(EM_REGISTER):   folder = "";
MPRINT(EM_REGISTER):   extension = "";
MPRINT(EM_REGISTER):   AUTODELETE = "Y";
MPRINT(EM_REGISTER):   property = "N";
MPRINT(EM_REGISTER):   action = "";
MPRINT(EM_REGISTER):   run;
 
NOTE: The data set WORK.EM_USER_KEY has 1 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDOPTSCORECODE):  ;
MPRINT(BUILDOPTSCORECODE):   filename x catalog 'sashelp.emutil.em_deldir.source';
NOTE: %INCLUDE (level 1) file X is file SASHELP.EMUTIL.EM_DELDIR.SOURCE.
95169     +%macro delDir(folder=);
95170     +   %let filrf=mydir;
95171     +   %let rc=%sysfunc(filename(filrf,&folder));
95172     +   %let did=%sysfunc(dopen(&filrf));
95173     +
95174     +   %if &did %then %do;
95175     +       %let memcount=%sysfunc(dnum(&did));
95176     +       %if &memcount > 0 %then %do;
95177     +           %do i=1 %to &memcount;
95178     +               %let name =%nrbquote(%sysfunc(dread(&did,&i)));
95179     +               data _null_;
95180     +                  fname="_temp&i";
95181     +                  rc=filename(fname,"&folder&em_dsep.&name");
95182     +                  if rc = 0 and fexist(fname) then
95183     +                     rc=fdelete(fname);
95184     +                  rc=filename(fname);
95185     +               run;
95186     +           %end;
95187     +       %end;
95188     +       %let rc=%sysfunc(dclose(&did));
95189     +   %end;
95190     +   %let rc = %sysfunc(fdelete(&filrf));
95191     +   %let rc=%sysfunc(filename(filrf));
95192     +%mend delDir;
NOTE: %INCLUDE (level 1) ending.
MPRINT(BUILDOPTSCORECODE):   filename x;
NOTE: Fileref X has been deassigned.
MPRINT(DELDIR):   data _null_;
MPRINT(DELDIR):   fname="_temp1";
MPRINT(DELDIR):   rc=filename(fname,"C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\GRP_IMP_clage.sas");
MPRINT(DELDIR):   if rc = 0 and fexist(fname) then rc=fdelete(fname);
MPRINT(DELDIR):   rc=filename(fname);
MPRINT(DELDIR):   run;
 
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(DELDIR):   data _null_;
MPRINT(DELDIR):   fname="_temp2";
MPRINT(DELDIR):   rc=filename(fname,"C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\GRP_IMP_debtinc.sas");
MPRINT(DELDIR):   if rc = 0 and fexist(fname) then rc=fdelete(fname);
MPRINT(DELDIR):   rc=filename(fname);
MPRINT(DELDIR):   run;
 
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(DELDIR):   data _null_;
MPRINT(DELDIR):   fname="_temp3";
MPRINT(DELDIR):   rc=filename(fname,"C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\GRP_IMP_ninq.sas");
MPRINT(DELDIR):   if rc = 0 and fexist(fname) then rc=fdelete(fname);
MPRINT(DELDIR):   rc=filename(fname);
MPRINT(DELDIR):   run;
 
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(DELDIR):   data _null_;
MPRINT(DELDIR):   fname="_temp4";
MPRINT(DELDIR):   rc=filename(fname,"C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\GRP_INDELINQ.sas");
MPRINT(DELDIR):   if rc = 0 and fexist(fname) then rc=fdelete(fname);
MPRINT(DELDIR):   rc=filename(fname);
MPRINT(DELDIR):   run;
 
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(DELDIR):   data _null_;
MPRINT(DELDIR):   fname="_temp5";
MPRINT(DELDIR):   rc=filename(fname,"C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\_ALL_.sas");
MPRINT(DELDIR):   if rc = 0 and fexist(fname) then rc=fdelete(fname);
MPRINT(DELDIR):   rc=filename(fname);
MPRINT(DELDIR):   run;
 
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDOPTSCORECODE):  ;
MPRINT(BUILDOPTSCORECODE):   data _null_;
MPRINT(BUILDOPTSCORECODE):   length rc $200;
MPRINT(BUILDOPTSCORECODE):   rc = dcreate('BINCODE', "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING");
MPRINT(BUILDOPTSCORECODE):   run;
 
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDOPTSCORECODE):   filename _F1 "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\GRP_IMP_CLAGE.sas" MOD;
MPRINT(BUILDOPTSCORECODE):   data _null_;
MPRINT(BUILDOPTSCORECODE):   length string $200 flag endflag 8;
MPRINT(BUILDOPTSCORECODE):   retain string flag endflag;
MPRINT(BUILDOPTSCORECODE):   set class_nosv end=eof;
MPRINT(BUILDOPTSCORECODE):   where DISPLAY_VAR ="IMP_CLAGE";
MPRINT(BUILDOPTSCORECODE):   by _variable_ _group_;
MPRINT(BUILDOPTSCORECODE):   file _F1;
MPRINT(BUILDOPTSCORECODE):   index = kindex(_variable_, "BIN_");
MPRINT(BUILDOPTSCORECODE):   if index gt 0 then do;
MPRINT(BUILDOPTSCORECODE):   if first._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   if origLabel ne "" then do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = ';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = tranwrd(origLabel,"'","''");
MPRINT(BUILDOPTSCORECODE):   string = "'Grouped: "!!strip(substr(string, 1,188))!!"';";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!strip(DISPLAY_VAR)!!'";';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   string = "if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string = "else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if first._group_ then do;
MPRINT(BUILDOPTSCORECODE):   flag = 0;
MPRINT(BUILDOPTSCORECODE):   endflag = 1;
MPRINT(BUILDOPTSCORECODE):   if ^first._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   put "else";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if LB ne . then do;
MPRINT(BUILDOPTSCORECODE):   string = "if "!!strip(LB)!!" <= "!!strip(DISPLAY_VAR);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   flag = 1;
MPRINT(BUILDOPTSCORECODE):   string = "if";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._Group_ then do;
MPRINT(BUILDOPTSCORECODE):   if UB ne . then do;
MPRINT(BUILDOPTSCORECODE):   if flag ne 1 then do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string)!!" AND "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = "if "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   if flag=1 then do;
MPRINT(BUILDOPTSCORECODE):   string = strip(DISPLAY_VAR) ;
MPRINT(BUILDOPTSCORECODE):   string = strip(string)!!'='!!strip(_split_Value_)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   endflag=0;
MPRINT(BUILDOPTSCORECODE):   string="";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   if endflag eq 1 then do;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   string = "end;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   _split_value_ = tranwrd(_split_value_,"'","''");
MPRINT(BUILDOPTSCORECODE):   if first._group_ then do;
MPRINT(BUILDOPTSCORECODE):   flag=0;
MPRINT(BUILDOPTSCORECODE):   if ^first._variable_ then put 'else';
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   if origLabel ne "" then do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = ';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = tranwrd(origLabel,"'","''");
MPRINT(BUILDOPTSCORECODE):   string = "'Grouped: "!!strip(substr(string, 1,188))!!"';";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!strip(DISPLAY_VAR)!!'";';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   if format ne '' then do;
MPRINT(BUILDOPTSCORECODE):   if first._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   string = "_UFormat = put("!!strip(DISPLAY_VAR)!!","!!strip(format)!!");";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string ="if MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string="else if NOT MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   if type = 'N' then do;
MPRINT(BUILDOPTSCORECODE):   string ="if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string="else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else if type='C' then do;
MPRINT(BUILDOPTSCORECODE):   string = "_UFormat = "||strip(DISPLAY_VAR)||";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string ="if MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string="else if NOT MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDOPTSCORECODE):   string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = "if ("!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   if flag ne 1 then do;
MPRINT(BUILDOPTSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDOPTSCORECODE):   tempstring = strip(string)!!" OR _UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   tempstring = strip(string)!!" OR "!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   length = length(tempstring);
MPRINT(BUILDOPTSCORECODE):   if length < 195 then do;
MPRINT(BUILDOPTSCORECODE):   string = tempstring;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string);
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = ") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   put 'else';
MPRINT(BUILDOPTSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDOPTSCORECODE):   string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = "if "!!strip(DISPLAY_VAR)!!" eq ("!!strip(_split_value_);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._group_ then do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string);
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = ") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   put "else do;";
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   run;
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      12:38    15:91    18:29    18:184   22:130   34:11    37:119   41:119   50:77    54:186   56:214
NOTE: The file _F1 is:
      Filename=C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\GRP_IMP_CLAGE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=04Nov2015:07:40:43,
      Create Time=04Nov2015:07:40:43
 
NOTE: 27 records were written to the file _F1.
      The minimum record length was 1.
      The maximum record length was 63.
NOTE: There were 4 observations read from the data set WORK.CLASS_NOSV.
      WHERE DISPLAY_VAR='IMP_CLAGE';
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(BUILDOPTSCORECODE):   filename _F1 "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\GRP_IMP_DEBTINC.sas" MOD;
MPRINT(BUILDOPTSCORECODE):   data _null_;
MPRINT(BUILDOPTSCORECODE):   length string $200 flag endflag 8;
MPRINT(BUILDOPTSCORECODE):   retain string flag endflag;
MPRINT(BUILDOPTSCORECODE):   set class_nosv end=eof;
MPRINT(BUILDOPTSCORECODE):   where DISPLAY_VAR ="IMP_DEBTINC";
MPRINT(BUILDOPTSCORECODE):   by _variable_ _group_;
MPRINT(BUILDOPTSCORECODE):   file _F1;
MPRINT(BUILDOPTSCORECODE):   index = kindex(_variable_, "BIN_");
MPRINT(BUILDOPTSCORECODE):   if index gt 0 then do;
MPRINT(BUILDOPTSCORECODE):   if first._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   if origLabel ne "" then do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = ';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = tranwrd(origLabel,"'","''");
MPRINT(BUILDOPTSCORECODE):   string = "'Grouped: "!!strip(substr(string, 1,188))!!"';";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!strip(DISPLAY_VAR)!!'";';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   string = "if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string = "else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if first._group_ then do;
MPRINT(BUILDOPTSCORECODE):   flag = 0;
MPRINT(BUILDOPTSCORECODE):   endflag = 1;
MPRINT(BUILDOPTSCORECODE):   if ^first._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   put "else";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if LB ne . then do;
MPRINT(BUILDOPTSCORECODE):   string = "if "!!strip(LB)!!" <= "!!strip(DISPLAY_VAR);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   flag = 1;
MPRINT(BUILDOPTSCORECODE):   string = "if";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._Group_ then do;
MPRINT(BUILDOPTSCORECODE):   if UB ne . then do;
MPRINT(BUILDOPTSCORECODE):   if flag ne 1 then do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string)!!" AND "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = "if "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   if flag=1 then do;
MPRINT(BUILDOPTSCORECODE):   string = strip(DISPLAY_VAR) ;
MPRINT(BUILDOPTSCORECODE):   string = strip(string)!!'='!!strip(_split_Value_)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   endflag=0;
MPRINT(BUILDOPTSCORECODE):   string="";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   if endflag eq 1 then do;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   string = "end;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   _split_value_ = tranwrd(_split_value_,"'","''");
MPRINT(BUILDOPTSCORECODE):   if first._group_ then do;
MPRINT(BUILDOPTSCORECODE):   flag=0;
MPRINT(BUILDOPTSCORECODE):   if ^first._variable_ then put 'else';
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   if origLabel ne "" then do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = ';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = tranwrd(origLabel,"'","''");
MPRINT(BUILDOPTSCORECODE):   string = "'Grouped: "!!strip(substr(string, 1,188))!!"';";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!strip(DISPLAY_VAR)!!'";';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   if format ne '' then do;
MPRINT(BUILDOPTSCORECODE):   if first._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   string = "_UFormat = put("!!strip(DISPLAY_VAR)!!","!!strip(format)!!");";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string ="if MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string="else if NOT MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   if type = 'N' then do;
MPRINT(BUILDOPTSCORECODE):   string ="if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string="else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else if type='C' then do;
MPRINT(BUILDOPTSCORECODE):   string = "_UFormat = "||strip(DISPLAY_VAR)||";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string ="if MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string="else if NOT MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDOPTSCORECODE):   string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = "if ("!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   if flag ne 1 then do;
MPRINT(BUILDOPTSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDOPTSCORECODE):   tempstring = strip(string)!!" OR _UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   tempstring = strip(string)!!" OR "!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   length = length(tempstring);
MPRINT(BUILDOPTSCORECODE):   if length < 195 then do;
MPRINT(BUILDOPTSCORECODE):   string = tempstring;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string);
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = ") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   put 'else';
MPRINT(BUILDOPTSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDOPTSCORECODE):   string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = "if "!!strip(DISPLAY_VAR)!!" eq ("!!strip(_split_value_);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._group_ then do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string);
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = ") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   put "else do;";
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   run;
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      67:38     70:91     73:29     73:184    77:130    89:11     92:119    96:119    105:77    109:186   111:214
NOTE: The file _F1 is:
      Filename=C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\GRP_IMP_DEBTINC.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=04Nov2015:07:40:43,
      Create Time=04Nov2015:07:40:43
 
NOTE: 27 records were written to the file _F1.
      The minimum record length was 1.
      The maximum record length was 63.
NOTE: There were 4 observations read from the data set WORK.CLASS_NOSV.
      WHERE DISPLAY_VAR='IMP_DEBTINC';
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDOPTSCORECODE):   filename _F1 "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\GRP_IMP_NINQ.sas" MOD;
MPRINT(BUILDOPTSCORECODE):   data _null_;
MPRINT(BUILDOPTSCORECODE):   length string $200 flag endflag 8;
MPRINT(BUILDOPTSCORECODE):   retain string flag endflag;
MPRINT(BUILDOPTSCORECODE):   set class_nosv end=eof;
MPRINT(BUILDOPTSCORECODE):   where DISPLAY_VAR ="IMP_NINQ";
MPRINT(BUILDOPTSCORECODE):   by _variable_ _group_;
MPRINT(BUILDOPTSCORECODE):   file _F1;
MPRINT(BUILDOPTSCORECODE):   index = kindex(_variable_, "BIN_");
MPRINT(BUILDOPTSCORECODE):   if index gt 0 then do;
MPRINT(BUILDOPTSCORECODE):   if first._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   if origLabel ne "" then do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = ';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = tranwrd(origLabel,"'","''");
MPRINT(BUILDOPTSCORECODE):   string = "'Grouped: "!!strip(substr(string, 1,188))!!"';";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!strip(DISPLAY_VAR)!!'";';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   string = "if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string = "else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if first._group_ then do;
MPRINT(BUILDOPTSCORECODE):   flag = 0;
MPRINT(BUILDOPTSCORECODE):   endflag = 1;
MPRINT(BUILDOPTSCORECODE):   if ^first._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   put "else";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if LB ne . then do;
MPRINT(BUILDOPTSCORECODE):   string = "if "!!strip(LB)!!" <= "!!strip(DISPLAY_VAR);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   flag = 1;
MPRINT(BUILDOPTSCORECODE):   string = "if";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._Group_ then do;
MPRINT(BUILDOPTSCORECODE):   if UB ne . then do;
MPRINT(BUILDOPTSCORECODE):   if flag ne 1 then do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string)!!" AND "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = "if "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   if flag=1 then do;
MPRINT(BUILDOPTSCORECODE):   string = strip(DISPLAY_VAR) ;
MPRINT(BUILDOPTSCORECODE):   string = strip(string)!!'='!!strip(_split_Value_)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   endflag=0;
MPRINT(BUILDOPTSCORECODE):   string="";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   if endflag eq 1 then do;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   string = "end;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   _split_value_ = tranwrd(_split_value_,"'","''");
MPRINT(BUILDOPTSCORECODE):   if first._group_ then do;
MPRINT(BUILDOPTSCORECODE):   flag=0;
MPRINT(BUILDOPTSCORECODE):   if ^first._variable_ then put 'else';
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   if origLabel ne "" then do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = ';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = tranwrd(origLabel,"'","''");
MPRINT(BUILDOPTSCORECODE):   string = "'Grouped: "!!strip(substr(string, 1,188))!!"';";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!strip(DISPLAY_VAR)!!'";';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   if format ne '' then do;
MPRINT(BUILDOPTSCORECODE):   if first._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   string = "_UFormat = put("!!strip(DISPLAY_VAR)!!","!!strip(format)!!");";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string ="if MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string="else if NOT MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
The SAS System
 
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   if type = 'N' then do;
MPRINT(BUILDOPTSCORECODE):   string ="if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string="else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else if type='C' then do;
MPRINT(BUILDOPTSCORECODE):   string = "_UFormat = "||strip(DISPLAY_VAR)||";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string ="if MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string="else if NOT MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDOPTSCORECODE):   string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = "if ("!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   if flag ne 1 then do;
MPRINT(BUILDOPTSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDOPTSCORECODE):   tempstring = strip(string)!!" OR _UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   tempstring = strip(string)!!" OR "!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   length = length(tempstring);
MPRINT(BUILDOPTSCORECODE):   if length < 195 then do;
MPRINT(BUILDOPTSCORECODE):   string = tempstring;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string);
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = ") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   put 'else';
MPRINT(BUILDOPTSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDOPTSCORECODE):   string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = "if "!!strip(DISPLAY_VAR)!!" eq ("!!strip(_split_value_);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._group_ then do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string);
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = ") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   put "else do;";
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   run;
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      122:38    125:91    128:29    128:184   132:130   144:11    147:119   151:119   160:77    164:186   166:214
NOTE: The file _F1 is:
      Filename=C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\GRP_IMP_NINQ.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=04Nov2015:07:40:43,
      Create Time=04Nov2015:07:40:43
 
NOTE: 27 records were written to the file _F1.
      The minimum record length was 1.
      The maximum record length was 63.
NOTE: There were 4 observations read from the data set WORK.CLASS_NOSV.
      WHERE DISPLAY_VAR='IMP_NINQ';
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDOPTSCORECODE):   filename _F1 "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\GRP_INDELINQ.sas" MOD;
MPRINT(BUILDOPTSCORECODE):   data _null_;
MPRINT(BUILDOPTSCORECODE):   length string $200 flag endflag 8;
MPRINT(BUILDOPTSCORECODE):   retain string flag endflag;
MPRINT(BUILDOPTSCORECODE):   set class_nosv end=eof;
MPRINT(BUILDOPTSCORECODE):   where DISPLAY_VAR ="INDELINQ";
MPRINT(BUILDOPTSCORECODE):   by _variable_ _group_;
MPRINT(BUILDOPTSCORECODE):   file _F1;
MPRINT(BUILDOPTSCORECODE):   index = kindex(_variable_, "BIN_");
MPRINT(BUILDOPTSCORECODE):   if index gt 0 then do;
MPRINT(BUILDOPTSCORECODE):   if first._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   if origLabel ne "" then do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = ';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = tranwrd(origLabel,"'","''");
MPRINT(BUILDOPTSCORECODE):   string = "'Grouped: "!!strip(substr(string, 1,188))!!"';";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!strip(DISPLAY_VAR)!!'";';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   string = "if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string = "else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if first._group_ then do;
MPRINT(BUILDOPTSCORECODE):   flag = 0;
MPRINT(BUILDOPTSCORECODE):   endflag = 1;
MPRINT(BUILDOPTSCORECODE):   if ^first._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   put "else";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if LB ne . then do;
MPRINT(BUILDOPTSCORECODE):   string = "if "!!strip(LB)!!" <= "!!strip(DISPLAY_VAR);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   flag = 1;
MPRINT(BUILDOPTSCORECODE):   string = "if";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._Group_ then do;
MPRINT(BUILDOPTSCORECODE):   if UB ne . then do;
MPRINT(BUILDOPTSCORECODE):   if flag ne 1 then do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string)!!" AND "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = "if "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   if flag=1 then do;
MPRINT(BUILDOPTSCORECODE):   string = strip(DISPLAY_VAR) ;
MPRINT(BUILDOPTSCORECODE):   string = strip(string)!!'='!!strip(_split_Value_)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   endflag=0;
MPRINT(BUILDOPTSCORECODE):   string="";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string)!!" then do;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   if endflag eq 1 then do;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   string = "end;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   _split_value_ = tranwrd(_split_value_,"'","''");
MPRINT(BUILDOPTSCORECODE):   if first._group_ then do;
MPRINT(BUILDOPTSCORECODE):   flag=0;
MPRINT(BUILDOPTSCORECODE):   if ^first._variable_ then put 'else';
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "*------------------------------------------------------------*;";
MPRINT(BUILDOPTSCORECODE):   if origLabel ne "" then do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = ';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = tranwrd(origLabel,"'","''");
MPRINT(BUILDOPTSCORECODE):   string = "'Grouped: "!!strip(substr(string, 1,188))!!"';";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!strip(DISPLAY_VAR)!!'";';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   put ' ';
MPRINT(BUILDOPTSCORECODE):   if format ne '' then do;
MPRINT(BUILDOPTSCORECODE):   if first._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   string = "_UFormat = put("!!strip(DISPLAY_VAR)!!","!!strip(format)!!");";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string ="if MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string="else if NOT MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   if type = 'N' then do;
MPRINT(BUILDOPTSCORECODE):   string ="if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string="else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else if type='C' then do;
MPRINT(BUILDOPTSCORECODE):   string = "_UFormat = "||strip(DISPLAY_VAR)||";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string ="if MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   string="else if NOT MISSING(_UFORMAT) then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = '%dmnormip(_UFormat);';
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDOPTSCORECODE):   string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = "if ("!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   if flag ne 1 then do;
MPRINT(BUILDOPTSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDOPTSCORECODE):   tempstring = strip(string)!!" OR _UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   tempstring = strip(string)!!" OR "!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   length = length(tempstring);
MPRINT(BUILDOPTSCORECODE):   if length < 195 then do;
MPRINT(BUILDOPTSCORECODE):   string = tempstring;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string);
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = ") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   put 'else';
MPRINT(BUILDOPTSCORECODE):   if format ne '' OR type='C' then do;
MPRINT(BUILDOPTSCORECODE):   string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   else do;
MPRINT(BUILDOPTSCORECODE):   string = "if "!!strip(DISPLAY_VAR)!!" eq ("!!strip(_split_value_);
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._group_ then do;
MPRINT(BUILDOPTSCORECODE):   string = strip(string);
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = ") then do;";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   if last._variable_ then do;
MPRINT(BUILDOPTSCORECODE):   put "else do;";
MPRINT(BUILDOPTSCORECODE):   string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
MPRINT(BUILDOPTSCORECODE):   put string;
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   put "end;";
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   end;
MPRINT(BUILDOPTSCORECODE):   run;
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      177:38    180:91    183:29    183:184   187:130   199:11    202:119   206:119   215:77    219:186   221:214
NOTE: The file _F1 is:
      Filename=C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\GRP_INDELINQ.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=04Nov2015:07:40:43,
      Create Time=04Nov2015:07:40:43
 
NOTE: 22 records were written to the file _F1.
      The minimum record length was 1.
      The maximum record length was 63.
NOTE: There were 3 observations read from the data set WORK.CLASS_NOSV.
      WHERE DISPLAY_VAR='INDELINQ';
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDOPTSCORECODE):   filename _F1 "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\_ALL_.sas";
MPRINT(BUILDOPTSCORECODE):   data _null_;
MPRINT(BUILDOPTSCORECODE):   file _F1;
MPRINT(BUILDOPTSCORECODE):   put "length _UFormat $200;";
MPRINT(BUILDOPTSCORECODE):   put "drop _UFormat;";
MPRINT(BUILDOPTSCORECODE):   put "_UFormat='';";
MPRINT(BUILDOPTSCORECODE):   run;
 
NOTE: The file _F1 is:
      Filename=C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\BINCODE\_ALL_.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=04Nov2015:07:40:43,
      Create Time=04Nov2015:07:40:43
 
NOTE: 3 records were written to the file _F1.
      The minimum record length was 12.
      The maximum record length was 21.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(BUILDOPTSCORECODE):   filename _F1;
NOTE: Fileref _F1 has been deassigned.
MPRINT(EM_REGISTER):   data WORK.EM_USER_KEY;
MPRINT(EM_REGISTER):   set WORK.EM_USER_KEY end=eof;
MPRINT(EM_REGISTER):   output;
MPRINT(EM_REGISTER):   if eof then do;
MPRINT(EM_REGISTER):   key = upcase("EMSCOREVAR");
MPRINT(EM_REGISTER):   type = upcase("DATA");
MPRINT(EM_REGISTER):   file = "BINNING_EMSCOREVAR";
MPRINT(EM_REGISTER):   folder = "";
MPRINT(EM_REGISTER):   extension = "";
MPRINT(EM_REGISTER):   AUTODELETE = "Y";
MPRINT(EM_REGISTER):   property = "N";
MPRINT(EM_REGISTER):   action = "";
MPRINT(EM_REGISTER):   output;
MPRINT(EM_REGISTER):   end;
MPRINT(EM_REGISTER):   run;
 
NOTE: There were 1 observations read from the data set WORK.EM_USER_KEY.
NOTE: The data set WORK.EM_USER_KEY has 2 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDOPTSCORECODE):  ;
MPRINT(BUILDOPTSCORECODE):   proc datasets lib=EMWS1 nolist;
MPRINT(BUILDOPTSCORECODE):   delete BINNING_EMSCOREVAR;
MPRINT(BUILDOPTSCORECODE):   run;
 
NOTE: Deleting EMWS1.BINNING_EMSCOREVAR (memtype=DATA).
MPRINT(BUILDOPTSCORECODE):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.12 seconds
      cpu time            0.10 seconds
 
 
did= 1
MPRINT(BUILDOPTSCORECODE):   data EMWS1.BINNING_EMSCOREVAR;
MPRINT(BUILDOPTSCORECODE):   length Name $32 formula $70 file $200;
MPRINT(BUILDOPTSCORECODE):   keep NAME Formula file;
MPRINT(BUILDOPTSCORECODE):   formula = '';
MPRINT(BUILDOPTSCORECODE):   name='';
MPRINT(BUILDOPTSCORECODE):   file="BINCODE\_ALL_.sas";
MPRINT(BUILDOPTSCORECODE):   output;
MPRINT(BUILDOPTSCORECODE):   name = "GRP_IMP_CLAGE";
MPRINT(BUILDOPTSCORECODE):   file="BINCODE\GRP_IMP_CLAGE.sas";
MPRINT(BUILDOPTSCORECODE):   output;
MPRINT(BUILDOPTSCORECODE):   name = "GRP_IMP_DEBTINC";
MPRINT(BUILDOPTSCORECODE):   file="BINCODE\GRP_IMP_DEBTINC.sas";
MPRINT(BUILDOPTSCORECODE):   output;
MPRINT(BUILDOPTSCORECODE):   name = "GRP_IMP_NINQ";
MPRINT(BUILDOPTSCORECODE):   file="BINCODE\GRP_IMP_NINQ.sas";
MPRINT(BUILDOPTSCORECODE):   output;
MPRINT(BUILDOPTSCORECODE):   name = "GRP_INDELINQ";
MPRINT(BUILDOPTSCORECODE):   file="BINCODE\GRP_INDELINQ.sas";
MPRINT(BUILDOPTSCORECODE):   output;
MPRINT(BUILDOPTSCORECODE):   run;
 
NOTE: The data set EMWS1.BINNING_EMSCOREVAR has 5 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(BUILDSCORECODE):  ;
MPRINT(BUILDSCORECODE):   proc datasets library=work nolist;
MPRINT(BUILDSCORECODE):   delete class class_nosv temp temp_missing tempmappings tempcmeta;
MPRINT(BUILDSCORECODE):   run;
NOTE: Deleting WORK.CLASS (memtype=DATA).
NOTE: Deleting WORK.CLASS_NOSV (memtype=DATA).
NOTE: Deleting WORK.TEMP (memtype=DATA).
NOTE: Deleting WORK.TEMP_MISSING (memtype=DATA).
NOTE: Deleting WORK.TEMPMAPPINGS (memtype=DATA).
NOTE: Deleting WORK.TEMPCMETA (memtype=DATA).
MPRINT(BUILDSCORECODE):   quit;
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
 
MPRINT(SCORE):  ;
MPRINT(SCORE):   filename deltaref "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\CDELTA_TRAIN.sas";
MPRINT(BUILDMETACODE):   data _null_;
MPRINT(BUILDMETACODE):   file
MPRINT(BUILDMETACODE):   deltaref;
MPRINT(BUILDMETACODE):   put "if name = 'IMP_DEBTINC' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_DEBTINC' then role='INPUT';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_DEBTINC' then level='ORDINAL';";
MPRINT(BUILDMETACODE):   put "if name = 'INDELINQ' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_INDELINQ' then role='INPUT';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_INDELINQ' then level='ORDINAL';";
MPRINT(BUILDMETACODE):   put "if name = 'IMP_CLAGE' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_CLAGE' then role='INPUT';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_CLAGE' then level='ORDINAL';";
MPRINT(BUILDMETACODE):   put "if name = 'IMP_NINQ' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_NINQ' then role='INPUT';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_NINQ' then level='ORDINAL';";
MPRINT(BUILDMETACODE):   put "if name = 'IMP_JOB' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_JOB' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_JOB' then level='ORDINAL';";
MPRINT(BUILDMETACODE):   put "if name = 'LOG_yoj' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_LOG_yoj' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_LOG_yoj' then level='ORDINAL';";
MPRINT(BUILDMETACODE):   put "if name = 'LOAN' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_LOAN' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_LOAN' then level='ORDINAL';";
MPRINT(BUILDMETACODE):   put "if name = 'IMP_MORTDUE' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_MORTDUE' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_MORTDUE' then level='ORDINAL';";
MPRINT(BUILDMETACODE):   put "if name = 'IMP_CLNO' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_CLNO' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_CLNO' then level='ORDINAL';";
MPRINT(BUILDMETACODE):   put "if name = 'IMP_VALUE' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_VALUE' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_VALUE' then level='ORDINAL';";
MPRINT(BUILDMETACODE):   put "if name = 'IMP_REASON' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_REASON' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_IMP_REASON' then level='ORDINAL';";
MPRINT(BUILDMETACODE):   put "if name = 'INDEROG' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_INDEROG' then role='REJECTED';";
MPRINT(BUILDMETACODE):   put "if name = 'GRP_INDEROG' then level='ORDINAL';";
MPRINT(BUILDMETACODE):   run;
 
NOTE: The file DELTAREF is:
      Filename=C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\CDELTA_TRAIN.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=04Nov2015:07:40:44,
      Create Time=03Nov2015:13:53:39
 
NOTE: 36 records were written to the file DELTAREF.
      The minimum record length was 38.
      The maximum record length was 49.
NOTE: DATA statement used (Total process time):
      real time           0.10 seconds
      cpu time            0.09 seconds
 
 
MPRINT(BUILDMETACODE):   data _null_;
MPRINT(BUILDMETACODE):   file deltaref MOD;
MPRINT(BUILDMETACODE):   run;
 
NOTE: The file DELTAREF is:
      Filename=C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\CDELTA_TRAIN.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=1677,
      Last Modified=04Nov2015:07:40:44,
      Create Time=03Nov2015:13:53:39
 
NOTE: 0 records were written to the file DELTAREF.
NOTE: DATA statement used (Total process time):
      real time           0.42 seconds
      cpu time            0.42 seconds
 
 
MPRINT(SCORE):  ;
MPRINT(SCORE):   filename deltaref;
NOTE: Fileref DELTAREF has been deassigned.
MPRINT(EM_REPORT):   data WORK.EM_USER_REPORT;
MPRINT(EM_REPORT):   retain id 0;
MPRINT(EM_REPORT):   id + 1;
MPRINT(EM_REPORT):   length VIEW 8 NAME $32 VALUE $400;
MPRINT(EM_REPORT):   NAME = "KEY";
MPRINT(EM_REPORT):   VALUE = "RESULTSTABLE";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "VIEWTYPE";
MPRINT(EM_REPORT):   VALUE = "DATA";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "AUTODISPLAY";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SPK";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "COMPARE";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LOCALIZE";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZEROWX";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZEROWY";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZECOLX";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZECOLY";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NROWS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NCOLS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISCRETEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISCRETEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LATTICEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LATTICEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LATTICETYPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ABSOLUTEVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SORTORDER";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SORTORDERY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ORIENTATION";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "METHOD";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DIRECTION";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "BYSET";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "RENDERMODE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DESCRIPTION";
MPRINT(EM_REPORT):   VALUE = "OUTPUTTABLE";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "X";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EXCLUDEVARS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Z";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YVARS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FREQVARS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "AXIS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FREQ";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "GROUP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SUBGROUP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "BLOCK";
MPRINT(EM_REPORT):   VALUE = "MODEL";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "COLOR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "COLORINDEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TIPTEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TOOLTIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "REPORTID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "IDVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SIZE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "VALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "VIEWS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "PARENT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODETEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ABOVETEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "BELOWTEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODESIZE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "STATS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "CLASSDIST";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "INTDIST";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FOLDER";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YPLOTTYPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XREF";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XREF2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YREF";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2REF";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YREF2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2REF2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "GROUPINDEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "JOIN";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XEXCLUDE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FREQEXCLUDE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YEXCLUDE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NAME";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "HEIGHT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "WIDTH";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XAXISLABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2AXISLABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YAXISLABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISPLAYXLABEL";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISPLAYYLABEL";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "CHOICETEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SEGMENTVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LOWERBAND";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "UPPERBAND";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YLINE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKKEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODEKEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODEID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODEVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODECOLOR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODESHAPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODESHAPEVAR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODELABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODETIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKFROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKTO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKCOLOR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKWIDTH";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKTIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XFROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XTO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YFROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YTO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "MATRIXVAR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "RESPONSE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SERIES";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DESCARG";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SLIDER";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "MarkerSize";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Marker";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y1";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y3";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y4";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y5";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y6";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y7";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y8";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y9";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y10";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y11";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y12";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y13";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y14";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y15";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y16";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TITLE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LEGEND";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LEGENDTITLE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SHAPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "METHOD";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NOBINMISS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.86337338148773;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   run;
 
NOTE: The data set WORK.EM_USER_REPORT has 132 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.10 seconds
      cpu time            0.11 seconds
 
 
MPRINT(SCORE):  ;
MPRINT(EM_REPORT):   data WORK.EM_USER_REPORT;
MPRINT(EM_REPORT):   set WORK.EM_USER_REPORT end=eof;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   if eof then do;
MPRINT(EM_REPORT):   id+1;
MPRINT(EM_REPORT):   NAME = "KEY";
MPRINT(EM_REPORT):   VALUE = "RESULTSTABLE";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "VIEWTYPE";
MPRINT(EM_REPORT):   VALUE = "BAR";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "AUTODISPLAY";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SPK";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "COMPARE";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LOCALIZE";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZEROWX";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZEROWY";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZECOLX";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZECOLY";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NROWS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NCOLS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISCRETEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISCRETEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LATTICEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LATTICEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LATTICETYPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ABSOLUTEVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SORTORDER";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SORTORDERY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ORIENTATION";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "METHOD";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DIRECTION";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "BYSET";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "RENDERMODE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DESCRIPTION";
MPRINT(EM_REPORT):   VALUE = "STATPLOT";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "X";
MPRINT(EM_REPORT):   VALUE = "DISPLAY_VAR";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EXCLUDEVARS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Z";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YVARS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FREQVARS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "AXIS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FREQ";
MPRINT(EM_REPORT):   VALUE = "_GINI_";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "GROUP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SUBGROUP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "BLOCK";
MPRINT(EM_REPORT):   VALUE = "MODEL";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "COLOR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "COLORINDEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TIPTEXT";
MPRINT(EM_REPORT):   VALUE = "_ROLE_";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TOOLTIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "REPORTID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "IDVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SIZE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "VALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "VIEWS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "PARENT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODETEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ABOVETEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "BELOWTEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODESIZE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "STATS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "CLASSDIST";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "INTDIST";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FOLDER";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YPLOTTYPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XREF";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XREF2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YREF";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2REF";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YREF2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2REF2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "GROUPINDEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "JOIN";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XEXCLUDE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FREQEXCLUDE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YEXCLUDE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NAME";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "HEIGHT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "WIDTH";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XAXISLABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2AXISLABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YAXISLABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISPLAYXLABEL";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISPLAYYLABEL";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "CHOICETEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SEGMENTVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LOWERBAND";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "UPPERBAND";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YLINE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKKEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODEKEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODEID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODEVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODECOLOR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODESHAPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODESHAPEVAR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODELABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODETIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKFROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKTO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKCOLOR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKWIDTH";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKTIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XFROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XTO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YFROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YTO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "MATRIXVAR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "RESPONSE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SERIES";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DESCARG";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SLIDER";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "MarkerSize";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Marker";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y1";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y3";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y4";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y5";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y6";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y7";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y8";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y9";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y10";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y11";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y12";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y13";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y14";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y15";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y16";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TITLE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LEGEND";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LEGENDTITLE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SHAPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "METHOD";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NOBINMISS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.77755151585561;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   end;
MPRINT(EM_REPORT):   run;
 
NOTE: There were 132 observations read from the data set WORK.EM_USER_REPORT.
NOTE: The data set WORK.EM_USER_REPORT has 264 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.10 seconds
      cpu time            0.10 seconds
 
 
MPRINT(SCORE):  ;
MPRINT(MAIN):  ;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * End SCORE: BINNING;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95193      *------------------------------------------------------------*;
95194      * End SCORE: BINNING;
95195      *------------------------------------------------------------*;
95196
 
95197      filename emflow "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\EMFLOWSCORE.sas";
MPRINT(EM_DIAGRAM):    filename emflow "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\EMFLOWSCORE.sas";
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * BINNING: Scoring DATA data;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95198      *------------------------------------------------------------*;
95199      * BINNING: Scoring DATA data;
95200      *------------------------------------------------------------*;
95201      data EMWS1.BINNING_TRAIN
95202      / view=EMWS1.BINNING_TRAIN
95203      ;
MPRINT(EM_DIAGRAM):   data EMWS1.BINNING_TRAIN / view=EMWS1.BINNING_TRAIN ;
95204      set EMWS1.Trans_TRAIN
95205      ;
MPRINT(EM_DIAGRAM):   set EMWS1.Trans_TRAIN ;
95206      %inc emflow;
NOTE: %INCLUDE (level 1) file EMFLOW is file C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\EMFLOWSCORE.sas.
95207     +length _UFormat $200;
MPRINT(EM_DIAGRAM):   length _UFormat $200;
95208     +drop _UFormat;
MPRINT(EM_DIAGRAM):   drop _UFormat;
95209     +_UFormat='';
MPRINT(EM_DIAGRAM):   _UFormat='';
95210     +
95211     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95212     +* Variable: IMP_CLAGE;
MPRINT(EM_DIAGRAM):   * Variable: IMP_CLAGE;
95213     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95214     +LABEL GRP_IMP_CLAGE =
95215     +'Grouped: Imputed CLAGE';
MPRINT(EM_DIAGRAM):   LABEL GRP_IMP_CLAGE = 'Grouped: Imputed CLAGE';
95216     +
95217     +if MISSING(IMP_CLAGE) then do;
MPRINT(EM_DIAGRAM):   if MISSING(IMP_CLAGE) then do;
95218     +GRP_IMP_CLAGE = 1;
MPRINT(EM_DIAGRAM):   GRP_IMP_CLAGE = 1;
95219     +end;
MPRINT(EM_DIAGRAM):   end;
95220     +else if NOT MISSING(IMP_CLAGE) then do;
MPRINT(EM_DIAGRAM):   else if NOT MISSING(IMP_CLAGE) then do;
95221     +if IMP_CLAGE < 118.57 then do;
MPRINT(EM_DIAGRAM):   if IMP_CLAGE < 118.57 then do;
95222     +GRP_IMP_CLAGE = 2;
MPRINT(EM_DIAGRAM):   GRP_IMP_CLAGE = 2;
95223     +end;
MPRINT(EM_DIAGRAM):   end;
95224     +else
95225     +if 118.57 <= IMP_CLAGE AND IMP_CLAGE < 179.57 then do;
MPRINT(EM_DIAGRAM):   else if 118.57 <= IMP_CLAGE AND IMP_CLAGE < 179.57 then do;
95226     +GRP_IMP_CLAGE = 3;
MPRINT(EM_DIAGRAM):   GRP_IMP_CLAGE = 3;
95227     +end;
MPRINT(EM_DIAGRAM):   end;
95228     +else
95229     +if 179.57 <= IMP_CLAGE AND IMP_CLAGE < 226.86 then do;
MPRINT(EM_DIAGRAM):   else if 179.57 <= IMP_CLAGE AND IMP_CLAGE < 226.86 then do;
95230     +GRP_IMP_CLAGE = 4;
MPRINT(EM_DIAGRAM):   GRP_IMP_CLAGE = 4;
95231     +end;
MPRINT(EM_DIAGRAM):   end;
95232     +else
95233     +if 226.86 <= IMP_CLAGE then do;
MPRINT(EM_DIAGRAM):   else if 226.86 <= IMP_CLAGE then do;
95234     +GRP_IMP_CLAGE = 5;
MPRINT(EM_DIAGRAM):   GRP_IMP_CLAGE = 5;
95235     +end;
MPRINT(EM_DIAGRAM):   end;
95236     +end;
MPRINT(EM_DIAGRAM):   end;
95237     +
95238     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95239     +* Variable: IMP_DEBTINC;
MPRINT(EM_DIAGRAM):   * Variable: IMP_DEBTINC;
95240     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95241     +LABEL GRP_IMP_DEBTINC =
95242     +'Grouped: Imputed DEBTINC';
MPRINT(EM_DIAGRAM):   LABEL GRP_IMP_DEBTINC = 'Grouped: Imputed DEBTINC';
95243     +
95244     +if MISSING(IMP_DEBTINC) then do;
MPRINT(EM_DIAGRAM):   if MISSING(IMP_DEBTINC) then do;
95245     +GRP_IMP_DEBTINC = 1;
MPRINT(EM_DIAGRAM):   GRP_IMP_DEBTINC = 1;
95246     +end;
MPRINT(EM_DIAGRAM):   end;
95247     +else if NOT MISSING(IMP_DEBTINC) then do;
MPRINT(EM_DIAGRAM):   else if NOT MISSING(IMP_DEBTINC) then do;
95248     +if IMP_DEBTINC < 30.4 then do;
MPRINT(EM_DIAGRAM):   if IMP_DEBTINC < 30.4 then do;
95249     +GRP_IMP_DEBTINC = 2;
MPRINT(EM_DIAGRAM):   GRP_IMP_DEBTINC = 2;
95250     +end;
MPRINT(EM_DIAGRAM):   end;
95251     +else
95252     +if 30.4 <= IMP_DEBTINC AND IMP_DEBTINC < 33.79 then do;
MPRINT(EM_DIAGRAM):   else if 30.4 <= IMP_DEBTINC AND IMP_DEBTINC < 33.79 then do;
95253     +GRP_IMP_DEBTINC = 3;
MPRINT(EM_DIAGRAM):   GRP_IMP_DEBTINC = 3;
95254     +end;
MPRINT(EM_DIAGRAM):   end;
95255     +else
95256     +if 33.79 <= IMP_DEBTINC AND IMP_DEBTINC < 38.07 then do;
MPRINT(EM_DIAGRAM):   else if 33.79 <= IMP_DEBTINC AND IMP_DEBTINC < 38.07 then do;
95257     +GRP_IMP_DEBTINC = 4;
MPRINT(EM_DIAGRAM):   GRP_IMP_DEBTINC = 4;
95258     +end;
MPRINT(EM_DIAGRAM):   end;
95259     +else
95260     +if 38.07 <= IMP_DEBTINC then do;
MPRINT(EM_DIAGRAM):   else if 38.07 <= IMP_DEBTINC then do;
95261     +GRP_IMP_DEBTINC = 5;
MPRINT(EM_DIAGRAM):   GRP_IMP_DEBTINC = 5;
95262     +end;
MPRINT(EM_DIAGRAM):   end;
95263     +end;
MPRINT(EM_DIAGRAM):   end;
95264     +
95265     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95266     +* Variable: IMP_NINQ;
MPRINT(EM_DIAGRAM):   * Variable: IMP_NINQ;
95267     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95268     +LABEL GRP_IMP_NINQ =
95269     +'Grouped: Imputed NINQ';
MPRINT(EM_DIAGRAM):   LABEL GRP_IMP_NINQ = 'Grouped: Imputed NINQ';
95270     +
95271     +if MISSING(IMP_NINQ) then do;
MPRINT(EM_DIAGRAM):   if MISSING(IMP_NINQ) then do;
95272     +GRP_IMP_NINQ = 1;
MPRINT(EM_DIAGRAM):   GRP_IMP_NINQ = 1;
95273     +end;
MPRINT(EM_DIAGRAM):   end;
95274     +else if NOT MISSING(IMP_NINQ) then do;
MPRINT(EM_DIAGRAM):   else if NOT MISSING(IMP_NINQ) then do;
95275     +if IMP_NINQ < 0 then do;
MPRINT(EM_DIAGRAM):   if IMP_NINQ < 0 then do;
95276     +GRP_IMP_NINQ = 2;
MPRINT(EM_DIAGRAM):   GRP_IMP_NINQ = 2;
95277     +end;
MPRINT(EM_DIAGRAM):   end;
95278     +else
95279     +if 0 <= IMP_NINQ AND IMP_NINQ < 1 then do;
MPRINT(EM_DIAGRAM):   else if 0 <= IMP_NINQ AND IMP_NINQ < 1 then do;
95280     +GRP_IMP_NINQ = 3;
MPRINT(EM_DIAGRAM):   GRP_IMP_NINQ = 3;
95281     +end;
MPRINT(EM_DIAGRAM):   end;
95282     +else
95283     +if 1 <= IMP_NINQ AND IMP_NINQ < 2 then do;
MPRINT(EM_DIAGRAM):   else if 1 <= IMP_NINQ AND IMP_NINQ < 2 then do;
95284     +GRP_IMP_NINQ = 4;
MPRINT(EM_DIAGRAM):   GRP_IMP_NINQ = 4;
95285     +end;
MPRINT(EM_DIAGRAM):   end;
95286     +else
95287     +if 2 <= IMP_NINQ then do;
MPRINT(EM_DIAGRAM):   else if 2 <= IMP_NINQ then do;
95288     +GRP_IMP_NINQ = 5;
MPRINT(EM_DIAGRAM):   GRP_IMP_NINQ = 5;
95289     +end;
MPRINT(EM_DIAGRAM):   end;
95290     +end;
MPRINT(EM_DIAGRAM):   end;
95291     +
95292     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95293     +* Variable: INDELINQ;
MPRINT(EM_DIAGRAM):   * Variable: INDELINQ;
95294     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95295     +LABEL GRP_INDELINQ = "Grouped: INDELINQ";
MPRINT(EM_DIAGRAM):   LABEL GRP_INDELINQ = "Grouped: INDELINQ";
95296     +
95297     +if MISSING(INDELINQ) then do;
MPRINT(EM_DIAGRAM):   if MISSING(INDELINQ) then do;
95298     +GRP_INDELINQ = 1;
MPRINT(EM_DIAGRAM):   GRP_INDELINQ = 1;
95299     +end;
MPRINT(EM_DIAGRAM):   end;
95300     +else if NOT MISSING(INDELINQ) then do;
MPRINT(EM_DIAGRAM):   else if NOT MISSING(INDELINQ) then do;
95301     +if INDELINQ < 0 then do;
MPRINT(EM_DIAGRAM):   if INDELINQ < 0 then do;
95302     +GRP_INDELINQ = 2;
MPRINT(EM_DIAGRAM):   GRP_INDELINQ = 2;
95303     +end;
MPRINT(EM_DIAGRAM):   end;
95304     +else
95305     +if 0 <= INDELINQ AND INDELINQ < 1 then do;
MPRINT(EM_DIAGRAM):   else if 0 <= INDELINQ AND INDELINQ < 1 then do;
95306     +GRP_INDELINQ = 3;
MPRINT(EM_DIAGRAM):   GRP_INDELINQ = 3;
95307     +end;
MPRINT(EM_DIAGRAM):   end;
95308     +else
95309     +if 1 <= INDELINQ then do;
MPRINT(EM_DIAGRAM):   else if 1 <= INDELINQ then do;
95310     +GRP_INDELINQ = 4;
MPRINT(EM_DIAGRAM):   GRP_INDELINQ = 4;
95311     +end;
MPRINT(EM_DIAGRAM):   end;
95312     +end;
MPRINT(EM_DIAGRAM):   end;
NOTE: %INCLUDE (level 1) ending.
MPRINT(EM_DIAGRAM):   run;
95313      run;
 
NOTE: DATA STEP view saved on file EMWS1.BINNING_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.13 seconds
      cpu time            0.14 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.17 seconds
      cpu time            0.17 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
95314      quit;
95315      filename emflow;
MPRINT(EM_DIAGRAM):   filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
95316      filename emflow "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\EMFLOWSCORE.sas";
MPRINT(EM_DIAGRAM):    filename emflow "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\EMFLOWSCORE.sas";
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * BINNING: Scoring VALIDATE data;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95317      *------------------------------------------------------------*;
95318      * BINNING: Scoring VALIDATE data;
95319      *------------------------------------------------------------*;
95320      data EMWS1.BINNING_VALIDATE
95321      / view=EMWS1.BINNING_VALIDATE
95322      ;
MPRINT(EM_DIAGRAM):   data EMWS1.BINNING_VALIDATE / view=EMWS1.BINNING_VALIDATE ;
95323      set EMWS1.Trans_VALIDATE
95324      ;
MPRINT(EM_DIAGRAM):   set EMWS1.Trans_VALIDATE ;
95325      %inc emflow;
NOTE: %INCLUDE (level 1) file EMFLOW is file C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\EMFLOWSCORE.sas.
95326     +length _UFormat $200;
MPRINT(EM_DIAGRAM):   length _UFormat $200;
95327     +drop _UFormat;
MPRINT(EM_DIAGRAM):   drop _UFormat;
95328     +_UFormat='';
MPRINT(EM_DIAGRAM):   _UFormat='';
95329     +
95330     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95331     +* Variable: IMP_CLAGE;
MPRINT(EM_DIAGRAM):   * Variable: IMP_CLAGE;
95332     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95333     +LABEL GRP_IMP_CLAGE =
95334     +'Grouped: Imputed CLAGE';
MPRINT(EM_DIAGRAM):   LABEL GRP_IMP_CLAGE = 'Grouped: Imputed CLAGE';
95335     +
95336     +if MISSING(IMP_CLAGE) then do;
MPRINT(EM_DIAGRAM):   if MISSING(IMP_CLAGE) then do;
95337     +GRP_IMP_CLAGE = 1;
MPRINT(EM_DIAGRAM):   GRP_IMP_CLAGE = 1;
95338     +end;
MPRINT(EM_DIAGRAM):   end;
95339     +else if NOT MISSING(IMP_CLAGE) then do;
MPRINT(EM_DIAGRAM):   else if NOT MISSING(IMP_CLAGE) then do;
95340     +if IMP_CLAGE < 118.57 then do;
MPRINT(EM_DIAGRAM):   if IMP_CLAGE < 118.57 then do;
95341     +GRP_IMP_CLAGE = 2;
MPRINT(EM_DIAGRAM):   GRP_IMP_CLAGE = 2;
95342     +end;
MPRINT(EM_DIAGRAM):   end;
95343     +else
95344     +if 118.57 <= IMP_CLAGE AND IMP_CLAGE < 179.57 then do;
MPRINT(EM_DIAGRAM):   else if 118.57 <= IMP_CLAGE AND IMP_CLAGE < 179.57 then do;
95345     +GRP_IMP_CLAGE = 3;
MPRINT(EM_DIAGRAM):   GRP_IMP_CLAGE = 3;
95346     +end;
MPRINT(EM_DIAGRAM):   end;
95347     +else
95348     +if 179.57 <= IMP_CLAGE AND IMP_CLAGE < 226.86 then do;
MPRINT(EM_DIAGRAM):   else if 179.57 <= IMP_CLAGE AND IMP_CLAGE < 226.86 then do;
95349     +GRP_IMP_CLAGE = 4;
MPRINT(EM_DIAGRAM):   GRP_IMP_CLAGE = 4;
95350     +end;
MPRINT(EM_DIAGRAM):   end;
95351     +else
95352     +if 226.86 <= IMP_CLAGE then do;
MPRINT(EM_DIAGRAM):   else if 226.86 <= IMP_CLAGE then do;
95353     +GRP_IMP_CLAGE = 5;
MPRINT(EM_DIAGRAM):   GRP_IMP_CLAGE = 5;
95354     +end;
MPRINT(EM_DIAGRAM):   end;
95355     +end;
MPRINT(EM_DIAGRAM):   end;
95356     +
95357     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95358     +* Variable: IMP_DEBTINC;
MPRINT(EM_DIAGRAM):   * Variable: IMP_DEBTINC;
95359     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95360     +LABEL GRP_IMP_DEBTINC =
95361     +'Grouped: Imputed DEBTINC';
MPRINT(EM_DIAGRAM):   LABEL GRP_IMP_DEBTINC = 'Grouped: Imputed DEBTINC';
95362     +
95363     +if MISSING(IMP_DEBTINC) then do;
MPRINT(EM_DIAGRAM):   if MISSING(IMP_DEBTINC) then do;
95364     +GRP_IMP_DEBTINC = 1;
MPRINT(EM_DIAGRAM):   GRP_IMP_DEBTINC = 1;
95365     +end;
MPRINT(EM_DIAGRAM):   end;
95366     +else if NOT MISSING(IMP_DEBTINC) then do;
MPRINT(EM_DIAGRAM):   else if NOT MISSING(IMP_DEBTINC) then do;
95367     +if IMP_DEBTINC < 30.4 then do;
MPRINT(EM_DIAGRAM):   if IMP_DEBTINC < 30.4 then do;
95368     +GRP_IMP_DEBTINC = 2;
MPRINT(EM_DIAGRAM):   GRP_IMP_DEBTINC = 2;
95369     +end;
MPRINT(EM_DIAGRAM):   end;
95370     +else
95371     +if 30.4 <= IMP_DEBTINC AND IMP_DEBTINC < 33.79 then do;
MPRINT(EM_DIAGRAM):   else if 30.4 <= IMP_DEBTINC AND IMP_DEBTINC < 33.79 then do;
95372     +GRP_IMP_DEBTINC = 3;
MPRINT(EM_DIAGRAM):   GRP_IMP_DEBTINC = 3;
95373     +end;
MPRINT(EM_DIAGRAM):   end;
95374     +else
95375     +if 33.79 <= IMP_DEBTINC AND IMP_DEBTINC < 38.07 then do;
MPRINT(EM_DIAGRAM):   else if 33.79 <= IMP_DEBTINC AND IMP_DEBTINC < 38.07 then do;
95376     +GRP_IMP_DEBTINC = 4;
MPRINT(EM_DIAGRAM):   GRP_IMP_DEBTINC = 4;
95377     +end;
MPRINT(EM_DIAGRAM):   end;
95378     +else
95379     +if 38.07 <= IMP_DEBTINC then do;
MPRINT(EM_DIAGRAM):   else if 38.07 <= IMP_DEBTINC then do;
95380     +GRP_IMP_DEBTINC = 5;
MPRINT(EM_DIAGRAM):   GRP_IMP_DEBTINC = 5;
95381     +end;
MPRINT(EM_DIAGRAM):   end;
95382     +end;
MPRINT(EM_DIAGRAM):   end;
95383     +
95384     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95385     +* Variable: IMP_NINQ;
MPRINT(EM_DIAGRAM):   * Variable: IMP_NINQ;
95386     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95387     +LABEL GRP_IMP_NINQ =
95388     +'Grouped: Imputed NINQ';
MPRINT(EM_DIAGRAM):   LABEL GRP_IMP_NINQ = 'Grouped: Imputed NINQ';
95389     +
95390     +if MISSING(IMP_NINQ) then do;
MPRINT(EM_DIAGRAM):   if MISSING(IMP_NINQ) then do;
95391     +GRP_IMP_NINQ = 1;
MPRINT(EM_DIAGRAM):   GRP_IMP_NINQ = 1;
95392     +end;
MPRINT(EM_DIAGRAM):   end;
95393     +else if NOT MISSING(IMP_NINQ) then do;
MPRINT(EM_DIAGRAM):   else if NOT MISSING(IMP_NINQ) then do;
95394     +if IMP_NINQ < 0 then do;
MPRINT(EM_DIAGRAM):   if IMP_NINQ < 0 then do;
95395     +GRP_IMP_NINQ = 2;
MPRINT(EM_DIAGRAM):   GRP_IMP_NINQ = 2;
95396     +end;
MPRINT(EM_DIAGRAM):   end;
95397     +else
95398     +if 0 <= IMP_NINQ AND IMP_NINQ < 1 then do;
MPRINT(EM_DIAGRAM):   else if 0 <= IMP_NINQ AND IMP_NINQ < 1 then do;
95399     +GRP_IMP_NINQ = 3;
MPRINT(EM_DIAGRAM):   GRP_IMP_NINQ = 3;
95400     +end;
MPRINT(EM_DIAGRAM):   end;
95401     +else
95402     +if 1 <= IMP_NINQ AND IMP_NINQ < 2 then do;
MPRINT(EM_DIAGRAM):   else if 1 <= IMP_NINQ AND IMP_NINQ < 2 then do;
95403     +GRP_IMP_NINQ = 4;
MPRINT(EM_DIAGRAM):   GRP_IMP_NINQ = 4;
95404     +end;
MPRINT(EM_DIAGRAM):   end;
95405     +else
95406     +if 2 <= IMP_NINQ then do;
MPRINT(EM_DIAGRAM):   else if 2 <= IMP_NINQ then do;
95407     +GRP_IMP_NINQ = 5;
MPRINT(EM_DIAGRAM):   GRP_IMP_NINQ = 5;
95408     +end;
MPRINT(EM_DIAGRAM):   end;
95409     +end;
MPRINT(EM_DIAGRAM):   end;
95410     +
95411     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95412     +* Variable: INDELINQ;
MPRINT(EM_DIAGRAM):   * Variable: INDELINQ;
95413     +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95414     +LABEL GRP_INDELINQ = "Grouped: INDELINQ";
MPRINT(EM_DIAGRAM):   LABEL GRP_INDELINQ = "Grouped: INDELINQ";
95415     +
95416     +if MISSING(INDELINQ) then do;
MPRINT(EM_DIAGRAM):   if MISSING(INDELINQ) then do;
95417     +GRP_INDELINQ = 1;
MPRINT(EM_DIAGRAM):   GRP_INDELINQ = 1;
95418     +end;
MPRINT(EM_DIAGRAM):   end;
95419     +else if NOT MISSING(INDELINQ) then do;
MPRINT(EM_DIAGRAM):   else if NOT MISSING(INDELINQ) then do;
95420     +if INDELINQ < 0 then do;
MPRINT(EM_DIAGRAM):   if INDELINQ < 0 then do;
95421     +GRP_INDELINQ = 2;
MPRINT(EM_DIAGRAM):   GRP_INDELINQ = 2;
95422     +end;
MPRINT(EM_DIAGRAM):   end;
95423     +else
95424     +if 0 <= INDELINQ AND INDELINQ < 1 then do;
MPRINT(EM_DIAGRAM):   else if 0 <= INDELINQ AND INDELINQ < 1 then do;
95425     +GRP_INDELINQ = 3;
MPRINT(EM_DIAGRAM):   GRP_INDELINQ = 3;
95426     +end;
MPRINT(EM_DIAGRAM):   end;
95427     +else
95428     +if 1 <= INDELINQ then do;
MPRINT(EM_DIAGRAM):   else if 1 <= INDELINQ then do;
95429     +GRP_INDELINQ = 4;
MPRINT(EM_DIAGRAM):   GRP_INDELINQ = 4;
95430     +end;
MPRINT(EM_DIAGRAM):   end;
95431     +end;
MPRINT(EM_DIAGRAM):   end;
NOTE: %INCLUDE (level 1) ending.
MPRINT(EM_DIAGRAM):   run;
95432      run;
 
NOTE: DATA STEP view saved on file EMWS1.BINNING_VALIDATE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.TRANS_VALIDATE.VIEW used (Total process time):
      real time           0.12 seconds
      cpu time            0.12 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.17 seconds
      cpu time            0.15 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
95433      quit;
95434      filename emflow;
MPRINT(EM_DIAGRAM):   filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
95436      proc sort data=WORK.EM_USER_REPORT;
MPRINT(EM_DIAGRAM):     proc sort data=WORK.EM_USER_REPORT;
95437      by ID VIEW;
MPRINT(EM_DIAGRAM):   by ID VIEW;
95438      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 264 observations read from the data set WORK.EM_USER_REPORT.
NOTE: The data set WORK.EM_USER_REPORT has 264 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
95439      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
95440      * BINNING: Computing metadata for TRAIN data;
MPRINT(EM_DIAGRAM):   * BINNING: Computing metadata for TRAIN data;
95441      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
 
NOTE: View EMWS1.BINNING_TRAIN.VIEW used (Total process time):
      real time           0.18 seconds
      cpu time            0.18 seconds
 
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * &nodeid: Computing Metadata for TRAIN data;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   filename _delta "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\CDELTA_TRAIN.sas";
MPRINT(EMADVISECOLUMNS):   proc display c=sashelp.emmeta.advisecolumns.scl;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    options validvarname=any;
MPRINT(EMADVISECOLUMNS):   proc contents data=EMWS1.BINNING_TRAIN out=_tempAdvisor noprint;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):   options validvarname=V7;
MPRINT(EMADVISECOLUMNS):    data _null_;
MPRINT(EMADVISECOLUMNS):   dsid = open('EMWS1.BINNING_TRAIN');
MPRINT(EMADVISECOLUMNS):   call symput('_dsidTable', strip(put(dsid, best.)));
MPRINT(EMADVISECOLUMNS):   if dsid then do;
MPRINT(EMADVISECOLUMNS):   call symput('_engineTable', attrc(dsid, 'ENGINE'));
MPRINT(EMADVISECOLUMNS):   dsid = close(dsid);
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    proc contents data=EMWS1.BINNING_TRAIN out=WORK.M2W14A63 noprint;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M2W14A63;
MPRINT(EMADVISECOLUMNS):   length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 36 INFORMAT $36 INDEX $ 1 INDEXTYPE $ 9;
MPRINT(EMADVISECOLUMNS):   label NAME =;
MPRINT(EMADVISECOLUMNS):   set WORK.M2W14A63(keep=name type length label format formatl formatd informat informl informd idxusage rename=(type=itype));
MPRINT(EMADVISECOLUMNS):   if itype = 1 then type = 'N';
MPRINT(EMADVISECOLUMNS):   else type = 'C';
MPRINT(EMADVISECOLUMNS):   if formatl > 0 then do;
MPRINT(EMADVISECOLUMNS):   if format ne ' ' then format = strip(format)!!strip(put(formatl, best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EMADVISECOLUMNS):   else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if format ne '' then format = strip(format)!!'.';
MPRINT(EMADVISECOLUMNS):   if informl > 0 then do;
MPRINT(EMADVISECOLUMNS):   if informat ne ' ' then informat = strip(informat)!!strip(put(informl, best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EMADVISECOLUMNS):   else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if informat ne '' then informat = strip(informat)!!'.';
MPRINT(EMADVISECOLUMNS):   if idxusage = 'NONE' then index ="N";
MPRINT(EMADVISECOLUMNS):   else index = "Y";
MPRINT(EMADVISECOLUMNS):   indextype = idxusage;
MPRINT(EMADVISECOLUMNS):   drop idxusage itype formatl formatd informl informd;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M2W14A63;
MPRINT(EMADVISECOLUMNS):   length UNAME $64;
MPRINT(EMADVISECOLUMNS):   set WORK.M2W14A63;
MPRINT(EMADVISECOLUMNS):   UNAME = upcase(NAME);
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    proc sort data=WORK.M0NZ0RG6 NOTHREADS;
MPRINT(EMADVISECOLUMNS):   by UNAME;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M0NZ0RG6;
MPRINT(EMADVISECOLUMNS):   drop UNAME;
MPRINT(EMADVISECOLUMNS):   set WORK.M0NZ0RG6;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M1BH1LBO(keep=NAME ATTR);
MPRINT(EMADVISECOLUMNS):   length ATTR $ 20;
MPRINT(EMADVISECOLUMNS):   set WORK.M0NZ0RG6;
MPRINT(EMADVISECOLUMNS):   if level ne "INTERVAL" then do;
MPRINT(EMADVISECOLUMNS):   if order = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'ORDER';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if format ne ' ' and formattype = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'FORMATTYPE';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if role = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'ROLE';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if level = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'LEVEL';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if type = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'TYPE';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if index = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'INDEX';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if report = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'REPORT';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):   proc sort NOTHREADS;
MPRINT(EMADVISECOLUMNS):   by attr;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M0NZ0RG6;
MPRINT(EMADVISECOLUMNS):   length NAME $64 ROLE $ 32 LEVEL $ 10 ORDER $ 8 CREATOR $32 FORMATTYPE $ 10 FAMILY $ 10 LOWERLIMIT 8 UPPERLIMIT 8 REPORT $1 DISTRIBUTION $ 20 COMMENT $64;
MPRINT(EMADVISECOLUMNS):   length levelAssigned 8 roleAssigned 8 PRICE 8;
MPRINT(EMADVISECOLUMNS):   set WORK.M0NZ0RG6;
MPRINT(EMADVISECOLUMNS):   if formattype = ' ' then do;
MPRINT(EMADVISECOLUMNS):   if format ne ' ' then do;
MPRINT(EMADVISECOLUMNS):   if type = 'N' then do;
MPRINT(EMADVISECOLUMNS):   pos = indexc(format,'.1234567890');
MPRINT(EMADVISECOLUMNS):   if pos > 1 then tempfmt = substr(format,1, pos-1);
MPRINT(EMADVISECOLUMNS):   else tempfmt = ' ';
MPRINT(EMADVISECOLUMNS):   flen = length(tempfmt);
MPRINT(EMADVISECOLUMNS):   select;
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("DATE" "DAY" "DDMMYY" "DOWNAME" "JULDAY" "JULIAN" "MMDDYY" "MMDDYYD" "MMDDYYC" "MMDDYYN" "MMDDYYP" "MMDDYYS" "MONNAME" "MONTH" "MONYY" "NENGO" "QTR" "QTRR" "WEEKDATE" "WEEKDATX" "WEEKDAY" "WORDDATE" "WORDDATX"
"YEAR" "YYMMDD" "YYMON" "YYMMDDC" "YYMMDDD" "YYMMDDN" "YYMMDDP" "YYMMDDS" "EURDFDE" "NJDATE" "NLDATE" "EURDFDD" "EURDFDWN" "EURDFMN" "EURDFMY" "EURDFWK" "EURDFWKX" "EURDFWDX" "EURDFDN" "EURDFDE" )) formattype = 'DATE';
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("DATETIME" "EURDFDT" "TOD" )) formattype = "DATETIME";
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("HHMM" "HOUR" "MMSS" "TIME" "TIMEAMPM" )) formattype = "TIME";
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("COMMA" "COMMAX" "DOLLAR" "DOLLARX" "E" "FRACT" "NEGPAREN" "PERCENT")) formattype="QUANTITY";
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("BINARY" "HEX" "IB" "OCTAL" "PD" "PIB" "PK" "RB" "SSN" "Z" "ZD")) formattype = "CODING";
MPRINT(EMADVISECOLUMNS):   otherwise do;
MPRINT(EMADVISECOLUMNS):   formattype = "USER";
MPRINT(EMADVISECOLUMNS):   if substr(tempfmt, 1, 6)='NLDATE' then formattype = "DATE";
MPRINT(EMADVISECOLUMNS):   else if substr(tempfmt, 1, 6)='NLDATM' then formattype = "DATETIME";
MPRINT(EMADVISECOLUMNS):   else if substr(tempfmt, 1, 4)='NLTIM' then formattype = "TIME";
MPRINT(EMADVISECOLUMNS):   else if flen >= 4 then do;
MPRINT(EMADVISECOLUMNS):   str = substr(tempfmt,1,4);
MPRINT(EMADVISECOLUMNS):   if str in ("MMYY" "YYMM" "YYQR") then formattype ="DATE";
MPRINT(EMADVISECOLUMNS):   else if str = "S370" then formattype = "CODING";
MPRINT(EMADVISECOLUMNS):   else if str = "BEST" then formattype = "NUM";
MPRINT(EMADVISECOLUMNS):   drop str;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if flen >=3 and substr(tempfmt,1,3) = "YYQ" then formatType = "DATE";
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   drop flen tempfmt pos;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else do;
MPRINT(EMADVISECOLUMNS):   formatType = "CATEGORY";
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if formatType = "NUM" then do;
MPRINT(EMADVISECOLUMNS):   if index = "Y" then formatType = "DISCRETE";
MPRINT(EMADVISECOLUMNS):   else formatType = "QUANTITY";
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if level = ' ' then do;
MPRINT(EMADVISECOLUMNS):   if formatType in ("CATEGORY", "CODING", "ID") or type = "C" then level = "NOMINAL";
MPRINT(EMADVISECOLUMNS):   else level = "INTERVAL";
MPRINT(EMADVISECOLUMNS):   levelAssigned = 1;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else level = upcase(level);
MPRINT(EMADVISECOLUMNS):   if role = ' ' then do;
MPRINT(EMADVISECOLUMNS):   length name_prefix $8 _uname $64;
MPRINT(EMADVISECOLUMNS):   drop name_prefix _uname _freqflag;
MPRINT(EMADVISECOLUMNS):   retain _freqflag;
MPRINT(EMADVISECOLUMNS):   if LENGTH> 80 then ROLE = 'TEXT';
MPRINT(EMADVISECOLUMNS):   _uname = upcase(NAME);
MPRINT(EMADVISECOLUMNS):   select(_uname);
MPRINT(EMADVISECOLUMNS):   when('_WARN_') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_SEGMENT') do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'SEGMENT';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   when('_NODE_') do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'SEGMENT';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   when('EM_CLASSTARGET') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_VALUETARGET') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_PREDICTION') ROLE = 'PREDICT';
MPRINT(EMADVISECOLUMNS):   when('EM_PROBABILITY') ROLE = 'PREDICT';
MPRINT(EMADVISECOLUMNS):   when('EM_EVENTPROBABILITY') ROLE = 'PREDICT';
MPRINT(EMADVISECOLUMNS):   when('EM_CLASSIFICATION') ROLE = 'CLASSIFICATION';
MPRINT(EMADVISECOLUMNS):   when('EM_DECISION') ROLE = 'DECISION';
MPRINT(EMADVISECOLUMNS):   when('EM_PROFIT') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_LOSS') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_ROI') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('URI') ROLE = 'URL';
MPRINT(EMADVISECOLUMNS):   when('FILTERED') ROLE = 'TEXTLOC';
MPRINT(EMADVISECOLUMNS):   otherwise do;
MPRINT(EMADVISECOLUMNS):   if upcase(NAME) =: 'ZIP' then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'REJECTED';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   COMMENT = 'Rejected by: Exceed the maximum class level of %s';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if upcase(NAME) in('FREQ', 'FREQUENCY') then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'FREQ';
MPRINT(EMADVISECOLUMNS):   if TYPE = 'C' then ROLE = 'INPUT';
MPRINT(EMADVISECOLUMNS):   else if _freqflag =1 then ROLE='REJECTED';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else do;
MPRINT(EMADVISECOLUMNS):   name_prefix = scan(_uname, 1, '_');
MPRINT(EMADVISECOLUMNS):   if scan(_uname, 2, '_') = '' then name_prefix='';
MPRINT(EMADVISECOLUMNS):   if name_prefix in('F', 'I', 'U') then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'CLASSIFICATION';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if name_prefix in('P', 'V') then ROLE = 'PREDICT';
MPRINT(EMADVISECOLUMNS):   else if name_prefix in('R', 'RS', 'RT', 'RD', 'RDS', 'RDT', 'RA', 'RAS', 'RAT') then ROLE = 'RESIDUAL';
MPRINT(EMADVISECOLUMNS):   else if name_prefix ='D' then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'DECISION';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if name_prefix ='B' then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'SEGMENT';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if name_prefix in('EP', 'BP', 'CP', 'EL', 'CL', 'BL', 'W', 'ROI', 'IC') then ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   else do;
MPRINT(EMADVISECOLUMNS):   array _ROLE_ (19) $32 _TEMPORARY_ ('ASSESS','CLASSIFICATION','CENSOR', 'COST', 'CROSSID', 'DECISION', 'ID','INPUT', 'LABEL', 'MISSING','PREDICT','REFERRER','REJECTED', 'RESIDUAL','SEGMENT', 'SEQUENCE','TARGET', 'TEXT', 'TIMEID');
MPRINT(EMADVISECOLUMNS):   drop _found_ i;
MPRINT(EMADVISECOLUMNS):   _found_=0;
MPRINT(EMADVISECOLUMNS):   do i=1 to 19 until(_found_=1);
MPRINT(EMADVISECOLUMNS):   if index(_uname, trim(_ROLE_{i}))=1 then do;
MPRINT(EMADVISECOLUMNS):   ROLE=_ROLE_{i};
MPRINT(EMADVISECOLUMNS):   if ROLE = 'ID' then LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   else if ROLE = 'SEGMENT' then LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   else if ROLE = 'TIMEID' and TYPE='N' then LEVEL = 'INTERVAL';
MPRINT(EMADVISECOLUMNS):   _found_=1;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if length(_uname)>2 then do;
MPRINT(EMADVISECOLUMNS):   if substr(reverse(trim(_uname)), 1, 3) = 'DI_' then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'ID';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if ROLE='FREQ' then _freqflag=1;
MPRINT(EMADVISECOLUMNS):   else if ROLE = 'CLASSIFICATION' then LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   if symexist('RATEMKG_ROLE') then do;
MPRINT(EMADVISECOLUMNS):   if upcase(symget('RATEMKG_ROLE')) in('Y', 'YES') then do;
MPRINT(EMADVISECOLUMNS):   if _uname =: 'POLICY' then ROLE = 'POLICYID';
MPRINT(EMADVISECOLUMNS):   else if _uname in ('PARTITION', '_PARTIND_') then ROLE = 'PARTITION';
MPRINT(EMADVISECOLUMNS):   else if type = 'N' then do;
MPRINT(EMADVISECOLUMNS):   if _uname = 'EXPOSURE' then ROLE = 'EXPOSURE';
MPRINT(EMADVISECOLUMNS):   else if _uname = 'YEAR' then ROLE = 'YEAR';
MPRINT(EMADVISECOLUMNS):   else if _uname = 'WEIGHT' then ROLE = 'WEIGHT';
MPRINT(EMADVISECOLUMNS):   else if _uname = 'OFFSET' then ROLE = 'OFFSET';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if role = ' ' then do;
MPRINT(EMADVISECOLUMNS):   if formattype in('DATE', 'DATETIME', 'TIME') then role = 'TIMEID';
MPRINT(EMADVISECOLUMNS):   else role = 'INPUT';
MPRINT(EMADVISECOLUMNS):   roleAssigned = 1;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else role = upcase(role);
MPRINT(EMADVISECOLUMNS):   if REPORT = '' then REPORT = 'N';
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M0NZ0RG6;
MPRINT(EMADVISECOLUMNS):   set WORK.M0NZ0RG6;
MPRINT(EMADVISECOLUMNS):   label NAME = "Variable Name" TYPE = "Type" ROLE = "Role" LEVEL= "Measurement Level" ORDER= "Order" CREATOR= "Creator" FORMATTYPE= "Format Type" FAMILY= "Family" DISTRIBUTION= "Distribution" PRICE= "Price" LOWERLIMIT= "Lower
limit" UPPERLIMIT= "Upper Limit" REPORT= "Report" COMMENT= "Comment" INDEX= "Index" INDEXTYPE= "IndexType" LABEL= "Label" LENGTH= "Length";
MPRINT(EMADVISECOLUMNS):   drop levelAssigned roleAssigned;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.COLUMNMETA;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * &nodeid: Merge incoming metadata;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   proc contents data=EMWS1.Trans_TRAIN noprint out=_temp2(keep=NAME);
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_temp2;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS1.Trans_CMeta_TRAIN out=_temp;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data EMWS1.BINNING_CMeta_TRAIN;
MPRINT(EM_DIAGRAM):   merge WORK.COLUMNMETA(in=_a) _temp2(in=_b) _temp(drop=FORMAT INFORMAT LENGTH INDEX INDEXTYPE in=_c) end=_eof_;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   if (^_a and _b) or (^_c and _a and _b) then delete;
MPRINT(EM_DIAGRAM):   if ^_b then CREATOR = "BINNING";
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * BINNING: Apply Delta Code;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   if name = 'IMP_DEBTINC' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_DEBTINC' then role='INPUT';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_DEBTINC' then level='ORDINAL';
MPRINT(EM_DIAGRAM):   if name = 'INDELINQ' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_INDELINQ' then role='INPUT';
MPRINT(EM_DIAGRAM):   if name = 'GRP_INDELINQ' then level='ORDINAL';
MPRINT(EM_DIAGRAM):   if name = 'IMP_CLAGE' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_CLAGE' then role='INPUT';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_CLAGE' then level='ORDINAL';
MPRINT(EM_DIAGRAM):   if name = 'IMP_NINQ' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_NINQ' then role='INPUT';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_NINQ' then level='ORDINAL';
MPRINT(EM_DIAGRAM):   if name = 'IMP_JOB' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_JOB' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_JOB' then level='ORDINAL';
MPRINT(EM_DIAGRAM):   if name = 'LOG_yoj' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_LOG_yoj' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_LOG_yoj' then level='ORDINAL';
MPRINT(EM_DIAGRAM):   if name = 'LOAN' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_LOAN' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_LOAN' then level='ORDINAL';
MPRINT(EM_DIAGRAM):   if name = 'IMP_MORTDUE' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_MORTDUE' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_MORTDUE' then level='ORDINAL';
MPRINT(EM_DIAGRAM):   if name = 'IMP_CLNO' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_CLNO' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_CLNO' then level='ORDINAL';
MPRINT(EM_DIAGRAM):   if name = 'IMP_VALUE' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_VALUE' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_VALUE' then level='ORDINAL';
MPRINT(EM_DIAGRAM):   if name = 'IMP_REASON' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_REASON' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_IMP_REASON' then level='ORDINAL';
MPRINT(EM_DIAGRAM):   if name = 'INDEROG' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_INDEROG' then role='REJECTED';
MPRINT(EM_DIAGRAM):   if name = 'GRP_INDEROG' then level='ORDINAL';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   filename _delta;
NOTE: View EMWS1.BINNING_TRAIN.VIEW used (Total process time):
      real time           0.18 seconds
      cpu time            0.18 seconds
 
NOTE: View EMWS1.BINNING_VALIDATE.VIEW used (Total process time):
      real time           0.17 seconds
      cpu time            0.17 seconds
 
MPRINT(EM_DIAGRAM):    proc printto;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "November 04, 2015" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "07:40:47" );
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Report Log";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
*------------------------------------------------------------*
* Report Log
Date:                November 04, 2015
Time:                07:40:47
*------------------------------------------------------------*
MPRINT(EM_DIAGRAM):    filename O31U5P74 "C:\Users\sakerb01\Desktop\SAS EM 12.3 Tutorials _ Projects\Project_3\Workspaces\EMWS1\BINNING\EMREPORT.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   proc printto print=O31U5P74 new;
MPRINT(EM_DIAGRAM):   run;
95820      %let EMEXCEPTIONSTRING=;
95821      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
95822      * REPORT: BINNING;
MPRINT(EM_DIAGRAM):   * REPORT: BINNING;
95823      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
95824      %let EM_ACTION = REPORT;
95825      %let syscc = 0;
95826      %macro main;
95827
95828        filename temp catalog 'sashelp.emmdfy.binning_macros.source';
95829        %include temp;
95830        filename temp;
95831
95832        %setProperties;
95833
95834        %if %upcase(&EM_ACTION) = CREATE %then %do;
95835          filename temp catalog 'sashelp.emmdfy.binning_create.source';
95836          %include temp;
95837          filename temp;
95838
95839          %create;
95840        %end;
95841
95842         %else
95843         %if %upcase(&EM_ACTION) = TRAIN %then %do;
95844
95845             filename temp catalog 'sashelp.emmdfy.binning_train.source';
95846             %include temp;
95847             filename temp;
95848             %train;
95849         %end;
95850
95851        %else
95852        %if %upcase(&EM_ACTION) = SCORE %then %do;
95853          filename temp catalog 'sashelp.emmdfy.binning_score.source';
95854          %include temp;
95855          filename temp;
95856
95857          %score;
95858
95859        %end;
95860
95861        %else
95862        %if %upcase(&EM_ACTION) = REPORT %then %do;
95863
95864             filename temp catalog 'sashelp.emmdfy.binning_report.source';
95865             %include temp;
95866             filename temp;
95867
95868             %report;
95869         %end;
95870
95871         %doendm:
95872      %mend main;
95873
95874      %main;
MPRINT(EM_DIAGRAM):
MPRINT(MAIN):   filename temp catalog 'sashelp.emmdfy.binning_macros.source';
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMMDFY.BINNING_MACROS.SOURCE.
95875     +
95876     +%macro SetProperties;
95877     +
95878     +     /* IGN options */
95879     +     %em_checkmacro(name=EM_PROPERTY_APPLYLEVELRULE, value=N, global=Y);
95880     +     %em_checkmacro(name=EM_PROPERTY_BINMETHOD,  value=QUANTILE, global=Y);
95881     +     %em_checkmacro(name=EM_PROPERTY_NUMBINS,    value=4, global=Y);
95882     +
95883     +     %em_checkmacro(name=EM_PROPERTY_MISSINGASLEVEL, value=Y, global=Y);
95884     +     %em_checkmacro(name=EM_PROPERTY_PRECISION,    value=2, global=Y);
95885     +     %em_checkmacro(name=EM_PROPERTY_CREATEGROUPING, value=N, global=Y);
95886     +     %em_checkmacro(name=EM_PROPERTY_CREATEMETHOD, value=OVERWRITE, global=Y);
95887     +     %em_checkmacro(name=EM_PROPERTY_IMPORTGROUPING, value=N, global=Y);
95888     +     %em_checkmacro(name=EM_PROPERTY_IMPORTDATA, value=, global=Y);
95889     +     %em_checkmacro(name=EM_PROPERTY_FREEZE, value=N, global=Y);
95890     +     %em_checkmacro(name=EM_PROPERTY_VARSELMETHOD, value=GINI, global=Y);
95891     +     %em_checkmacro(name=EM_PROPERTY_GINICUTOFF,   value=20.0, global=Y);
95892     +     %em_checkmacro(name=EM_PROPERTY_GRPMSMNT,     value=ORDINAL, global=Y);
95893     +     %em_checkmacro(name=EM_PROPERTY_MAXVAR,       value=10, global=Y);
95894     +     %em_checkmacro(name=EM_PROPERTY_CLASSGROUPRARE, value=Y, global=Y);
95895     +     %em_checkmacro(name=EM_PROPERTY_GROUPCUTOFF,    value=0.5, global=Y);
95896     +     %em_checkmacro(name=EM_PROPERTY_GROUPMISSING,   value=N, global=Y);
95897     +
95898     +     %em_checkmacro(name=EM_PROPERTY_INTTARGETMETHOD, value=CUTMEAN, global=Y);
95899     +     %em_checkmacro(name=EM_PROPERTY_USERCUTVALUE, value=0.2, global=Y);
95900     +     %em_checkmacro(name=EM_PROPERTY_RejectIntTarget, value=N, global=Y);
95901     +
95902     +
95903     +%mend SetProperties;
95904     +%macro appendfiles(fileref1, fileref2);
95905     +     data _null_;
95906     +       length c $256;
95907     +       fid1=fopen("&fileref1",'A');
95908     +       fid2=fopen("&fileref2",'I');
95909     +       cval = finfo(fid2,'lrecl');
95910     +       put cval= fid1= fid2=;
95911     +       if (fid2 > 0) then
95912     +         do while(fread(fid2)=0);
95913     +           rc = fget(fid2,c,256);
95914     +           _msg_=sysmsg();
95915     +           /* put rc= c= _msg_=; */
95916     +           rc = fput(fid1,strip(c));
95917     +           rc = fwrite(fid1);
95918     +         end;
95919     +         _msg_=sysmsg();
95920     +         put _msg_=;
95921     +       rc = fclose(fid1);
95922     +       rc = fclose(fid2);
95923     +     run;
95924     +%mend appendfiles;
95925     +
95926     +%macro buildOptScoreCode;
95927     +
95928     +    %em_register(key=BINCODE, type=FOLDER);
95929     +
95930     +    filename x catalog 'sashelp.emutil.em_deldir.source';
95931     +    %inc x;
95932     +    filename x;
95933     +    %delDir(folder=%nrbquote(&em_user_bincode));
95934     +
95935     +    data _null_; length rc $200;
95936     +       rc = dcreate('BINCODE', "&EM_NODEDIR");
95937     +    run;
95938     +
95939     +    %if ^%sysfunc(exist(class_nosv)) %then %goto doendu;
95940     +
95941     +    %let dsid = %sysfunc(open(class_nosv));
95942     +    %let nameNum    = %sysfunc(varnum(&dsid, DISPLAY_VAR));
95943     +    %let grpnameNum = %sysfunc(varnum(&dsid, _grp_variable_));
95944     +
95945     +    %let oldname=;
95946     +    %do %while(^%sysfunc(fetch(&dsid)));
95947     +        %let name    = %sysfunc(getvarc(&dsid, &nameNum));
95948     +        %let grpname = %sysfunc(getvarc(&dsid, &grpnameNum));
95949     +
95950     +        %if &name ne &oldname %then %do;
95951     +             filename _F1 "&em_user_bincode&em_dsep.&grpname..sas" MOD;
95952     +             data _null_;
95953     +                length string $200 flag endflag 8;
95954     +                retain string flag endflag;
95955     +                set class_nosv end=eof;
95956     +                where DISPLAY_VAR ="&name";
95957     +                by _variable_ _group_;
95958     +                file _F1;
95959     +                index = kindex(_variable_, "BIN_");
95960     +                if index gt 0 then do;
95961     +                   if first._variable_ then do;
95962     +                      put ' ';
95963     +                      put "&EM_CODEBAR;";
95964     +                      string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
95965     +                      put string;
95966     +                      put "&EM_CODEBAR;";
95967     +
95968     +                      if origLabel ne "" then do;
95969     +                            string = 'LABEL '!!strip(_grp_variable_)!!' = ';
95970     +                            put string;
95971     +                            string = tranwrd(origLabel,"'","''");
95972     +                            string = "'Grouped: "!!%nrbquote(strip(substr(string, 1,188)))!!"';";
95973     +                            put string;
95974     +                      end;
95975     +                      else do;
95976     +                             string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!%nrbquote(strip(DISPLAY_VAR))!!'";';
95977     +                             put string;
95978     +                      end;
95979     +
95980     +                      put ' ';
95981     +
95982     +                      string =  "if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
95983     +                      put string;
95984     +                      string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
95985     +                      put string;
95986     +                      put "end;";
95987     +                      string = "else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
95988     +                      put string;
95989     +                   end;
95990     +                   if first._group_ then do;
95991     +                      flag = 0;
95992     +                      endflag = 1;
95993     +                      if ^first._variable_ then do;
95994     +                         put "else";
95995     +                      end;
95996     +                      if LB ne . then do;
95997     +                         string = "if "!!strip(LB)!!" <= "!!strip(DISPLAY_VAR);
95998     +                      end;
95999     +                      else do;
96000     +                         flag = 1;
96001     +                         string = "if";
96002     +                      end;
96003     +                   end;
96004     +                   if last._Group_ then do;
96005     +                      if UB ne . then do;
96006     +                        if flag ne 1 then do;
96007     +                          string = strip(string)!!" AND "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
96008     +                        end;
96009     +                        else do;
96010     +                          string = "if "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
96011     +                        end;
96012     +                      end;
96013     +                      else do;
96014     +                         if flag=1 then do;
96015     +                            string = strip(DISPLAY_VAR) ;
96016     +                            string = strip(string)!!'='!!strip(_split_Value_)!!" then do;";
96017     +                            endflag=0;
96018     +                            string="";
96019     +                         end;
96020     +                         else do;
96021     +                            string = strip(string)!!" then do;";
96022     +                         end;
96023     +                      end;
96024     +                      put string;
96025     +                      string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
96026     +                      put string;
96027     +                      if endflag eq 1 then do;
96028     +                        put "end;";
96029     +                      end;
96030     +                   end;
96031     +                   if last._variable_ then do;
96032     +                     string = "end;";
96033     +                     put string;
96034     +                   end;
96035     +
96036     +                end;
96037     +                else do;
96038     +                   _split_value_ = tranwrd(_split_value_,"'","''");
96039     +                   if first._group_ then do;
96040     +                      flag=0;
96041     +                      if ^first._variable_ then
96042     +                         put 'else';
96043     +                      else do;
96044     +                         put ' ';
96045     +                         put "&EM_CODEBAR;";
96046     +                         string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
96047     +                         put string;
96048     +                         put "&EM_CODEBAR;";
96049     +
96050     +                         if origLabel ne "" then do;
96051     +                               string = 'LABEL '!!strip(_grp_variable_)!!' = ';
96052     +                               put string;
96053     +                               string = tranwrd(origLabel,"'","''");
96054     +                               string = "'Grouped: "!!%nrbquote(strip(substr(string, 1,188)))!!"';";
96055     +                               put string;
96056     +                         end;
96057     +                         else do;
96058     +                               string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!%nrbquote(strip(DISPLAY_VAR))!!'";';
96059     +                               put string;
96060     +                         end;
96061     +
96062     +                         put ' ';
96063     +
96064     +                         if format ne '' then do;
96065     +                            if first._variable_ then do;
96066     +                               string = "_UFormat = put("!!strip(DISPLAY_VAR)!!","!!strip(format)!!");";
96067     +                               put string;
96068     +                               string = '%dmnormip(_UFormat);';
96069     +                               put string;
96070     +
96071     +                               string ="if MISSING(_UFORMAT) then do;";
96072     +                               put string;
96073     +                               string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
96074     +                               put string;
96075     +                               put "end;";
96076     +
96077     +                               string="else if NOT MISSING(_UFORMAT) then do;";
96078     +                               put string;
96079     +
96080     +                            end;
96081     +                         end;
96082     +                         else do;
96083     +                            if type = 'N' then do;
96084     +                              string ="if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
96085     +                              put string;
96086     +                              string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
96087     +                              put string;
96088     +                              put "end;";
96089     +
96090     +                              string="else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
96091     +                              put string;
96092     +                            end;
96093     +                            else if type='C' then do;
96094     +                              string = "_UFormat = "||strip(DISPLAY_VAR)||";";
96095     +                              put string;
96096     +                              string = '%dmnormip(_UFormat);';
96097     +                              put string;
96098     +
96099     +                              string ="if MISSING(_UFORMAT) then do;";
96100     +                              put string;
96101     +                              string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
96102     +                              put string;
96103     +                              put "end;";
96104     +
96105     +                              string="else if NOT MISSING(_UFORMAT) then do;";
96106     +                              put string;
96107     +                              string = '%dmnormip(_UFormat);';
96108     +                              put string;
96109     +                           end;
96110     +                         end;
96111     +                      end;
96112     +                      if format ne '' OR type='C' then do;
96113     +                        string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
96114     +                      end;
96115     +                      else do;
96116     +                        string = "if ("!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
96117     +                      end;
96118     +                   end;
96119     +                   else do;
96120     +                      if flag ne 1 then do;
96121     +                       if format ne '' OR type='C' then do;
96122     +                         tempstring = strip(string)!!" OR _UFORMAT eq '"!!strip(_split_value_)!!"'";
96123     +                       end;
96124     +                       else do;
96125     +                         tempstring = strip(string)!!" OR "!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
96126     +                       end;
96127     +                         length = length(tempstring);
96128     +
96129     +                         if length < 195 then do;
96130     +                            string = tempstring;
96131     +                         end;
96132     +                         else do;
96133     +
96134     +                            string = strip(string);
96135     +                            put string;
96136     +                            string = ") then do;";
96137     +                            put string;
96138     +
96139     +                            string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
96140     +                            put string;
96141     +                            put "end;";
96142     +
96143     +                            put 'else';
96144     +                            if format ne '' OR type='C' then do;
96145     +                              string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
96146     +                            end;
96147     +                            else do;
96148     +                              string = "if "!!strip(DISPLAY_VAR)!!" eq ("!!strip(_split_value_);
96149     +                            end;
96150     +                         end;
96151     +                      end;
96152     +                   end;
96153     +
96154     +                   if last._group_ then do;
96155     +                      string = strip(string);
96156     +                      put string;
96157     +
96158     +                      string = ") then do;";
96159     +                      put string;
96160     +
96161     +                      string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
96162     +                      put string;
96163     +                      put "end;";
96164     +                   end;
96165     +
96166     +                   if last._variable_ then do;
96167     +                     put "else do;";
96168     +
96169     +                     string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
96170     +                     put string;
96171     +
96172     +                     put "end;";
96173     +                     put "end;";
96174     +                   end;
96175     +                end;
96176     +             run;
96177     +
96178     +             %let oldname = &name;
96179     +        %end;
96180     +    %end;
96181     +    %let dsid = %sysfunc(close(&dsid));
96182     +
96183     +    filename _F1 "&em_user_bincode&em_dsep._ALL_.sas";
96184     +    data _null_;
96185     +       file _F1;
96186     +       put "length _UFormat $200;";
96187     +       put "drop _UFormat;";
96188     +       put "_UFormat='';";
96189     +    run;
96190     +    filename _F1;
96191     +
96192     +   %em_register(key=EMSCOREVAR, type=DATA);
96193     +   %let scorevarDs = %scan(&em_user_emscorevar, 2, .);
96194     +   proc datasets lib=&em_lib nolist;
96195     +      delete &scorevarDs;
96196     +   run;
96197     +   quit;
96198     +
96199     +   %let filrf=mydir;
96200     +   %let rc=%sysfunc(filename(filrf,&em_user_bincode));
96201     +   %let did=%sysfunc(dopen(&filrf));
96202     +
96203     +   %if &did %then %do;  %PUT  did= &did;
96204     +       %let memcount=%sysfunc(dnum(&did));
96205     +       %if &memcount > 0 %then %do;
96206     +           data &em_user_emscorevar;
96207     +              length Name $32 formula $70 file $200;
96208     +              keep NAME Formula file;
96209     +              formula  = '';
96210     +           %if %sysfunc(fileexist(&em_user_bincode&em_dsep._ALL_.sas)) %then %do;
96211     +               name=''; file="BINCODE&em_dsep._ALL_.sas";
96212     +               output;
96213     +           %end;
96214     +           %do i=1 %to &memcount;
96215     +               %let name =%nrbquote(%sysfunc(dread(&did,&i)));
96216     +               %let newvar = %scan(&name, 1, .);
96217     +               %if "&newvar" ne "_ALL_" %then %do;
96218     +                   name = "&newvar"; file="BINCODE&em_dsep&name";
96219     +                   output;
96220     +               %end;
96221     +           %end;
96222     +
96223     +           run;
96224     +       %end;
96225     +       %let did = %sysfunc(dclose(&did));
96226     +  %end;
96227     +
96228     +   %doendu:
96229     +%mend buildOptScoreCode;
96230     +
96231     +
96232     +%macro buildScoreCode(flowCode, publishCode);
96233     +
96234     +
96235     +  filename x "&flowCode";
96236     +
96237     +  proc sort data=&EM_USER_SPLITVALS; by display_var _split_Value_; run;
96238     +  proc sort data=&EM_USER_BINMAPPINGS; by display_var bin; run;
96239     +  proc sort data=&EM_USER_coarse out=tempcoarse; by display_var _group_; run;
96240     +
96241     +  data temp;
96242     +    merge &EM_USER_SPLITVALS &EM_USER_BINMAPPINGS(rename=(BIN=_SPLIT_VALUE_ BIN_NAME=_VARIABLE_));
96243     +    by display_var _Split_value_;
96244     +     if upcase(_Split_value_) ne 'MISSING';
96245     +   run;
96246     +
96247     +   data temp_missing;
96248     +     merge &EM_USER_SPLITVALS(rename=(_GROUP_=MISSGRP)) &EM_USER_BINMAPPINGS(rename=(
96249     +          BIN=_SPLIT_VALUE_ BIN_NAME=_VARIABLE_));
96250     +     by display_var _Split_value_;
96251     +     if upcase(_Split_value_) eq 'MISSING';
96252     +     keep _variable_ display_var missgrp;
96253     +   run;
96254     +
96255     +   proc sort data=temp_missing; by display_var missgrp; run;
96256     +
96257     +   data temp_missing;
96258     +     merge temp_missing(in=_a) tempcoarse(rename=(_GROUP_=MISSGRP));
96259     +     by display_var missgrp;
96260     +     if ^_a then delete;
96261     +     keep _variable_ display_var missgrp ;
96262     +   run;
96263     +
96264     +   data temp;
96265     +     merge temp temp_missing;
96266     +     by display_var;
96267     +     if display_Var eq '' then delete;
96268     +    run;
96269     +
96270     +    /* pull in wtev values */
96271     +    proc sort data=&EM_USER_varmappings out=tempmappings; by _variable_; run;
96272     +    proc sort data=&EM_IMPORT_DATA_CMETA out=tempcmeta; by NAME; run;
96273     +    proc sort data=temp;  by display_var _group_; run;
96274     +
96275     +   data temp;
96276     +      merge temp tempcoarse(keep=display_var _group_  role) ;
96277     +      by display_var _group_;
96278     +    run;
96279     +
96280     +    data temp;
96281     +      merge temp tempmappings(rename=(_variable_ = display_var)) tempcmeta(keep=NAME FORMAT TYPE LABEL rename=(NAME=display_var LABEL=origLabel));
96282     +      by display_var;
96283     +
96284     +      if _group_ = . then delete;
96285     +      if _variable_ = '' then delete;
96286     +    run;
96287     +
96288     +    proc sort data=temp out=class;
96289     +       by _variable_ _group_ LB;
96290     +    run;
96291     +
96292     +    data _null_;
96293     +      file X;
96294     +
96295     +      put "length _UFormat $200;";
96296     +      put "drop _UFormat;";
96297     +      put "_UFormat='';";
96298     +    run;
96299     +
96300     +    data class_nosv;
96301     +      set class;
96302     +      if upcase(role)="INPUT";
96303     +    run;
96304     +
96305     +    data _null_;
96306     +       file X MOD;
96307     +       length string $200 flag endflag 8;
96308     +       retain string flag endflag;
96309     +       set class_nosv end=eof;
96310     +       by _variable_ _group_;
96311     +
96312     +       index = kindex(_variable_, "BIN_");
96313     +       if index gt 0 then do;
96314     +
96315     +         if first._variable_ then do;
96316     +            put ' ';
96317     +            put "&EM_CODEBAR;";
96318     +            string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
96319     +            put string;
96320     +            put "&EM_CODEBAR;";
96321     +
96322     +
96323     +            if origLabel ne "" then do;
96324     +              string = 'LABEL '!!strip(_grp_variable_)!!' = ';
96325     +              put string;
96326     +              string = tranwrd(origLabel,"'","''");
96327     +              string = "'Grouped: "!!%nrbquote(strip(substr(string, 1,188)))!!"';";
96328     +              put string;
96329     +            end;
96330     +            else do;
96331     +             string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!%nrbquote(strip(DISPLAY_VAR))!!'";';
96332     +             put string;
96333     +            end;
96334     +
96335     +            put ' ';
96336     +
96337     +            string =  "if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
96338     +            put string;
96339     +            string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
96340     +            put string;
96341     +            put "end;";
96342     +            string = "else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
96343     +            put string;
96344     +          end;
96345     +           if first._group_ then do;
96346     +              flag = 0;
96347     +              endflag = 1;
96348     +              if ^first._variable_ then do;
96349     +                put "else";
96350     +              end;
96351     +              if LB ne . then do;
96352     +                 string = "if "!!strip(LB)!!" <= "!!strip(DISPLAY_VAR);
96353     +              end;
96354     +              else do;
96355     +                 flag = 1;
96356     +                 string = "if";
96357     +              end;
96358     +
96359     +           end;
96360     +           if last._Group_ then do;
96361     +              if UB ne . then do;
96362     +                if flag ne 1 then do;
96363     +                  string = strip(string)!!" AND "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
96364     +                end;
96365     +                else do;
96366     +                  string = "if "!!strip(DISPLAY_VAR)!!" < "!!strip(UB)!!" then do;";
96367     +                end;
96368     +              end;
96369     +              else do;
96370     +                 if flag=1 then do;
96371     +                   string = strip(DISPLAY_VAR) ;
96372     +                   string = strip(string)!!'='!!strip(_split_Value_)!!" then do;";
96373     +                   endflag = 0;
96374     +                   string="";
96375     +                 end;
96376     +                 else do;
96377     +                   string = strip(string)!!" then do;";
96378     +                 end;
96379     +              end;
96380     +              put string;
96381     +
96382     +              string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
96383     +              put string;
96384     +              if endflag eq 1 then do;
96385     +                put "end;";
96386     +              end;
96387     +           end;
96388     +           if last._variable_ then do;
96389     +             string = "end;";
96390     +             put string;
96391     +           end;
96392     +       end;
96393     +       else do;
96394     +           _split_value_ = tranwrd(_split_value_,"'","''");
96395     +           if first._group_ then do;
96396     +              flag=0;
96397     +              if ^first._variable_ then
96398     +                 put 'else';
96399     +              else do;
96400     +                 put ' ';
96401     +                 put "&EM_CODEBAR;";
96402     +                 string= "* Variable: "!!strip(DISPLAY_VAR)!!";";
96403     +                 put string;
96404     +                 put "&EM_CODEBAR;";
96405     +
96406     +                 if origLabel ne "" then do;
96407     +                   string = 'LABEL '!!strip(_grp_variable_)!!' = ';
96408     +                   put string;
96409     +                   string = tranwrd(origLabel,"'","''");
96410     +                   string = "'Grouped: "!!%nrbquote(strip(substr(string, 1,188)))!!"';";
96411     +                   put string;
96412     +                 end;
96413     +                 else do;
96414     +                   string = 'LABEL '!!strip(_grp_variable_)!!' = "Grouped: '!!%nrbquote(strip(DISPLAY_VAR))!!'";';
96415     +                   put string;
96416     +                 end;
96417     +
96418     +                 put ' ';
96419     +
96420     +                if format ne '' then do;
96421     +                  if first._variable_ then do;
96422     +                    string = "_UFormat = put("!!strip(DISPLAY_VAR)!!","!!strip(format)!!");";
96423     +                    put string;
96424     +                    string = '%dmnormip(_UFormat);';
96425     +                    put string;
96426     +
96427     +                     string ="if MISSING(_UFORMAT) then do;";
96428     +                     put string;
96429     +                     string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
96430     +                     put string;
96431     +                     put "end;";
96432     +
96433     +                     string="else if NOT MISSING(_UFORMAT) then do;";
96434     +                     put string;
96435     +
96436     +                  end;
96437     +                end;
96438     +                else do;
96439     +                     if type = 'N' then do;
96440     +                       string ="if MISSING("!!strip(DISPLAY_VAR)!!") then do;";
96441     +                       put string;
96442     +                       string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
96443     +                       put string;
96444     +                       put "end;";
96445     +
96446     +                       string="else if NOT MISSING("!!strip(DISPLAY_VAR)!!") then do;";
96447     +                       put string;
96448     +
96449     +                     end;
96450     +                     else if type='C' then do;
96451     +                        string = "_UFormat = "||strip(DISPLAY_VAR)||";";
96452     +                        put string;
96453     +                        string = '%dmnormip(_UFormat);';
96454     +                        put string;
96455     +
96456     +                        string ="if MISSING(_UFORMAT) then do;";
96457     +                        put string;
96458     +                        string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
96459     +                        put string;
96460     +                        put "end;";
96461     +
96462     +                        string="else if NOT MISSING(_UFORMAT) then do;";
96463     +                        put string;
96464     +                        string = '%dmnormip(_UFormat);';
96465     +                        put string;
96466     +                    end;
96467     +                end;
96468     +              end;
96469     +              if format ne '' OR type='C' then do;
96470     +                string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
96471     +              end;
96472     +              else do;
96473     +                string = "if ("!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
96474     +              end;
96475     +           end;
96476     +           else do;
96477     +              if flag ne 1 then do;
96478     +                if format ne '' OR type='C' then do;
96479     +                  tempstring = strip(string)!!" OR _UFORMAT eq '"!!strip(_split_value_)!!"'";
96480     +                end;
96481     +                else do;
96482     +                  tempstring = strip(string)!!" OR "!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
96483     +                end;
96484     +                length = klength(tempstring);
96485     +
96486     +                if length < 195 then do;
96487     +                   string = tempstring;
96488     +                end;
96489     +                else do;
96490     +
96491     +                   string = strip(string);
96492     +                   put string;
96493     +                   string = ") then do;";
96494     +                   put string;
96495     +
96496     +                   string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
96497     +                   put string;
96498     +                   put "end;";
96499     +
96500     +                 /*  string = strip(string)||",'...';"; */
96501     +
96502     +                   put 'else';
96503     +                   if format ne '' OR type='C' then do;
96504     +                     string = "if (_UFORMAT eq '"!!strip(_split_value_)!!"'";
96505     +                   end;
96506     +                   else do;
96507     +                     string = "if ("!!strip(DISPLAY_VAR)!!" eq "!!strip(_split_value_);
96508     +                   end;
96509     +
96510     +
96511     +                end;
96512     +              end;
96513     +           end;
96514     +
96515     +           if last._group_ then do;
96516     +              string = strip(string);
96517     +              put string;
96518     +              string = ") then do;";
96519     +              put string;
96520     +
96521     +              string = strip(_grp_variable_)!!" = "!!strip(_GROUP_)!!";";
96522     +              put string;
96523     +              put "end;";
96524     +           end;
96525     +
96526     +           if last._variable_ then do;
96527     +             put "else do;";
96528     +
96529     +             string = strip(_grp_variable_)!!" = "!!strip(MISSGRP)!!";";
96530     +             put string;
96531     +
96532     +             put "end;";
96533     +             put "end;";
96534     +           end;
96535     +         *end;
96536     +       end;
96537     +    run;
96538     +
96539     +    /* generate PublishCode the same as flowscorecode */
96540     +    filename Y "&publishCode";
96541     +
96542     +    /* if publishCode already exists, wipe it out first */
96543     +    %if %sysfunc(fexist(Y)) eq 1 %then %do;
96544     +      %let rc = %sysfunc(fdelete(Y));
96545     +    %end;
96546     +
96547     +    %appendfiles(Y, X);
96548     +
96549     +    %if %EM_BINARY_TARGET= %then %do;
96550     +      %if %symexist(EM_NUM_INTERVAL_TARGET)=0 %then %do;
96551     +         %em_varMacro(name=EM_INTERVAL_TARGET, metadata=&EM_DATA_variableSet, where=%nrbquote(ROLE="TARGET" and LEVEL="INTERVAL" and (USE="Y" or USE="D")), nummacro=em_num_interval_Target);
96552     +      %end;
96553     +      %let ibn_inttarget=%EM_INTERVAL_TARGET;
96554     +      %let ibn_inttarget_orig = &ibn_inttarget;
96555     +
96556     +      %if %symexist(IGNBinTarget)=0 %then %do;
96557     +         %global ignbintarget ignfreqvar;
96558     +         filename temp catalog 'sashelp.emutil.em_getvarname.source';
96559     +         %include temp;
96560     +         filename temp;
96561     +         %getVarName(&EM_IMPORT_DATA, BIN_%substr(&ibn_inttarget,1,%sysfunc(min(%length(&ibn_inttarget),28))), IGNBinTarget);
96562     +
96563     +         %if &EM_PROPERTY_INTTARGETMETHOD = DUPFREQ %then %do;
96564     +            %getVarName(&EM_IMPORT_DATA, _FREQ_, ignfreqvar);
96565     +         %end;
96566     +      %end;
96567     +      %if &EM_PROPERTY_INTTARGETMETHOD = CUTMEAN %then %do;
96568     +         proc sql noprint;
96569     +            %if %EM_FREQ ne %then %do;
96570     +               select sum(&ibn_inttarget * %EM_FREQ) / sum(%EM_FREQ)
96571     +            %end;
96572     +            %else %do;
96573     +               select mean(&ibn_inttarget)
96574     +            %end;
96575     +            into :ignbincut trimmed from &EM_IMPORT_DATA;
96576     +         quit;
96577     +      %end;
96578     +
96579     +      %let dsid=%sysfunc(open(&EM_IMPORT_DATA,i));
96580     +      %if &dsid %then %do;
96581     +         %let tarlabel=%trim(%sysfunc(varlabel(&dsid,%sysfunc(varnum(&dsid,&ibn_inttarget)))));
96582     +         %let rc=%sysfunc(close(&dsid));
96583     +      %end;
96584     +      %if %length(&tarlabel)=0 %then %let tarlabel = &ibn_inttarget;
96585     +
96586     +      data _null_;
96587     +         file x mod;
96588     +         put ' ';
96589     +
96590     +         %if &EM_PROPERTY_INTTARGETMETHOD = CUTMEAN %then %do;
96591     +             put "&EM_CODEBAR;";
96592     +             %let note = Mean Cutoff Binary Transformation for Target;
96593     +             put "* &note;";
96594     +             put "&EM_CODEBAR;";
96595     +         %end;
96596     +         %else %if &EM_PROPERTY_INTTARGETMETHOD = CUTUSER %then %do;
96597     +             put "&EM_CODEBAR;";
96598     +             %let note = User-Specified Cutoff Binary Transformation for Target;
96599     +             put "* &note;";
96600     +             put "&EM_CODEBAR;";
96601     +             %let ignbincut = &EM_PROPERTY_USERCUTVALUE;
96602     +         %end;
96603     +         put "if &ibn_inttarget = . then &IGNBinTarget = .;";
96604     +         put "else do;";
96605     +         put "   if &ibn_inttarget > &ignbincut then &IGNBinTarget=1;";
96606     +         put "   else &IGNBinTarget=0;";
96607     +         put "end;";
96608     +
96609     +         put "label &IGNBinTarget = 'Binary: %nrbquote(%substr(&tarlabel,1,192))';";
96610     +      run;
96611     +
96612     +      filename deltaref "&EM_FILE_CDELTA_TRAIN";
96613     +
96614     +      %if &EM_PROPERTY_RejectIntTarget = Y %then %do;
96615     +
96616     +         data _null_;
96617     +            file deltaref;
96618     +            put "if name='&ibn_inttarget_orig' then role='REJECTED';";
96619     +            put "if name='&IGNBinTarget' then do;";
96620     +            put "   role='TARGET';";
96621     +            put "   level='BINARY';";
96622     +            put "end;";
96623     +         run;
96624     +
96625     +      %end;
96626     +      %else %do;
96627     +
96628     +         data _null_;
96629     +            file deltaref;
96630     +            put "if name='&ibn_inttarget_orig' then role='TARGET';";
96631     +            put "if name='&IGNBinTarget' then do;";
96632     +            put "   role='REJECTED';";
96633     +            put "   level='BINARY';";
96634     +            put "end;";
96635     +         run;
96636     +      %end;
96637     +
96638     +      filename deltaref;
96639     +
96640     +   %end;
96641     +
96642     +    filename X;
96643     +    filename Y;
96644     +
96645     +    %buildOptScoreCode;
96646     +
96647     +    proc datasets library=work nolist;
96648     +      delete class class_nosv temp temp_missing tempmappings tempcmeta;
96649     +    run;
96650     +    quit;
96651     +
96652     +%mend buildScoreCode;
96653     +
96654     +%macro buildMetaCode(DeltaCodeFile=);
96655     +
96656     +   /* set variable roles based on New Role column in the Results table */
96657     +   data _null_;
96658     +      file &DeltaCodeFile %if %length(%EM_BINARY_TARGET)=0 %then mod;;
96659     +      %let dsid = %sysfunc(open(&EM_USER_RESULTSTABLE));
96660     +      %if &dsid %then %do;
96661     +        %let obs = %sysfunc(fetch(&dsid));
96662     +        %let vnum = %sysfunc(VARNUM(&dsid, DISPLAY_VAR));
96663     +        %let rnum = %sysfunc(VARNUM(&dsid, _new_role_));
96664     +        %let ornum = %sysfunc(VARNUM(&dsid, _role_));
96665     +
96666     +        %do %while(&obs=0);
96667     +          %let inputname = %sysfunc(getvarc(&dsid, &vnum));
96668     +          %let role      = %upcase(%sysfunc(getvarc(&dsid, &rnum)));
96669     +          %let oldrole   = %upcase(%sysfunc(getvarc(&dsid, &ornum)));
96670     +
96671     +          /* retrieve grp and woe names from varmappings dataset */
96672     +          %let choice = _VARIABLE_ = "&inputname";
96673     +          %let cdsid = %sysfunc(open(&EM_USER_VARMAPPINGS(where=(&choice))));
96674     +          %let cobs = %sysfunc(fetchobs(&cdsid, 1));
96675     +          %let grpnum = %sysfunc(VARNUM(&cdsid, _GRP_VARIABLE_));
96676     +          %let grpname = %sysfunc(getvarc(&cdsid, &grpnum));
96677     +          %if &cdsid %then %let cdsid = %sysfunc(close(&cdsid));
96678     +
96679     +          put "if name = '&inputname' then role='REJECTED';";
96680     +          %if "&role" ne "DEFAULT" %then %do;
96681     +            put "if name = '&grpname' then role='&role';";
96682     +          %end;
96683     +          %else %do;
96684     +            put "if name = '&grpname' then role='&oldrole';";
96685     +          %end;
96686     +          put "if name = '&grpname' then level='&EM_PROPERTY_GRPMSMNT';";
96687     +
96688     +          %let obs = %sysfunc(fetch(&dsid));
96689     +        %end;
96690     +      %end;
96691     +      %if &dsid %then %let dsid = %sysfunc(close(&dsid));
96692     +   run;
96693     +
96694     +   /* drop all vars in the splitvals dataset that aren't present in the varmappings dataset */
96695     +   data _null_;
96696     +      file &DeltaCodeFile MOD;
96697     +
96698     +      %let sdsid = %sysfunc(open(&EM_USER_SPLITVALS));
96699     +      %if &sdsid %then %do;
96700     +        %let sobs = %sysfunc(fetch(&sdsid));
96701     +        %do %while(&sobs=0);
96702     +          %let varnum = %sysfunc(VARNUM(&sdsid, _VARIABLE_));
96703     +          %let checkname = %sysfunc(getvarc(&sdsid, &varnum));
96704     +          %let dispvarnum = %sysfunc(VARNUM(&sdsid, DISPLAY_VAR));
96705     +          %let displayvar = %sysfunc(getvarc(&sdsid, &dispvarnum));
96706     +
96707     +          %let checkgrp = GRP_&checkname;
96708     +          %let lenname = %length(&checkgrp);
96709     +          %if %eval(&lenname-32) > 0 %then %do;
96710     +            %let checkgrp = %substr(&checkgrp, 1, 32);
96711     +          %end;
96712     +
96713     +          %let choice = _VARIABLE_ ="&checkname";
96714     +          %let vdsid = %sysfunc(open(&EM_USER_VARMAPPINGS(where=(&choice))));
96715     +
96716     +          /* if var not found in varmappings, delete variables; */
96717     +          /* this could happen when freeze=Y and vars in the frozen dataset aren't in the incoming training data */
96718     +          %if &vdsid eq 0 %then %do;
96719     +            put 'if name="&displayvar" then delete;';
96720     +            %let dispgrp = GRP_&displayvar;
96721     +            put 'if name="&dispgrp" then delete;';
96722     +          %end;
96723     +
96724     +          %if &vdsid > 0 %then %let vdsid = %sysfunc(close(&vdsid));
96725     +          %let sobs = %sysfunc(fetch(&sdsid));
96726     +        %end;
96727     +      %end;
96728     +      %if &sdsid > 0 %then %let sdsid= %sysfunc(close(&sdsid));
96729     +   run;
96730     +
96731     +%mend buildMetaCode;
96732     +
96733     +%macro EM_GENERATE_RESULTSTABLE(coarse, resultstable, varmappings);
96734     +
96735     +   proc sort data=&coarse out=sortedcoarse nodupkey;
96736     +     by display_var;
96737     +   run;
96738     +   proc sort data=&varmappings nodupkey;
96739     +     by _variable_;
96740     +   run;
96741     +   %if %sysfunc(exist(&resultstable, data)) %then %do;
96742     +     proc sort data=&resultstable; by display_var; run;
96743     +   %end;
96744     +
96745     +   data &resultstable (Keep = display_var _gini_  _role_ _new_role_ procLevel);
96746     +     merge sortedcoarse(in=_a) &varmappings(rename=(_Variable_ = DISPLAY_VAR))
96747     +     %if %sysfunc(exist(&resultstable, data)) %then %do;
96748     +        &resultstable (keep = display_var _new_role_ )
96749     +     %end;
96750     +     ;
96751     +     by display_var;
96752     +     length _role_ _new_role_ $10;
96753     +     label display_var = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel , NOQUOTE))"
96754     +           _gini_     = "%sysfunc(sasmsg(sashelp.dmine, rpt_ginistatistic_vlabel , NOQUOTE))"
96755     +           _role_     = "%sysfunc(sasmsg(sashelp.dmine, rpt_calcrole_vlabel, NOQUOTE))"
96756     +           _new_role_ = "%sysfunc(sasmsg(sashelp.dmine, meta_NEWROLE_vlabel, NOQUOTE))"
96757     +           LEVEL      = "%sysfunc(sasmsg(sashelp.dmine, rpt_level_vlabel , NOQUOTE))"
96758     +           ;
96759     +
96760     +           %if &EM_PROPERTY_VARSELMETHOD eq GINI %then %do;
96761     +             if _gini_ < &EM_PROPERTY_GINICUTOFF then
96762     +                _role_ = "Rejected";
96763     +             else _role_ = "Input";
96764     +           %end;
96765     +           %else %do;
96766     +             _role_ = "Input";
96767     +           %end;
96768     +           if _new_role_ eq "" then _new_role_="Default";
96769     +      if ^_a then do;
96770     +        _gini_ = 0;
96771     +        _role_ = 'Rejected';
96772     +        if _new_role_ eq "" then _new_role_="Default";
96773     +      end;
96774     +   run;
96775     +   proc sort data=&EM_DATA_VARIABLESET out=outlabel(keep=NAME LABEL LEVEL rename=(NAME=display_var LABEL=_label_));
96776     +     by NAME;
96777     +   run;
96778     +   data outlabel;
96779     +     set outlabel;
96780     +     if _label_ = '' then _label_ = _variable_;
96781     +   run;
96782     +   data &resultstable;
96783     +     merge &resultstable(in=_a_) outlabel;
96784     +     by display_Var;
96785     +     if _a_ then output;
96786     +   run;
96787     +   proc datasets library=work nolist;
96788     +     delete sortedcoarse outlabel;
96789     +   run;
96790     +   quit;
96791     +   proc sort data=&resultstable nodupkey;
96792     +      by DESCENDING
96793     +        _gini_ display_Var;
96794     +   run;
96795     +   data &resultstable;
96796     +     set &resultstable;
96797     +
96798     +     label giniOrder = "%sysfunc(sasmsg(sashelp.dmine, rpt_giniorder_vlabel , NOQUOTE))"
96799     +           LEVEL      = "%sysfunc(sasmsg(sashelp.dmine, rpt_level_vlabel , NOQUOTE))";
96800     +     giniOrder = _N_;
96801     +     _gini_ = round(_GINI_, .001);
96802     +     drop _variable_;
96803     +   run;
96804     +
96805     +   proc print data=&resultstable label;
96806     +   run;
96807     +
96808     +   /* merge role, infovalOrder or giniOrder back into Coarse table as well */
96809     +   data &coarse;
96810     +     set &coarse;
96811     +     length role $10;
96812     +     %let dsid = %sysfunc(open(&resultstable));
96813     +     %if &dsid %then %do;
96814     +       %let disnum = %sysfunc(VARNUM(&dsid, DISPLAY_VAR));
96815     +       %let rolenum = %sysfunc(VARNUM(&dsid, _ROLE_));
96816     +       %let orderNum = %sysfunc(VARNUM(&dsid, giniOrder));
96817     +
96818     +       %let obs = %sysfunc(fetch(&dsid));
96819     +       %do %while(&obs=0);
96820     +          %let displayvar = %sysfunc(getvarc(&dsid, &disnum));
96821     +          %let role       = %sysfunc(getvarc(&dsid, &rolenum));
96822     +          %let order = %sysfunc(getvarn(&dsid, &ordernum));
96823     +
96824     +                                                                                               if DISPLAY_VAR = "&displayVar" then do;
96825     +            label giniOrder = "%sysfunc(sasmsg(sashelp.dmine, rpt_giniorder_vlabel , NOQUOTE))";
96826     +            giniOrder = &order;
96827     +            role = "&role";
96828     +          end;
96829     +
96830     +          %let obs = %sysfunc(fetch(&dsid));
96831     +       %end;
96832     +     %end;
96833     +     %if &dsid %then %let dsid = %sysfunc(close(&dsid));
96834     +   run;
96835     +
96836     +
96837     +%mend EM_GENERATE_RESULTSTABLE;
96838     +
96839     +%macro EM_GENERATE_EXPORTGROUP(exportGrouping, createMethod);
96840     +
96841     +    /* instantiate the zchar macro to be used in adding bin definition */
96842     +    filename _temp catalog 'sashelp.emmacs.zchar.source';
96843     +    %inc _temp;
96844     +    filename _temp;
96845     +
96846     +    proc sort data=&EM_USER_FINEDETAILDATA out=sortedfine;
96847     +      by _variable_ binFlag _group_ LB;
96848     +    run;
96849     +
96850     +    data tempExport;
96851     +      set sortedFine;
96852     +      by _variable_ binFlag _group_;
96853     +      length _split_value_ $200;
96854     +
96855     +      /* for all binned variables, need to modify the split value to original cutoff as well as change level to interval */
96856     +      if binFlag = 0 then do;
96857     +        index = kindex(_variable_, "BIN_");
96858     +        if index gt 0 then do;
96859     +          _LEVEL_ = "INTERVAL";
96860     +        end;
96861     +        _Split_value_ = _split_value_;
96862     +        output;
96863     +      end;
96864     +      else do;
96865     +         * if last._group_ then do;
96866     +          index = kindex(_variable_, "BIN_");
96867     +          if index gt 0 then do;
96868     +            _LEVEL_ = "INTERVAL";
96869     +          end;
96870     +          _Split_value_ = %zchar(UB);
96871     +          output;
96872     +         * end;
96873     +      end;
96874     +
96875     +      rename display_Var = _variable_;
96876     +      keep display_var _level_ _group_ _split_value_ binFlag;
96877     +    run;
96878     +
96879     +    %if &CREATEMETHOD eq OVERWRITE %then %do;
96880     +       data &EXPORTGROUPING;
96881     +         set tempexport;
96882     +       run;
96883     +    %end;
96884     +    %else %do;
96885     +       /* determine if EXPORTGROUPING already exists */
96886     +       %if %sysfunc(exist(&EXPORTGROUPING, DATA)) %then %do;
96887     +         data &EXPORTGROUPING;
96888     +            set &EXPORTGROUPING tempexport;
96889     +         run;
96890     +       %end;
96891     +       %else %do;
96892     +         data &EXPORTGROUPING;
96893     +            set tempexport;
96894     +         run;
96895     +       %end;
96896     +    %end;
96897     +
96898     +    proc datasets lib=work nolist;
96899     +      delete sortedFine tempexport;
96900     +    run;
96901     +    quit;
96902     +
96903     +%mend EM_GENERATE_EXPORTGROUP;
96904     +
96905     +
96906     +
NOTE: %INCLUDE (level 1) ending.
MPRINT(MAIN):   filename temp;
NOTE: Fileref TEMP has been deassigned.
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(SETPROPERTIES):  ;
MPRINT(MAIN):  ;
MPRINT(MAIN):   filename temp catalog 'sashelp.emmdfy.binning_report.source';
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMMDFY.BINNING_REPORT.SOURCE.
96907     +
96908     +%macro report;
96909     +
96910     +   /* if createGrouping then create a dataset for export */
96911     +   %EM_GETNAME(key=EXPORTGROUP, type=DATA);
96912     +   %EM_GETNAME(key=FINEDETAILDATA, type=DATA);
96913     +   %if &EM_PROPERTY_CREATEGROUPING eq Y %then %do;
96914     +     %EM_GENERATE_EXPORTGROUP(&EM_USER_EXPORTGROUP, &EM_PROPERTY_CREATEMETHOD);
96915     +   %end;
96916     +   %else %do;
96917     +     proc datasets library=&EM_LIB nolist;
96918     +       delete &EM_NODEID._EXPORTGROUP;
96919     +     run;
96920     +     quit;
96921     +   %end;
96922     +
96923     +
96924     +   /* set where clause dependent on EM_PROPERTY_MAXVAR value */
96925     +   %if &EM_PROPERTY_VARSELMETHOD eq GINI %then %do;
96926     +     %let whereclause = ((_GINI_ >= &EM_PROPERTY_GINICUTOFF) & (GINIORDER <= &EM_PROPERTY_MAXVAR));
96927     +   %end;
96928     +   %else %do;
96929     +     %let whereclause = GINIORDER <= &EM_PROPERTY_MAXVAR;
96930     +   %end;
96931     +
96932     +   %EM_REPORT(KEY=COARSE, VIEWTYPE=LATTICE, LATTICETYPE=BAR, X=_GROUP_, Y=EVENTRATE,
96933     +              BLOCK=MODEL, TIPTEXT=_LABEL_, LATTICEX=DISPLAY_VAR, DESCRIPTION=EVENTRATE, autodisplay=Y, where=%nrbquote(&whereclause));
96934     +
96935     +
96936     +%mend report;
NOTE: %INCLUDE (level 1) ending.
MPRINT(MAIN):   filename temp;
NOTE: Fileref TEMP has been deassigned.
MPRINT(REPORT):  ;
MPRINT(REPORT):  ;
MPRINT(REPORT):   proc datasets library=EMWS1 nolist;
MPRINT(REPORT):   delete BINNING_EXPORTGROUP;
MPRINT(REPORT):   run;
 
NOTE: The file EMWS1.BINNING_EXPORTGROUP (memtype=DATA) was not found, but appears on a DELETE statement.
MPRINT(REPORT):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.10 seconds
      cpu time            0.11 seconds
 
 
MPRINT(EM_REPORT):   data WORK.EM_USER_REPORT;
MPRINT(EM_REPORT):   retain id 0;
MPRINT(EM_REPORT):   id + 1;
MPRINT(EM_REPORT):   length VIEW 8 NAME $32 VALUE $400;
MPRINT(EM_REPORT):   NAME = "KEY";
MPRINT(EM_REPORT):   VALUE = "COARSE";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "VIEWTYPE";
MPRINT(EM_REPORT):   VALUE = "LATTICE";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "AUTODISPLAY";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SPK";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "COMPARE";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LOCALIZE";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZEROWX";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZEROWY";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZECOLX";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EQUALIZECOLY";
MPRINT(EM_REPORT):   VALUE = "N";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NROWS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NCOLS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISCRETEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISCRETEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LATTICEX";
MPRINT(EM_REPORT):   VALUE = "DISPLAY_VAR";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LATTICEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LATTICETYPE";
MPRINT(EM_REPORT):   VALUE = "BAR";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ABSOLUTEVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SORTORDER";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SORTORDERY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ORIENTATION";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "METHOD";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DIRECTION";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "BYSET";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "RENDERMODE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "WHERECLAUSE";
MPRINT(EM_REPORT):   VALUE = "((_GINI_ >= 20) & (GINIORDER <= 10))";
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DESCRIPTION";
MPRINT(EM_REPORT):   VALUE = "EVENTRATE";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "X";
MPRINT(EM_REPORT):   VALUE = "_GROUP_";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "EXCLUDEVARS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y";
MPRINT(EM_REPORT):   VALUE = "EVENTRATE";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Z";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YVARS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FREQVARS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "AXIS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FREQ";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "GROUP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SUBGROUP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "BLOCK";
MPRINT(EM_REPORT):   VALUE = "MODEL";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "COLOR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "COLORINDEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TIPTEXT";
MPRINT(EM_REPORT):   VALUE = "_LABEL_";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TOOLTIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "REPORTID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "IDVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SIZE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "VALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "VIEWS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "PARENT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODETEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "ABOVETEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "BELOWTEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODESIZE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "STATS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "CLASSDIST";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "INTDIST";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FOLDER";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YPLOTTYPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XREF";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XREF2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YREF";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2REF";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YREF2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2REF2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "GROUPINDEX";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "JOIN";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XEXCLUDE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "FREQEXCLUDE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YEXCLUDE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NAME";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "HEIGHT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "WIDTH";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XAXISLABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2AXISLABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YAXISLABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISPLAYXLABEL";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DISPLAYYLABEL";
MPRINT(EM_REPORT):   VALUE = "Y";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "CHOICETEXT";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SEGMENTVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LOWERBAND";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "UPPERBAND";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YLINE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKKEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODEKEY";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODEID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODEVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODECOLOR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODESHAPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODESHAPEVAR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODELABEL";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NODETIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKID";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKVALUE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKFROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKTO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKCOLOR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKWIDTH";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LINKTIP";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XFROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "XTO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YFROM";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "YTO";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "MATRIXVAR";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "RESPONSE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SERIES";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "DESCARG";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SLIDER";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "MarkerSize";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Marker";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y1";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y2";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y3";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y4";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y5";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y6";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y7";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y8";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y9";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y10";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y11";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y12";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y13";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y14";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y15";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "Y16";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "TITLE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LEGEND";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "LEGENDTITLE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "SHAPE";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "METHOD";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   NAME = "NOBINMISS";
MPRINT(EM_REPORT):   VALUE = "";
MPRINT(EM_REPORT):   VIEW = 0.39375722193799;
MPRINT(EM_REPORT):   output;
MPRINT(EM_REPORT):   run;
 
NOTE: The data set WORK.EM_USER_REPORT has 134 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.10 seconds
      cpu time            0.10 seconds
 
 
MPRINT(REPORT):  ;
MPRINT(MAIN):  ;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * End REPORT: BINNING;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
96937      *------------------------------------------------------------*;
96938      * End REPORT: BINNING;
96939      *------------------------------------------------------------*;
96940
 
96941      /* Reset EM Options */
96942      options formchar="|----|+|---+=|-/\<>*";
MPRINT(EM_DIAGRAM):    options formchar="|----|+|---+=|-/\<>*";
96943      options nocenter ls=256 ps=10000;
MPRINT(EM_DIAGRAM):   options nocenter ls=256 ps=10000;
96944      goptions reset=all device=GIF NODISPLAY;
MPRINT(EM_DIAGRAM):   goptions reset=all device=GIF NODISPLAY;
96945      proc sort data=WORK.EM_USER_REPORT;
MPRINT(EM_DIAGRAM):    proc sort data=WORK.EM_USER_REPORT;
96946      by ID VIEW;
MPRINT(EM_DIAGRAM):   by ID VIEW;
96947      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 134 observations read from the data set WORK.EM_USER_REPORT.
NOTE: The data set WORK.EM_USER_REPORT has 134 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):    proc printto;
MPRINT(EM_DIAGRAM):   run;
